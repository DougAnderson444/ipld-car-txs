var Vn=Object.create;var vt=Object.defineProperty;var jn=Object.getOwnPropertyDescriptor;var qn=Object.getOwnPropertyNames;var Gn=Object.getPrototypeOf,Hn=Object.prototype.hasOwnProperty;var Wn=(t,e)=>()=>(t&&(e=t(t=0)),e);var ce=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Xn=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of qn(e))!Hn.call(t,i)&&i!==r&&vt(t,i,{get:()=>e[i],enumerable:!(n=jn(e,i))||n.enumerable});return t};var Yn=(t,e,r)=>(r=t!=null?Vn(Gn(t)):{},Xn(e||!t||!t.__esModule?vt(r,"default",{value:t,enumerable:!0}):r,t));var Ot=ce(je=>{"use strict";d();je.byteLength=Kn;je.toByteArray=Zn;je.fromByteArray=ri;var W=[],L=[],Jn=typeof Uint8Array<"u"?Uint8Array:Array,it="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(de=0,Lt=it.length;de<Lt;++de)W[de]=it[de],L[it.charCodeAt(de)]=de;var de,Lt;L["-".charCodeAt(0)]=62;L["_".charCodeAt(0)]=63;function Dt(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Kn(t){var e=Dt(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Qn(t,e,r){return(e+r)*3/4-r}function Zn(t){var e,r=Dt(t),n=r[0],i=r[1],o=new Jn(Qn(t,n,i)),s=0,a=i>0?n-4:n,l;for(l=0;l<a;l+=4)e=L[t.charCodeAt(l)]<<18|L[t.charCodeAt(l+1)]<<12|L[t.charCodeAt(l+2)]<<6|L[t.charCodeAt(l+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=L[t.charCodeAt(l)]<<2|L[t.charCodeAt(l+1)]>>4,o[s++]=e&255),i===1&&(e=L[t.charCodeAt(l)]<<10|L[t.charCodeAt(l+1)]<<4|L[t.charCodeAt(l+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function ei(t){return W[t>>18&63]+W[t>>12&63]+W[t>>6&63]+W[t&63]}function ti(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(ei(n));return i.join("")}function ri(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,a=r-n;s<a;s+=o)i.push(ti(t,s,s+o>a?a:s+o));return n===1?(e=t[r-1],i.push(W[e>>2]+W[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(W[e>>10]+W[e>>4&63]+W[e<<2&63]+"=")),i.join("")}});var zt=ce(ot=>{d();ot.read=function(t,e,r,n,i){var o,s,a=i*8-n-1,l=(1<<a)-1,y=l>>1,p=-7,w=r?i-1:0,z=r?-1:1,$=t[e+w];for(w+=z,o=$&(1<<-p)-1,$>>=-p,p+=a;p>0;o=o*256+t[e+w],w+=z,p-=8);for(s=o&(1<<-p)-1,o>>=-p,p+=n;p>0;s=s*256+t[e+w],w+=z,p-=8);if(o===0)o=1-y;else{if(o===l)return s?NaN:($?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-y}return($?-1:1)*s*Math.pow(2,o-n)};ot.write=function(t,e,r,n,i,o){var s,a,l,y=o*8-i-1,p=(1<<y)-1,w=p>>1,z=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,$=n?0:o-1,A=n?1:-1,k=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=p):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+w>=1?e+=z/l:e+=z*Math.pow(2,1-w),e*l>=2&&(s++,l/=2),s+w>=p?(a=0,s=p):s+w>=1?(a=(e*l-1)*Math.pow(2,i),s=s+w):(a=e*Math.pow(2,w-1)*Math.pow(2,i),s=0));i>=8;t[r+$]=a&255,$+=A,a/=256,i-=8);for(s=s<<i|a,y+=i;y>0;t[r+$]=s&255,$+=A,s/=256,y-=8);t[r+$-A]|=k*128}});var nr=ce(xe=>{"use strict";d();var st=Ot(),ge=zt(),Pt=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;xe.Buffer=u;xe.SlowBuffer=ui;xe.INSPECT_MAX_BYTES=50;var qe=2147483647;xe.kMaxLength=qe;u.TYPED_ARRAY_SUPPORT=ni();!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function ni(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.buffer}});Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.byteOffset}});function te(t){if(t>qe)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ft(t)}return Gt(t,e,r)}u.poolSize=8192;function Gt(t,e,r){if(typeof t=="string")return oi(t,e);if(ArrayBuffer.isView(t))return si(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(X(t,ArrayBuffer)||t&&X(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(X(t,SharedArrayBuffer)||t&&X(t.buffer,SharedArrayBuffer)))return ut(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return u.from(n,e,r);let i=ci(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return u.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}u.from=function(t,e,r){return Gt(t,e,r)};Object.setPrototypeOf(u.prototype,Uint8Array.prototype);Object.setPrototypeOf(u,Uint8Array);function Ht(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function ii(t,e,r){return Ht(t),t<=0?te(t):e!==void 0?typeof r=="string"?te(t).fill(e,r):te(t).fill(e):te(t)}u.alloc=function(t,e,r){return ii(t,e,r)};function ft(t){return Ht(t),te(t<0?0:ht(t)|0)}u.allocUnsafe=function(t){return ft(t)};u.allocUnsafeSlow=function(t){return ft(t)};function oi(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=Wt(t,e)|0,n=te(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function ct(t){let e=t.length<0?0:ht(t.length)|0,r=te(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function si(t){if(X(t,Uint8Array)){let e=new Uint8Array(t);return ut(e.buffer,e.byteOffset,e.byteLength)}return ct(t)}function ut(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,u.prototype),n}function ci(t){if(u.isBuffer(t)){let e=ht(t.length)|0,r=te(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||lt(t.length)?te(0):ct(t);if(t.type==="Buffer"&&Array.isArray(t.data))return ct(t.data)}function ht(t){if(t>=qe)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+qe.toString(16)+" bytes");return t|0}function ui(t){return+t!=t&&(t=0),u.alloc(+t)}u.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==u.prototype};u.compare=function(e,r){if(X(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),X(r,Uint8Array)&&(r=u.from(r,r.offset,r.byteLength)),!u.isBuffer(e)||!u.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==r[o]){n=e[o],i=r[o];break}return n<i?-1:i<n?1:0};u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};u.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return u.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=u.allocUnsafe(r),o=0;for(n=0;n<e.length;++n){let s=e[n];if(X(s,Uint8Array))o+s.length>i.length?(u.isBuffer(s)||(s=u.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(u.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function Wt(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||X(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return at(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return rr(t).length;default:if(i)return n?-1:at(t).length;e=(""+e).toLowerCase(),i=!0}}u.byteLength=Wt;function ai(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return xi(this,e,r);case"utf8":case"utf-8":return Yt(this,e,r);case"ascii":return gi(this,e,r);case"latin1":case"binary":return mi(this,e,r);case"base64":return yi(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ei(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}u.prototype._isBuffer=!0;function le(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}u.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)le(this,r,r+1);return this};u.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)le(this,r,r+3),le(this,r+1,r+2);return this};u.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)le(this,r,r+7),le(this,r+1,r+6),le(this,r+2,r+5),le(this,r+3,r+4);return this};u.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Yt(this,0,e):ai.apply(this,arguments)};u.prototype.toLocaleString=u.prototype.toString;u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:u.compare(this,e)===0};u.prototype.inspect=function(){let e="",r=xe.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};Pt&&(u.prototype[Pt]=u.prototype.inspect);u.prototype.compare=function(e,r,n,i,o){if(X(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),r<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,a=n-r,l=Math.min(s,a),y=this.slice(i,o),p=e.slice(r,n);for(let w=0;w<l;++w)if(y[w]!==p[w]){s=y[w],a=p[w];break}return s<a?-1:a<s?1:0};function Xt(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,lt(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=u.from(e,n)),u.isBuffer(e))return e.length===0?-1:Vt(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Vt(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Vt(t,e,r,n,i){let o=1,s=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,s/=2,a/=2,r/=2}function l(p,w){return o===1?p[w]:p.readUInt16BE(w*o)}let y;if(i){let p=-1;for(y=r;y<s;y++)if(l(t,y)===l(e,p===-1?0:y-p)){if(p===-1&&(p=y),y-p+1===a)return p*o}else p!==-1&&(y-=y-p),p=-1}else for(r+a>s&&(r=s-a),y=r;y>=0;y--){let p=!0;for(let w=0;w<a;w++)if(l(t,y+w)!==l(e,w)){p=!1;break}if(p)return y}return-1}u.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};u.prototype.indexOf=function(e,r,n){return Xt(this,e,r,n,!0)};u.prototype.lastIndexOf=function(e,r,n){return Xt(this,e,r,n,!1)};function fi(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let a=parseInt(e.substr(s*2,2),16);if(lt(a))return s;t[r+s]=a}return s}function hi(t,e,r,n){return Ge(at(e,t.length-r),t,r,n)}function di(t,e,r,n){return Ge(Ii(e),t,r,n)}function li(t,e,r,n){return Ge(rr(e),t,r,n)}function pi(t,e,r,n){return Ge(Ui(e,t.length-r),t,r,n)}u.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-r;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return fi(this,e,r,n);case"utf8":case"utf-8":return hi(this,e,r,n);case"ascii":case"latin1":case"binary":return di(this,e,r,n);case"base64":return li(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pi(this,e,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function yi(t,e,r){return e===0&&r===t.length?st.fromByteArray(t):st.fromByteArray(t.slice(e,r))}function Yt(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){let l,y,p,w;switch(a){case 1:o<128&&(s=o);break;case 2:l=t[i+1],(l&192)===128&&(w=(o&31)<<6|l&63,w>127&&(s=w));break;case 3:l=t[i+1],y=t[i+2],(l&192)===128&&(y&192)===128&&(w=(o&15)<<12|(l&63)<<6|y&63,w>2047&&(w<55296||w>57343)&&(s=w));break;case 4:l=t[i+1],y=t[i+2],p=t[i+3],(l&192)===128&&(y&192)===128&&(p&192)===128&&(w=(o&15)<<18|(l&63)<<12|(y&63)<<6|p&63,w>65535&&w<1114112&&(s=w))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=a}return wi(n)}var jt=4096;function wi(t){let e=t.length;if(e<=jt)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=jt));return r}function gi(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function mi(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function xi(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=e;o<r;++o)i+=Ti[t[o]];return i}function Ei(t,e,r){let n=t.slice(e,r),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}u.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,u.prototype),i};function T(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||T(e,r,this.length);let i=this[e],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[e+s]*o;return i};u.prototype.readUintBE=u.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||T(e,r,this.length);let i=this[e+--r],o=1;for(;r>0&&(o*=256);)i+=this[e+--r]*o;return i};u.prototype.readUint8=u.prototype.readUInt8=function(e,r){return e=e>>>0,r||T(e,1,this.length),this[e]};u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||T(e,2,this.length),this[e]|this[e+1]<<8};u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||T(e,2,this.length),this[e]<<8|this[e+1]};u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||T(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};u.prototype.readBigUInt64LE=ue(function(e){e=e>>>0,me(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&_e(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});u.prototype.readBigUInt64BE=ue(function(e){e=e>>>0,me(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&_e(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});u.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||T(e,r,this.length);let i=this[e],o=1,s=0;for(;++s<r&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i};u.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||T(e,r,this.length);let i=r,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*r)),s};u.prototype.readInt8=function(e,r){return e=e>>>0,r||T(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};u.prototype.readInt16LE=function(e,r){e=e>>>0,r||T(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};u.prototype.readInt16BE=function(e,r){e=e>>>0,r||T(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};u.prototype.readInt32LE=function(e,r){return e=e>>>0,r||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};u.prototype.readInt32BE=function(e,r){return e=e>>>0,r||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};u.prototype.readBigInt64LE=ue(function(e){e=e>>>0,me(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&_e(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});u.prototype.readBigInt64BE=ue(function(e){e=e>>>0,me(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&_e(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});u.prototype.readFloatLE=function(e,r){return e=e>>>0,r||T(e,4,this.length),ge.read(this,e,!0,23,4)};u.prototype.readFloatBE=function(e,r){return e=e>>>0,r||T(e,4,this.length),ge.read(this,e,!1,23,4)};u.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||T(e,8,this.length),ge.read(this,e,!0,52,8)};u.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||T(e,8,this.length),ge.read(this,e,!1,52,8)};function C(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;C(this,e,r,n,a,0)}let o=1,s=0;for(this[r]=e&255;++s<n&&(o*=256);)this[r+s]=e/o&255;return r+n};u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;C(this,e,r,n,a,0)}let o=n-1,s=1;for(this[r+o]=e&255;--o>=0&&(s*=256);)this[r+o]=e/s&255;return r+n};u.prototype.writeUint8=u.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||C(this,e,r,1,255,0),this[r]=e&255,r+1};u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||C(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||C(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||C(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||C(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Jt(t,e,r,n,i){tr(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,r}function Kt(t,e,r,n,i){tr(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o=o>>8,t[r+6]=o,o=o>>8,t[r+5]=o,o=o>>8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s=s>>8,t[r+2]=s,s=s>>8,t[r+1]=s,s=s>>8,t[r]=s,r+8}u.prototype.writeBigUInt64LE=ue(function(e,r=0){return Jt(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});u.prototype.writeBigUInt64BE=ue(function(e,r=0){return Kt(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});u.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let l=Math.pow(2,8*n-1);C(this,e,r,n,l-1,-l)}let o=0,s=1,a=0;for(this[r]=e&255;++o<n&&(s*=256);)e<0&&a===0&&this[r+o-1]!==0&&(a=1),this[r+o]=(e/s>>0)-a&255;return r+n};u.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let l=Math.pow(2,8*n-1);C(this,e,r,n,l-1,-l)}let o=n-1,s=1,a=0;for(this[r+o]=e&255;--o>=0&&(s*=256);)e<0&&a===0&&this[r+o+1]!==0&&(a=1),this[r+o]=(e/s>>0)-a&255;return r+n};u.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||C(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};u.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||C(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};u.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||C(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};u.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||C(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};u.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||C(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};u.prototype.writeBigInt64LE=ue(function(e,r=0){return Jt(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});u.prototype.writeBigInt64BE=ue(function(e,r=0){return Kt(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Qt(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Zt(t,e,r,n,i){return e=+e,r=r>>>0,i||Qt(t,e,r,4,34028234663852886e22,-34028234663852886e22),ge.write(t,e,r,n,23,4),r+4}u.prototype.writeFloatLE=function(e,r,n){return Zt(this,e,r,!0,n)};u.prototype.writeFloatBE=function(e,r,n){return Zt(this,e,r,!1,n)};function er(t,e,r,n,i){return e=+e,r=r>>>0,i||Qt(t,e,r,8,17976931348623157e292,-17976931348623157e292),ge.write(t,e,r,n,52,8),r+8}u.prototype.writeDoubleLE=function(e,r,n){return er(this,e,r,!0,n)};u.prototype.writeDoubleBE=function(e,r,n){return er(this,e,r,!1,n)};u.prototype.copy=function(e,r,n,i){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),o};u.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=r;o<n;++o)this[o]=e;else{let s=u.isBuffer(e)?e:u.from(e,i),a=s.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-r;++o)this[o+r]=s[o%a]}return this};var we={};function dt(t,e,r){we[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}dt("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);dt("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);dt("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=qt(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=qt(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function qt(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Bi(t,e,r){me(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&_e(e,t.length-(r+1))}function tr(t,e,r,n,i,o){if(t>r||t<e){let s=typeof e=="bigint"?"n":"",a;throw o>3?e===0||e===BigInt(0)?a=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:a=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:a=`>= ${e}${s} and <= ${r}${s}`,new we.ERR_OUT_OF_RANGE("value",a,t)}Bi(n,i,o)}function me(t,e){if(typeof t!="number")throw new we.ERR_INVALID_ARG_TYPE(e,"number",t)}function _e(t,e,r){throw Math.floor(t)!==t?(me(t,r),new we.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new we.ERR_BUFFER_OUT_OF_BOUNDS:new we.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var bi=/[^+/0-9A-Za-z-_]/g;function Ai(t){if(t=t.split("=")[0],t=t.trim().replace(bi,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function at(t,e){e=e||1/0;let r,n=t.length,i=null,o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function Ii(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function Ui(t,e){let r,n,i,o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function rr(t){return st.toByteArray(Ai(t))}function Ge(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function X(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function lt(t){return t!==t}var Ti=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function ue(t){return typeof BigInt>"u"?Si:t}function Si(){throw new Error("BigInt not supported")}});var ur=ce((ls,cr)=>{d();var I=cr.exports={},Y,J;function pt(){throw new Error("setTimeout has not been defined")}function yt(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Y=setTimeout:Y=pt}catch{Y=pt}try{typeof clearTimeout=="function"?J=clearTimeout:J=yt}catch{J=yt}})();function ir(t){if(Y===setTimeout)return setTimeout(t,0);if((Y===pt||!Y)&&setTimeout)return Y=setTimeout,setTimeout(t,0);try{return Y(t,0)}catch{try{return Y.call(null,t,0)}catch{return Y.call(this,t,0)}}}function Fi(t){if(J===clearTimeout)return clearTimeout(t);if((J===yt||!J)&&clearTimeout)return J=clearTimeout,clearTimeout(t);try{return J(t)}catch{try{return J.call(null,t)}catch{return J.call(this,t)}}}var re=[],Ee=!1,pe,He=-1;function ki(){!Ee||!pe||(Ee=!1,pe.length?re=pe.concat(re):He=-1,re.length&&or())}function or(){if(!Ee){var t=ir(ki);Ee=!0;for(var e=re.length;e;){for(pe=re,re=[];++He<e;)pe&&pe[He].run();He=-1,e=re.length}pe=null,Ee=!1,Fi(t)}}I.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];re.push(new sr(t,e)),re.length===1&&!Ee&&ir(or)};function sr(t,e){this.fun=t,this.array=e}sr.prototype.run=function(){this.fun.apply(null,this.array)};I.title="browser";I.browser=!0;I.env={};I.argv=[];I.version="";I.versions={};function ne(){}I.on=ne;I.addListener=ne;I.once=ne;I.off=ne;I.removeListener=ne;I.removeAllListeners=ne;I.emit=ne;I.prependListener=ne;I.prependOnceListener=ne;I.listeners=function(t){return[]};I.binding=function(t){throw new Error("process.binding is not supported")};I.cwd=function(){return"/"};I.chdir=function(t){throw new Error("process.chdir is not supported")};I.umask=function(){return 0}});var g,m,d=Wn(()=>{"use strict";g=nr().Buffer,m=ur();globalThis&&globalThis.process&&globalThis.process.env&&(globalThis.process.env.LIBP2P_FORCE_PNET=!1)});var hr=ce((ys,fr)=>{d();fr.exports=wt;var ar=128,Ci=127,_i=~Ci,Ni=Math.pow(2,31);function wt(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw wt.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var n=r;t>=Ni;)e[r++]=t&255|ar,t/=128;for(;t&_i;)e[r++]=t&255|ar,t>>>=7;return e[r]=t|0,wt.bytes=r-n+1,e}});var pr=ce((ws,lr)=>{d();lr.exports=gt;var Mi=128,dr=127;function gt(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a||i>49)throw gt.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&dr)<<i:(s&dr)*Math.pow(2,i),i+=7}while(s>=Mi);return gt.bytes=o-n,r}});var wr=ce((gs,yr)=>{d();var Ri=Math.pow(2,7),$i=Math.pow(2,14),vi=Math.pow(2,21),Li=Math.pow(2,28),Di=Math.pow(2,35),Oi=Math.pow(2,42),zi=Math.pow(2,49),Pi=Math.pow(2,56),Vi=Math.pow(2,63);yr.exports=function(t){return t<Ri?1:t<$i?2:t<vi?3:t<Li?4:t<Di?5:t<Oi?6:t<zi?7:t<Pi?8:t<Vi?9:10}});var mr=ce((ms,gr)=>{d();gr.exports={encode:hr(),decode:pr(),encodingLength:wr()}});d();var Pe=Yn(mr(),1);d();d();d();var ji=["string","number","bigint","symbol"],qi=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function xr(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;if(ji.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(Gi(t))return"Buffer";let r=Hi(t);return r||"Object"}function Gi(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function Hi(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(qi.includes(e))return e}d();var c=class{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};c.uint=new c(0,"uint",!0);c.negint=new c(1,"negint",!0);c.bytes=new c(2,"bytes",!0);c.string=new c(3,"string",!0);c.array=new c(4,"array",!1);c.map=new c(5,"map",!1);c.tag=new c(6,"tag",!1);c.float=new c(7,"float",!0);c.false=new c(7,"false",!0);c.true=new c(7,"true",!0);c.null=new c(7,"null",!0);c.undefined=new c(7,"undefined",!0);c.break=new c(7,"break",!0);var f=class{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};d();d();var Be=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Wi=new TextDecoder,Xi=new TextEncoder;function We(t){return Be&&globalThis.Buffer.isBuffer(t)}function mt(t){return t instanceof Uint8Array?We(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}var Ar=Be?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):Br(t,e,r):(t,e,r)=>r-e>64?Wi.decode(t.subarray(e,r)):Br(t,e,r),Ir=Be?t=>t.length>64?globalThis.Buffer.from(t):Er(t):t=>t.length>64?Xi.encode(t):Er(t),K=t=>Uint8Array.from(t),be=Be?(t,e,r)=>We(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),Ur=Be?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),mt(globalThis.Buffer.concat(t,e))):(t,e)=>{let r=new Uint8Array(e),n=0;for(let i of t)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},Tr=Be?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function Sr(t,e){if(We(t)&&We(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function Er(t,e=1/0){let r,n=t.length,i=null,o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function Br(t,e,r){let n=[];for(;e<r;){let i=t[e],o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=r){let a,l,y,p;switch(s){case 1:i<128&&(o=i);break;case 2:a=t[e+1],(a&192)===128&&(p=(i&31)<<6|a&63,p>127&&(o=p));break;case 3:a=t[e+1],l=t[e+2],(a&192)===128&&(l&192)===128&&(p=(i&15)<<12|(a&63)<<6|l&63,p>2047&&(p<55296||p>57343)&&(o=p));break;case 4:a=t[e+1],l=t[e+2],y=t[e+3],(a&192)===128&&(l&192)===128&&(y&192)===128&&(p=(i&15)<<18|(a&63)<<12|(l&63)<<6|y&63,p>65535&&p<1114112&&(o=p))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=s}return Yi(n)}var br=4096;function Yi(t){let e=t.length;if(e<=br)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=br));return r}var Ji=256,Ne=class{constructor(e=Ji){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=r.length-(this.maxCursor-this.cursor)-1;r.set(e,i)}else{if(r){let i=r.length-(this.maxCursor-this.cursor)-1;i<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=Tr(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=be(n,0,this.cursor)}else r=Ur(this.chunks,this.cursor);return e&&this.reset(),r}};d();var B="CBOR decode error:",xt="CBOR encode error:",Me=[];Me[23]=1;Me[24]=2;Me[25]=3;Me[26]=5;Me[27]=9;function ie(t,e,r){if(t.length-e<r)throw new Error(`${B} not enough data for type`)}d();d();var S=[24,256,65536,4294967296,BigInt("18446744073709551616")];function _(t,e,r){ie(t,e,1);let n=t[e];if(r.strict===!0&&n<S[0])throw new Error(`${B} integer encoded in more bytes than necessary (strict decode)`);return n}function N(t,e,r){ie(t,e,2);let n=t[e]<<8|t[e+1];if(r.strict===!0&&n<S[1])throw new Error(`${B} integer encoded in more bytes than necessary (strict decode)`);return n}function M(t,e,r){ie(t,e,4);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<S[2])throw new Error(`${B} integer encoded in more bytes than necessary (strict decode)`);return n}function R(t,e,r){ie(t,e,8);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],i=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(r.strict===!0&&o<S[3])throw new Error(`${B} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(r.allowBigInt===!0)return o;throw new Error(`${B} integers outside of the safe integer range are not supported`)}function Fr(t,e,r,n){return new f(c.uint,_(t,e+1,n),2)}function kr(t,e,r,n){return new f(c.uint,N(t,e+1,n),3)}function Cr(t,e,r,n){return new f(c.uint,M(t,e+1,n),5)}function _r(t,e,r,n){return new f(c.uint,R(t,e+1,n),9)}function D(t,e){return F(t,0,e.value)}function F(t,e,r){if(r<S[0]){let n=Number(r);t.push([e|n])}else if(r<S[1]){let n=Number(r);t.push([e|24,n])}else if(r<S[2]){let n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<S[3]){let n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<S[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=s&255,s=s>>8,i[3]=s&255,s=s>>8,i[2]=s&255,s=s>>8,i[1]=s&255,t.push(i)}else throw new Error(`${B} encountered BigInt larger than allowable range`)}}D.encodedSize=function(e){return F.encodedSize(e.value)};F.encodedSize=function(e){return e<S[0]?1:e<S[1]?2:e<S[2]?3:e<S[3]?5:9};D.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};d();function Nr(t,e,r,n){return new f(c.negint,-1-_(t,e+1,n),2)}function Mr(t,e,r,n){return new f(c.negint,-1-N(t,e+1,n),3)}function Rr(t,e,r,n){return new f(c.negint,-1-M(t,e+1,n),5)}var Et=BigInt(-1),$r=BigInt(1);function vr(t,e,r,n){let i=R(t,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new f(c.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${B} integers outside of the safe integer range are not supported`);return new f(c.negint,Et-BigInt(i),9)}function Xe(t,e){let r=e.value,n=typeof r=="bigint"?r*Et-$r:r*-1-1;F(t,e.type.majorEncoded,n)}Xe.encodedSize=function(e){let r=e.value,n=typeof r=="bigint"?r*Et-$r:r*-1-1;return n<S[0]?1:n<S[1]?2:n<S[2]?3:n<S[3]?5:9};Xe.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};d();function Re(t,e,r,n){ie(t,e,r+n);let i=be(t,e+r,e+r+n);return new f(c.bytes,i,r+n)}function Lr(t,e,r,n){return Re(t,e,1,r)}function Dr(t,e,r,n){return Re(t,e,2,_(t,e+1,n))}function Or(t,e,r,n){return Re(t,e,3,N(t,e+1,n))}function zr(t,e,r,n){return Re(t,e,5,M(t,e+1,n))}function Pr(t,e,r,n){let i=R(t,e+1,n);if(typeof i=="bigint")throw new Error(`${B} 64-bit integer bytes lengths not supported`);return Re(t,e,9,i)}function Ye(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===c.string?Ir(t.value):t.value),t.encodedBytes}function Ae(t,e){let r=Ye(e);F(t,e.type.majorEncoded,r.length),t.push(r)}Ae.encodedSize=function(e){let r=Ye(e);return F.encodedSize(r.length)+r.length};Ae.compareTokens=function(e,r){return Qi(Ye(e),Ye(r))};function Qi(t,e){return t.length<e.length?-1:t.length>e.length?1:Sr(t,e)}d();function $e(t,e,r,n,i){let o=r+n;ie(t,e,o);let s=new f(c.string,Ar(t,e+r,e+o),o);return i.retainStringBytes===!0&&(s.byteValue=be(t,e+r,e+o)),s}function Vr(t,e,r,n){return $e(t,e,1,r,n)}function jr(t,e,r,n){return $e(t,e,2,_(t,e+1,n),n)}function qr(t,e,r,n){return $e(t,e,3,N(t,e+1,n),n)}function Gr(t,e,r,n){return $e(t,e,5,M(t,e+1,n),n)}function Hr(t,e,r,n){let i=R(t,e+1,n);if(typeof i=="bigint")throw new Error(`${B} 64-bit integer string lengths not supported`);return $e(t,e,9,i,n)}var Wr=Ae;d();function Ie(t,e,r,n){return new f(c.array,n,r)}function Xr(t,e,r,n){return Ie(t,e,1,r)}function Yr(t,e,r,n){return Ie(t,e,2,_(t,e+1,n))}function Jr(t,e,r,n){return Ie(t,e,3,N(t,e+1,n))}function Kr(t,e,r,n){return Ie(t,e,5,M(t,e+1,n))}function Qr(t,e,r,n){let i=R(t,e+1,n);if(typeof i=="bigint")throw new Error(`${B} 64-bit integer array lengths not supported`);return Ie(t,e,9,i)}function Zr(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${B} indefinite length items not allowed`);return Ie(t,e,1,1/0)}function Je(t,e){F(t,c.array.majorEncoded,e.value)}Je.compareTokens=D.compareTokens;Je.encodedSize=function(e){return F.encodedSize(e.value)};d();function Ue(t,e,r,n){return new f(c.map,n,r)}function en(t,e,r,n){return Ue(t,e,1,r)}function tn(t,e,r,n){return Ue(t,e,2,_(t,e+1,n))}function rn(t,e,r,n){return Ue(t,e,3,N(t,e+1,n))}function nn(t,e,r,n){return Ue(t,e,5,M(t,e+1,n))}function on(t,e,r,n){let i=R(t,e+1,n);if(typeof i=="bigint")throw new Error(`${B} 64-bit integer map lengths not supported`);return Ue(t,e,9,i)}function sn(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${B} indefinite length items not allowed`);return Ue(t,e,1,1/0)}function Ke(t,e){F(t,c.map.majorEncoded,e.value)}Ke.compareTokens=D.compareTokens;Ke.encodedSize=function(e){return F.encodedSize(e.value)};d();function cn(t,e,r,n){return new f(c.tag,r,1)}function un(t,e,r,n){return new f(c.tag,_(t,e+1,n),2)}function an(t,e,r,n){return new f(c.tag,N(t,e+1,n),3)}function fn(t,e,r,n){return new f(c.tag,M(t,e+1,n),5)}function hn(t,e,r,n){return new f(c.tag,R(t,e+1,n),9)}function Qe(t,e){F(t,c.tag.majorEncoded,e.value)}Qe.compareTokens=D.compareTokens;Qe.encodedSize=function(e){return F.encodedSize(e.value)};d();var io=20,oo=21,so=22,co=23;function dn(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${B} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new f(c.null,null,1):new f(c.undefined,void 0,1)}function ln(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${B} indefinite length items not allowed`);return new f(c.break,void 0,1)}function Bt(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${B} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${B} Infinity values are not supported`)}return new f(c.float,t,e)}function pn(t,e,r,n){return Bt(bt(t,e+1),3,n)}function yn(t,e,r,n){return Bt(At(t,e+1),5,n)}function wn(t,e,r,n){return Bt(En(t,e+1),9,n)}function Ze(t,e,r){let n=e.value;if(n===!1)t.push([c.float.majorEncoded|io]);else if(n===!0)t.push([c.float.majorEncoded|oo]);else if(n===null)t.push([c.float.majorEncoded|so]);else if(n===void 0)t.push([c.float.majorEncoded|co]);else{let i,o=!1;(!r||r.float64!==!0)&&(mn(n),i=bt(j,1),n===i||Number.isNaN(n)?(j[0]=249,t.push(j.slice(0,3)),o=!0):(xn(n),i=At(j,1),n===i&&(j[0]=250,t.push(j.slice(0,5)),o=!0))),o||(uo(n),i=En(j,1),j[0]=251,t.push(j.slice(0,9)))}}Ze.encodedSize=function(e,r){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){mn(n);let i=bt(j,1);if(n===i||Number.isNaN(n))return 3;if(xn(n),i=At(j,1),n===i)return 5}return 9};var gn=new ArrayBuffer(9),O=new DataView(gn,1),j=new Uint8Array(gn,0);function mn(t){if(t===1/0)O.setUint16(0,31744,!1);else if(t===-1/0)O.setUint16(0,64512,!1);else if(Number.isNaN(t))O.setUint16(0,32256,!1);else{O.setFloat32(0,t);let e=O.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)O.setUint16(0,31744,!1);else if(r===0)O.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{let i=r-127;i<-24?O.setUint16(0,0):i<-14?O.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):O.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function bt(t,e){if(t.length-e<2)throw new Error(`${B} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,i=r&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,r&32768?-o:o}function xn(t){O.setFloat32(0,t,!1)}function At(t,e){if(t.length-e<4)throw new Error(`${B} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function uo(t){O.setFloat64(0,t,!1)}function En(t,e){if(t.length-e<8)throw new Error(`${B} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}Ze.compareTokens=D.compareTokens;function b(t,e,r){throw new Error(`${B} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function et(t){return()=>{throw new Error(`${B} ${t}`)}}var h=[];for(let t=0;t<=23;t++)h[t]=b;h[24]=Fr;h[25]=kr;h[26]=Cr;h[27]=_r;h[28]=b;h[29]=b;h[30]=b;h[31]=b;for(let t=32;t<=55;t++)h[t]=b;h[56]=Nr;h[57]=Mr;h[58]=Rr;h[59]=vr;h[60]=b;h[61]=b;h[62]=b;h[63]=b;for(let t=64;t<=87;t++)h[t]=Lr;h[88]=Dr;h[89]=Or;h[90]=zr;h[91]=Pr;h[92]=b;h[93]=b;h[94]=b;h[95]=et("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)h[t]=Vr;h[120]=jr;h[121]=qr;h[122]=Gr;h[123]=Hr;h[124]=b;h[125]=b;h[126]=b;h[127]=et("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)h[t]=Xr;h[152]=Yr;h[153]=Jr;h[154]=Kr;h[155]=Qr;h[156]=b;h[157]=b;h[158]=b;h[159]=Zr;for(let t=160;t<=183;t++)h[t]=en;h[184]=tn;h[185]=rn;h[186]=nn;h[187]=on;h[188]=b;h[189]=b;h[190]=b;h[191]=sn;for(let t=192;t<=215;t++)h[t]=cn;h[216]=un;h[217]=an;h[218]=fn;h[219]=hn;h[220]=b;h[221]=b;h[222]=b;h[223]=b;for(let t=224;t<=243;t++)h[t]=et("simple values are not supported");h[244]=b;h[245]=b;h[246]=b;h[247]=dn;h[248]=et("simple values are not supported");h[249]=pn;h[250]=yn;h[251]=wn;h[252]=b;h[253]=b;h[254]=b;h[255]=ln;var Q=[];for(let t=0;t<24;t++)Q[t]=new f(c.uint,t,1);for(let t=-1;t>=-24;t--)Q[31-t]=new f(c.negint,t,1);Q[64]=new f(c.bytes,new Uint8Array(0),1);Q[96]=new f(c.string,"",1);Q[128]=new f(c.array,0,1);Q[160]=new f(c.map,0,1);Q[244]=new f(c.false,!1,1);Q[245]=new f(c.true,!0,1);Q[246]=new f(c.null,null,1);function tt(t){switch(t.type){case c.false:return K([244]);case c.true:return K([245]);case c.null:return K([246]);case c.bytes:return t.value.length?void 0:K([64]);case c.string:return t.value===""?K([96]):void 0;case c.array:return t.value===0?K([128]):void 0;case c.map:return t.value===0?K([160]):void 0;case c.uint:return t.value<24?K([Number(t.value)]):void 0;case c.negint:if(t.value>=-24)return K([31-Number(t.value)])}}var fo={float64:!1,mapSorter:lo,quickEncodeToken:tt};function Ut(){let t=[];return t[c.uint.major]=D,t[c.negint.major]=Xe,t[c.bytes.major]=Ae,t[c.string.major]=Wr,t[c.array.major]=Je,t[c.map.major]=Ke,t[c.tag.major]=Qe,t[c.float.major]=Ze,t}var Bn=Ut(),It=new Ne,Te=class{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${xt} object contains circular references`);return new Te(r,e)}},ae={null:new f(c.null,null),undefined:new f(c.undefined,void 0),true:new f(c.true,!0),false:new f(c.false,!1),emptyArray:new f(c.array,0),emptyMap:new f(c.map,0)},fe={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new f(c.float,t):t>=0?new f(c.uint,t):new f(c.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new f(c.uint,t):new f(c.negint,t)},Uint8Array(t,e,r,n){return new f(c.bytes,t)},string(t,e,r,n){return new f(c.string,t)},boolean(t,e,r,n){return t?ae.true:ae.false},null(t,e,r,n){return ae.null},undefined(t,e,r,n){return ae.undefined},ArrayBuffer(t,e,r,n){return new f(c.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new f(c.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[ae.emptyArray,new f(c.break)]:ae.emptyArray;n=Te.createCheck(n,t);let i=[],o=0;for(let s of t)i[o++]=ve(s,r,n);return r.addBreakTokens?[new f(c.array,t.length),i,new f(c.break)]:[new f(c.array,t.length),i]},Object(t,e,r,n){let i=e!=="Object",o=i?t.keys():Object.keys(t),s=i?t.size:o.length;if(!s)return r.addBreakTokens===!0?[ae.emptyMap,new f(c.break)]:ae.emptyMap;n=Te.createCheck(n,t);let a=[],l=0;for(let y of o)a[l++]=[ve(y,r,n),ve(i?t.get(y):t[y],r,n)];return ho(a,r),r.addBreakTokens?[new f(c.map,s),a,new f(c.break)]:[new f(c.map,s),a]}};fe.Map=fe.Object;fe.Buffer=fe.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))fe[`${t}Array`]=fe.DataView;function ve(t,e={},r){let n=xr(t),i=e&&e.typeEncoders&&e.typeEncoders[n]||fe[n];if(typeof i=="function"){let s=i(t,n,e,r);if(s!=null)return s}let o=fe[n];if(!o)throw new Error(`${xt} unsupported type: ${n}`);return o(t,n,e,r)}function ho(t,e){e.mapSorter&&t.sort(e.mapSorter)}function lo(t,e){let r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);let i=r.type.major,o=Bn[i].compareTokens(r,n);return o===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function bn(t,e,r,n){if(Array.isArray(e))for(let i of e)bn(t,i,r,n);else r[e.type.major](t,e,n)}function po(t,e,r){let n=ve(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){let i=r.quickEncodeToken(n);if(i)return i;let o=e[n.type.major];if(o.encodedSize){let s=o.encodedSize(n,r),a=new Ne(s);if(o(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return mt(a.chunks[0])}}return It.reset(),bn(It,n,e,r),It.toBytes(!0)}function Tt(t,e){return e=Object.assign({},fo,e),po(t,Bn,e)}d();var dc=Symbol.for("DONE"),lc=Symbol.for("BREAK");d();var go=Ut(),mo={float64:!1,quickEncodeToken:tt};function St(t,e=go,r=mo){if(Array.isArray(t)){let n=0;for(let i of t)n+=St(i,e,r);return n}else{let n=e[t.type.major];if(n.encodedSize===void 0||typeof n.encodedSize!="function")throw new Error(`Encoder for ${t.type.name} does not have an encodedSize()`);return n.encodedSize(t,r)}}d();d();d();d();var xo=Un,An=128,Eo=127,Bo=~Eo,bo=Math.pow(2,31);function Un(t,e,r){e=e||[],r=r||0;for(var n=r;t>=bo;)e[r++]=t&255|An,t/=128;for(;t&Bo;)e[r++]=t&255|An,t>>>=7;return e[r]=t|0,Un.bytes=r-n+1,e}var Ao=Ft,Io=128,In=127;function Ft(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw Ft.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&In)<<i:(s&In)*Math.pow(2,i),i+=7}while(s>=Io);return Ft.bytes=o-n,r}var Uo=Math.pow(2,7),To=Math.pow(2,14),So=Math.pow(2,21),Fo=Math.pow(2,28),ko=Math.pow(2,35),Co=Math.pow(2,42),_o=Math.pow(2,49),No=Math.pow(2,56),Mo=Math.pow(2,63),Ro=function(t){return t<Uo?1:t<To?2:t<So?3:t<Fo?4:t<ko?5:t<Co?6:t<_o?7:t<No?8:t<Mo?9:10},$o={encode:xo,decode:Ao,encodingLength:Ro},vo=$o,Le=vo;var De=t=>[Le.decode(t),Le.decode.bytes],Se=(t,e,r=0)=>(Le.encode(t,e,r),e),Fe=t=>Le.encodingLength(t);d();d();var Ac=new Uint8Array(0);var Sn=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},ke=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var Fn=(t,e)=>{let r=e.byteLength,n=Fe(t),i=n+Fe(r),o=new Uint8Array(i+r);return Se(t,o,0),Se(r,o,n),o.set(e,i),new Ce(t,r,e,o)},kn=t=>{let e=ke(t),[r,n]=De(e),[i,o]=De(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new Ce(r,i,s,e)},Cn=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&Sn(t.bytes,e.bytes),Ce=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};d();d();d();function Do(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,l=t.charAt(0),y=Math.log(a)/Math.log(256),p=Math.log(256)/Math.log(a);function w(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var k=0,he=0,P=0,q=A.length;P!==q&&A[P]===0;)P++,k++;for(var G=(q-P)*p+1>>>0,v=new Uint8Array(G);P!==q;){for(var H=A[P],se=0,V=G-1;(H!==0||se<he)&&V!==-1;V--,se++)H+=256*v[V]>>>0,v[V]=H%a>>>0,H=H/a>>>0;if(H!==0)throw new Error("Non-zero carry");he=se,P++}for(var ee=G-he;ee!==G&&v[ee]===0;)ee++;for(var Ve=l.repeat(k);ee<G;++ee)Ve+=t.charAt(v[ee]);return Ve}function z(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var k=0;if(A[k]!==" "){for(var he=0,P=0;A[k]===l;)he++,k++;for(var q=(A.length-k)*y+1>>>0,G=new Uint8Array(q);A[k];){var v=r[A.charCodeAt(k)];if(v===255)return;for(var H=0,se=q-1;(v!==0||H<P)&&se!==-1;se--,H++)v+=a*G[se]>>>0,G[se]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");P=H,k++}if(A[k]!==" "){for(var V=q-P;V!==q&&G[V]===0;)V++;for(var ee=new Uint8Array(he+(q-V)),Ve=he;V!==q;)ee[Ve++]=G[V++];return ee}}}function $(A){var k=z(A);if(k)return k;throw new Error(`Non-${e} character`)}return{encode:w,decodeUnsafe:z,decode:$}}var Oo=Do,zo=Oo,_n=zo;var kt=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Ct=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Nn(this,e)}},_t=class{constructor(e){this.decoders=e}or(e){return Nn(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Nn=(t,e)=>new _t({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),Nt=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new kt(e,r,n),this.decoder=new Ct(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Mn=({name:t,prefix:e,encode:r,decode:n})=>new Nt(t,e,r,n),Mt=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=_n(r,e);return Mn({prefix:t,name:e,encode:n,decode:o=>ke(i(o))})},Po=(t,e,r,n)=>{let i={};for(let p=0;p<e.length;++p)i[e[p]]=p;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,l=0,y=0;for(let p=0;p<o;++p){let w=i[t[p]];if(w===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|w,a+=r,a>=8&&(a-=8,s[y++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return s},Vo=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},Z=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Mn({prefix:e,name:t,encode(i){return Vo(i,n,r)},decode(i){return Po(i,n,r,t)}});var oe=Mt({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),_c=Mt({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});d();var Oe=Z({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Rc=Z({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),$c=Z({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),vc=Z({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Lc=Z({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Dc=Z({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Oc=Z({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),zc=Z({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Pc=Z({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var U=class{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:nt,byteLength:nt,code:rt,version:rt,multihash:rt,bytes:rt,_baseCache:nt,asCID:nt})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==ze)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Ho)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return U.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Fn(e,r);return U.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Cn(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:i}=this;switch(n){case 0:return qo(r,i,e||oe.encoder);default:return Go(r,i,e||Oe.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Xo(/^0\.0/,Yo),!!(e&&(e[$n]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof U)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:i,bytes:o}=e;return new U(r,n,i,o||Rn(r,n,i.bytes))}else if(e!=null&&e[$n]===!0){let{version:r,multihash:n,code:i}=e,o=kn(n);return U.create(r,i,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==ze)throw new Error(`Version 0 CID must use dag-pb (code: ${ze}) block encoding`);return new U(e,r,n,n.bytes)}case 1:{let i=Rn(e,r,n.bytes);return new U(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return U.create(0,ze,e)}static createV1(e,r){return U.create(1,e,r)}static decode(e){let[r,n]=U.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=U.inspectBytes(e),n=r.size-r.multihashSize,i=ke(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new Ce(r.multihashCode,r.digestSize,o,i);return[r.version===0?U.createV0(s):U.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[w,z]=De(e.subarray(r));return r+=z,w},i=n(),o=ze;if(i===18?(i=0,r=0):i===1&&(o=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),l=n(),y=r+l,p=y-s;return{version:i,codec:o,multihashCode:a,digestSize:l,multihashSize:p,size:y}}static parse(e,r){let[n,i]=jo(e,r),o=U.decode(i);return o._baseCache.set(n,e),o}},jo=(t,e)=>{switch(t[0]){case"Q":{let r=e||oe;return[oe.prefix,r.decode(`${oe.prefix}${t}`)]}case oe.prefix:{let r=e||oe;return[oe.prefix,r.decode(t)]}case Oe.prefix:{let r=e||Oe;return[Oe.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},qo=(t,e,r)=>{let{prefix:n}=r;if(n!==oe.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i},Go=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i},ze=112,Ho=18,Rn=(t,e,r)=>{let n=Fe(t),i=n+Fe(e),o=new Uint8Array(i+r.byteLength);return Se(t,o,0),Se(e,o,n),o.set(r,i),o},$n=Symbol.for("@ipld/js-cid/CID"),rt={writable:!1,configurable:!1,enumerable:!0},nt={writable:!1,enumerable:!1,configurable:!1},Wo="0.0.0-dev",Xo=(t,e)=>{if(t.test(Wo))console.warn(e);else throw new Error(e)},Yo=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var vn=42;function Jo(t){if(t.asCID!==t)return null;let e=U.asCID(t);if(!e)return null;let r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new f(c.tag,vn),new f(c.bytes,r)]}function Ko(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Qo(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var Zo={float64:!0,typeEncoders:{Object:Jo,undefined:Ko,number:Qo}};function es(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return U.decode(t.subarray(1))}var ts={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};ts.tags[vn]=es;var Ln=t=>Tt(t,Zo);var $t=class{constructor(e,r){this.bytes=e,this.byteOffset=r,this.roots=[],this.headerSize=r}addRoot(e,r){return ns(this,e,r),this}write(e){return is(this,e),this}close(e){return os(this,e)}},ns=(t,e,{resize:r=!1}={})=>{let{bytes:n,headerSize:i,byteOffset:o,roots:s}=t;t.roots.push(e);let a=Pn(t);if(a>i)if(a-i+o<n.byteLength)if(r)On(t,a);else throw s.pop(),new RangeError(`Header of size ${i} has no capacity for new root ${e}.
  However there is a space in the buffer and you could call addRoot(root, { resize: root }) to resize header to make a space for this root.`);else throw s.pop(),new RangeError(`Buffer has no capacity for a new root ${e}`)},Jc=({cid:t,bytes:e})=>{let r=t.bytes.byteLength+e.byteLength;return Pe.default.encodingLength(r)+r},is=(t,{cid:e,bytes:r})=>{let n=e.bytes.byteLength+r.byteLength,i=Pe.default.encode(n);if(t.byteOffset+i.length+n>t.bytes.byteLength)throw new RangeError("Buffer has no capacity for this block");Rt(t,i),Rt(t,e.bytes),Rt(t,r)},os=(t,{resize:e=!1}={})=>{let{roots:r,bytes:n,byteOffset:i,headerSize:o}=t,s=Ln({version:1,roots:r}),a=Pe.default.encode(s.length),l=a.length+s.byteLength;if(o-l===0)return Dn(t,a,s),n.subarray(0,i);if(e)return On(t,l),Dn(t,a,s),n.subarray(0,t.byteOffset);throw new RangeError(`Header size was overestimated.
You can use close({ resize: true }) to resize header`)},On=(t,e)=>{let{bytes:r,headerSize:n}=t;r.set(r.subarray(n,t.byteOffset),e),t.byteOffset+=e-n,t.headerSize=e},Rt=(t,e)=>{t.bytes.set(e,t.byteOffset),t.byteOffset+=e.length},Dn=({bytes:t},e,r)=>{t.set(e),t.set(r,e.length)},ss=[new f(c.map,2),new f(c.string,"version"),new f(c.uint,1),new f(c.string,"roots")],cs=new f(c.tag,42),zn=t=>{let e=[...ss];e.push(new f(c.array,t.length));for(let n of t)e.push(cs),e.push(new f(c.bytes,{length:n+1}));let r=St(e);return Pe.default.encodingLength(r)+r},Pn=({roots:t})=>zn(t.map(e=>e.bytes.byteLength)),Kc=(t,e=36)=>zn(new Array(t).fill(e)),Qc=(t,{roots:e=[],byteOffset:r=0,byteLength:n=t.byteLength,headerSize:i=Pn({roots:e})}={})=>{let o=new Uint8Array(t,r,n),s=new $t(o,i);for(let a of e)s.addRoot(a);return s};export{is as addBlock,ns as addRoot,Jc as blockLength,zn as calculateHeaderLength,os as close,Qc as createWriter,Kc as estimateHeaderLength,Pn as headerLength,On as resizeHeader};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
//# sourceMappingURL=buffer-writer.js.map
