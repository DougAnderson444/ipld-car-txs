var Tc=Object.create;var nr=Object.defineProperty;var Ic=Object.getOwnPropertyDescriptor;var Sc=Object.getOwnPropertyNames;var Uc=Object.getPrototypeOf,Fc=Object.prototype.hasOwnProperty;var F=(t,e)=>()=>(t&&(e=t(t=0)),e);var S=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),M=(t,e)=>{for(var r in e)nr(t,r,{get:e[r],enumerable:!0})},No=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Sc(e))!Fc.call(t,o)&&o!==r&&nr(t,o,{get:()=>e[o],enumerable:!(n=Ic(e,o))||n.enumerable});return t};var J=(t,e,r)=>(r=t!=null?Tc(Uc(t)):{},No(e||!t||!t.__esModule?nr(r,"default",{value:t,enumerable:!0}):r,t)),R=t=>No(nr({},"__esModule",{value:!0}),t);var Po=S(or=>{"use strict";a();or.byteLength=kc;or.toByteArray=Nc;or.fromByteArray=Pc;var De=[],ue=[],vc=typeof Uint8Array<"u"?Uint8Array:Array,Xr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ge=0,$o=Xr.length;Ge<$o;++Ge)De[Ge]=Xr[Ge],ue[Xr.charCodeAt(Ge)]=Ge;var Ge,$o;ue["-".charCodeAt(0)]=62;ue["_".charCodeAt(0)]=63;function Lo(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function kc(t){var e=Lo(t),r=e[0],n=e[1];return(r+n)*3/4-n}function _c(t,e,r){return(e+r)*3/4-r}function Nc(t){var e,r=Lo(t),n=r[0],o=r[1],i=new vc(_c(t,n,o)),s=0,u=o>0?n-4:n,h;for(h=0;h<u;h+=4)e=ue[t.charCodeAt(h)]<<18|ue[t.charCodeAt(h+1)]<<12|ue[t.charCodeAt(h+2)]<<6|ue[t.charCodeAt(h+3)],i[s++]=e>>16&255,i[s++]=e>>8&255,i[s++]=e&255;return o===2&&(e=ue[t.charCodeAt(h)]<<2|ue[t.charCodeAt(h+1)]>>4,i[s++]=e&255),o===1&&(e=ue[t.charCodeAt(h)]<<10|ue[t.charCodeAt(h+1)]<<4|ue[t.charCodeAt(h+2)]>>2,i[s++]=e>>8&255,i[s++]=e&255),i}function $c(t){return De[t>>18&63]+De[t>>12&63]+De[t>>6&63]+De[t&63]}function Lc(t,e,r){for(var n,o=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),o.push($c(n));return o.join("")}function Pc(t){for(var e,r=t.length,n=r%3,o=[],i=16383,s=0,u=r-n;s<u;s+=i)o.push(Lc(t,s,s+i>u?u:s+i));return n===1?(e=t[r-1],o.push(De[e>>2]+De[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],o.push(De[e>>10]+De[e>>4&63]+De[e<<2&63]+"=")),o.join("")}});var Ro=S(Yr=>{a();Yr.read=function(t,e,r,n,o){var i,s,u=o*8-n-1,h=(1<<u)-1,w=h>>1,c=-7,g=r?o-1:0,B=r?-1:1,k=t[e+g];for(g+=B,i=k&(1<<-c)-1,k>>=-c,c+=u;c>0;i=i*256+t[e+g],g+=B,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=n;c>0;s=s*256+t[e+g],g+=B,c-=8);if(i===0)i=1-w;else{if(i===h)return s?NaN:(k?-1:1)*(1/0);s=s+Math.pow(2,n),i=i-w}return(k?-1:1)*s*Math.pow(2,i-n)};Yr.write=function(t,e,r,n,o,i){var s,u,h,w=i*8-o-1,c=(1<<w)-1,g=c>>1,B=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,k=n?0:i-1,I=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),s+g>=1?e+=B/h:e+=B*Math.pow(2,1-g),e*h>=2&&(s++,h/=2),s+g>=c?(u=0,s=c):s+g>=1?(u=(e*h-1)*Math.pow(2,o),s=s+g):(u=e*Math.pow(2,g-1)*Math.pow(2,o),s=0));o>=8;t[r+k]=u&255,k+=I,u/=256,o-=8);for(s=s<<o|u,w+=o;w>0;t[r+k]=s&255,k+=I,s/=256,w-=8);t[r+k-I]|=v*128}});var ti=S(st=>{"use strict";a();var Qr=Po(),ot=Ro(),Mo=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;st.Buffer=f;st.SlowBuffer=Hc;st.INSPECT_MAX_BYTES=50;var ir=2147483647;st.kMaxLength=ir;f.TYPED_ARRAY_SUPPORT=Rc();!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Rc(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(!!f.isBuffer(this))return this.buffer}});Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(!!f.isBuffer(this))return this.byteOffset}});function Ae(t){if(t>ir)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,f.prototype),e}function f(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return tn(t)}return Ho(t,e,r)}f.poolSize=8192;function Ho(t,e,r){if(typeof t=="string")return Oc(t,e);if(ArrayBuffer.isView(t))return zc(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(be(t,ArrayBuffer)||t&&be(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(be(t,SharedArrayBuffer)||t&&be(t.buffer,SharedArrayBuffer)))return Kr(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return f.from(n,e,r);let o=qc(t);if(o)return o;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return f.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}f.from=function(t,e,r){return Ho(t,e,r)};Object.setPrototypeOf(f.prototype,Uint8Array.prototype);Object.setPrototypeOf(f,Uint8Array);function jo(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function Mc(t,e,r){return jo(t),t<=0?Ae(t):e!==void 0?typeof r=="string"?Ae(t).fill(e,r):Ae(t).fill(e):Ae(t)}f.alloc=function(t,e,r){return Mc(t,e,r)};function tn(t){return jo(t),Ae(t<0?0:rn(t)|0)}f.allocUnsafe=function(t){return tn(t)};f.allocUnsafeSlow=function(t){return tn(t)};function Oc(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!f.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=Vo(t,e)|0,n=Ae(r),o=n.write(t,e);return o!==r&&(n=n.slice(0,o)),n}function Zr(t){let e=t.length<0?0:rn(t.length)|0,r=Ae(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function zc(t){if(be(t,Uint8Array)){let e=new Uint8Array(t);return Kr(e.buffer,e.byteOffset,e.byteLength)}return Zr(t)}function Kr(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,f.prototype),n}function qc(t){if(f.isBuffer(t)){let e=rn(t.length)|0,r=Ae(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||on(t.length)?Ae(0):Zr(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Zr(t.data)}function rn(t){if(t>=ir)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ir.toString(16)+" bytes");return t|0}function Hc(t){return+t!=t&&(t=0),f.alloc(+t)}f.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==f.prototype};f.compare=function(e,r){if(be(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),be(r,Uint8Array)&&(r=f.from(r,r.offset,r.byteLength)),!f.isBuffer(e)||!f.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,o=r.length;for(let i=0,s=Math.min(n,o);i<s;++i)if(e[i]!==r[i]){n=e[i],o=r[i];break}return n<o?-1:o<n?1:0};f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};f.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return f.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let o=f.allocUnsafe(r),i=0;for(n=0;n<e.length;++n){let s=e[n];if(be(s,Uint8Array))i+s.length>o.length?(f.isBuffer(s)||(s=f.from(s)),s.copy(o,i)):Uint8Array.prototype.set.call(o,s,i);else if(f.isBuffer(s))s.copy(o,i);else throw new TypeError('"list" argument must be an Array of Buffers');i+=s.length}return o};function Vo(t,e){if(f.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||be(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let o=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return en(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return ei(t).length;default:if(o)return n?-1:en(t).length;e=(""+e).toLowerCase(),o=!0}}f.byteLength=Vo;function jc(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return ef(this,e,r);case"utf8":case"utf-8":return Wo(this,e,r);case"ascii":return Zc(this,e,r);case"latin1":case"binary":return Kc(this,e,r);case"base64":return Yc(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return tf(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}f.prototype._isBuffer=!0;function We(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}f.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)We(this,r,r+1);return this};f.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)We(this,r,r+3),We(this,r+1,r+2);return this};f.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)We(this,r,r+7),We(this,r+1,r+6),We(this,r+2,r+5),We(this,r+3,r+4);return this};f.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Wo(this,0,e):jc.apply(this,arguments)};f.prototype.toLocaleString=f.prototype.toString;f.prototype.equals=function(e){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:f.compare(this,e)===0};f.prototype.inspect=function(){let e="",r=st.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};Mo&&(f.prototype[Mo]=f.prototype.inspect);f.prototype.compare=function(e,r,n,o,i){if(be(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),o===void 0&&(o=0),i===void 0&&(i=this.length),r<0||n>e.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&r>=n)return 0;if(o>=i)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,o>>>=0,i>>>=0,this===e)return 0;let s=i-o,u=n-r,h=Math.min(s,u),w=this.slice(o,i),c=e.slice(r,n);for(let g=0;g<h;++g)if(w[g]!==c[g]){s=w[g],u=c[g];break}return s<u?-1:u<s?1:0};function Go(t,e,r,n,o){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,on(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0)if(o)r=0;else return-1;if(typeof e=="string"&&(e=f.from(e,n)),f.isBuffer(e))return e.length===0?-1:Oo(t,e,r,n,o);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Oo(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function Oo(t,e,r,n,o){let i=1,s=t.length,u=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;i=2,s/=2,u/=2,r/=2}function h(c,g){return i===1?c[g]:c.readUInt16BE(g*i)}let w;if(o){let c=-1;for(w=r;w<s;w++)if(h(t,w)===h(e,c===-1?0:w-c)){if(c===-1&&(c=w),w-c+1===u)return c*i}else c!==-1&&(w-=w-c),c=-1}else for(r+u>s&&(r=s-u),w=r;w>=0;w--){let c=!0;for(let g=0;g<u;g++)if(h(t,w+g)!==h(e,g)){c=!1;break}if(c)return w}return-1}f.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};f.prototype.indexOf=function(e,r,n){return Go(this,e,r,n,!0)};f.prototype.lastIndexOf=function(e,r,n){return Go(this,e,r,n,!1)};function Vc(t,e,r,n){r=Number(r)||0;let o=t.length-r;n?(n=Number(n),n>o&&(n=o)):n=o;let i=e.length;n>i/2&&(n=i/2);let s;for(s=0;s<n;++s){let u=parseInt(e.substr(s*2,2),16);if(on(u))return s;t[r+s]=u}return s}function Gc(t,e,r,n){return sr(en(e,t.length-r),t,r,n)}function Wc(t,e,r,n){return sr(sf(e),t,r,n)}function Jc(t,e,r,n){return sr(ei(e),t,r,n)}function Xc(t,e,r,n){return sr(af(e,t.length-r),t,r,n)}f.prototype.write=function(e,r,n,o){if(r===void 0)o="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")o=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,o===void 0&&(o="utf8")):(o=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let i=this.length-r;if((n===void 0||n>i)&&(n=i),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");let s=!1;for(;;)switch(o){case"hex":return Vc(this,e,r,n);case"utf8":case"utf-8":return Gc(this,e,r,n);case"ascii":case"latin1":case"binary":return Wc(this,e,r,n);case"base64":return Jc(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Xc(this,e,r,n);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),s=!0}};f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Yc(t,e,r){return e===0&&r===t.length?Qr.fromByteArray(t):Qr.fromByteArray(t.slice(e,r))}function Wo(t,e,r){r=Math.min(t.length,r);let n=[],o=e;for(;o<r;){let i=t[o],s=null,u=i>239?4:i>223?3:i>191?2:1;if(o+u<=r){let h,w,c,g;switch(u){case 1:i<128&&(s=i);break;case 2:h=t[o+1],(h&192)===128&&(g=(i&31)<<6|h&63,g>127&&(s=g));break;case 3:h=t[o+1],w=t[o+2],(h&192)===128&&(w&192)===128&&(g=(i&15)<<12|(h&63)<<6|w&63,g>2047&&(g<55296||g>57343)&&(s=g));break;case 4:h=t[o+1],w=t[o+2],c=t[o+3],(h&192)===128&&(w&192)===128&&(c&192)===128&&(g=(i&15)<<18|(h&63)<<12|(w&63)<<6|c&63,g>65535&&g<1114112&&(s=g))}}s===null?(s=65533,u=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),o+=u}return Qc(n)}var zo=4096;function Qc(t){let e=t.length;if(e<=zo)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=zo));return r}function Zc(t,e,r){let n="";r=Math.min(t.length,r);for(let o=e;o<r;++o)n+=String.fromCharCode(t[o]&127);return n}function Kc(t,e,r){let n="";r=Math.min(t.length,r);for(let o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function ef(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let o="";for(let i=e;i<r;++i)o+=uf[t[i]];return o}function tf(t,e,r){let n=t.slice(e,r),o="";for(let i=0;i<n.length-1;i+=2)o+=String.fromCharCode(n[i]+n[i+1]*256);return o}f.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let o=this.subarray(e,r);return Object.setPrototypeOf(o,f.prototype),o};function O(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||O(e,r,this.length);let o=this[e],i=1,s=0;for(;++s<r&&(i*=256);)o+=this[e+s]*i;return o};f.prototype.readUintBE=f.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||O(e,r,this.length);let o=this[e+--r],i=1;for(;r>0&&(i*=256);)o+=this[e+--r]*i;return o};f.prototype.readUint8=f.prototype.readUInt8=function(e,r){return e=e>>>0,r||O(e,1,this.length),this[e]};f.prototype.readUint16LE=f.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||O(e,2,this.length),this[e]|this[e+1]<<8};f.prototype.readUint16BE=f.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||O(e,2,this.length),this[e]<<8|this[e+1]};f.prototype.readUint32LE=f.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};f.prototype.readUint32BE=f.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||O(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};f.prototype.readBigUInt64LE=_e(function(e){e=e>>>0,it(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&$t(e,this.length-8);let o=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,i=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(o)+(BigInt(i)<<BigInt(32))});f.prototype.readBigUInt64BE=_e(function(e){e=e>>>0,it(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&$t(e,this.length-8);let o=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],i=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(o)<<BigInt(32))+BigInt(i)});f.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||O(e,r,this.length);let o=this[e],i=1,s=0;for(;++s<r&&(i*=256);)o+=this[e+s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*r)),o};f.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||O(e,r,this.length);let o=r,i=1,s=this[e+--o];for(;o>0&&(i*=256);)s+=this[e+--o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*r)),s};f.prototype.readInt8=function(e,r){return e=e>>>0,r||O(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};f.prototype.readInt16LE=function(e,r){e=e>>>0,r||O(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};f.prototype.readInt16BE=function(e,r){e=e>>>0,r||O(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};f.prototype.readInt32LE=function(e,r){return e=e>>>0,r||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};f.prototype.readInt32BE=function(e,r){return e=e>>>0,r||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};f.prototype.readBigInt64LE=_e(function(e){e=e>>>0,it(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&$t(e,this.length-8);let o=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(o)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});f.prototype.readBigInt64BE=_e(function(e){e=e>>>0,it(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&$t(e,this.length-8);let o=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(o)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});f.prototype.readFloatLE=function(e,r){return e=e>>>0,r||O(e,4,this.length),ot.read(this,e,!0,23,4)};f.prototype.readFloatBE=function(e,r){return e=e>>>0,r||O(e,4,this.length),ot.read(this,e,!1,23,4)};f.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||O(e,8,this.length),ot.read(this,e,!0,52,8)};f.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||O(e,8,this.length),ot.read(this,e,!1,52,8)};function X(t,e,r,n,o,i){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(e,r,n,o){if(e=+e,r=r>>>0,n=n>>>0,!o){let u=Math.pow(2,8*n)-1;X(this,e,r,n,u,0)}let i=1,s=0;for(this[r]=e&255;++s<n&&(i*=256);)this[r+s]=e/i&255;return r+n};f.prototype.writeUintBE=f.prototype.writeUIntBE=function(e,r,n,o){if(e=+e,r=r>>>0,n=n>>>0,!o){let u=Math.pow(2,8*n)-1;X(this,e,r,n,u,0)}let i=n-1,s=1;for(this[r+i]=e&255;--i>=0&&(s*=256);)this[r+i]=e/s&255;return r+n};f.prototype.writeUint8=f.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,1,255,0),this[r]=e&255,r+1};f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Jo(t,e,r,n,o){Ko(e,n,o,t,r,7);let i=Number(e&BigInt(4294967295));t[r++]=i,i=i>>8,t[r++]=i,i=i>>8,t[r++]=i,i=i>>8,t[r++]=i;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,r}function Xo(t,e,r,n,o){Ko(e,n,o,t,r,7);let i=Number(e&BigInt(4294967295));t[r+7]=i,i=i>>8,t[r+6]=i,i=i>>8,t[r+5]=i,i=i>>8,t[r+4]=i;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s=s>>8,t[r+2]=s,s=s>>8,t[r+1]=s,s=s>>8,t[r]=s,r+8}f.prototype.writeBigUInt64LE=_e(function(e,r=0){return Jo(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});f.prototype.writeBigUInt64BE=_e(function(e,r=0){return Xo(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});f.prototype.writeIntLE=function(e,r,n,o){if(e=+e,r=r>>>0,!o){let h=Math.pow(2,8*n-1);X(this,e,r,n,h-1,-h)}let i=0,s=1,u=0;for(this[r]=e&255;++i<n&&(s*=256);)e<0&&u===0&&this[r+i-1]!==0&&(u=1),this[r+i]=(e/s>>0)-u&255;return r+n};f.prototype.writeIntBE=function(e,r,n,o){if(e=+e,r=r>>>0,!o){let h=Math.pow(2,8*n-1);X(this,e,r,n,h-1,-h)}let i=n-1,s=1,u=0;for(this[r+i]=e&255;--i>=0&&(s*=256);)e<0&&u===0&&this[r+i+1]!==0&&(u=1),this[r+i]=(e/s>>0)-u&255;return r+n};f.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};f.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};f.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};f.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};f.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||X(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};f.prototype.writeBigInt64LE=_e(function(e,r=0){return Jo(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});f.prototype.writeBigInt64BE=_e(function(e,r=0){return Xo(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Yo(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Qo(t,e,r,n,o){return e=+e,r=r>>>0,o||Yo(t,e,r,4,34028234663852886e22,-34028234663852886e22),ot.write(t,e,r,n,23,4),r+4}f.prototype.writeFloatLE=function(e,r,n){return Qo(this,e,r,!0,n)};f.prototype.writeFloatBE=function(e,r,n){return Qo(this,e,r,!1,n)};function Zo(t,e,r,n,o){return e=+e,r=r>>>0,o||Yo(t,e,r,8,17976931348623157e292,-17976931348623157e292),ot.write(t,e,r,n,52,8),r+8}f.prototype.writeDoubleLE=function(e,r,n){return Zo(this,e,r,!0,n)};f.prototype.writeDoubleBE=function(e,r,n){return Zo(this,e,r,!1,n)};f.prototype.copy=function(e,r,n,o){if(!f.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!o&&o!==0&&(o=this.length),r>=e.length&&(r=e.length),r||(r=0),o>0&&o<n&&(o=n),o===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-r<o-n&&(o=e.length-r+n);let i=o-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,o):Uint8Array.prototype.set.call(e,this.subarray(n,o),r),i};f.prototype.fill=function(e,r,n,o){if(typeof e=="string"){if(typeof r=="string"?(o=r,r=0,n=this.length):typeof n=="string"&&(o=n,n=this.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!f.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(e.length===1){let s=e.charCodeAt(0);(o==="utf8"&&s<128||o==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let i;if(typeof e=="number")for(i=r;i<n;++i)this[i]=e;else{let s=f.isBuffer(e)?e:f.from(e,o),u=s.length;if(u===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-r;++i)this[i+r]=s[i%u]}return this};var nt={};function nn(t,e,r){nt[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(o){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:o,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}nn("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);nn("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);nn("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=qo(String(r)):typeof r=="bigint"&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=qo(o)),o+="n"),n+=` It must be ${e}. Received ${o}`,n},RangeError);function qo(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function rf(t,e,r){it(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&$t(e,t.length-(r+1))}function Ko(t,e,r,n,o,i){if(t>r||t<e){let s=typeof e=="bigint"?"n":"",u;throw i>3?e===0||e===BigInt(0)?u=`>= 0${s} and < 2${s} ** ${(i+1)*8}${s}`:u=`>= -(2${s} ** ${(i+1)*8-1}${s}) and < 2 ** ${(i+1)*8-1}${s}`:u=`>= ${e}${s} and <= ${r}${s}`,new nt.ERR_OUT_OF_RANGE("value",u,t)}rf(n,o,i)}function it(t,e){if(typeof t!="number")throw new nt.ERR_INVALID_ARG_TYPE(e,"number",t)}function $t(t,e,r){throw Math.floor(t)!==t?(it(t,r),new nt.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new nt.ERR_BUFFER_OUT_OF_BOUNDS:new nt.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var nf=/[^+/0-9A-Za-z-_]/g;function of(t){if(t=t.split("=")[0],t=t.trim().replace(nf,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function en(t,e){e=e||1/0;let r,n=t.length,o=null,i=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return i}function sf(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function af(t,e){let r,n,o,i=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,o=r%256,i.push(o),i.push(n);return i}function ei(t){return Qr.toByteArray(of(t))}function sr(t,e,r,n){let o;for(o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function be(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function on(t){return t!==t}var uf=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let o=0;o<16;++o)e[n+o]=t[r]+t[o]}return e}();function _e(t){return typeof BigInt>"u"?cf:t}function cf(){throw new Error("BigInt not supported")}});var si=S((Yh,ii)=>{a();var N=ii.exports={},Ee,xe;function sn(){throw new Error("setTimeout has not been defined")}function an(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Ee=setTimeout:Ee=sn}catch{Ee=sn}try{typeof clearTimeout=="function"?xe=clearTimeout:xe=an}catch{xe=an}})();function ri(t){if(Ee===setTimeout)return setTimeout(t,0);if((Ee===sn||!Ee)&&setTimeout)return Ee=setTimeout,setTimeout(t,0);try{return Ee(t,0)}catch{try{return Ee.call(null,t,0)}catch{return Ee.call(this,t,0)}}}function ff(t){if(xe===clearTimeout)return clearTimeout(t);if((xe===an||!xe)&&clearTimeout)return xe=clearTimeout,clearTimeout(t);try{return xe(t)}catch{try{return xe.call(null,t)}catch{return xe.call(this,t)}}}var Te=[],at=!1,Je,ar=-1;function lf(){!at||!Je||(at=!1,Je.length?Te=Je.concat(Te):ar=-1,Te.length&&ni())}function ni(){if(!at){var t=ri(lf);at=!0;for(var e=Te.length;e;){for(Je=Te,Te=[];++ar<e;)Je&&Je[ar].run();ar=-1,e=Te.length}Je=null,at=!1,ff(t)}}N.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Te.push(new oi(t,e)),Te.length===1&&!at&&ri(ni)};function oi(t,e){this.fun=t,this.array=e}oi.prototype.run=function(){this.fun.apply(null,this.array)};N.title="browser";N.browser=!0;N.env={};N.argv=[];N.version="";N.versions={};function Ie(){}N.on=Ie;N.addListener=Ie;N.once=Ie;N.off=Ie;N.removeListener=Ie;N.removeAllListeners=Ie;N.emit=Ie;N.prependListener=Ie;N.prependOnceListener=Ie;N.listeners=function(t){return[]};N.binding=function(t){throw new Error("process.binding is not supported")};N.cwd=function(){return"/"};N.chdir=function(t){throw new Error("process.chdir is not supported")};N.umask=function(){return 0}});var m,p,d,a=F(()=>{"use strict";m=ti().Buffer,p=si(),d=globalThis;globalThis&&globalThis.process&&globalThis.process.env&&(globalThis.process.env.LIBP2P_FORCE_PNET=!1)});function ci(t,e,r){e=e||[],r=r||0;for(var n=r;t>=mf;)e[r++]=t&255|ai,t/=128;for(;t&pf;)e[r++]=t&255|ai,t>>>=7;return e[r]=t|0,ci.bytes=r-n+1,e}function un(t,n){var r=0,n=n||0,o=0,i=n,s,u=t.length;do{if(i>=u)throw un.bytes=0,new RangeError("Could not decode varint");s=t[i++],r+=o<28?(s&ui)<<o:(s&ui)*Math.pow(2,o),o+=7}while(s>=wf);return un.bytes=i-n,r}var df,ai,hf,pf,mf,yf,wf,ui,gf,Df,bf,Ef,xf,Cf,Bf,Af,Tf,If,Sf,Uf,Lt,fi=F(()=>{a();df=ci,ai=128,hf=127,pf=~hf,mf=Math.pow(2,31);yf=un,wf=128,ui=127;gf=Math.pow(2,7),Df=Math.pow(2,14),bf=Math.pow(2,21),Ef=Math.pow(2,28),xf=Math.pow(2,35),Cf=Math.pow(2,42),Bf=Math.pow(2,49),Af=Math.pow(2,56),Tf=Math.pow(2,63),If=function(t){return t<gf?1:t<Df?2:t<bf?3:t<Ef?4:t<xf?5:t<Cf?6:t<Bf?7:t<Af?8:t<Tf?9:10},Sf={encode:df,decode:yf,encodingLength:If},Uf=Sf,Lt=Uf});var Pt,ut,ct,cr=F(()=>{a();fi();Pt=t=>[Lt.decode(t),Lt.decode.bytes],ut=(t,e,r=0)=>(Lt.encode(t,e,r),e),ct=t=>Lt.encodingLength(t)});var ep,li,Se,di,hi,Ne=F(()=>{a();ep=new Uint8Array(0),li=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Se=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},di=t=>new TextEncoder().encode(t),hi=t=>new TextDecoder().decode(t)});var Ue={};M(Ue,{Digest:()=>Xe,create:()=>$e,decode:()=>ft,equals:()=>fn});var $e,ft,fn,Xe,Le=F(()=>{a();Ne();cr();$e=(t,e)=>{let r=e.byteLength,n=ct(t),o=n+ct(r),i=new Uint8Array(o+r);return ut(t,i,0),ut(r,i,n),i.set(e,o),new Xe(t,r,e,i)},ft=t=>{let e=Se(t),[r,n]=Pt(e),[o,i]=Pt(e.subarray(n)),s=e.subarray(n+i);if(s.byteLength!==o)throw new Error("Incorrect length");return new Xe(r,o,s,e)},fn=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&li(t.bytes,e.bytes),Xe=class{constructor(e,r,n,o){this.code=e,this.size=r,this.digest=n,this.bytes=o}}});function Ff(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<t.length;o++){var i=t.charAt(o),s=i.charCodeAt(0);if(r[s]!==255)throw new TypeError(i+" is ambiguous");r[s]=o}var u=t.length,h=t.charAt(0),w=Math.log(u)/Math.log(256),c=Math.log(256)/Math.log(u);function g(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var v=0,$=0,P=0,W=I.length;P!==W&&I[P]===0;)P++,v++;for(var ie=(W-P)*c+1>>>0,q=new Uint8Array(ie);P!==W;){for(var he=I[P],se=0,K=ie-1;(he!==0||se<$)&&K!==-1;K--,se++)he+=256*q[K]>>>0,q[K]=he%u>>>0,he=he/u>>>0;if(he!==0)throw new Error("Non-zero carry");$=se,P++}for(var ae=ie-$;ae!==ie&&q[ae]===0;)ae++;for(var rt=h.repeat(v);ae<ie;++ae)rt+=t.charAt(q[ae]);return rt}function B(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;var v=0;if(I[v]!==" "){for(var $=0,P=0;I[v]===h;)$++,v++;for(var W=(I.length-v)*w+1>>>0,ie=new Uint8Array(W);I[v];){var q=r[I.charCodeAt(v)];if(q===255)return;for(var he=0,se=W-1;(q!==0||he<P)&&se!==-1;se--,he++)q+=u*ie[se]>>>0,ie[se]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");P=he,v++}if(I[v]!==" "){for(var K=W-P;K!==W&&ie[K]===0;)K++;for(var ae=new Uint8Array($+(W-K)),rt=$;K!==W;)ae[rt++]=ie[K++];return ae}}}function k(I){var v=B(I);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:B,decode:k}}var vf,kf,pi,mi=F(()=>{a();vf=Ff,kf=vf,pi=kf});var ln,dn,hn,yi,pn,lt,Pe,_f,Nf,_,pe=F(()=>{a();mi();Ne();ln=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},dn=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return yi(this,e)}},hn=class{constructor(e){this.decoders=e}or(e){return yi(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},yi=(t,e)=>new hn({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),pn=class{constructor(e,r,n,o){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new ln(e,r,n),this.decoder=new dn(e,r,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},lt=({name:t,prefix:e,encode:r,decode:n})=>new pn(t,e,r,n),Pe=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:o}=pi(r,e);return lt({prefix:t,name:e,encode:n,decode:i=>Se(o(i))})},_f=(t,e,r,n)=>{let o={};for(let c=0;c<e.length;++c)o[e[c]]=c;let i=t.length;for(;t[i-1]==="=";)--i;let s=new Uint8Array(i*r/8|0),u=0,h=0,w=0;for(let c=0;c<i;++c){let g=o[t[c]];if(g===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<r|g,u+=r,u>=8&&(u-=8,s[w++]=255&h>>u)}if(u>=r||255&h<<8-u)throw new SyntaxError("Unexpected end of data");return s},Nf=(t,e,r)=>{let n=e[e.length-1]==="=",o=(1<<r)-1,i="",s=0,u=0;for(let h=0;h<t.length;++h)for(u=u<<8|t[h],s+=8;s>r;)s-=r,i+=e[o&u>>s];if(s&&(i+=e[o&u<<r-s]),n)for(;i.length*r&7;)i+="=";return i},_=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>lt({prefix:e,name:t,encode(o){return Nf(o,n,r)},decode(o){return _f(o,n,r,t)}})});var dt={};M(dt,{base58btc:()=>Y,base58flickr:()=>$f});var Y,$f,Re=F(()=>{a();pe();Y=Pe({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),$f=Pe({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var Rt={};M(Rt,{base32:()=>Me,base32hex:()=>Mf,base32hexpad:()=>zf,base32hexpadupper:()=>qf,base32hexupper:()=>Of,base32pad:()=>Pf,base32padupper:()=>Rf,base32upper:()=>Lf,base32z:()=>Hf});var Me,Lf,Pf,Rf,Mf,Of,zf,qf,Hf,ht=F(()=>{a();pe();Me=_({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Lf=_({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Pf=_({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Rf=_({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Mf=_({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Of=_({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),zf=_({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),qf=_({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Hf=_({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var dr={};M(dr,{CID:()=>x});var x,jf,Vf,Gf,Mt,Wf,wi,gi,fr,lr,Jf,Xf,Yf,Q=F(()=>{a();cr();Le();Re();ht();Ne();x=class{constructor(e,r,n,o){this.code=r,this.version=e,this.multihash=n,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:lr,byteLength:lr,code:fr,version:fr,multihash:fr,bytes:fr,_baseCache:lr,asCID:lr})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==Mt)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Wf)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return x.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=$e(e,r);return x.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&fn(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:o}=this;switch(n){case 0:return Vf(r,o,e||Y.encoder);default:return Gf(r,o,e||Me.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Xf(/^0\.0/,Yf),!!(e&&(e[gi]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof x)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:o,bytes:i}=e;return new x(r,n,o,i||wi(r,n,o.bytes))}else if(e!=null&&e[gi]===!0){let{version:r,multihash:n,code:o}=e,i=ft(n);return x.create(r,o,i)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==Mt)throw new Error(`Version 0 CID must use dag-pb (code: ${Mt}) block encoding`);return new x(e,r,n,n.bytes)}case 1:{let o=wi(e,r,n.bytes);return new x(e,r,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return x.create(0,Mt,e)}static createV1(e,r){return x.create(1,e,r)}static decode(e){let[r,n]=x.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=x.inspectBytes(e),n=r.size-r.multihashSize,o=Se(e.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let i=o.subarray(r.multihashSize-r.digestSize),s=new Xe(r.multihashCode,r.digestSize,i,o);return[r.version===0?x.createV0(s):x.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[g,B]=Pt(e.subarray(r));return r+=B,g},o=n(),i=Mt;if(o===18?(o=0,r=0):o===1&&(i=n()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let s=r,u=n(),h=n(),w=r+h,c=w-s;return{version:o,codec:i,multihashCode:u,digestSize:h,multihashSize:c,size:w}}static parse(e,r){let[n,o]=jf(e,r),i=x.decode(o);return i._baseCache.set(n,e),i}},jf=(t,e)=>{switch(t[0]){case"Q":{let r=e||Y;return[Y.prefix,r.decode(`${Y.prefix}${t}`)]}case Y.prefix:{let r=e||Y;return[Y.prefix,r.decode(t)]}case Me.prefix:{let r=e||Me;return[Me.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Vf=(t,e,r)=>{let{prefix:n}=r;if(n!==Y.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=e.get(n);if(o==null){let i=r.encode(t).slice(1);return e.set(n,i),i}else return o},Gf=(t,e,r)=>{let{prefix:n}=r,o=e.get(n);if(o==null){let i=r.encode(t);return e.set(n,i),i}else return o},Mt=112,Wf=18,wi=(t,e,r)=>{let n=ct(t),o=n+ct(e),i=new Uint8Array(o+r.byteLength);return ut(t,i,0),ut(e,i,n),i.set(r,o),i},gi=Symbol.for("@ipld/js-cid/CID"),fr={writable:!1,configurable:!1,enumerable:!0},lr={writable:!1,enumerable:!1,configurable:!1},Jf="0.0.0-dev",Xf=(t,e)=>{if(t.test(Jf))console.warn(e);else throw new Error(e)},Yf=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var yn,mn,wn=F(()=>{a();Le();yn=({name:t,code:e,encode:r})=>new mn(t,e,r),mn=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?$e(this.code,r):r.then(n=>$e(this.code,n))}else throw Error("Unknown type, must be binary type")}}});var gn=F(()=>{a();Q();cr();Ne();wn();Le()});var Ci=S((mp,xi)=>{a();xi.exports=xn;var Ei=128,Zf=127,Kf=~Zf,el=Math.pow(2,31);function xn(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw xn.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var n=r;t>=el;)e[r++]=t&255|Ei,t/=128;for(;t&Kf;)e[r++]=t&255|Ei,t>>>=7;return e[r]=t|0,xn.bytes=r-n+1,e}});var Ti=S((yp,Ai)=>{a();Ai.exports=Cn;var tl=128,Bi=127;function Cn(t,n){var r=0,n=n||0,o=0,i=n,s,u=t.length;do{if(i>=u||o>49)throw Cn.bytes=0,new RangeError("Could not decode varint");s=t[i++],r+=o<28?(s&Bi)<<o:(s&Bi)*Math.pow(2,o),o+=7}while(s>=tl);return Cn.bytes=i-n,r}});var Si=S((wp,Ii)=>{a();var rl=Math.pow(2,7),nl=Math.pow(2,14),ol=Math.pow(2,21),il=Math.pow(2,28),sl=Math.pow(2,35),al=Math.pow(2,42),ul=Math.pow(2,49),cl=Math.pow(2,56),fl=Math.pow(2,63);Ii.exports=function(t){return t<rl?1:t<nl?2:t<ol?3:t<il?4:t<sl?5:t<al?6:t<ul?7:t<cl?8:t<fl?9:10}});var pt=S((gp,Ui)=>{a();Ui.exports={encode:Ci(),decode:Ti(),encodingLength:Si()}});var Ws=S((vm,Gs)=>{"use strict";a();Gs.exports=function(){return Date.now()}});var Xs=S((km,Js)=>{"use strict";a();var Ur=Ws(),Pn=class{constructor(e,r,n){let o=this;this._started=Ur(),this._rescheduled=0,this._scheduled=r,this._args=n,this._triggered=!1,this._timerWrapper=()=>{o._rescheduled>0?(o._scheduled=o._rescheduled-(Ur()-o._started),o._schedule(o._scheduled)):(o._triggered=!0,e.apply(null,o._args))},this._timer=setTimeout(this._timerWrapper,r)}reschedule(e){e||(e=this._scheduled);let r=Ur();r+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=r,this._rescheduled=e)}_schedule(e){this._triggered=!1,this._started=Ur(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}clear(){clearTimeout(this._timer)}};function ed(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new Pn(arguments[0],arguments[1],t)}Js.exports=ed});var Zs=S((_m,Qs)=>{"use strict";a();var{AbortController:td}=globalThis,Ys=Xs(),Gt=class extends td{constructor(e){super(),this._ms=e,this._timer=Ys(()=>this.abort(),e),Object.setPrototypeOf(this,Gt.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=Ys(()=>this.abort(),this._ms)}};Qs.exports={TimeoutController:Gt}});var ea=S((Nm,Rn)=>{a();function Ks(t){let e=new globalThis.AbortController;function r(){e.abort();for(let n of t)!n||!n.removeEventListener||n.removeEventListener("abort",r)}for(let n of t)if(!(!n||!n.addEventListener)){if(n.aborted){r();break}n.addEventListener("abort",r)}return e.signal}Rn.exports=Ks;Rn.exports.anySignal=Ks});var sa=S((Om,ia)=>{a();var xt=1e3,Ct=xt*60,Bt=Ct*60,Ze=Bt*24,nd=Ze*7,od=Ze*365.25;ia.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return id(t);if(r==="number"&&isFinite(t))return e.long?ad(t):sd(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function id(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*od;case"weeks":case"week":case"w":return r*nd;case"days":case"day":case"d":return r*Ze;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Bt;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ct;case"seconds":case"second":case"secs":case"sec":case"s":return r*xt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function sd(t){var e=Math.abs(t);return e>=Ze?Math.round(t/Ze)+"d":e>=Bt?Math.round(t/Bt)+"h":e>=Ct?Math.round(t/Ct)+"m":e>=xt?Math.round(t/xt)+"s":t+"ms"}function ad(t){var e=Math.abs(t);return e>=Ze?Fr(t,e,Ze,"day"):e>=Bt?Fr(t,e,Bt,"hour"):e>=Ct?Fr(t,e,Ct,"minute"):e>=xt?Fr(t,e,xt,"second"):t+" ms"}function Fr(t,e,r,n){var o=e>=r*1.5;return Math.round(t/r)+" "+n+(o?"s":"")}});var ua=S((zm,aa)=>{a();function ud(t){r.debug=r,r.default=r,r.coerce=h,r.disable=i,r.enable=o,r.enabled=s,r.humanize=sa(),r.destroy=w,Object.keys(t).forEach(c=>{r[c]=t[c]}),r.names=[],r.skips=[],r.formatters={};function e(c){let g=0;for(let B=0;B<c.length;B++)g=(g<<5)-g+c.charCodeAt(B),g|=0;return r.colors[Math.abs(g)%r.colors.length]}r.selectColor=e;function r(c){let g,B=null,k,I;function v(...$){if(!v.enabled)return;let P=v,W=Number(new Date),ie=W-(g||W);P.diff=ie,P.prev=g,P.curr=W,g=W,$[0]=r.coerce($[0]),typeof $[0]!="string"&&$.unshift("%O");let q=0;$[0]=$[0].replace(/%([a-zA-Z%])/g,(se,K)=>{if(se==="%%")return"%";q++;let ae=r.formatters[K];if(typeof ae=="function"){let rt=$[q];se=ae.call(P,rt),$.splice(q,1),q--}return se}),r.formatArgs.call(P,$),(P.log||r.log).apply(P,$)}return v.namespace=c,v.useColors=r.useColors(),v.color=r.selectColor(c),v.extend=n,v.destroy=r.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>B!==null?B:(k!==r.namespaces&&(k=r.namespaces,I=r.enabled(c)),I),set:$=>{B=$}}),typeof r.init=="function"&&r.init(v),v}function n(c,g){let B=r(this.namespace+(typeof g>"u"?":":g)+c);return B.log=this.log,B}function o(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let g,B=(typeof c=="string"?c:"").split(/[\s,]+/),k=B.length;for(g=0;g<k;g++)!B[g]||(c=B[g].replace(/\*/g,".*?"),c[0]==="-"?r.skips.push(new RegExp("^"+c.slice(1)+"$")):r.names.push(new RegExp("^"+c+"$")))}function i(){let c=[...r.names.map(u),...r.skips.map(u).map(g=>"-"+g)].join(",");return r.enable(""),c}function s(c){if(c[c.length-1]==="*")return!0;let g,B;for(g=0,B=r.skips.length;g<B;g++)if(r.skips[g].test(c))return!1;for(g=0,B=r.names.length;g<B;g++)if(r.names[g].test(c))return!0;return!1}function u(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function h(c){return c instanceof Error?c.stack||c.message:c}function w(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}aa.exports=ud});var ca=S((oe,vr)=>{a();oe.formatArgs=fd;oe.save=ld;oe.load=dd;oe.useColors=cd;oe.storage=hd();oe.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();oe.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function cd(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function fd(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+vr.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),t.splice(n,0,e)}oe.log=console.debug||console.log||(()=>{});function ld(t){try{t?oe.storage.setItem("debug",t):oe.storage.removeItem("debug")}catch{}}function dd(){let t;try{t=oe.storage.getItem("debug")}catch{}return!t&&typeof p<"u"&&"env"in p&&(t=p.env.DEBUG),t}function hd(){try{return localStorage}catch{}}vr.exports=ua()(oe);var{formatters:pd}=vr.exports;pd.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var On={};M(On,{base64:()=>Mn,base64pad:()=>md,base64url:()=>yd,base64urlpad:()=>wd});var Mn,md,yd,wd,zn=F(()=>{a();pe();Mn=_({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),md=_({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),yd=_({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),wd=_({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var fa,qn=F(()=>{a();Ne();fa=85});var Jm,Xm,da,Hn=F(()=>{a();Jm=new TextEncoder,Xm=new TextDecoder,da=512});var wa=S((i0,ya)=>{"use strict";a();var bd=async t=>{for await(let e of t)return e};ya.exports=bd});var Da=S((s0,ga)=>{"use strict";a();var Ed=async t=>{let e;for await(let r of t)e=r;return e};ga.exports=Ed});var xa=S((a0,Ea)=>{"use strict";a();var ba="[a-fA-F\\d:]",je=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${ba})|(?<=${ba})(?=\\s|$))`:"",we="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",L="[a-fA-F\\d]{1,4}",_r=`
(?:
(?:${L}:){7}(?:${L}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${L}:){6}(?:${we}|:${L}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${L}:){5}(?::${we}|(?::${L}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${L}:){4}(?:(?::${L}){0,1}:${we}|(?::${L}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${L}:){3}(?:(?::${L}){0,2}:${we}|(?::${L}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${L}:){2}(?:(?::${L}){0,3}:${we}|(?::${L}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${L}:){1}(?:(?::${L}){0,4}:${we}|(?::${L}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${L}){0,5}:${we}|(?::${L}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),xd=new RegExp(`(?:^${we}$)|(?:^${_r}$)`),Cd=new RegExp(`^${we}$`),Bd=new RegExp(`^${_r}$`),Vn=t=>t&&t.exact?xd:new RegExp(`(?:${je(t)}${we}${je(t)})|(?:${je(t)}${_r}${je(t)})`,"g");Vn.v4=t=>t&&t.exact?Cd:new RegExp(`${je(t)}${we}${je(t)}`,"g");Vn.v6=t=>t&&t.exact?Bd:new RegExp(`${je(t)}${_r}${je(t)}`,"g");Ea.exports=Vn});var Ba=S((u0,Ca)=>{"use strict";a();var Gn=xa(),At=t=>Gn({exact:!0}).test(t);At.v4=t=>Gn.v4({exact:!0}).test(t);At.v6=t=>Gn.v6({exact:!0}).test(t);At.version=t=>At(t)?At.v4(t)?4:6:void 0;Ca.exports=At});var Wn={};M(Wn,{identity:()=>Ad});var Ad,Aa=F(()=>{a();pe();Ne();Ad=lt({prefix:"\0",name:"identity",encode:t=>hi(t),decode:t=>di(t)})});var Jn={};M(Jn,{base2:()=>Td});var Td,Ta=F(()=>{a();pe();Td=_({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var Xn={};M(Xn,{base8:()=>Id});var Id,Ia=F(()=>{a();pe();Id=_({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var Yn={};M(Yn,{base10:()=>Sd});var Sd,Sa=F(()=>{a();pe();Sd=Pe({prefix:"9",name:"base10",alphabet:"0123456789"})});var Qn={};M(Qn,{base16:()=>Ud,base16upper:()=>Fd});var Ud,Fd,Ua=F(()=>{a();pe();Ud=_({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Fd=_({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var Zn={};M(Zn,{base36:()=>vd,base36upper:()=>kd});var vd,kd,Fa=F(()=>{a();pe();vd=Pe({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),kd=Pe({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var Kn={};M(Kn,{base256emoji:()=>Pd});function $d(t){return t.reduce((e,r)=>(e+=_d[r],e),"")}function Ld(t){let e=[];for(let r of t){let n=Nd[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var va,_d,Nd,Pd,ka=F(()=>{a();pe();va=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),_d=va.reduce((t,e,r)=>(t[r]=e,t),[]),Nd=va.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);Pd=lt({prefix:"\u{1F680}",name:"base256emoji",encode:$d,decode:Ld})});var eo={};M(eo,{sha256:()=>Rd,sha512:()=>Md});var _a,Rd,Md,Na=F(()=>{a();wn();_a=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Rd=yn({name:"sha2-256",code:18,encode:_a("SHA-256")}),Md=yn({name:"sha2-512",code:19,encode:_a("SHA-512")})});var to={};M(to,{identity:()=>qd});var $a,Od,La,zd,qd,Pa=F(()=>{a();Ne();Le();$a=0,Od="identity",La=Se,zd=t=>$e($a,La(t)),qd={code:$a,name:Od,encode:La,digest:zd}});var ro,b0,Ra=F(()=>{a();Aa();Ta();Ia();Sa();Ua();ht();Fa();Re();zn();ka();Na();Pa();qn();Hn();gn();ro={...Wn,...Jn,...Xn,...Yn,...Qn,...Rt,...Zn,...dt,...On,...Kn},b0={...eo,...to}});function Nr(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}var no=F(()=>{a()});function Oa(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var Ma,oo,Hd,$r,io=F(()=>{a();Ra();no();Ma=Oa("utf8","u",t=>{let e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),oo=Oa("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=Nr(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Hd={utf8:Ma,"utf-8":Ma,hex:ro.base16,latin1:oo,ascii:oo,binary:oo,...ro},$r=Hd});var Tt={};M(Tt,{toString:()=>so});function so(t,e="utf8"){let r=$r[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var Ke=F(()=>{a();io()});var Va=S((I0,ja)=>{"use strict";a();var uo=Ba(),{toString:za}=(Ke(),R(Tt)),jd=uo,ao=uo.v4,qa=uo.v6,Ha=function(t,e,r){r=~~r;let n;if(ao(t))n=e||new Uint8Array(r+4),t.split(/\./g).map(function(o){n[r++]=parseInt(o,10)&255});else if(qa(t)){let o=t.split(":",8),i;for(i=0;i<o.length;i++){let s=ao(o[i]),u;s&&(u=Ha(o[i]),o[i]=za(u.slice(0,2),"base16")),u&&++i<8&&o.splice(i,0,za(u.slice(2,4),"base16"))}if(o[0]==="")for(;o.length<8;)o.unshift("0");else if(o[o.length-1]==="")for(;o.length<8;)o.push("0");else if(o.length<8){for(i=0;i<o.length&&o[i]!=="";i++);let s=[i,"1"];for(i=9-o.length;i>0;i--)s.push("0");o.splice.apply(o,s)}for(n=e||new Uint8Array(r+16),i=0;i<o.length;i++){let s=parseInt(o[i],16);n[r++]=s>>8&255,n[r++]=s&255}}if(!n)throw Error("Invalid ip address: "+t);return n},Vd=function(t,e,r){e=~~e,r=r||t.length-e;let n=[],o,i=new DataView(t.buffer);if(r===4){for(let s=0;s<r;s++)n.push(t[e+s]);o=n.join(".")}else if(r===16){for(let s=0;s<r;s+=2)n.push(i.getUint16(e+s).toString(16));o=n.join(":"),o=o.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),o=o.replace(/:{3,4}/,"::")}return o};ja.exports={isIP:jd,isV4:ao,isV6:qa,toBytes:Ha,toString:Vd}});var Lr=S((S0,Wa)=>{"use strict";a();function Z(t){if(typeof t=="number"){if(Z.codes[t])return Z.codes[t];throw new Error("no protocol with code: "+t)}else if(typeof t=="string"){if(Z.names[t])return Z.names[t];throw new Error("no protocol with name: "+t)}throw new Error("invalid protocol id type: "+t)}var de=-1;Z.lengthPrefixedVarSize=de;Z.V=de;Z.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,de,"ip6zone"],[53,de,"dns","resolvable"],[54,de,"dns4","resolvable"],[55,de,"dns6","resolvable"],[56,de,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,de,"unix",!1,"path"],[421,de,"ipfs"],[421,de,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,de,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,de,"memory"]];Z.names={};Z.codes={};Z.table.map(t=>{let e=Ga.apply(null,t);return Z.codes[e.code]=e,Z.names[e.name]=e,null});Z.object=Ga;function Ga(t,e,r,n,o){return{code:t,size:e,name:r,resolvable:Boolean(n),path:Boolean(o)}}Wa.exports=Z});var Ja={};M(Ja,{fromString:()=>co});function co(t,e="utf8"){let r=$r[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var fo=F(()=>{a();io()});var lo={};M(lo,{concat:()=>Gd});function Gd(t,e){e||(e=t.reduce((o,i)=>o+i.length,0));let r=Nr(e),n=0;for(let o of t)r.set(o,n),n+=o.length;return r}var ho=F(()=>{a();no()});var ru=S((v0,tu)=>{"use strict";a();var Pr=Va(),Qa=Lr(),{CID:Wd}=(Q(),R(dr)),{base32:Za}=(ht(),R(Rt)),{base58btc:Jd}=(Re(),R(dt)),Xd=(Le(),R(Ue)),It=pt(),{toString:Rr}=(Ke(),R(Tt)),{fromString:Ka}=(fo(),R(Ja)),{concat:Mr}=(ho(),R(lo));tu.exports=Wt;function Wt(t,e){return e instanceof Uint8Array?Wt.toString(t,e):Wt.toBytes(t,e)}Wt.toString=function(e,r){switch(Qa(e).code){case 4:case 41:return Yd(r);case 6:case 273:case 33:case 132:return eu(r).toString();case 53:case 54:case 55:case 56:case 400:case 777:return Zd(r);case 421:return eh(r);case 444:return Ya(r);case 445:return Ya(r);default:return Rr(r,"base16")}};Wt.toBytes=function(e,r){switch(Qa(e).code){case 4:return Xa(r);case 41:return Xa(r);case 6:case 273:case 33:case 132:return po(parseInt(r,10));case 53:case 54:case 55:case 56:case 400:case 777:return Qd(r);case 421:return Kd(r);case 444:return th(r);case 445:return rh(r);default:return Ka(r,"base16")}};function Xa(t){if(!Pr.isIP(t))throw new Error("invalid ip address");return Pr.toBytes(t)}function Yd(t){let e=Pr.toString(t);if(!e||!Pr.isIP(e))throw new Error("invalid ip address");return e}function po(t){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function eu(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function Qd(t){let e=Ka(t),r=Uint8Array.from(It.encode(e.length));return Mr([r,e],r.length+e.length)}function Zd(t){let e=It.decode(t);if(t=t.slice(It.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return Rr(t)}function Kd(t){let e;t[0]==="Q"||t[0]==="1"?e=Xd.decode(Jd.decode(`z${t}`)).bytes:e=Wd.parse(t).multihash.bytes;let r=Uint8Array.from(It.encode(e.length));return Mr([r,e],r.length+e.length)}function eh(t){let e=It.decode(t),r=t.slice(It.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return Rr(r,"base58btc")}function th(t){let e=t.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==16)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion address.");let r=Za.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=po(n);return Mr([r,o],r.length+o.length)}function rh(t){let e=t.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==56)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion3 address.");let r=Za.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=po(n);return Mr([r,o],r.length+o.length)}function Ya(t){let e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=Rr(e,"base32"),o=eu(r);return n+":"+o}});var pu=S((k0,hu)=>{"use strict";a();var ou=ru(),mo=Lr(),Jt=pt(),{concat:nu}=(ho(),R(lo)),{toString:nh}=(Ke(),R(Tt));hu.exports={stringToStringTuples:iu,stringTuplesToString:su,tuplesToStringTuples:uu,stringTuplesToTuples:au,bytesToTuples:yo,tuplesToBytes:cu,bytesToString:oh,stringToBytes:lu,fromString:ih,fromBytes:du,validateBytes:wo,isValidBytes:sh,cleanPath:Or,ParseError:go,protoFromTuple:Xt,sizeForAddr:fu};function iu(t){let e=[],r=t.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let o=r[n],i=mo(o);if(i.size===0){e.push([o]);continue}if(n++,n>=r.length)throw go("invalid address: "+t);if(i.path){e.push([o,Or(r.slice(n).join("/"))]);break}e.push([o,r[n]])}return e}function su(t){let e=[];return t.map(r=>{let n=Xt(r);return e.push(n.name),r.length>1&&e.push(r[1]),null}),Or(e.join("/"))}function au(t){return t.map(e=>{Array.isArray(e)||(e=[e]);let r=Xt(e);return e.length>1?[r.code,ou.toBytes(r.code,e[1])]:[r.code]})}function uu(t){return t.map(e=>{let r=Xt(e);return e[1]?[r.code,ou.toString(r.code,e[1])]:[r.code]})}function cu(t){return du(nu(t.map(e=>{let r=Xt(e),n=Uint8Array.from(Jt.encode(r.code));return e.length>1&&(n=nu([n,e[1]])),n})))}function fu(t,e){return t.size>0?t.size/8:t.size===0?0:Jt.decode(e)+Jt.decode.bytes}function yo(t){let e=[],r=0;for(;r<t.length;){let n=Jt.decode(t,r),o=Jt.decode.bytes,i=mo(n),s=fu(i,t.slice(r+o));if(s===0){e.push([n]),r+=o;continue}let u=t.slice(r+o,r+o+s);if(r+=s+o,r>t.length)throw go("Invalid address Uint8Array: "+nh(t,"base16"));e.push([n,u])}return e}function oh(t){let e=yo(t),r=uu(e);return su(r)}function lu(t){t=Or(t);let e=iu(t),r=au(e);return cu(r)}function ih(t){return lu(t)}function du(t){let e=wo(t);if(e)throw e;return Uint8Array.from(t)}function wo(t){try{yo(t)}catch(e){return e}}function sh(t){return wo(t)===void 0}function Or(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function go(t){return new Error("Error parsing address: "+t)}function Xt(t){return mo(t[0])}});var Yt=S((_0,yu)=>{"use strict";a();function mu(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function ah(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return mu(t,r)}catch{r.message=t.message,r.stack=t.stack;let o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(t)),mu(new o,r)}}yu.exports=ah});var wu={};M(wu,{equals:()=>uh});function uh(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var gu=F(()=>{a()});var bo=S((N0,Eu)=>{"use strict";a();var ge=pu(),St=Lr(),Du=pt(),{CID:ch}=(Q(),R(dr)),{base58btc:fh}=(Re(),R(dt)),lh=Yt(),dh=Symbol.for("nodejs.util.inspect.custom"),{toString:zr}=(Ke(),R(Tt)),{equals:hh}=(gu(),R(wu)),Do=new Map,bu=Symbol.for("@multiformats/js-multiaddr/multiaddr"),j=class{constructor(e){if(e==null&&(e=""),Object.defineProperty(this,bu,{value:!0}),e instanceof Uint8Array)this.bytes=ge.fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=ge.fromString(e)}else if(j.isMultiaddr(e))this.bytes=ge.fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return ge.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let e={},r=this.toString().split("/");return e.family=r[1]==="ip4"?4:6,e.host=r[2],e.transport=r[3],e.port=parseInt(r[4]),e}protos(){return this.protoCodes().map(e=>Object.assign({},St(e)))}protoCodes(){let e=[],r=this.bytes,n=0;for(;n<r.length;){let o=Du.decode(r,n),i=Du.decode.bytes,s=St(o);n+=ge.sizeForAddr(s,r.slice(n+i))+i,e.push(o)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return ge.bytesToTuples(this.bytes)}stringTuples(){let e=ge.bytesToTuples(this.bytes);return ge.tuplesToStringTuples(e)}encapsulate(e){return e=new j(e),new j(this.toString()+e.toString())}decapsulate(e){let r=e.toString(),n=this.toString(),o=n.lastIndexOf(r);if(o<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return new j(n.slice(0,o))}decapsulateCode(e){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new j(ge.tuplesToBytes(r.slice(0,n)));return this}getPeerId(){try{let r=this.stringTuples().filter(n=>n[0]===St.names.ipfs.code).pop();if(r&&r[1]){let n=r[1];return n[0]==="Q"||n[0]==="1"?zr(fh.decode(`z${n}`),"base58btc"):zr(ch.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(r=>!!St(r[0]).path)[0][1],e||(e=null)}catch{e=null}return e}equals(e){return hh(this.bytes,e.bytes)}async resolve(){let e=this.protos().find(o=>o.resolvable);if(!e)return[this];let r=Do.get(e.name);if(!r)throw lh(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this)).map(o=>new j(o))}nodeAddress(){let e=this.protoCodes(),r=this.protoNames(),n=this.toString().split("/").slice(1);if(n.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(e[0]!==4&&e[0]!==41&&e[0]!==54&&e[0]!==55)throw new Error(`no protocol with name: "'${r[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(n[2]!=="tcp"&&n[2]!=="udp")throw new Error(`no protocol with name: "'${r[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:e[0]===41||e[0]===55?6:4,address:n[1],port:parseInt(n[3])}}isThinWaistAddress(e){let r=(e||this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}static fromNodeAddress(e,r){if(!e)throw new Error("requires node address object");if(!r)throw new Error("requires transport protocol");let n;switch(e.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error(`Invalid addr family. Got '${e.family}' instead of 4 or 6`)}return new j("/"+[n,e.address,r,e.port].join("/"))}static isName(e){return j.isMultiaddr(e)?e.protos().some(r=>r.resolvable):!1}static isMultiaddr(e){return e instanceof j||Boolean(e&&e[bu])}[dh](){return"<Multiaddr "+zr(this.bytes,"base16")+" - "+ge.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+zr(this.bytes,"base16")+" - "+ge.bytesToString(this.bytes)+">"}};j.protocols=St;j.resolvers=Do;function ph(t){return new j(t)}Eu.exports={Multiaddr:j,multiaddr:ph,protocols:St,resolvers:Do}});var ku=S(($0,vu)=>{"use strict";a();var{Multiaddr:Eo}=bo(),Bu=E("dns4"),Au=E("dns6"),Tu=E("dnsaddr"),et=V(E("dns"),Tu,Bu,Au),Qt=V(E("ip4"),E("ip6")),_t=V(A(Qt,E("tcp")),A(et,E("tcp"))),xo=A(Qt,E("udp")),Iu=A(xo,E("utp")),Su=A(xo,E("quic")),Ft=V(A(_t,E("ws")),A(et,E("ws"))),vt=V(A(_t,E("wss")),A(et,E("wss"))),qr=V(A(_t,E("http")),A(Qt,E("http")),A(et,E("http"))),Hr=V(A(_t,E("https")),A(Qt,E("https")),A(et,E("https"))),Co=V(A(Ft,E("p2p-webrtc-star"),E("p2p")),A(vt,E("p2p-webrtc-star"),E("p2p")),A(Ft,E("p2p-webrtc-star")),A(vt,E("p2p-webrtc-star"))),mh=V(A(Ft,E("p2p-websocket-star"),E("p2p")),A(vt,E("p2p-websocket-star"),E("p2p")),A(Ft,E("p2p-websocket-star")),A(vt,E("p2p-websocket-star"))),Bo=V(A(qr,E("p2p-webrtc-direct"),E("p2p")),A(Hr,E("p2p-webrtc-direct"),E("p2p")),A(qr,E("p2p-webrtc-direct")),A(Hr,E("p2p-webrtc-direct"))),kt=V(Ft,vt,qr,Hr,Co,Bo,_t,Iu,Su,et),yh=V(A(kt,E("p2p-stardust"),E("p2p")),A(kt,E("p2p-stardust"))),Ve=V(A(kt,E("p2p")),Co,Bo,E("p2p")),xu=V(A(Ve,E("p2p-circuit"),Ve),A(Ve,E("p2p-circuit")),A(E("p2p-circuit"),Ve),A(kt,E("p2p-circuit")),A(E("p2p-circuit"),kt),E("p2p-circuit")),Uu=()=>V(A(xu,Uu),xu),Ut=Uu(),Cu=V(A(Ut,Ve,Ut),A(Ve,Ut),A(Ut,Ve),Ut,Ve);vu.exports={DNS:et,DNS4:Bu,DNS6:Au,DNSADDR:Tu,IP:Qt,TCP:_t,UDP:xo,QUIC:Su,UTP:Iu,HTTP:qr,HTTPS:Hr,WebSockets:Ft,WebSocketsSecure:vt,WebSocketStar:mh,WebRTCStar:Co,WebRTCDirect:Bo,Reliable:kt,Stardust:yh,Circuit:Ut,P2P:Cu,IPFS:Cu};function Fu(t){function e(r){if(!Eo.isMultiaddr(r))try{r=new Eo(r)}catch{return!1}let n=t(r.protoNames());return n===null?!1:n===!0||n===!1?n:n.length===0}return e}function A(...t){function e(r){if(r.length<t.length)return null;let n=r;return t.some(o=>(n=typeof o=="function"?o().partialMatch(r):o.partialMatch(r),Array.isArray(n)&&(r=n),n===null)),n}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:Fu(e),partialMatch:e}}function V(...t){function e(n){let o=null;return t.some(i=>{let s=typeof i=="function"?i().partialMatch(n):i.partialMatch(n);return s?(o=s,!0):!1}),o}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:Fu(e),partialMatch:e}}function E(t){let e=t;function r(o){let i;if(typeof o=="string"||o instanceof Uint8Array)try{i=new Eo(o)}catch{return!1}else i=o;let s=i.protoNames();return s.length===1&&s[0]===e}function n(o){return o.length===0?null:o[0]===e?o.slice(1):null}return{toString:function(){return e},matches:r,partialMatch:n}}});var To=S((L0,Nu)=>{"use strict";a();var wh=typeof navigator<"u"&&navigator.product==="ReactNative";function gh(){return wh?"http://localhost":d.location?d.location.protocol+"//"+d.location.host:""}var Zt=d.URL,_u=gh(),Ao=class{constructor(e="",r=_u){this.super=new Zt(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return Zt.createObjectURL(e)}static revokeObjectURL(e){Zt.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function Dh(t){if(typeof t=="string")return new Zt(t).toString();if(!(t instanceof Zt)){let e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",o=t.protocol?t.protocol+"//":"",i=t.host||"",s=t.hostname||"",u=t.search||(t.query?"?"+t.query:""),h=t.hash||"",w=t.pathname||"",c=t.path||w+u;return`${o}${e||r}${i||s+n}${c}${h}`}}Nu.exports={URLWithLegacySupport:Ao,URLSearchParams:d.URLSearchParams,defaultBase:_u,format:Dh}});var Pu=S((P0,Lu)=>{"use strict";a();var{URLWithLegacySupport:$u,format:bh}=To();Lu.exports=(t,e={},r={},n)=>{let o=e.protocol?e.protocol.replace(":",""):"http";o=(r[o]||n||o)+":";let i;try{i=new $u(t)}catch{i={}}let s=Object.assign({},e,{protocol:o||i.protocol,host:e.host||i.host});return new $u(t,bh(s)).toString()}});var Mu=S((R0,Ru)=>{"use strict";a();var{URLWithLegacySupport:Eh,format:xh,URLSearchParams:Ch,defaultBase:Bh}=To(),Ah=Pu();Ru.exports={URL:Eh,URLSearchParams:Ch,format:xh,relative:Ah,defaultBase:Bh}});var Ku=S((M0,Zu)=>{"use strict";a();var{base58btc:Th}=(Re(),R(dt)),{base32:Ih}=(ht(),R(Rt)),Sh=(Le(),R(Ue)),{Multiaddr:Ou}=bo(),Uh=ku(),{CID:Io}=(Q(),R(dr)),{URL:Fh}=Mu(),{toString:vh}=(Ke(),R(Tt)),So=/^https?:\/\/[^/]+\/(ip[fn]s)\/([^/?#]+)/,Nt=/^\/(ip[fn]s)\/([^/?#]+)/,Hu=1,ju=2,tr=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,Vu=1,Gu=2,kh=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function _h(t){let e=Uo(t);try{Sh.decode(Th.decode("z"+e))}catch{return!1}return!0}function Nh(t){try{Ih.decode(t)}catch{return!1}return!0}function Kt(t){try{return typeof t=="string"?Boolean(Io.parse(t)):t instanceof Uint8Array?Boolean(Io.decode(t)):Boolean(Io.asCID(t))}catch{return!1}}function Wu(t){if(!t)return!1;if(Ou.isMultiaddr(t))return!0;try{return new Ou(t),!0}catch{return!1}}function $h(t){return Wu(t)&&Uh.P2P.matches(t)}function er(t,e,r=Hu,n=ju){let o=Uo(t);if(!o)return!1;let i=o.match(e);if(!i||i[r]!=="ipfs")return!1;let s=i[n];return s&&e===tr&&(s=s.toLowerCase()),Kt(s)}function jr(t,e,r=Hu,n=ju){let o=Uo(t);if(!o)return!1;let i=o.match(e);if(!i||i[r]!=="ipns")return!1;let s=i[n];if(s&&e===tr){if(s=s.toLowerCase(),Kt(s))return!0;try{!s.includes(".")&&s.includes("-")&&(s=s.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));let{hostname:u}=new Fh(`http://${s}`);return kh.test(u)}catch{return!1}}return!0}function Ju(t){return typeof t=="string"}function Uo(t){return t instanceof Uint8Array?vh(t,"base58btc"):Ju(t)?t:!1}var Fo=t=>er(t,tr,Gu,Vu),vo=t=>jr(t,tr,Gu,Vu),Xu=t=>Fo(t)||vo(t),Yu=t=>er(t,So)||Fo(t),Qu=t=>jr(t,So)||vo(t),zu=t=>Yu(t)||Qu(t)||Xu(t),qu=t=>er(t,Nt)||jr(t,Nt);Zu.exports={multihash:_h,multiaddr:Wu,peerMultiaddr:$h,cid:Kt,base32cid:t=>Nh(t)&&Kt(t),ipfsSubdomain:Fo,ipnsSubdomain:vo,subdomain:Xu,subdomainGatewayPattern:tr,ipfsUrl:Yu,ipnsUrl:Qu,url:zu,pathGatewayPattern:So,ipfsPath:t=>er(t,Nt),ipnsPath:t=>jr(t,Nt),path:qu,pathPattern:Nt,urlOrPath:t=>zu(t)||qu(t),cidPath:t=>Ju(t)&&!Kt(t)&&er(`/ipfs/${t}`,Nt)}});var hc=S((Iy,dc)=>{"use strict";a();function zh(t){let[e,r]=t[Symbol.asyncIterator]?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:o=>{n.push(o)},next:()=>n.length?{done:!1,value:n.shift()}:e.next(),[r](){return this}}}dc.exports=zh});var mc=S((Sy,pc)=>{"use strict";a();var qh=async t=>{for await(let e of t);};pc.exports=qh});var wc=S((Uy,yc)=>{"use strict";a();var Hh=async function*(t,e){for await(let r of t)yield e(r)};yc.exports=Hh});a();a();Q();a();gn();var hr=({enumerable:t=!0,configurable:e=!1}={})=>({enumerable:t,configurable:e,writable:!1}),Dn=function*(t,e){if(t!=null&&!(t instanceof Uint8Array))for(let[r,n]of Object.entries(t)){let o=[...e,r];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(let[i,s]of n.entries()){let u=[...o,i],h=x.asCID(s);h?yield[u.join("/"),h]:typeof s=="object"&&(yield*Dn(s,u))}else{let i=x.asCID(n);i?yield[o.join("/"),i]:yield*Dn(n,o)}}},bn=function*(t,e){if(t!=null)for(let[r,n]of Object.entries(t)){let o=[...e,r];if(yield o.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!x.asCID(n))if(Array.isArray(n))for(let[i,s]of n.entries()){let u=[...o,i];yield u.join("/"),typeof s=="object"&&!x.asCID(s)&&(yield*bn(s,u))}else yield*bn(n,o)}},Qf=(t,e)=>{let r=t;for(let[n,o]of e.entries()){if(r=r[o],r==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(s=>`[${JSON.stringify(s)}]`).join("")}`);let i=x.asCID(r);if(i)return{value:i,remaining:e.slice(n+1).join("/")}}return{value:r}},En=class{constructor({cid:e,bytes:r,value:n}){if(!e||!r||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=r,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:hr(),bytes:hr(),value:hr(),asBlock:hr()})}links(){return Dn(this.value,[])}tree(){return bn(this.value,[])}get(e="/"){return Qf(this.value,e.split("/").filter(Boolean))}};var bi=({bytes:t,cid:e,value:r,codec:n})=>{let o=r!==void 0?r:n&&n.decode(t);if(o===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new En({cid:e,bytes:t,value:o})};a();Q();a();var Nn=J(pt(),1);a();a();a();a();var ll=["string","number","bigint","symbol"],dl=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Fi(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";let e=typeof t;if(ll.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(hl(t))return"Buffer";let r=pl(t);return r||"Object"}function hl(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function pl(t){let e=Object.prototype.toString.call(t).slice(8,-1);if(dl.includes(e))return e}a();var l=class{constructor(e,r,n){this.major=e,this.majorEncoded=e<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};l.uint=new l(0,"uint",!0);l.negint=new l(1,"negint",!0);l.bytes=new l(2,"bytes",!0);l.string=new l(3,"string",!0);l.array=new l(4,"array",!1);l.map=new l(5,"map",!1);l.tag=new l(6,"tag",!1);l.float=new l(7,"float",!0);l.false=new l(7,"false",!0);l.true=new l(7,"true",!0);l.null=new l(7,"null",!0);l.undefined=new l(7,"undefined",!0);l.break=new l(7,"break",!0);var b=class{constructor(e,r,n){this.type=e,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};a();a();var mt=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",ml=new TextDecoder,yl=new TextEncoder;function pr(t){return mt&&globalThis.Buffer.isBuffer(t)}function Bn(t){return t instanceof Uint8Array?pr(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}var Ni=mt?(t,e,r)=>r-e>64?globalThis.Buffer.from(t.subarray(e,r)).toString("utf8"):ki(t,e,r):(t,e,r)=>r-e>64?ml.decode(t.subarray(e,r)):ki(t,e,r),$i=mt?t=>t.length>64?globalThis.Buffer.from(t):vi(t):t=>t.length>64?yl.encode(t):vi(t),Ce=t=>Uint8Array.from(t),yt=mt?(t,e,r)=>pr(t)?new Uint8Array(t.subarray(e,r)):t.slice(e,r):(t,e,r)=>t.slice(e,r),Li=mt?(t,e)=>(t=t.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),Bn(globalThis.Buffer.concat(t,e))):(t,e)=>{let r=new Uint8Array(e),n=0;for(let o of t)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},Pi=mt?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function Ri(t,e){if(pr(t)&&pr(e))return t.compare(e);for(let r=0;r<t.length;r++)if(t[r]!==e[r])return t[r]<e[r]?-1:1;return 0}function vi(t,e=1/0){let r,n=t.length,o=null,i=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return i}function ki(t,e,r){let n=[];for(;e<r;){let o=t[e],i=null,s=o>239?4:o>223?3:o>191?2:1;if(e+s<=r){let u,h,w,c;switch(s){case 1:o<128&&(i=o);break;case 2:u=t[e+1],(u&192)===128&&(c=(o&31)<<6|u&63,c>127&&(i=c));break;case 3:u=t[e+1],h=t[e+2],(u&192)===128&&(h&192)===128&&(c=(o&15)<<12|(u&63)<<6|h&63,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:u=t[e+1],h=t[e+2],w=t[e+3],(u&192)===128&&(h&192)===128&&(w&192)===128&&(c=(o&15)<<18|(u&63)<<12|(h&63)<<6|w&63,c>65535&&c<1114112&&(i=c))}}i===null?(i=65533,s=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),e+=s}return wl(n)}var _i=4096;function wl(t){let e=t.length;if(e<=_i)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=_i));return r}var gl=256,Ot=class{constructor(e=gl){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let o=r.length-(this.maxCursor-this.cursor)-1;r.set(e,o)}else{if(r){let o=r.length-(this.maxCursor-this.cursor)-1;o<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,o),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=Pi(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=yt(n,0,this.cursor)}else r=Li(this.chunks,this.cursor);return e&&this.reset(),r}};a();var C="CBOR decode error:",An="CBOR encode error:",zt=[];zt[23]=1;zt[24]=2;zt[25]=3;zt[26]=5;zt[27]=9;function Fe(t,e,r){if(t.length-e<r)throw new Error(`${C} not enough data for type`)}a();a();var z=[24,256,65536,4294967296,BigInt("18446744073709551616")];function ee(t,e,r){Fe(t,e,1);let n=t[e];if(r.strict===!0&&n<z[0])throw new Error(`${C} integer encoded in more bytes than necessary (strict decode)`);return n}function te(t,e,r){Fe(t,e,2);let n=t[e]<<8|t[e+1];if(r.strict===!0&&n<z[1])throw new Error(`${C} integer encoded in more bytes than necessary (strict decode)`);return n}function re(t,e,r){Fe(t,e,4);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(r.strict===!0&&n<z[2])throw new Error(`${C} integer encoded in more bytes than necessary (strict decode)`);return n}function ne(t,e,r){Fe(t,e,8);let n=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],o=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],i=(BigInt(n)<<BigInt(32))+BigInt(o);if(r.strict===!0&&i<z[3])throw new Error(`${C} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(r.allowBigInt===!0)return i;throw new Error(`${C} integers outside of the safe integer range are not supported`)}function Mi(t,e,r,n){return new b(l.uint,ee(t,e+1,n),2)}function Oi(t,e,r,n){return new b(l.uint,te(t,e+1,n),3)}function zi(t,e,r,n){return new b(l.uint,re(t,e+1,n),5)}function qi(t,e,r,n){return new b(l.uint,ne(t,e+1,n),9)}function ce(t,e){return H(t,0,e.value)}function H(t,e,r){if(r<z[0]){let n=Number(r);t.push([e|n])}else if(r<z[1]){let n=Number(r);t.push([e|24,n])}else if(r<z[2]){let n=Number(r);t.push([e|25,n>>>8,n&255])}else if(r<z[3]){let n=Number(r);t.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<z[4]){let o=[e|27,0,0,0,0,0,0,0],i=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=i&255,i=i>>8,o[7]=i&255,i=i>>8,o[6]=i&255,i=i>>8,o[5]=i&255,o[4]=s&255,s=s>>8,o[3]=s&255,s=s>>8,o[2]=s&255,s=s>>8,o[1]=s&255,t.push(o)}else throw new Error(`${C} encountered BigInt larger than allowable range`)}}ce.encodedSize=function(e){return H.encodedSize(e.value)};H.encodedSize=function(e){return e<z[0]?1:e<z[1]?2:e<z[2]?3:e<z[3]?5:9};ce.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0};a();function Hi(t,e,r,n){return new b(l.negint,-1-ee(t,e+1,n),2)}function ji(t,e,r,n){return new b(l.negint,-1-te(t,e+1,n),3)}function Vi(t,e,r,n){return new b(l.negint,-1-re(t,e+1,n),5)}var Tn=BigInt(-1),Gi=BigInt(1);function Wi(t,e,r,n){let o=ne(t,e+1,n);if(typeof o!="bigint"){let i=-1-o;if(i>=Number.MIN_SAFE_INTEGER)return new b(l.negint,i,9)}if(n.allowBigInt!==!0)throw new Error(`${C} integers outside of the safe integer range are not supported`);return new b(l.negint,Tn-BigInt(o),9)}function mr(t,e){let r=e.value,n=typeof r=="bigint"?r*Tn-Gi:r*-1-1;H(t,e.type.majorEncoded,n)}mr.encodedSize=function(e){let r=e.value,n=typeof r=="bigint"?r*Tn-Gi:r*-1-1;return n<z[0]?1:n<z[1]?2:n<z[2]?3:n<z[3]?5:9};mr.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0};a();function qt(t,e,r,n){Fe(t,e,r+n);let o=yt(t,e+r,e+r+n);return new b(l.bytes,o,r+n)}function Ji(t,e,r,n){return qt(t,e,1,r)}function Xi(t,e,r,n){return qt(t,e,2,ee(t,e+1,n))}function Yi(t,e,r,n){return qt(t,e,3,te(t,e+1,n))}function Qi(t,e,r,n){return qt(t,e,5,re(t,e+1,n))}function Zi(t,e,r,n){let o=ne(t,e+1,n);if(typeof o=="bigint")throw new Error(`${C} 64-bit integer bytes lengths not supported`);return qt(t,e,9,o)}function yr(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===l.string?$i(t.value):t.value),t.encodedBytes}function wt(t,e){let r=yr(e);H(t,e.type.majorEncoded,r.length),t.push(r)}wt.encodedSize=function(e){let r=yr(e);return H.encodedSize(r.length)+r.length};wt.compareTokens=function(e,r){return bl(yr(e),yr(r))};function bl(t,e){return t.length<e.length?-1:t.length>e.length?1:Ri(t,e)}a();function Ht(t,e,r,n,o){let i=r+n;Fe(t,e,i);let s=new b(l.string,Ni(t,e+r,e+i),i);return o.retainStringBytes===!0&&(s.byteValue=yt(t,e+r,e+i)),s}function Ki(t,e,r,n){return Ht(t,e,1,r,n)}function es(t,e,r,n){return Ht(t,e,2,ee(t,e+1,n),n)}function ts(t,e,r,n){return Ht(t,e,3,te(t,e+1,n),n)}function rs(t,e,r,n){return Ht(t,e,5,re(t,e+1,n),n)}function ns(t,e,r,n){let o=ne(t,e+1,n);if(typeof o=="bigint")throw new Error(`${C} 64-bit integer string lengths not supported`);return Ht(t,e,9,o,n)}var os=wt;a();function gt(t,e,r,n){return new b(l.array,n,r)}function is(t,e,r,n){return gt(t,e,1,r)}function ss(t,e,r,n){return gt(t,e,2,ee(t,e+1,n))}function as(t,e,r,n){return gt(t,e,3,te(t,e+1,n))}function us(t,e,r,n){return gt(t,e,5,re(t,e+1,n))}function cs(t,e,r,n){let o=ne(t,e+1,n);if(typeof o=="bigint")throw new Error(`${C} 64-bit integer array lengths not supported`);return gt(t,e,9,o)}function fs(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${C} indefinite length items not allowed`);return gt(t,e,1,1/0)}function wr(t,e){H(t,l.array.majorEncoded,e.value)}wr.compareTokens=ce.compareTokens;wr.encodedSize=function(e){return H.encodedSize(e.value)};a();function Dt(t,e,r,n){return new b(l.map,n,r)}function ls(t,e,r,n){return Dt(t,e,1,r)}function ds(t,e,r,n){return Dt(t,e,2,ee(t,e+1,n))}function hs(t,e,r,n){return Dt(t,e,3,te(t,e+1,n))}function ps(t,e,r,n){return Dt(t,e,5,re(t,e+1,n))}function ms(t,e,r,n){let o=ne(t,e+1,n);if(typeof o=="bigint")throw new Error(`${C} 64-bit integer map lengths not supported`);return Dt(t,e,9,o)}function ys(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${C} indefinite length items not allowed`);return Dt(t,e,1,1/0)}function gr(t,e){H(t,l.map.majorEncoded,e.value)}gr.compareTokens=ce.compareTokens;gr.encodedSize=function(e){return H.encodedSize(e.value)};a();function ws(t,e,r,n){return new b(l.tag,r,1)}function gs(t,e,r,n){return new b(l.tag,ee(t,e+1,n),2)}function Ds(t,e,r,n){return new b(l.tag,te(t,e+1,n),3)}function bs(t,e,r,n){return new b(l.tag,re(t,e+1,n),5)}function Es(t,e,r,n){return new b(l.tag,ne(t,e+1,n),9)}function Dr(t,e){H(t,l.tag.majorEncoded,e.value)}Dr.compareTokens=ce.compareTokens;Dr.encodedSize=function(e){return H.encodedSize(e.value)};a();var Tl=20,Il=21,Sl=22,Ul=23;function xs(t,e,r,n){if(n.allowUndefined===!1)throw new Error(`${C} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new b(l.null,null,1):new b(l.undefined,void 0,1)}function Cs(t,e,r,n){if(n.allowIndefinite===!1)throw new Error(`${C} indefinite length items not allowed`);return new b(l.break,void 0,1)}function In(t,e,r){if(r){if(r.allowNaN===!1&&Number.isNaN(t))throw new Error(`${C} NaN values are not supported`);if(r.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${C} Infinity values are not supported`)}return new b(l.float,t,e)}function Bs(t,e,r,n){return In(Sn(t,e+1),3,n)}function As(t,e,r,n){return In(Un(t,e+1),5,n)}function Ts(t,e,r,n){return In(Fs(t,e+1),9,n)}function br(t,e,r){let n=e.value;if(n===!1)t.push([l.float.majorEncoded|Tl]);else if(n===!0)t.push([l.float.majorEncoded|Il]);else if(n===null)t.push([l.float.majorEncoded|Sl]);else if(n===void 0)t.push([l.float.majorEncoded|Ul]);else{let o,i=!1;(!r||r.float64!==!0)&&(Ss(n),o=Sn(me,1),n===o||Number.isNaN(n)?(me[0]=249,t.push(me.slice(0,3)),i=!0):(Us(n),o=Un(me,1),n===o&&(me[0]=250,t.push(me.slice(0,5)),i=!0))),i||(Fl(n),o=Fs(me,1),me[0]=251,t.push(me.slice(0,9)))}}br.encodedSize=function(e,r){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){Ss(n);let o=Sn(me,1);if(n===o||Number.isNaN(n))return 3;if(Us(n),o=Un(me,1),n===o)return 5}return 9};var Is=new ArrayBuffer(9),fe=new DataView(Is,1),me=new Uint8Array(Is,0);function Ss(t){if(t===1/0)fe.setUint16(0,31744,!1);else if(t===-1/0)fe.setUint16(0,64512,!1);else if(Number.isNaN(t))fe.setUint16(0,32256,!1);else{fe.setFloat32(0,t);let e=fe.getUint32(0),r=(e&2139095040)>>23,n=e&8388607;if(r===255)fe.setUint16(0,31744,!1);else if(r===0)fe.setUint16(0,(t&2147483648)>>16|n>>13,!1);else{let o=r-127;o<-24?fe.setUint16(0,0):o<-14?fe.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):fe.setUint16(0,(e&2147483648)>>16|o+15<<10|n>>13,!1)}}}function Sn(t,e){if(t.length-e<2)throw new Error(`${C} not enough data for float16`);let r=(t[e]<<8)+t[e+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,o=r&1023,i;return n===0?i=o*2**-24:n!==31?i=(o+1024)*2**(n-25):i=o===0?1/0:NaN,r&32768?-i:i}function Us(t){fe.setFloat32(0,t,!1)}function Un(t,e){if(t.length-e<4)throw new Error(`${C} not enough data for float32`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,4).getFloat32(0,!1)}function Fl(t){fe.setFloat64(0,t,!1)}function Fs(t,e){if(t.length-e<8)throw new Error(`${C} not enough data for float64`);let r=(t.byteOffset||0)+e;return new DataView(t.buffer,r,8).getFloat64(0,!1)}br.compareTokens=ce.compareTokens;function U(t,e,r){throw new Error(`${C} encountered invalid minor (${r}) for major ${t[e]>>>5}`)}function Er(t){return()=>{throw new Error(`${C} ${t}`)}}var D=[];for(let t=0;t<=23;t++)D[t]=U;D[24]=Mi;D[25]=Oi;D[26]=zi;D[27]=qi;D[28]=U;D[29]=U;D[30]=U;D[31]=U;for(let t=32;t<=55;t++)D[t]=U;D[56]=Hi;D[57]=ji;D[58]=Vi;D[59]=Wi;D[60]=U;D[61]=U;D[62]=U;D[63]=U;for(let t=64;t<=87;t++)D[t]=Ji;D[88]=Xi;D[89]=Yi;D[90]=Qi;D[91]=Zi;D[92]=U;D[93]=U;D[94]=U;D[95]=Er("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)D[t]=Ki;D[120]=es;D[121]=ts;D[122]=rs;D[123]=ns;D[124]=U;D[125]=U;D[126]=U;D[127]=Er("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)D[t]=is;D[152]=ss;D[153]=as;D[154]=us;D[155]=cs;D[156]=U;D[157]=U;D[158]=U;D[159]=fs;for(let t=160;t<=183;t++)D[t]=ls;D[184]=ds;D[185]=hs;D[186]=ps;D[187]=ms;D[188]=U;D[189]=U;D[190]=U;D[191]=ys;for(let t=192;t<=215;t++)D[t]=ws;D[216]=gs;D[217]=Ds;D[218]=bs;D[219]=Es;D[220]=U;D[221]=U;D[222]=U;D[223]=U;for(let t=224;t<=243;t++)D[t]=Er("simple values are not supported");D[244]=U;D[245]=U;D[246]=U;D[247]=xs;D[248]=Er("simple values are not supported");D[249]=Bs;D[250]=As;D[251]=Ts;D[252]=U;D[253]=U;D[254]=U;D[255]=Cs;var ye=[];for(let t=0;t<24;t++)ye[t]=new b(l.uint,t,1);for(let t=-1;t>=-24;t--)ye[31-t]=new b(l.negint,t,1);ye[64]=new b(l.bytes,new Uint8Array(0),1);ye[96]=new b(l.string,"",1);ye[128]=new b(l.array,0,1);ye[160]=new b(l.map,0,1);ye[244]=new b(l.false,!1,1);ye[245]=new b(l.true,!0,1);ye[246]=new b(l.null,null,1);function vs(t){switch(t.type){case l.false:return Ce([244]);case l.true:return Ce([245]);case l.null:return Ce([246]);case l.bytes:return t.value.length?void 0:Ce([64]);case l.string:return t.value===""?Ce([96]):void 0;case l.array:return t.value===0?Ce([128]):void 0;case l.map:return t.value===0?Ce([160]):void 0;case l.uint:return t.value<24?Ce([Number(t.value)]):void 0;case l.negint:if(t.value>=-24)return Ce([31-Number(t.value)])}}var kl={float64:!1,mapSorter:$l,quickEncodeToken:vs};function _l(){let t=[];return t[l.uint.major]=ce,t[l.negint.major]=mr,t[l.bytes.major]=wt,t[l.string.major]=os,t[l.array.major]=wr,t[l.map.major]=gr,t[l.tag.major]=Dr,t[l.float.major]=br,t}var ks=_l(),Fn=new Ot,bt=class{constructor(e,r){this.obj=e,this.parent=r}includes(e){let r=this;do if(r.obj===e)return!0;while(r=r.parent);return!1}static createCheck(e,r){if(e&&e.includes(r))throw new Error(`${An} object contains circular references`);return new bt(r,e)}},Oe={null:new b(l.null,null),undefined:new b(l.undefined,void 0),true:new b(l.true,!0),false:new b(l.false,!1),emptyArray:new b(l.array,0),emptyMap:new b(l.map,0)},ze={number(t,e,r,n){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new b(l.float,t):t>=0?new b(l.uint,t):new b(l.negint,t)},bigint(t,e,r,n){return t>=BigInt(0)?new b(l.uint,t):new b(l.negint,t)},Uint8Array(t,e,r,n){return new b(l.bytes,t)},string(t,e,r,n){return new b(l.string,t)},boolean(t,e,r,n){return t?Oe.true:Oe.false},null(t,e,r,n){return Oe.null},undefined(t,e,r,n){return Oe.undefined},ArrayBuffer(t,e,r,n){return new b(l.bytes,new Uint8Array(t))},DataView(t,e,r,n){return new b(l.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,r,n){if(!t.length)return r.addBreakTokens===!0?[Oe.emptyArray,new b(l.break)]:Oe.emptyArray;n=bt.createCheck(n,t);let o=[],i=0;for(let s of t)o[i++]=xr(s,r,n);return r.addBreakTokens?[new b(l.array,t.length),o,new b(l.break)]:[new b(l.array,t.length),o]},Object(t,e,r,n){let o=e!=="Object",i=o?t.keys():Object.keys(t),s=o?t.size:i.length;if(!s)return r.addBreakTokens===!0?[Oe.emptyMap,new b(l.break)]:Oe.emptyMap;n=bt.createCheck(n,t);let u=[],h=0;for(let w of i)u[h++]=[xr(w,r,n),xr(o?t.get(w):t[w],r,n)];return Nl(u,r),r.addBreakTokens?[new b(l.map,s),u,new b(l.break)]:[new b(l.map,s),u]}};ze.Map=ze.Object;ze.Buffer=ze.Uint8Array;for(let t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))ze[`${t}Array`]=ze.DataView;function xr(t,e={},r){let n=Fi(t),o=e&&e.typeEncoders&&e.typeEncoders[n]||ze[n];if(typeof o=="function"){let s=o(t,n,e,r);if(s!=null)return s}let i=ze[n];if(!i)throw new Error(`${An} unsupported type: ${n}`);return i(t,n,e,r)}function Nl(t,e){e.mapSorter&&t.sort(e.mapSorter)}function $l(t,e){let r=Array.isArray(t[0])?t[0][0]:t[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(r.type!==n.type)return r.type.compare(n.type);let o=r.type.major,i=ks[o].compareTokens(r,n);return i===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i}function _s(t,e,r,n){if(Array.isArray(e))for(let o of e)_s(t,o,r,n);else r[e.type.major](t,e,n)}function Ll(t,e,r){let n=xr(t,r);if(!Array.isArray(n)&&r.quickEncodeToken){let o=r.quickEncodeToken(n);if(o)return o;let i=e[n.type.major];if(i.encodedSize){let s=i.encodedSize(n,r),u=new Ot(s);if(i(u,n,r),u.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return Bn(u.chunks[0])}}return Fn.reset(),_s(Fn,n,e,r),Fn.toBytes(!0)}function vn(t,e){return e=Object.assign({},kl,e),Ll(t,ks,e)}a();var Pl={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},kn=class{constructor(e,r={}){this.pos=0,this.data=e,this.options=r}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],r=ye[e];if(r===void 0){let n=D[e];if(!n)throw new Error(`${C} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let o=e&31;r=n(this.data,this.pos,o,this.options)}return this.pos+=r.encodedLength,r}},jt=Symbol.for("DONE"),Cr=Symbol.for("BREAK");function Rl(t,e,r){let n=[];for(let o=0;o<t.value;o++){let i=Vt(e,r);if(i===Cr){if(t.value===1/0)break;throw new Error(`${C} got unexpected break to lengthed array`)}if(i===jt)throw new Error(`${C} found array but not enough entries (got ${o}, expected ${t.value})`);n[o]=i}return n}function Ml(t,e,r){let n=r.useMaps===!0,o=n?void 0:{},i=n?new Map:void 0;for(let s=0;s<t.value;s++){let u=Vt(e,r);if(u===Cr){if(t.value===1/0)break;throw new Error(`${C} got unexpected break to lengthed map`)}if(u===jt)throw new Error(`${C} found map but not enough entries (got ${s} [no key], expected ${t.value})`);if(n!==!0&&typeof u!="string")throw new Error(`${C} non-string keys not supported (got ${typeof u})`);let h=Vt(e,r);if(h===jt)throw new Error(`${C} found map but not enough entries (got ${s} [no value], expected ${t.value})`);n?i.set(u,h):o[u]=h}return n?i:o}function Vt(t,e){if(t.done())return jt;let r=t.next();if(r.type===l.break)return Cr;if(r.type.terminal)return r.value;if(r.type===l.array)return Rl(r,t,e);if(r.type===l.map)return Ml(r,t,e);if(r.type===l.tag){if(e.tags&&typeof e.tags[r.value]=="function"){let n=Vt(t,e);return e.tags[r.value](n)}throw new Error(`${C} tag not supported (${r.value})`)}throw new Error("unsupported")}function _n(t,e){if(!(t instanceof Uint8Array))throw new Error(`${C} data to decode must be a Uint8Array`);e=Object.assign({},Pl,e);let r=e.tokenizer||new kn(t,e),n=Vt(r,e);if(n===jt)throw new Error(`${C} did not find any content to decode`);if(n===Cr)throw new Error(`${C} got unexpected break`);if(!r.done())throw new Error(`${C} too many terminals, data makes no sense`);return n}Q();var Ns=42;function zl(t){if(t.asCID!==t)return null;let e=x.asCID(t);if(!e)return null;let r=new Uint8Array(e.bytes.byteLength+1);return r.set(e.bytes,1),[new b(l.tag,Ns),new b(l.bytes,r)]}function ql(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Hl(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var jl={float64:!0,typeEncoders:{Object:zl,undefined:ql,number:Hl}};function Vl(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return x.decode(t.subarray(1))}var $s={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};$s.tags[Ns]=Vl;var Ls=t=>vn(t,jl),Ps=t=>_n(t,$s);function $n(t){let e=Ls({version:1,roots:t}),r=Nn.default.encode(e.length),n=new Uint8Array(r.length+e.length);return n.set(r,0),n.set(e,r.length),n}function Rs(t){return{async setRoots(e){let r=$n(e);await t.write(r)},async writeBlock(e){let{cid:r,bytes:n}=e;await t.write(new Uint8Array(Nn.default.encode(r.bytes.length+n.length))),await t.write(r.bytes),n.length&&await t.write(n)},async close(){await t.end()}}}a();function Br(){}function Ms(){let t=[],e=null,r=Br,n=!1,o=null,i=Br,s=()=>(e||(e=new Promise(w=>{r=()=>{e=null,r=Br,w()}})),e),u={write(w){t.push(w);let c=s();return i(),c},async end(){n=!0;let w=s();i(),await w}},h={async next(){let w=t.shift();return w?(t.length===0&&r(),{done:!1,value:w}):n?(r(),{done:!0,value:void 0}):(o||(o=new Promise(c=>{i=()=>(o=null,i=Br,c(h.next()))})),o)}};return{writer:u,iterator:h}}a();var He=J(pt(),1);Q();Le();a();var qe={Null:t=>t===null,Int:t=>Number.isInteger(t),Float:t=>typeof t=="number"&&Number.isFinite(t),String:t=>typeof t=="string",Bool:t=>typeof t=="boolean",Bytes:t=>t instanceof Uint8Array,Link:t=>!qe.Null(t)&&typeof t=="object"&&t.asCID===t,List:t=>Array.isArray(t),Map:t=>!qe.Null(t)&&typeof t=="object"&&t.asCID!==t&&!qe.List(t)&&!qe.Bytes(t)},Et={Int:qe.Int,"CarHeader > version":t=>Et.Int(t),"CarHeader > roots (anon) > valueType (anon)":qe.Link,"CarHeader > roots (anon)":t=>qe.List(t)&&Array.prototype.every.call(t,Et["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":t=>Et["CarHeader > roots (anon)"](t),CarHeader:t=>{let e=t&&Object.keys(t);return qe.Map(t)&&["version"].every(r=>e.includes(r))&&Object.entries(t).every(([r,n])=>Et["CarHeader > "+r]&&Et["CarHeader > "+r](n))}},Os=Et.CarHeader;var Ln={SHA2_256:18,LENGTH:32,DAG_PB:112},zs=16+8+8+8;async function Ar(t){let e=await t.upTo(8);if(!e.length)throw new Error("Unexpected end of data");let r=He.default.decode(e);return t.seek(He.default.decode.bytes),r}async function Gl(t){let e=await t.exactly(zs),r=new DataView(e.buffer,e.byteOffset,e.byteLength),n=0,o={version:2,characteristics:[r.getBigUint64(n,!0),r.getBigUint64(n+=8,!0)],dataOffset:Number(r.getBigUint64(n+=8,!0)),dataSize:Number(r.getBigUint64(n+=8,!0)),indexOffset:Number(r.getBigUint64(n+=8,!0))};return t.seek(zs),o}async function Tr(t,e){let r=await Ar(t);if(r===0)throw new Error("Invalid CAR header (zero length)");let n=await t.exactly(r);t.seek(r);let o=Ps(n);if(!Os(o))throw new Error("Invalid CAR header format");if(o.version!==1&&o.version!==2||e!==void 0&&o.version!==e)throw new Error(`Invalid CAR version: ${o.version}${e!==void 0?` (expected ${e})`:""}`);let i=Array.isArray(o.roots);if(o.version===1&&!i||o.version===2&&i)throw new Error("Invalid CAR header format");if(o.version===1)return o;let s=await Gl(t);t.seek(s.dataOffset-t.pos);let u=await Tr(t,1);return Object.assign(u,s)}async function Wl(t){let e=await t.upTo(8);He.default.decode(e);let r=He.default.decode.bytes,n=He.default.decode(e.subarray(He.default.decode.bytes)),o=He.default.decode.bytes,i=r+o+n,s=await t.exactly(i);return t.seek(i),s}async function Jl(t){let e=await t.exactly(2);if(e[0]===Ln.SHA2_256&&e[1]===Ln.LENGTH){let s=await t.exactly(34);t.seek(34);let u=ft(s);return x.create(0,Ln.DAG_PB,u)}let r=await Ar(t);if(r!==1)throw new Error(`Unexpected CID version (${r})`);let n=await Ar(t),o=await Wl(t),i=ft(o);return x.create(r,n,i)}async function qs(t){let e=t.pos,r=await Ar(t);if(r===0)throw new Error("Invalid CAR section (zero length)");r+=t.pos-e;let n=await Jl(t),o=r-Number(t.pos-e);return{cid:n,length:r,blockLength:o}}async function Xl(t){let{cid:e,blockLength:r}=await qs(t),n=await t.exactly(r);return t.seek(r),{bytes:n,cid:e}}async function Yl(t){let e=t.pos,{cid:r,length:n,blockLength:o}=await qs(t),i={cid:r,length:n,blockLength:o,offset:e,blockOffset:t.pos};return t.seek(i.blockLength),i}function Hs(t){let e=(async()=>{let r=await Tr(t);if(r.version===2){let n=t.pos-r.dataOffset;t=Zl(t,r.dataSize-n)}return r})();return{header:()=>e,async*blocks(){for(await e;(await t.upTo(8)).length>0;)yield await Xl(t)},async*blocksIndex(){for(await e;(await t.upTo(8)).length>0;)yield await Yl(t)}}}function Ir(t){let e=0;return{async upTo(r){return t.subarray(e,e+Math.min(r,t.length-e))},async exactly(r){if(r>t.length-e)throw new Error("Unexpected end of data");return t.subarray(e,e+r)},seek(r){e+=r},get pos(){return e}}}function Ql(t){let e=0,r=0,n=0,o=new Uint8Array(0),i=async s=>{r=o.length-n;let u=[o.subarray(n)];for(;r<s;){let w=await t();if(w==null)break;r<0?w.length>r&&u.push(w.subarray(-r)):u.push(w),r+=w.length}o=new Uint8Array(u.reduce((w,c)=>w+c.length,0));let h=0;for(let w of u)o.set(w,h),h+=w.length;n=0};return{async upTo(s){return o.length-n<s&&await i(s),o.subarray(n,n+Math.min(o.length-n,s))},async exactly(s){if(o.length-n<s&&await i(s),o.length-n<s)throw new Error("Unexpected end of data");return o.subarray(n,n+s)},seek(s){e+=s,n+=s},get pos(){return e}}}function js(t){let e=t[Symbol.asyncIterator]();async function r(){let n=await e.next();return n.done?null:n.value}return Ql(r)}function Zl(t,e){let r=0;return{async upTo(n){let o=await t.upTo(n);return o.length+r>e&&(o=o.subarray(0,e-r)),o},async exactly(n){let o=await t.exactly(n);if(o.length+r>e)throw new Error("Unexpected end of data");return o},seek(n){r+=n,t.seek(n)},get pos(){return t.pos}}}var Qe=class{constructor(e,r){this._encoder=r,this._mutex=r.setRoots(e),this._ended=!1}async put(e){if(!(e.bytes instanceof Uint8Array)||!e.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");let r=x.asCID(e.cid);if(!r)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then(()=>this._encoder.writeBlock({cid:r,bytes:e.bytes})),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(e){e=Kl(e);let{encoder:r,iterator:n}=Vs(),o=new Qe(e,r),i=new Sr(n);return{writer:o,out:i}}static createAppender(){let{encoder:e,iterator:r}=Vs();e.setRoots=()=>Promise.resolve();let n=new Qe([],e),o=new Sr(r);return{writer:n,out:o}}static async updateRootsInBytes(e,r){let n=Ir(e);await Tr(n);let o=$n(r);if(Number(n.pos)!==o.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${n.pos} bytes, new header is ${o.length} bytes)`);return e.set(o,0),e}},Sr=class{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}};function Vs(){let t=Ms(),{writer:e,iterator:r}=t;return{encoder:Rs(e),iterator:r}}function Kl(t){if(t===void 0)return[];if(!Array.isArray(t)){let r=x.asCID(t);if(!r)throw new TypeError("roots must be a single CID or an array of CIDs");return[r]}let e=[];for(let r of t){let n=x.asCID(r);if(!n)throw new TypeError("roots must be a single CID or an array of CIDs");e.push(n)}return e}a();var na=J(Zs(),1),oa=J(ea(),1);a();var rd=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;T.nanosecond=T.ns=1/1e6;T.\u00B5s=T.\u03BCs=T.us=T.microsecond=1/1e3;T.millisecond=T.ms=T[""]=1;T.second=T.sec=T.s=T.ms*1e3;T.minute=T.min=T.m=T.s*60;T.hour=T.hr=T.h=T.m*60;T.day=T.d=T.h*24;T.week=T.wk=T.w=T.d*7;T.month=T.b=T.d*(365.25/12);T.year=T.yr=T.y=T.d*365.25;function T(t="",e="ms"){var r=null;return t=(t+"").replace(/(\d)[,_](\d)/g,"$1$2"),t.replace(rd,function(n,o,i){i=ta(i),i&&(r=(r||0)+parseFloat(o,10)*i)}),r&&r/(ta(e)||1)}function ta(t){return T[t]||T[t.toLowerCase().replace(/s$/,"")]}var ra=T;a();var ve=class extends Error{constructor(e="request timed out"){super(e),this.name="TimeoutError",this.code=ve.code}};ve.code="ERR_TIMEOUT";function le(t,e){return(...r)=>{let n=r[e??r.length-1];if(!n||!n.timeout)return t(...r);let o=typeof n.timeout=="string"?ra(n.timeout):n.timeout,i=new na.TimeoutController(o);n.signal=(0,oa.anySignal)([n.signal,i.signal]);let s=t(...r),u=new Promise((c,g)=>{i.signal.addEventListener("abort",()=>{g(new ve)})}),h=Date.now(),w=()=>{if(i.signal.aborted)throw new ve;if(Date.now()-h>o)throw i.abort(),new ve};return s[Symbol.asyncIterator]?async function*(){let c=s[Symbol.asyncIterator]();try{for(;;){let{value:g,done:B}=await Promise.race([c.next(),u]);if(B)break;w(),yield g}}catch(g){throw w(),g}finally{i.clear(),c.return&&c.return()}}():(async()=>{try{let c=await Promise.race([s,u]);return w(),c}catch(c){throw w(),c}finally{i.clear()}})()}}a();var Be=J(ca(),1);Re();ht();zn();Be.default.formatters.b=t=>t==null?"undefined":Y.baseEncode(t);Be.default.formatters.t=t=>t==null?"undefined":Me.baseEncode(t);Be.default.formatters.m=t=>t==null?"undefined":Mn.baseEncode(t);Be.default.formatters.p=t=>t==null?"undefined":t.toString();Be.default.formatters.c=t=>t==null?"undefined":t.toString();Be.default.formatters.k=t=>t==null?"undefined":t.toString();function kr(t){return Object.assign((0,Be.default)(t),{error:(0,Be.default)(`${t}:error`),trace:(0,Be.default)(`${t}:trace`)})}qn();Hn();a();Re();var jn=async({cid:t,load:e,seen:r})=>{r=r||new Set;let n=t.toString(Y);if(r.has(n))return;let o=await e(t);if(r.add(n),o!==null)for(let[,i]of o.links())await jn({cid:i,load:e,seen:r})};var pa=kr("ipfs:components:dag:import"),gd=[fa,da];function ma({repo:t,preload:e,codecs:r}){async function*n(o,i={}){i.preload!==!1&&e(o);let s=x.asCID(o);if(!s)throw new Error(`Unexpected error converting CID type: ${o}`);pa(`Exporting ${s} as car`);let{writer:u,out:h}=await Qe.create([s]),w=null;(async()=>{try{let c=Dd(t,u,{signal:i.signal,timeout:i.timeout},r);await jn({cid:s,load:c})}catch(c){w=c}finally{u.close()}})();for await(let c of h){if(w)break;yield c}if(w)throw w}return le(n)}function Dd(t,e,r,n){return async o=>{let i=await n.getCodec(o.code);if(!i)throw new Error(`Can't decode links in block with codec 0x${o.code.toString(16)} to form complete DAG`);let s=await t.blocks.get(o,r);return pa(`Adding block ${o} to car`),await e.put({cid:o,bytes:s}),gd.includes(o.code)?null:bi({bytes:s,cid:o,codec:i})}}a();var ic=J(wa(),1),sc=J(Da(),1);a();var Oh=J(Ku(),1);Q();a();a();a();var ec=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");Ke();fo();var ke="/",tc=new TextEncoder().encode(ke),Vr=tc[0],G=class{constructor(e,r){if(typeof e=="string")this._buf=co(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(r==null&&(r=!0),r&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Vr)throw new Error("Invalid key")}toString(e="utf8"){return so(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new G(e.join(ke))}static random(){return new G(ec().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new G(e):e.uint8Array?new G(e.uint8Array()):null}clean(){if((!this._buf||this._buf.byteLength===0)&&(this._buf=tc),this._buf[0]!==Vr){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Vr,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Vr;)this._buf=this._buf.subarray(0,-1)}less(e){let r=this.list(),n=e.list();for(let o=0;o<r.length;o++){if(n.length<o+1)return!1;let i=r[o],s=n[o];if(i<s)return!0;if(i>s)return!1}return r.length<n.length}reverse(){return G.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(ke).slice(1)}type(){return Lh(this.baseNamespace())}name(){return Ph(this.baseNamespace())}instance(e){return new G(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(ke)||(e+=ke),e+=this.type(),new G(e)}parent(){let e=this.list();return e.length===1?new G(ke):new G(e.slice(0,-1).join(ke))}child(e){return this.toString()===ke?e:e.toString()===ke?this:new G(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return G.withNamespaces([...this.namespaces(),...Rh(e.map(r=>r.namespaces()))])}};function Lh(t){let e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function Ph(t){let e=t.split(":");return e[e.length-1]}function Rh(t){return[].concat(...t)}var _o=J(Yt(),1);a();Q();var ko=J(Yt(),1),rc="/ipfs/";function Gr(t){if(t instanceof Uint8Array)try{t=x.decode(t)}catch(o){throw(0,ko.default)(o,"ERR_INVALID_CID")}let e=x.asCID(t);if(e)return{cid:e,path:void 0};t=t.toString(),t.startsWith(rc)&&(t=t.substring(rc.length));let r=t.split("/"),n;try{e=x.parse(r.shift()||"")}catch(o){throw(0,ko.default)(o,"ERR_INVALID_CID")}return r.length&&(n=`/${r.join("/")}`),{cid:e,path:n}}a();Q();a();var Y0=new TextDecoder;a();var Z0=new TextEncoder,K0=2**32,ey=2**31;a();Q();var ny=new TextEncoder;var nc=112;var Dy=new G("/local/filesroot");var oc=async function(t,e,r,n={}){let{cid:o,path:i}=Gr(r);i&&(n.path=i);let s=o,u=n.path||"";if(u.startsWith("/")&&(u=u.substring(1)),n.path)try{for await(let{value:h,remainderPath:w}of Wr(o,n.path,e,t,{signal:n.signal})){if(!x.asCID(h))break;u=w,s=h}}catch(h){throw h.message.startsWith("Object has no property")&&(h.message=`no link named "${u.split("/")[0]}" under ${s}`,h.code="ERR_NO_LINK"),h}return{cid:s,remainderPath:u||""}};var by=le(async(t,e)=>await t),Wr=async function*(t,e,r,n,o){let i=async w=>{let c=await r.getCodec(w.code),g=await n.blocks.get(w,o);return c.decode(g)},s=e.split("/").filter(Boolean),u=await i(t),h=t;for(;s.length;){let w=s.shift();if(!w)throw(0,_o.default)(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(t.code===nc&&Array.isArray(u.Links)){let c=u.Links.find(g=>g.Name===w);if(c){yield{value:c.Hash,remainderPath:s.join("/")},u=await i(c.Hash),h=c.Hash;continue}}if(Object.prototype.hasOwnProperty.call(u,w))u=u[w],yield{value:u,remainderPath:s.join("/")};else throw(0,_o.default)(new Error(`no link named "${w}" under ${h}`),"ERR_NO_LINK");x.asCID(u)&&(h=u,u=await i(u))}yield{value:u,remainderPath:""}};var ac=J(Yt(),1);function uc({codecs:t,repo:e,preload:r}){return le(async function(i,s={}){if(s.preload!==!1&&r(i),s.path){let g=s.localResolve?await(0,ic.default)(Wr(i,s.path,t,e,s)):await(0,sc.default)(Wr(i,s.path,t,e,s));if(!g)throw(0,ac.default)(new Error("Not found"),"ERR_NOT_FOUND");return g}let u=await t.getCodec(i.code),h=await e.blocks.get(i,s);return{value:u.decode(h),remainderPath:""}})}a();a();var Jr=class{constructor(e,r,n){this._version=e,this._roots=r,this._iterable=n,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}},tt=class extends Jr{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){let{version:r,roots:n,iterator:o}=await cc(e);return new tt(r,n,o)}static async fromIterable(e){let{version:r,roots:n,iterator:o}=await fc(e);return new tt(r,n,o)}},rr=class extends Jr{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");this._decoded=!0;let e=this._iterable[Symbol.asyncIterator]();return{async next(){let r=await e.next();return r.done?r:{done:!1,value:r.value.cid}}}}static async fromBytes(e){let{version:r,roots:n,iterator:o}=await cc(e);return new rr(r,n,o)}static async fromIterable(e){let{version:r,roots:n,iterator:o}=await fc(e);return new rr(r,n,o)}};async function cc(t){if(!(t instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return lc(Ir(t))}async function fc(t){if(!t||typeof t[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return lc(js(t))}async function lc(t){let e=Hs(t),{version:r,roots:n}=await e.header();return{version:r,roots:n,iterator:e.blocks()}}var gc=J(hc(),1),Dc=J(mc(),1),bc=J(wc(),1);var Ec=kr("ipfs:components:dag:import");function xc({repo:t}){async function*e(r,n={}){let o=await t.gcLock.readLock();try{let i={signal:n.signal,timeout:n.timeout},s=(0,gc.default)(r),{value:u,done:h}=await s.peek();if(h)return;u&&s.push(u);let w;u instanceof Uint8Array?w=[s]:w=s;for await(let c of w){let g=await jh(t,i,c);if(n.pinRoots!==!1)for(let B of g){let k="";try{await t.blocks.has(B)?(Ec(`Pinning root ${B}`),await t.pins.pinRecursively(B)):k="blockstore: block not found"}catch(I){k=I.message}yield{root:{cid:B,pinErrorMsg:k}}}}}finally{o()}}return le(e)}async function jh(t,e,r){let n=await tt.fromIterable(r),o=await n.getRoots();return await(0,Dc.default)(t.blocks.putMany((0,bc.default)(n,({cid:i,bytes:s})=>(Ec(`Import block ${i}`),{key:i,value:s})),{signal:e.signal})),o}a();Q();function Cc({repo:t,codecs:e,hashers:r,preload:n}){async function o(i,s={}){let u=s.pin?await t.gcLock.readLock():null;try{let h=await e.getCodec(s.storeCodec||"dag-cbor");if(!h)throw new Error(`Unknown storeCodec ${s.storeCodec}, please configure additional BlockCodecs for this IPFS instance`);if(s.inputCodec){if(!(i instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");let I=await e.getCodec(s.inputCodec);if(!I)throw new Error(`Unknown inputCodec ${s.inputCodec}, please configure additional BlockCodecs for this IPFS instance`);i=I.decode(i)}let w=s.version!=null?s.version:1,c=await r.getHasher(s.hashAlg||"sha2-256");if(!c)throw new Error(`Unknown hash algorithm ${s.hashAlg}, please configure additional MultihashHashers for this IPFS instance`);let g=h.encode(i),B=await c.digest(g),k=x.create(w,h.code,B);return await t.blocks.put(k,g,{signal:s.signal}),s.pin&&await t.pins.pinRecursively(k),s.preload!==!1&&n(k),k}finally{u&&u()}}return le(o)}a();function Bc({repo:t,codecs:e,preload:r}){async function n(o,i={}){let{cid:s}=Gr(o);return i.preload!==!1&&r(s),oc(t,e,o,i)}return le(n)}var Ac=class{constructor({repo:e,codecs:r,hashers:n,preload:o}){this.export=ma({repo:e,preload:o,codecs:r}),this.get=uc({codecs:r,repo:e,preload:o}),this.import=xc({repo:e}),this.resolve=Bc({repo:e,codecs:r,preload:o}),this.put=Cc({repo:e,codecs:r,hashers:n,preload:o})}};export{Ac as DagAPI};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
//# sourceMappingURL=index.js.map
