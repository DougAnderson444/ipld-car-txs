import{S as SvelteComponent,i as init,s as safe_not_equal,k as element,q as text,a as space,l as claim_element,m as children,r as claim_text,c as claim_space,h as detach,n as attr,H as add_render_callback,b as insert_hydration,F as append_hydration,I as listen,u as set_data,A as noop$2,J as run_all,K as is_function,L as assign$1,M as now,N as loop,O as identity$3,e as empty$1,G as component_subscribe,P as set_store_value,Q as update_keyed_each,R as fix_and_destroy_block,T as fix_position,U as create_animation,V as destroy_each,W as createEventDispatcher,f as transition_in,g as group_outros,t as transition_out,d as check_outros,X as binding_callbacks,Y as bind,v as create_component,w as claim_component,x as mount_component,Z as add_flush_callback,y as destroy_component,_ as bubble,o as onMount,$ as handle_promise,a0 as update_await_block_branch,a1 as setContext,a2 as fix_and_outro_and_destroy_block,B as create_slot,p as set_style,a3 as add_resize_listener,C as update_slot_base,D as get_all_dirty_from_scope,E as get_slot_changes,a4 as svg_element,a5 as claim_svg_element,a6 as xlink_attr,a7 as get_spread_update,a8 as get_spread_object,a9 as globals}from"./index-a6cc9c6d.js";import{_ as __vitePreload}from"./preload-helper-aa6bc0ce.js";import{w as writable}from"./index-7ea16a28.js";function create_fragment$b(r){let e,t,n,o,i,a,s,c,l,f,g,D,w,E,d,T,O;return{c(){e=element("div"),t=element("div"),n=element("div"),o=element("span"),i=text(r[0]),a=space(),s=text(":"),c=space(),l=element("div"),f=element("span"),g=text(r[1]),D=space(),w=element("div"),E=element("button"),d=text("Add"),this.h()},l(I){e=claim_element(I,"DIV",{class:!0});var j=children(e);t=claim_element(j,"DIV",{class:!0});var q=children(t);n=claim_element(q,"DIV",{class:!0});var H=children(n);o=claim_element(H,"SPAN",{class:!0,contenteditable:!0});var L=children(o);i=claim_text(L,r[0]),a=claim_space(L),L.forEach(detach),s=claim_text(H,":"),H.forEach(detach),c=claim_space(q),l=claim_element(q,"DIV",{class:!0});var J=children(l);f=claim_element(J,"SPAN",{class:!0,contenteditable:!0});var X=children(f);g=claim_text(X,r[1]),X.forEach(detach),J.forEach(detach),D=claim_space(q),w=claim_element(q,"DIV",{class:!0});var re=children(w);E=claim_element(re,"BUTTON",{class:!0});var he=children(E);d=claim_text(he,"Add"),he.forEach(detach),re.forEach(detach),q.forEach(detach),j.forEach(detach),this.h()},h(){attr(o,"class","p-1 bg-white rounded-md border border-gray-400 w-full min-w-[50px]"),attr(o,"contenteditable","true"),r[0]===void 0&&add_render_callback(()=>r[4].call(o)),attr(n,"class","flex-1 flex flex-row m-1 p-1 items-center"),attr(f,"class","p-1 bg-white rounded-md border border-gray-400 w-full min-w-[50px]"),attr(f,"contenteditable","true"),r[1]===void 0&&add_render_callback(()=>r[5].call(f)),attr(l,"class","flex-1 flex flex-row m-1 p-1 items-center"),attr(E,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-lg justify-end"),attr(w,"class","flex flex-row-reverse m-1 p-1 justify-items-end"),attr(t,"class","flex flex-row text-sm bg-slate-100 shadow shadow-blue-200 my-4 p-1 rounded-lg w-fit"),attr(e,"class","flex flex-row relative")},m(I,j){insert_hydration(I,e,j),append_hydration(e,t),append_hydration(t,n),append_hydration(n,o),append_hydration(o,i),append_hydration(o,a),r[0]!==void 0&&(o.textContent=r[0]),append_hydration(n,s),append_hydration(t,c),append_hydration(t,l),append_hydration(l,f),append_hydration(f,g),r[1]!==void 0&&(f.textContent=r[1]),append_hydration(t,D),append_hydration(t,w),append_hydration(w,E),append_hydration(E,d),T||(O=[listen(o,"keydown",handleKeydown),listen(o,"input",r[4]),listen(f,"keydown",handleKeydown),listen(f,"input",r[5]),listen(E,"click",r[2])],T=!0)},p(I,[j]){j&1&&set_data(i,I[0]),j&1&&I[0]!==o.textContent&&(o.textContent=I[0]),j&2&&set_data(g,I[1]),j&2&&I[1]!==f.textContent&&(f.textContent=I[1])},i:noop$2,o:noop$2,d(I){I&&detach(e),T=!1,run_all(O)}}}function handleKeydown(r){r.key==="Enter"&&(r.preventDefault(),r.stopPropagation(),r.target.blur())}function instance$b(r,e,t){let{tx:n}=e,o="Key",i="Value";async function a(l){if(n&&o&&i){const f=await n.add({[o]:i});await n.add({[o]:f}),t(3,n)}}function s(){o=this.textContent,t(0,o)}function c(){i=this.textContent,t(1,i)}return r.$$set=l=>{"tx"in l&&t(3,n=l.tx)},[o,i,a,n,s,c]}class AddBlock extends SvelteComponent{constructor(e){super(),init(this,e,instance$b,create_fragment$b,safe_not_equal,{tx:3})}}function cubicOut(r){const e=r-1;return e*e*e+1}function flip(r,{from:e,to:t},n={}){const o=getComputedStyle(r),i=o.transform==="none"?"":o.transform,[a,s]=o.transformOrigin.split(" ").map(parseFloat),c=e.left+e.width*a/t.width-(t.left+a),l=e.top+e.height*s/t.height-(t.top+s),{delay:f=0,duration:g=w=>Math.sqrt(w)*120,easing:D=cubicOut}=n;return{delay:f,duration:is_function(g)?g(Math.sqrt(c*c+l*l)):g,easing:D,css:(w,E)=>{const d=E*c,T=E*l,O=w+E*e.width/t.width,I=w+E*e.height/t.height;return`transform: ${i} translate(${d}px, ${T}px) scale(${O}, ${I});`}}}function is_date(r){return Object.prototype.toString.call(r)==="[object Date]"}function get_interpolator(r,e){if(r===e||r!==r)return()=>r;const t=typeof r;if(t!==typeof e||Array.isArray(r)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(r)){const n=e.map((o,i)=>get_interpolator(r[i],o));return o=>n.map(i=>i(o))}if(t==="object"){if(!r||!e)throw new Error("Object cannot be null");if(is_date(r)&&is_date(e)){r=r.getTime(),e=e.getTime();const i=e-r;return a=>new Date(r+a*i)}const n=Object.keys(e),o={};return n.forEach(i=>{o[i]=get_interpolator(r[i],e[i])}),i=>{const a={};return n.forEach(s=>{a[s]=o[s](i)}),a}}if(t==="number"){const n=e-r;return o=>r+o*n}throw new Error(`Cannot interpolate ${t} values`)}function tweened(r,e={}){const t=writable(r);let n,o=r;function i(a,s){if(r==null)return t.set(r=a),Promise.resolve();o=a;let c=n,l=!1,{delay:f=0,duration:g=400,easing:D=identity$3,interpolate:w=get_interpolator}=assign$1(assign$1({},e),s);if(g===0)return c&&(c.abort(),c=null),t.set(r=o),Promise.resolve();const E=now()+f;let d;return n=loop(T=>{if(T<E)return!0;l||(d=w(r,a),typeof g=="function"&&(g=g(r,a)),l=!0),c&&(c.abort(),c=null);const O=T-E;return O>g?(t.set(r=a),!1):(t.set(r=d(D(O/g))),!0)}),n.promise}return{set:i,update:(a,s)=>i(a(o,r),s),subscribe:t.subscribe}}function get_each_context$4(r,e,t){const n=r.slice();return n[3]=e[t].value,n[4]=e[t].cid,n[5]=e[t].bytes,n}function get_each_context_1(r,e,t){const n=r.slice();return n[8]=e[t][0],n[9]=e[t][1],n}function create_if_block$7(r){let e,t=[],n=new Map,o,i,a=[...r[0].blocks].reverse();const s=l=>l[4];for(let l=0;l<a.length;l+=1){let f=get_each_context$4(r,a,l),g=s(f);n.set(g,t[l]=create_each_block$4(g,f))}let c=r[1]&&create_if_block_1$3(r);return{c(){e=element("div");for(let l=0;l<t.length;l+=1)t[l].c();o=space(),c&&c.c(),i=empty$1(),this.h()},l(l){e=claim_element(l,"DIV",{class:!0});var f=children(e);for(let g=0;g<t.length;g+=1)t[g].l(f);f.forEach(detach),o=claim_space(l),c&&c.l(l),i=empty$1(),this.h()},h(){attr(e,"class","flex flex-row")},m(l,f){insert_hydration(l,e,f);for(let g=0;g<t.length;g+=1)t[g].m(e,null);insert_hydration(l,o,f),c&&c.m(l,f),insert_hydration(l,i,f)},p(l,f){if(f&1){a=[...l[0].blocks].reverse();for(let g=0;g<t.length;g+=1)t[g].r();t=update_keyed_each(t,f,s,1,l,a,n,e,fix_and_destroy_block,create_each_block$4,null,get_each_context$4);for(let g=0;g<t.length;g+=1)t[g].a()}l[1]?c?c.p(l,f):(c=create_if_block_1$3(l),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},d(l){l&&detach(e);for(let f=0;f<t.length;f+=1)t[f].d();l&&detach(o),c&&c.d(l),l&&detach(i)}}}function create_each_block_1(r){let e=r[8]+"",t,n,o=r[9]+"",i,a,s=r[5].length+"",c,l;return{c(){t=text(e),n=text(": "),i=text(o),a=text(" ("),c=text(s),l=text(")")},l(f){t=claim_text(f,e),n=claim_text(f,": "),i=claim_text(f,o),a=claim_text(f," ("),c=claim_text(f,s),l=claim_text(f,")")},m(f,g){insert_hydration(f,t,g),insert_hydration(f,n,g),insert_hydration(f,i,g),insert_hydration(f,a,g),insert_hydration(f,c,g),insert_hydration(f,l,g)},p(f,g){g&1&&e!==(e=f[8]+"")&&set_data(t,e),g&1&&o!==(o=f[9]+"")&&set_data(i,o),g&1&&s!==(s=f[5].length+"")&&set_data(c,s)},d(f){f&&detach(t),f&&detach(n),f&&detach(i),f&&detach(a),f&&detach(c),f&&detach(l)}}}function create_each_block$4(r,e){let t,n,o,i=noop$2,a=Object.entries(e[3]),s=[];for(let c=0;c<a.length;c+=1)s[c]=create_each_block_1(get_each_context_1(e,a,c));return{key:r,first:null,c(){t=element("div");for(let c=0;c<s.length;c+=1)s[c].c();n=space(),this.h()},l(c){t=claim_element(c,"DIV",{class:!0});var l=children(t);for(let f=0;f<s.length;f+=1)s[f].l(l);n=claim_space(l),l.forEach(detach),this.h()},h(){attr(t,"class","mr-1 p-2 border-emerald-50 bg-green-800 text-white rounded-lg w-fit"),this.first=t},m(c,l){insert_hydration(c,t,l);for(let f=0;f<s.length;f+=1)s[f].m(t,null);append_hydration(t,n)},p(c,l){if(e=c,l&1){a=Object.entries(e[3]);let f;for(f=0;f<a.length;f+=1){const g=get_each_context_1(e,a,f);s[f]?s[f].p(g,l):(s[f]=create_each_block_1(g),s[f].c(),s[f].m(t,n))}for(;f<s.length;f+=1)s[f].d(1);s.length=a.length}},r(){o=t.getBoundingClientRect()},f(){fix_position(t),i()},a(){i(),i=create_animation(t,o,flip,{})},d(c){c&&detach(t),destroy_each(s,c)}}}function create_if_block_1$3(r){let e,t=r[1].toFixed(0)+"",n,o,i;return{c(){e=text("Total Transaction Size: "),n=text(t),o=text(" bytes"),i=element("br")},l(a){e=claim_text(a,"Total Transaction Size: "),n=claim_text(a,t),o=claim_text(a," bytes"),i=claim_element(a,"BR",{})},m(a,s){insert_hydration(a,e,s),insert_hydration(a,n,s),insert_hydration(a,o,s),insert_hydration(a,i,s)},p(a,s){s&2&&t!==(t=a[1].toFixed(0)+"")&&set_data(n,t)},d(a){a&&detach(e),a&&detach(n),a&&detach(o),a&&detach(i)}}}function create_fragment$a(r){var n,o;let e,t=((o=(n=r[0])==null?void 0:n.blocks)==null?void 0:o.length)>0&&create_if_block$7(r);return{c(){t&&t.c(),e=empty$1()},l(i){t&&t.l(i),e=empty$1()},m(i,a){t&&t.m(i,a),insert_hydration(i,e,a)},p(i,[a]){var s,c;((c=(s=i[0])==null?void 0:s.blocks)==null?void 0:c.length)>0?t?t.p(i,a):(t=create_if_block$7(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:noop$2,o:noop$2,d(i){t&&t.d(i),i&&detach(e)}}}function instance$a(r,e,t){let n,{tx:o}=e;const i=tweened(1,{duration:400,easing:cubicOut});return component_subscribe(r,i,a=>t(1,n=a)),o.on("size",a=>set_store_value(i,n=o.size,n)),r.$$set=a=>{"tx"in a&&t(0,o=a.tx)},[o,n,i]}class ShowBlocks extends SvelteComponent{constructor(e){super(),init(this,e,instance$a,create_fragment$a,safe_not_equal,{tx:0})}}function create_fragment$9(r){let e,t,n,o,i;return{c(){e=element("div"),t=element("button"),n=text("Commit Tx"),this.h()},l(a){e=claim_element(a,"DIV",{class:!0});var s=children(e);t=claim_element(s,"BUTTON",{class:!0});var c=children(t);n=claim_text(c,"Commit Tx"),c.forEach(detach),s.forEach(detach),this.h()},h(){attr(t,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-lg justify-end"),attr(e,"class","flex flex-row-reverse m-1 p-1 justify-items-end")},m(a,s){insert_hydration(a,e,s),append_hydration(e,t),append_hydration(t,n),o||(i=listen(t,"click",r[0]),o=!0)},p:noop$2,i:noop$2,o:noop$2,d(a){a&&detach(e),o=!1,i()}}}function instance$9(r,e,t){const n=createEventDispatcher();let{tx:o}=e;async function i(a){console.log("commit tx:",{tx:o});const s=await o.commit();n("commit",s)}return r.$$set=a=>{"tx"in a&&t(1,o=a.tx)},[i,o]}class CommitTx extends SvelteComponent{constructor(e){super(),init(this,e,instance$9,create_fragment$9,safe_not_equal,{tx:1})}}function create_if_block$6(r){let e,t,n,o,i,a,s;function c(f){r[1](f)}let l={};return r[0]!==void 0&&(l.tx=r[0]),e=new AddBlock({props:l}),binding_callbacks.push(()=>bind(e,"tx",c)),o=new ShowBlocks({props:{tx:r[0]}}),a=new CommitTx({props:{tx:r[0]}}),a.$on("commit",r[2]),{c(){create_component(e.$$.fragment),n=space(),create_component(o.$$.fragment),i=space(),create_component(a.$$.fragment)},l(f){claim_component(e.$$.fragment,f),n=claim_space(f),claim_component(o.$$.fragment,f),i=claim_space(f),claim_component(a.$$.fragment,f)},m(f,g){mount_component(e,f,g),insert_hydration(f,n,g),mount_component(o,f,g),insert_hydration(f,i,g),mount_component(a,f,g),s=!0},p(f,g){const D={};!t&&g&1&&(t=!0,D.tx=f[0],add_flush_callback(()=>t=!1)),e.$set(D);const w={};g&1&&(w.tx=f[0]),o.$set(w);const E={};g&1&&(E.tx=f[0]),a.$set(E)},i(f){s||(transition_in(e.$$.fragment,f),transition_in(o.$$.fragment,f),transition_in(a.$$.fragment,f),s=!0)},o(f){transition_out(e.$$.fragment,f),transition_out(o.$$.fragment,f),transition_out(a.$$.fragment,f),s=!1},d(f){destroy_component(e,f),f&&detach(n),destroy_component(o,f),f&&detach(i),destroy_component(a,f)}}}function create_fragment$8(r){let e,t,n=r[0]&&create_if_block$6(r);return{c(){n&&n.c(),e=empty$1()},l(o){n&&n.l(o),e=empty$1()},m(o,i){n&&n.m(o,i),insert_hydration(o,e,i),t=!0},p(o,[i]){o[0]?n?(n.p(o,i),i&1&&transition_in(n,1)):(n=create_if_block$6(o),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(o){t||(transition_in(n),t=!0)},o(o){transition_out(n),t=!1},d(o){n&&n.d(o),o&&detach(e)}}}function instance$8(r,e,t){let{tx:n=null}=e;function o(a){n=a,t(0,n)}function i(a){bubble.call(this,r,a)}return r.$$set=a=>{"tx"in a&&t(0,n=a.tx)},[n,o,i]}class AddTx extends SvelteComponent{constructor(e){super(),init(this,e,instance$8,create_fragment$8,safe_not_equal,{tx:0})}}function getAugmentedNamespace(r){var e=r.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var o=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return r[n]}})}),t}var encode_1$1=encode$d,MSB$3=128,REST$3=127,MSBALL$1=~REST$3,INT$1=Math.pow(2,31);function encode$d(r,e,t){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw encode$d.bytes=0,new RangeError("Could not encode varint");e=e||[],t=t||0;for(var n=t;r>=INT$1;)e[t++]=r&255|MSB$3,r/=128;for(;r&MSBALL$1;)e[t++]=r&255|MSB$3,r>>>=7;return e[t]=r|0,encode$d.bytes=t-n+1,e}var decode$d=read$1,MSB$2=128,REST$2=127;function read$1(r,n){var t=0,n=n||0,o=0,i=n,a,s=r.length;do{if(i>=s||o>49)throw read$1.bytes=0,new RangeError("Could not decode varint");a=r[i++],t+=o<28?(a&REST$2)<<o:(a&REST$2)*Math.pow(2,o),o+=7}while(a>=MSB$2);return read$1.bytes=i-n,t}var N1$2=Math.pow(2,7),N2$2=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$1=function(r){return r<N1$2?1:r<N2$2?2:r<N3$1?3:r<N4$1?4:r<N5$1?5:r<N6$1?6:r<N7$1?7:r<N8$1?8:r<N9$1?9:10},varint$4={encode:encode_1$1,decode:decode$d,encodingLength:length$1};const typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";const e=typeof r;if(typeofs.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(isBuffer$1(r))return"Buffer";const t=getObjectType(r);return t||"Object"}function isBuffer$1(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function getObjectType(r){const e=Object.prototype.toString.call(r).slice(8,-1);if(objectTypeNames.includes(e))return e}class Type{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);class Token{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder$2=new TextDecoder,textEncoder$3=new TextEncoder;function isBuffer(r){return useBuffer&&globalThis.Buffer.isBuffer(r)}function asU8A(r){return r instanceof Uint8Array?isBuffer(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}const toString$4=useBuffer?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):utf8Slice(r,e,t):(r,e,t)=>t-e>64?textDecoder$2.decode(r.subarray(e,t)):utf8Slice(r,e,t),fromString$4=useBuffer?r=>r.length>64?globalThis.Buffer.from(r):utf8ToBytes(r):r=>r.length>64?textEncoder$3.encode(r):utf8ToBytes(r),fromArray=r=>Uint8Array.from(r),slice$1=useBuffer?(r,e,t)=>isBuffer(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),concat$2=useBuffer?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),asU8A(globalThis.Buffer.concat(r,e))):(r,e)=>{const t=new Uint8Array(e);let n=0;for(let o of r)n+o.length>t.length&&(o=o.subarray(0,t.length-n)),t.set(o,n),n+=o.length;return t},alloc=useBuffer?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function compare(r,e){if(isBuffer(r)&&isBuffer(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function utf8ToBytes(r,e=1/0){let t;const n=r.length;let o=null;const i=[];for(let a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!o){if(t>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=t;continue}if(t<56320){(e-=3)>-1&&i.push(239,191,189),o=t;continue}t=(o-55296<<10|t-56320)+65536}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,t<128){if((e-=1)<0)break;i.push(t)}else if(t<2048){if((e-=2)<0)break;i.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;i.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;i.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return i}function utf8Slice(r,e,t){const n=[];for(;e<t;){const o=r[e];let i=null,a=o>239?4:o>223?3:o>191?2:1;if(e+a<=t){let s,c,l,f;switch(a){case 1:o<128&&(i=o);break;case 2:s=r[e+1],(s&192)===128&&(f=(o&31)<<6|s&63,f>127&&(i=f));break;case 3:s=r[e+1],c=r[e+2],(s&192)===128&&(c&192)===128&&(f=(o&15)<<12|(s&63)<<6|c&63,f>2047&&(f<55296||f>57343)&&(i=f));break;case 4:s=r[e+1],c=r[e+2],l=r[e+3],(s&192)===128&&(c&192)===128&&(l&192)===128&&(f=(o&15)<<18|(s&63)<<12|(c&63)<<6|l&63,f>65535&&f<1114112&&(i=f))}}i===null?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),e+=a}return decodeCodePointsArray(n)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(r){const e=r.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=MAX_ARGUMENTS_LENGTH));return t}const defaultChunkSize=256;class Bl{constructor(e=defaultChunkSize){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const o=t.length-(this.maxCursor-this.cursor)-1;t.set(e,o)}else{if(t){const o=t.length-(this.maxCursor-this.cursor)-1;o<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,o),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=alloc(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){const n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=slice$1(n,0,this.cursor)}else t=concat$2(this.chunks,this.cursor);return e&&this.reset(),t}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(r,e,t){if(r.length-e<t)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(r,e,t){assertEnoughData(r,e,1);const n=r[e];if(t.strict===!0&&n<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint16(r,e,t){assertEnoughData(r,e,2);const n=r[e]<<8|r[e+1];if(t.strict===!0&&n<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint32(r,e,t){assertEnoughData(r,e,4);const n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint64(r,e,t){assertEnoughData(r,e,8);const n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],o=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],i=(BigInt(n)<<BigInt(32))+BigInt(o);if(t.strict===!0&&i<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(t.allowBigInt===!0)return i;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(r,e,t,n){return new Token(Type.uint,readUint8(r,e+1,n),2)}function decodeUint16(r,e,t,n){return new Token(Type.uint,readUint16(r,e+1,n),3)}function decodeUint32(r,e,t,n){return new Token(Type.uint,readUint32(r,e+1,n),5)}function decodeUint64(r,e,t,n){return new Token(Type.uint,readUint64(r,e+1,n),9)}function encodeUint(r,e){return encodeUintValue(r,0,e.value)}function encodeUintValue(r,e,t){if(t<uintBoundaries[0]){const n=Number(t);r.push([e|n])}else if(t<uintBoundaries[1]){const n=Number(t);r.push([e|24,n])}else if(t<uintBoundaries[2]){const n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<uintBoundaries[3]){const n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{const n=BigInt(t);if(n<uintBoundaries[4]){const o=[e|27,0,0,0,0,0,0,0];let i=Number(n&BigInt(4294967295)),a=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=i&255,i=i>>8,o[7]=i&255,i=i>>8,o[6]=i&255,i=i>>8,o[5]=i&255,o[4]=a&255,a=a>>8,o[3]=a&255,a=a>>8,o[2]=a&255,a=a>>8,o[1]=a&255,r.push(o)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};encodeUintValue.encodedSize=function(e){return e<uintBoundaries[0]?1:e<uintBoundaries[1]?2:e<uintBoundaries[2]?3:e<uintBoundaries[3]?5:9};encodeUint.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};function decodeNegint8(r,e,t,n){return new Token(Type.negint,-1-readUint8(r,e+1,n),2)}function decodeNegint16(r,e,t,n){return new Token(Type.negint,-1-readUint16(r,e+1,n),3)}function decodeNegint32(r,e,t,n){return new Token(Type.negint,-1-readUint32(r,e+1,n),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(r,e,t,n){const o=readUint64(r,e+1,n);if(typeof o!="bigint"){const i=-1-o;if(i>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,i,9)}if(n.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(o),9)}function encodeNegint(r,e){const t=e.value,n=typeof t=="bigint"?t*neg1b-pos1b:t*-1-1;encodeUintValue(r,e.type.majorEncoded,n)}encodeNegint.encodedSize=function(e){const t=e.value,n=typeof t=="bigint"?t*neg1b-pos1b:t*-1-1;return n<uintBoundaries[0]?1:n<uintBoundaries[1]?2:n<uintBoundaries[2]?3:n<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};function toToken$3(r,e,t,n){assertEnoughData(r,e,t+n);const o=slice$1(r,e+t,e+t+n);return new Token(Type.bytes,o,t+n)}function decodeBytesCompact(r,e,t,n){return toToken$3(r,e,1,t)}function decodeBytes8(r,e,t,n){return toToken$3(r,e,2,readUint8(r,e+1,n))}function decodeBytes16(r,e,t,n){return toToken$3(r,e,3,readUint16(r,e+1,n))}function decodeBytes32(r,e,t,n){return toToken$3(r,e,5,readUint32(r,e+1,n))}function decodeBytes64(r,e,t,n){const o=readUint64(r,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(r,e,9,o)}function tokenBytes(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===Type.string?fromString$4(r.value):r.value),r.encodedBytes}function encodeBytes(r,e){const t=tokenBytes(e);encodeUintValue(r,e.type.majorEncoded,t.length),r.push(t)}encodeBytes.encodedSize=function(e){const t=tokenBytes(e);return encodeUintValue.encodedSize(t.length)+t.length};encodeBytes.compareTokens=function(e,t){return compareBytes(tokenBytes(e),tokenBytes(t))};function compareBytes(r,e){return r.length<e.length?-1:r.length>e.length?1:compare(r,e)}function toToken$2(r,e,t,n,o){const i=t+n;assertEnoughData(r,e,i);const a=new Token(Type.string,toString$4(r,e+t,e+i),i);return o.retainStringBytes===!0&&(a.byteValue=slice$1(r,e+t,e+i)),a}function decodeStringCompact(r,e,t,n){return toToken$2(r,e,1,t,n)}function decodeString8(r,e,t,n){return toToken$2(r,e,2,readUint8(r,e+1,n),n)}function decodeString16(r,e,t,n){return toToken$2(r,e,3,readUint16(r,e+1,n),n)}function decodeString32(r,e,t,n){return toToken$2(r,e,5,readUint32(r,e+1,n),n)}function decodeString64(r,e,t,n){const o=readUint64(r,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(r,e,9,o,n)}const encodeString=encodeBytes;function toToken$1(r,e,t,n){return new Token(Type.array,n,t)}function decodeArrayCompact(r,e,t,n){return toToken$1(r,e,1,t)}function decodeArray8(r,e,t,n){return toToken$1(r,e,2,readUint8(r,e+1,n))}function decodeArray16(r,e,t,n){return toToken$1(r,e,3,readUint16(r,e+1,n))}function decodeArray32(r,e,t,n){return toToken$1(r,e,5,readUint32(r,e+1,n))}function decodeArray64(r,e,t,n){const o=readUint64(r,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(r,e,9,o)}function decodeArrayIndefinite(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(r,e,1,1/0)}function encodeArray(r,e){encodeUintValue(r,Type.array.majorEncoded,e.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function toToken(r,e,t,n){return new Token(Type.map,n,t)}function decodeMapCompact(r,e,t,n){return toToken(r,e,1,t)}function decodeMap8(r,e,t,n){return toToken(r,e,2,readUint8(r,e+1,n))}function decodeMap16(r,e,t,n){return toToken(r,e,3,readUint16(r,e+1,n))}function decodeMap32(r,e,t,n){return toToken(r,e,5,readUint32(r,e+1,n))}function decodeMap64(r,e,t,n){const o=readUint64(r,e+1,n);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(r,e,9,o)}function decodeMapIndefinite(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(r,e,1,1/0)}function encodeMap(r,e){encodeUintValue(r,Type.map.majorEncoded,e.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function decodeTagCompact(r,e,t,n){return new Token(Type.tag,t,1)}function decodeTag8(r,e,t,n){return new Token(Type.tag,readUint8(r,e+1,n),2)}function decodeTag16(r,e,t,n){return new Token(Type.tag,readUint16(r,e+1,n),3)}function decodeTag32(r,e,t,n){return new Token(Type.tag,readUint32(r,e+1,n),5)}function decodeTag64(r,e,t,n){return new Token(Type.tag,readUint64(r,e+1,n),9)}function encodeTag(r,e){encodeUintValue(r,Type.tag.majorEncoded,e.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,r,e)}function decodeFloat16(r,e,t,n){return createToken(readFloat16(r,e+1),3,n)}function decodeFloat32(r,e,t,n){return createToken(readFloat32(r,e+1),5,n)}function decodeFloat64(r,e,t,n){return createToken(readFloat64(r,e+1),9,n)}function encodeFloat(r,e,t){const n=e.value;if(n===!1)r.push([Type.float.majorEncoded|MINOR_FALSE]);else if(n===!0)r.push([Type.float.majorEncoded|MINOR_TRUE]);else if(n===null)r.push([Type.float.majorEncoded|MINOR_NULL]);else if(n===void 0)r.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let o,i=!1;(!t||t.float64!==!0)&&(encodeFloat16(n),o=readFloat16(ui8a,1),n===o||Number.isNaN(n)?(ui8a[0]=249,r.push(ui8a.slice(0,3)),i=!0):(encodeFloat32(n),o=readFloat32(ui8a,1),n===o&&(ui8a[0]=250,r.push(ui8a.slice(0,5)),i=!0))),i||(encodeFloat64(n),o=readFloat64(ui8a,1),ui8a[0]=251,r.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function(e,t){const n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){encodeFloat16(n);let o=readFloat16(ui8a,1);if(n===o||Number.isNaN(n))return 3;if(encodeFloat32(n),o=readFloat32(ui8a,1),n===o)return 5}return 9};const buffer=new ArrayBuffer(9),dataView=new DataView(buffer,1),ui8a=new Uint8Array(buffer,0);function encodeFloat16(r){if(r===1/0)dataView.setUint16(0,31744,!1);else if(r===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(r))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,r);const e=dataView.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)dataView.setUint16(0,31744,!1);else if(t===0)dataView.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{const o=t-127;o<-24?dataView.setUint16(0,0):o<-14?dataView.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):dataView.setUint16(0,(e&2147483648)>>16|o+15<<10|n>>13,!1)}}}function readFloat16(r,e){if(r.length-e<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;const n=t>>10&31,o=t&1023;let i;return n===0?i=o*2**-24:n!==31?i=(o+1024)*2**(n-25):i=o===0?1/0:NaN,t&32768?-i:i}function encodeFloat32(r){dataView.setFloat32(0,r,!1)}function readFloat32(r,e){if(r.length-e<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function encodeFloat64(r){dataView.setFloat64(0,r,!1)}function readFloat64(r,e){if(r.length-e<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(r,e,t){throw new Error(`${decodeErrPrefix} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function errorer(r){return()=>{throw new Error(`${decodeErrPrefix} ${r}`)}}const jump=[];for(let r=0;r<=23;r++)jump[r]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let r=32;r<=55;r++)jump[r]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let r=64;r<=87;r++)jump[r]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)jump[r]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)jump[r]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let r=160;r<=183;r++)jump[r]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let r=192;r<=215;r++)jump[r]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let r=224;r<=243;r++)jump[r]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let r=0;r<24;r++)quick[r]=new Token(Type.uint,r,1);for(let r=-1;r>=-24;r--)quick[31-r]=new Token(Type.negint,r,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1);quick[96]=new Token(Type.string,"",1);quick[128]=new Token(Type.array,0,1);quick[160]=new Token(Type.map,0,1);quick[244]=new Token(Type.false,!1,1);quick[245]=new Token(Type.true,!0,1);quick[246]=new Token(Type.null,null,1);function quickEncodeToken(r){switch(r.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return r.value.length?void 0:fromArray([64]);case Type.string:return r.value===""?fromArray([96]):void 0;case Type.array:return r.value===0?fromArray([128]):void 0;case Type.map:return r.value===0?fromArray([160]):void 0;case Type.uint:return r.value<24?fromArray([Number(r.value)]):void 0;case Type.negint:if(r.value>=-24)return fromArray([31-Number(r.value)])}}const defaultEncodeOptions$2={float64:!1,mapSorter:mapSorter$1,quickEncodeToken};function makeCborEncoders(){const r=[];return r[Type.uint.major]=encodeUint,r[Type.negint.major]=encodeNegint,r[Type.bytes.major]=encodeBytes,r[Type.string.major]=encodeString,r[Type.array.major]=encodeArray,r[Type.map.major]=encodeMap,r[Type.tag.major]=encodeTag,r[Type.float.major]=encodeFloat,r}const cborEncoders$1=makeCborEncoders(),buf=new Bl;class Ref{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(t,e)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new Token(Type.float,r):r>=0?new Token(Type.uint,r):new Token(Type.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new Token(Type.uint,r):new Token(Type.negint,r)},Uint8Array(r,e,t,n){return new Token(Type.bytes,r)},string(r,e,t,n){return new Token(Type.string,r)},boolean(r,e,t,n){return r?simpleTokens.true:simpleTokens.false},null(r,e,t,n){return simpleTokens.null},undefined(r,e,t,n){return simpleTokens.undefined},ArrayBuffer(r,e,t,n){return new Token(Type.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new Token(Type.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;n=Ref.createCheck(n,r);const o=[];let i=0;for(const a of r)o[i++]=objectToTokens(a,t,n);return t.addBreakTokens?[new Token(Type.array,r.length),o,new Token(Type.break)]:[new Token(Type.array,r.length),o]},Object(r,e,t,n){const o=e!=="Object",i=o?r.keys():Object.keys(r),a=o?r.size:i.length;if(!a)return t.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;n=Ref.createCheck(n,r);const s=[];let c=0;for(const l of i)s[c++]=[objectToTokens(l,t,n),objectToTokens(o?r.get(l):r[l],t,n)];return sortMapEntries(s,t),t.addBreakTokens?[new Token(Type.map,a),s,new Token(Type.break)]:[new Token(Type.map,a),s]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${r}Array`]=typeEncoders.DataView;function objectToTokens(r,e={},t){const n=is(r),o=e&&e.typeEncoders&&e.typeEncoders[n]||typeEncoders[n];if(typeof o=="function"){const a=o(r,n,e,t);if(a!=null)return a}const i=typeEncoders[n];if(!i)throw new Error(`${encodeErrPrefix} unsupported type: ${n}`);return i(r,n,e,t)}function sortMapEntries(r,e){e.mapSorter&&r.sort(e.mapSorter)}function mapSorter$1(r,e){const t=Array.isArray(r[0])?r[0][0]:r[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==n.type)return t.type.compare(n.type);const o=t.type.major,i=cborEncoders$1[o].compareTokens(t,n);return i===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i}function tokensToEncoded(r,e,t,n){if(Array.isArray(e))for(const o of e)tokensToEncoded(r,o,t,n);else t[e.type.major](r,e,n)}function encodeCustom(r,e,t){const n=objectToTokens(r,t);if(!Array.isArray(n)&&t.quickEncodeToken){const o=t.quickEncodeToken(n);if(o)return o;const i=e[n.type.major];if(i.encodedSize){const a=i.encodedSize(n,t),s=new Bl(a);if(i(s,n,t),s.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return asU8A(s.chunks[0])}}return buf.reset(),tokensToEncoded(buf,n,e,t),buf.toBytes(!0)}function encode$c(r,e){return e=Object.assign({},defaultEncodeOptions$2,e),encodeCustom(r,cborEncoders$1,e)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let t=quick[e];if(t===void 0){const n=jump[e];if(!n)throw new Error(`${decodeErrPrefix} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const o=e&31;t=n(this.data,this.pos,o,this.options)}return this.pos+=t.encodedLength,t}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(r,e,t){const n=[];for(let o=0;o<r.value;o++){const i=tokensToObject(e,t);if(i===BREAK){if(r.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(i===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${o}, expected ${r.value})`);n[o]=i}return n}function tokenToMap(r,e,t){const n=t.useMaps===!0,o=n?void 0:{},i=n?new Map:void 0;for(let a=0;a<r.value;a++){const s=tokensToObject(e,t);if(s===BREAK){if(r.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(s===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${a} [no key], expected ${r.value})`);if(n!==!0&&typeof s!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof s})`);const c=tokensToObject(e,t);if(c===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${a} [no value], expected ${r.value})`);n?i.set(s,c):o[s]=c}return n?i:o}function tokensToObject(r,e){if(r.done())return DONE;const t=r.next();if(t.type===Type.break)return BREAK;if(t.type.terminal)return t.value;if(t.type===Type.array)return tokenToArray(t,r,e);if(t.type===Type.map)return tokenToMap(t,r,e);if(t.type===Type.tag){if(e.tags&&typeof e.tags[t.value]=="function"){const n=tokensToObject(r,e);return e.tags[t.value](n)}throw new Error(`${decodeErrPrefix} tag not supported (${t.value})`)}throw new Error("unsupported")}function decode$c(r,e){if(!(r instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);e=Object.assign({},defaultDecodeOptions,e);const t=e.tokenizer||new Tokeniser(r,e),n=tokensToObject(t,e);if(n===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(n===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);if(!t.done())throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return n}const cborEncoders=makeCborEncoders(),defaultEncodeOptions$1={float64:!1,quickEncodeToken};function tokensToLength(r,e=cborEncoders,t=defaultEncodeOptions$1){if(Array.isArray(r)){let n=0;for(const o of r)n+=tokensToLength(o,e,t);return n}else{const n=e[r.type.major];if(n.encodedSize===void 0||typeof n.encodedSize!="function")throw new Error(`Encoder for ${r.type.name} does not have an encodedSize()`);return n.encodedSize(r,t)}}var encode_1=encode$b,MSB=128,REST=127,MSBALL=~REST,INT=Math.pow(2,31);function encode$b(r,e,t){e=e||[],t=t||0;for(var n=t;r>=INT;)e[t++]=r&255|MSB,r/=128;for(;r&MSBALL;)e[t++]=r&255|MSB,r>>>=7;return e[t]=r|0,encode$b.bytes=t-n+1,e}var decode$b=read,MSB$1=128,REST$1=127;function read(r,n){var t=0,n=n||0,o=0,i=n,a,s=r.length;do{if(i>=s)throw read.bytes=0,new RangeError("Could not decode varint");a=r[i++],t+=o<28?(a&REST$1)<<o:(a&REST$1)*Math.pow(2,o),o+=7}while(a>=MSB$1);return read.bytes=i-n,t}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(r){return r<N1$1?1:r<N2$1?2:r<N3?3:r<N4?4:r<N5?5:r<N6?6:r<N7?7:r<N8?8:r<N9?9:10},varint$3={encode:encode_1,decode:decode$b,encodingLength:length},_brrp_varint=varint$3;const decode$a=r=>[_brrp_varint.decode(r),_brrp_varint.decode.bytes],encodeTo=(r,e,t=0)=>(_brrp_varint.encode(r,e,t),e),encodingLength=r=>_brrp_varint.encodingLength(r),empty=new Uint8Array(0),toHex=r=>r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),fromHex=r=>{const e=r.match(/../g);return e?new Uint8Array(e.map(t=>parseInt(t,16))):empty},equals$3=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},coerce=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},isBinary$1=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),fromString$3=r=>new TextEncoder().encode(r),toString$3=r=>new TextDecoder().decode(r),byteslib=Object.freeze(Object.defineProperty({__proto__:null,equals:equals$3,coerce,isBinary:isBinary$1,fromHex,toHex,fromString:fromString$3,toString:toString$3,empty},Symbol.toStringTag,{value:"Module"})),create$2=(r,e)=>{const t=e.byteLength,n=encodingLength(r),o=n+encodingLength(t),i=new Uint8Array(o+t);return encodeTo(r,i,0),encodeTo(t,i,n),i.set(e,o),new Digest$1(r,t,e,i)},decode$9=r=>{const e=coerce(r),[t,n]=decode$a(e),[o,i]=decode$a(e.subarray(n)),a=e.subarray(n+i);if(a.byteLength!==o)throw new Error("Incorrect length");return new Digest$1(t,o,a,e)},equals$2=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&equals$3(r.bytes,e.bytes);class Digest$1{constructor(e,t,n,o){this.code=e,this.size=t,this.digest=n,this.bytes=o}}const digest$1=Object.freeze(Object.defineProperty({__proto__:null,create:create$2,decode:decode$9,equals:equals$2,Digest:Digest$1},Symbol.toStringTag,{value:"Module"}));function base(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<r.length;o++){var i=r.charAt(o),a=i.charCodeAt(0);if(t[a]!==255)throw new TypeError(i+" is ambiguous");t[a]=o}var s=r.length,c=r.charAt(0),l=Math.log(s)/Math.log(256),f=Math.log(256)/Math.log(s);function g(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var d=0,T=0,O=0,I=E.length;O!==I&&E[O]===0;)O++,d++;for(var j=(I-O)*f+1>>>0,q=new Uint8Array(j);O!==I;){for(var H=E[O],L=0,J=j-1;(H!==0||L<T)&&J!==-1;J--,L++)H+=256*q[J]>>>0,q[J]=H%s>>>0,H=H/s>>>0;if(H!==0)throw new Error("Non-zero carry");T=L,O++}for(var X=j-T;X!==j&&q[X]===0;)X++;for(var re=c.repeat(d);X<j;++X)re+=r.charAt(q[X]);return re}function D(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var d=0;if(E[d]!==" "){for(var T=0,O=0;E[d]===c;)T++,d++;for(var I=(E.length-d)*l+1>>>0,j=new Uint8Array(I);E[d];){var q=t[E.charCodeAt(d)];if(q===255)return;for(var H=0,L=I-1;(q!==0||H<O)&&L!==-1;L--,H++)q+=s*j[L]>>>0,j[L]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");O=H,d++}if(E[d]!==" "){for(var J=I-O;J!==I&&j[J]===0;)J++;for(var X=new Uint8Array(T+(I-J)),re=T;J!==I;)X[re++]=j[J++];return X}}}function w(E){var d=D(E);if(d)return d;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:D,decode:w}}var src=base,_brrp__multiformats_scope_baseX=src;class Encoder{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or(this,e)}}class ComposedDecoder{constructor(e){this.decoders=e}or(e){return or(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or=(r,e)=>new ComposedDecoder({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class Codec{constructor(e,t,n,o){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=o,this.encoder=new Encoder(e,t,n),this.decoder=new Decoder(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$1=({name:r,prefix:e,encode:t,decode:n})=>new Codec(r,e,t,n),baseX=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX(t,e);return from$1({prefix:r,name:e,encode:n,decode:i=>coerce(o(i))})},decode$8=(r,e,t,n)=>{const o={};for(let f=0;f<e.length;++f)o[e[f]]=f;let i=r.length;for(;r[i-1]==="=";)--i;const a=new Uint8Array(i*t/8|0);let s=0,c=0,l=0;for(let f=0;f<i;++f){const g=o[r[f]];if(g===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|g,s+=t,s>=8&&(s-=8,a[l++]=255&c>>s)}if(s>=t||255&c<<8-s)throw new SyntaxError("Unexpected end of data");return a},encode$a=(r,e,t)=>{const n=e[e.length-1]==="=",o=(1<<t)-1;let i="",a=0,s=0;for(let c=0;c<r.length;++c)for(s=s<<8|r[c],a+=8;a>t;)a-=t,i+=e[o&s>>a];if(a&&(i+=e[o&s<<t-a]),n)for(;i.length*t&7;)i+="=";return i},rfc4648=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>from$1({prefix:e,name:r,encode(o){return encode$a(o,n,t)},decode(o){return decode$8(o,n,t,r)}}),base58btc$2=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$2,base58flickr},Symbol.toStringTag,{value:"Module"})),base32$1=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$2=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$1,base32upper,base32pad,base32padupper,base32hex,base32hexupper,base32hexpad,base32hexpadupper,base32z},Symbol.toStringTag,{value:"Module"}));class CID$2{constructor(e,t,n,o){this.code=t,this.version=e,this.multihash=n,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden,byteLength:hidden,code:readonly$1,version:readonly$1,multihash:readonly$1,bytes:readonly$1,_baseCache:hidden,asCID:hidden})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:t}=this;if(e!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID$2.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=create$2(e,t);return CID$2.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&equals$2(this.multihash,e.multihash)}toString(e){const{bytes:t,version:n,_baseCache:o}=this;switch(n){case 0:return toStringV0(t,o,e||base58btc$2.encoder);default:return toStringV1(t,o,e||base32$1.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return deprecate(/^0\.0/,IS_CID_DEPRECATION),!!(e&&(e[cidSymbol]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof CID$2)return e;if(e!=null&&e.asCID===e){const{version:t,code:n,multihash:o,bytes:i}=e;return new CID$2(t,n,o,i||encodeCID(t,n,o.bytes))}else if(e!=null&&e[cidSymbol]===!0){const{version:t,multihash:n,code:o}=e,i=decode$9(n);return CID$2.create(t,o,i)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID$2(e,t,n,n.bytes)}case 1:{const o=encodeCID(e,t,n.bytes);return new CID$2(e,t,n,o)}default:throw new Error("Invalid version")}}static createV0(e){return CID$2.create(0,DAG_PB_CODE,e)}static createV1(e,t){return CID$2.create(1,e,t)}static decode(e){const[t,n]=CID$2.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=CID$2.inspectBytes(e),n=t.size-t.multihashSize,o=coerce(e.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=o.subarray(t.multihashSize-t.digestSize),a=new Digest$1(t.multihashCode,t.digestSize,i,o);return[t.version===0?CID$2.createV0(a):CID$2.createV1(t.codec,a),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[g,D]=decode$a(e.subarray(t));return t+=D,g};let o=n(),i=DAG_PB_CODE;if(o===18?(o=0,t=0):o===1&&(i=n()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const a=t,s=n(),c=n(),l=t+c,f=l-a;return{version:o,codec:i,multihashCode:s,digestSize:c,multihashSize:f,size:l}}static parse(e,t){const[n,o]=parseCIDtoBytes(e,t),i=CID$2.decode(o);return i._baseCache.set(n,e),i}}const parseCIDtoBytes=(r,e)=>{switch(r[0]){case"Q":{const t=e||base58btc$2;return[base58btc$2.prefix,t.decode(`${base58btc$2.prefix}${r}`)]}case base58btc$2.prefix:{const t=e||base58btc$2;return[base58btc$2.prefix,t.decode(r)]}case base32$1.prefix:{const t=e||base32$1;return[base32$1.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},toStringV0=(r,e,t)=>{const{prefix:n}=t;if(n!==base58btc$2.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);const o=e.get(n);if(o==null){const i=t.encode(r).slice(1);return e.set(n,i),i}else return o},toStringV1=(r,e,t)=>{const{prefix:n}=t,o=e.get(n);if(o==null){const i=t.encode(r);return e.set(n,i),i}else return o},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID=(r,e,t)=>{const n=encodingLength(r),o=n+encodingLength(e),i=new Uint8Array(o+t.byteLength);return encodeTo(r,i,0),encodeTo(e,i,n),i.set(t,o),i},cidSymbol=Symbol.for("@ipld/js-cid/CID"),readonly$1={writable:!1,configurable:!1,enumerable:!0},hidden={writable:!1,enumerable:!1,configurable:!1},version="0.0.0-dev",deprecate=(r,e)=>{if(r.test(version))console.warn(e);else throw new Error(e)},IS_CID_DEPRECATION=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,cid=Object.freeze(Object.defineProperty({__proto__:null,CID:CID$2},Symbol.toStringTag,{value:"Module"})),CID_CBOR_TAG=42;function cidEncoder$1(r){if(r.asCID!==r)return null;const e=CID$2.asCID(r);if(!e)return null;const t=new Uint8Array(e.bytes.byteLength+1);return t.set(e.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,t)]}function undefinedEncoder$1(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$1(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$1={float64:!0,typeEncoders:{Object:cidEncoder$1,undefined:undefinedEncoder$1,number:numberEncoder$1}};function cidDecoder(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$2.decode(r.subarray(1))}const decodeOptions$1={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions$1.tags[CID_CBOR_TAG]=cidDecoder;const name$5="dag-cbor",code$5=113,encode$9=r=>encode$c(r,encodeOptions$1),decode$7=r=>decode$c(r,decodeOptions$1),dagCBOR=Object.freeze(Object.defineProperty({__proto__:null,name:name$5,code:code$5,encode:encode$9,decode:decode$7},Symbol.toStringTag,{value:"Module"}));class CarBufferWriter{constructor(e,t){this.bytes=e,this.byteOffset=t,this.roots=[],this.headerSize=t}addRoot(e,t){return addRoot(this,e,t),this}write(e){return addBlock(this,e),this}close(e){return close(this,e)}}const addRoot=(r,e,{resize:t=!1}={})=>{const{bytes:n,headerSize:o,byteOffset:i,roots:a}=r;r.roots.push(e);const s=headerLength(r);if(s>o)if(s-o+i<n.byteLength)if(t)resizeHeader(r,s);else throw a.pop(),new RangeError(`Header of size ${o} has no capacity for new root ${e}.
  However there is a space in the buffer and you could call addRoot(root, { resize: root }) to resize header to make a space for this root.`);else throw a.pop(),new RangeError(`Buffer has no capacity for a new root ${e}`)},blockLength=({cid:r,bytes:e})=>{const t=r.bytes.byteLength+e.byteLength;return varint$4.encodingLength(t)+t},addBlock=(r,{cid:e,bytes:t})=>{const n=e.bytes.byteLength+t.byteLength,o=varint$4.encode(n);if(r.byteOffset+o.length+n>r.bytes.byteLength)throw new RangeError("Buffer has no capacity for this block");writeBytes(r,o),writeBytes(r,e.bytes),writeBytes(r,t)},close=(r,{resize:e=!1}={})=>{const{roots:t,bytes:n,byteOffset:o,headerSize:i}=r,a=encode$9({version:1,roots:t}),s=varint$4.encode(a.length),c=s.length+a.byteLength;if(i-c===0)return writeHeader(r,s,a),n.subarray(0,o);if(e)return resizeHeader(r,c),writeHeader(r,s,a),n.subarray(0,r.byteOffset);throw new RangeError(`Header size was overestimated.
You can use close({ resize: true }) to resize header`)},resizeHeader=(r,e)=>{const{bytes:t,headerSize:n}=r;t.set(t.subarray(n,r.byteOffset),e),r.byteOffset+=e-n,r.headerSize=e},writeBytes=(r,e)=>{r.bytes.set(e,r.byteOffset),r.byteOffset+=e.length},writeHeader=({bytes:r},e,t)=>{r.set(e),r.set(t,e.length)},headerPreludeTokens=[new Token(Type.map,2),new Token(Type.string,"version"),new Token(Type.uint,1),new Token(Type.string,"roots")],CID_TAG=new Token(Type.tag,42),calculateHeaderLength=r=>{const e=[...headerPreludeTokens];e.push(new Token(Type.array,r.length));for(const n of r)e.push(CID_TAG),e.push(new Token(Type.bytes,{length:n+1}));const t=tokensToLength(e);return varint$4.encodingLength(t)+t},headerLength=({roots:r})=>calculateHeaderLength(r.map(e=>e.bytes.byteLength)),createWriter=(r,{roots:e=[],byteOffset:t=0,byteLength:n=r.byteLength,headerSize:o=headerLength({roots:e})}={})=>{const i=new Uint8Array(r,t,n),a=new CarBufferWriter(i,o);for(const s of e)a.addRoot(s);return a},Kinds={Null:r=>r===null,Int:r=>Number.isInteger(r),Float:r=>typeof r=="number"&&Number.isFinite(r),String:r=>typeof r=="string",Bool:r=>typeof r=="boolean",Bytes:r=>r instanceof Uint8Array,Link:r=>!Kinds.Null(r)&&typeof r=="object"&&r.asCID===r,List:r=>Array.isArray(r),Map:r=>!Kinds.Null(r)&&typeof r=="object"&&r.asCID!==r&&!Kinds.List(r)&&!Kinds.Bytes(r)},Types={Int:Kinds.Int,"CarHeader > version":r=>Types.Int(r),"CarHeader > roots (anon) > valueType (anon)":Kinds.Link,"CarHeader > roots (anon)":r=>Kinds.List(r)&&Array.prototype.every.call(r,Types["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":r=>Types["CarHeader > roots (anon)"](r),CarHeader:r=>{const e=r&&Object.keys(r);return Kinds.Map(r)&&["version"].every(t=>e.includes(t))&&Object.entries(r).every(([t,n])=>Types["CarHeader > "+t]&&Types["CarHeader > "+t](n))}},CarHeader=Types.CarHeader,CIDV0_BYTES={SHA2_256:18,LENGTH:32,DAG_PB:112},V2_HEADER_LENGTH=16+8+8+8;async function readVarint(r){const e=await r.upTo(8);if(!e.length)throw new Error("Unexpected end of data");const t=varint$4.decode(e);return r.seek(varint$4.decode.bytes),t}async function readV2Header(r){const e=await r.exactly(V2_HEADER_LENGTH),t=new DataView(e.buffer,e.byteOffset,e.byteLength);let n=0;const o={version:2,characteristics:[t.getBigUint64(n,!0),t.getBigUint64(n+=8,!0)],dataOffset:Number(t.getBigUint64(n+=8,!0)),dataSize:Number(t.getBigUint64(n+=8,!0)),indexOffset:Number(t.getBigUint64(n+=8,!0))};return r.seek(V2_HEADER_LENGTH),o}async function readHeader(r,e){const t=await readVarint(r);if(t===0)throw new Error("Invalid CAR header (zero length)");const n=await r.exactly(t);r.seek(t);const o=decode$7(n);if(!CarHeader(o))throw new Error("Invalid CAR header format");if(o.version!==1&&o.version!==2||e!==void 0&&o.version!==e)throw new Error(`Invalid CAR version: ${o.version}${e!==void 0?` (expected ${e})`:""}`);const i=Array.isArray(o.roots);if(o.version===1&&!i||o.version===2&&i)throw new Error("Invalid CAR header format");if(o.version===1)return o;const a=await readV2Header(r);r.seek(a.dataOffset-r.pos);const s=await readHeader(r,1);return Object.assign(s,a)}async function readMultihash(r){const e=await r.upTo(8);varint$4.decode(e);const t=varint$4.decode.bytes,n=varint$4.decode(e.subarray(varint$4.decode.bytes)),o=varint$4.decode.bytes,i=t+o+n,a=await r.exactly(i);return r.seek(i),a}async function readCid(r){const e=await r.exactly(2);if(e[0]===CIDV0_BYTES.SHA2_256&&e[1]===CIDV0_BYTES.LENGTH){const a=await r.exactly(34);r.seek(34);const s=decode$9(a);return CID$2.create(0,CIDV0_BYTES.DAG_PB,s)}const t=await readVarint(r);if(t!==1)throw new Error(`Unexpected CID version (${t})`);const n=await readVarint(r),o=await readMultihash(r),i=decode$9(o);return CID$2.create(t,n,i)}async function readBlockHead(r){const e=r.pos;let t=await readVarint(r);if(t===0)throw new Error("Invalid CAR section (zero length)");t+=r.pos-e;const n=await readCid(r),o=t-Number(r.pos-e);return{cid:n,length:t,blockLength:o}}async function readBlock(r){const{cid:e,blockLength:t}=await readBlockHead(r),n=await r.exactly(t);return r.seek(t),{bytes:n,cid:e}}async function readBlockIndex(r){const e=r.pos,{cid:t,length:n,blockLength:o}=await readBlockHead(r),i={cid:t,length:n,blockLength:o,offset:e,blockOffset:r.pos};return r.seek(i.blockLength),i}function createDecoder(r){const e=(async()=>{const t=await readHeader(r);if(t.version===2){const n=r.pos-t.dataOffset;r=limitReader(r,t.dataSize-n)}return t})();return{header:()=>e,async*blocks(){for(await e;(await r.upTo(8)).length>0;)yield await readBlock(r)},async*blocksIndex(){for(await e;(await r.upTo(8)).length>0;)yield await readBlockIndex(r)}}}function bytesReader(r){let e=0;return{async upTo(t){return r.subarray(e,e+Math.min(t,r.length-e))},async exactly(t){if(t>r.length-e)throw new Error("Unexpected end of data");return r.subarray(e,e+t)},seek(t){e+=t},get pos(){return e}}}function chunkReader(r){let e=0,t=0,n=0,o=new Uint8Array(0);const i=async a=>{t=o.length-n;const s=[o.subarray(n)];for(;t<a;){const l=await r();if(l==null)break;t<0?l.length>t&&s.push(l.subarray(-t)):s.push(l),t+=l.length}o=new Uint8Array(s.reduce((l,f)=>l+f.length,0));let c=0;for(const l of s)o.set(l,c),c+=l.length;n=0};return{async upTo(a){return o.length-n<a&&await i(a),o.subarray(n,n+Math.min(o.length-n,a))},async exactly(a){if(o.length-n<a&&await i(a),o.length-n<a)throw new Error("Unexpected end of data");return o.subarray(n,n+a)},seek(a){e+=a,n+=a},get pos(){return e}}}function asyncIterableReader(r){const e=r[Symbol.asyncIterator]();async function t(){const n=await e.next();return n.done?null:n.value}return chunkReader(t)}function limitReader(r,e){let t=0;return{async upTo(n){let o=await r.upTo(n);return o.length+t>e&&(o=o.subarray(0,e-t)),o},async exactly(n){const o=await r.exactly(n);if(o.length+t>e)throw new Error("Unexpected end of data");return o},seek(n){t+=n,r.seek(n)},get pos(){return r.pos}}}class CarReader{constructor(e,t){this._header=e,this._blocks=t,this._keys=t.map(n=>n.cid.toString())}get version(){return this._header.version}async getRoots(){return this._header.roots}async has(e){return this._keys.indexOf(e.toString())>-1}async get(e){const t=this._keys.indexOf(e.toString());return t>-1?this._blocks[t]:void 0}async*blocks(){for(const e of this._blocks)yield e}async*cids(){for(const e of this._blocks)yield e.cid}static async fromBytes(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return decodeReaderComplete(bytesReader(e))}static async fromIterable(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return decodeReaderComplete(asyncIterableReader(e))}}async function decodeReaderComplete(r){const e=createDecoder(r),t=await e.header(),n=[];for await(const o of e.blocks())n.push(o);return new CarReader(t,n)}class CarIteratorBase{constructor(e,t,n){this._version=e,this._roots=t,this._iterable=n,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}}class CarBlockIterator extends CarIteratorBase{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){const{version:t,roots:n,iterator:o}=await fromBytes$1(e);return new CarBlockIterator(t,n,o)}static async fromIterable(e){const{version:t,roots:n,iterator:o}=await fromIterable(e);return new CarBlockIterator(t,n,o)}}async function fromBytes$1(r){if(!(r instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return decodeIterator(bytesReader(r))}async function fromIterable(r){if(!r||typeof r[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return decodeIterator(asyncIterableReader(r))}async function decodeIterator(r){const e=createDecoder(r),{version:t,roots:n}=await e.header();return{version:t,roots:n,iterator:e.blocks()}}function createHeader(r){const e=encode$9({version:1,roots:r}),t=varint$4.encode(e.length),n=new Uint8Array(t.length+e.length);return n.set(t,0),n.set(e,t.length),n}function createEncoder(r){return{async setRoots(e){const t=createHeader(e);await r.write(t)},async writeBlock(e){const{cid:t,bytes:n}=e;await r.write(new Uint8Array(varint$4.encode(t.bytes.length+n.length))),await r.write(t.bytes),n.length&&await r.write(n)},async close(){await r.end()}}}function noop$1(){}function create$1(){const r=[];let e=null,t=noop$1,n=!1,o=null,i=noop$1;const a=()=>(e||(e=new Promise(l=>{t=()=>{e=null,t=noop$1,l()}})),e),s={write(l){r.push(l);const f=a();return i(),f},async end(){n=!0;const l=a();i(),await l}},c={async next(){const l=r.shift();return l?(r.length===0&&t(),{done:!1,value:l}):n?(t(),{done:!0,value:void 0}):(o||(o=new Promise(f=>{i=()=>(o=null,i=noop$1,f(c.next()))})),o)}};return{writer:s,iterator:c}}class CarWriter{constructor(e,t){this._encoder=t,this._mutex=t.setRoots(e),this._ended=!1}async put(e){if(!(e.bytes instanceof Uint8Array)||!e.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");const t=CID$2.asCID(e.cid);if(!t)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then(()=>this._encoder.writeBlock({cid:t,bytes:e.bytes})),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(e){e=toRoots(e);const{encoder:t,iterator:n}=encodeWriter(),o=new CarWriter(e,t),i=new CarWriterOut(n);return{writer:o,out:i}}static createAppender(){const{encoder:e,iterator:t}=encodeWriter();e.setRoots=()=>Promise.resolve();const n=new CarWriter([],e),o=new CarWriterOut(t);return{writer:n,out:o}}static async updateRootsInBytes(e,t){const n=bytesReader(e);await readHeader(n);const o=createHeader(t);if(Number(n.pos)!==o.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${n.pos} bytes, new header is ${o.length} bytes)`);return e.set(o,0),e}}class CarWriterOut{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}}function encodeWriter(){const r=create$1(),{writer:e,iterator:t}=r;return{encoder:createEncoder(e),iterator:t}}function toRoots(r){if(r===void 0)return[];if(!Array.isArray(r)){const t=CID$2.asCID(r);if(!t)throw new TypeError("roots must be a single CID or an array of CIDs");return[t]}const e=[];for(const t of r){const n=CID$2.asCID(t);if(!n)throw new TypeError("roots must be a single CID or an array of CIDs");e.push(n)}return e}const from=({name:r,code:e,encode:t})=>new Hasher(r,e,t);class Hasher{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?create$2(this.code,t):t.then(n=>create$2(this.code,n))}else throw Error("Unknown type, must be binary type")}}const name$4="raw",code$4=85,encode$8=r=>coerce(r),decode$6=r=>coerce(r),raw=Object.freeze(Object.defineProperty({__proto__:null,name:name$4,code:code$4,encode:encode$8,decode:decode$6},Symbol.toStringTag,{value:"Module"})),sha=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),sha256=from({name:"sha2-256",code:18,encode:sha("SHA-256")}),sha512=from({name:"sha2-512",code:19,encode:sha("SHA-512")}),sha2=Object.freeze(Object.defineProperty({__proto__:null,sha256,sha512},Symbol.toStringTag,{value:"Module"})),readonly=({enumerable:r=!0,configurable:e=!1}={})=>({enumerable:r,configurable:e,writable:!1}),links=function*(r,e){if(r!=null&&!(r instanceof Uint8Array))for(const[t,n]of Object.entries(r)){const o=[...e,t];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(const[i,a]of n.entries()){const s=[...o,i],c=CID$2.asCID(a);c?yield[s.join("/"),c]:typeof a=="object"&&(yield*links(a,s))}else{const i=CID$2.asCID(n);i?yield[o.join("/"),i]:yield*links(n,o)}}},tree=function*(r,e){if(r!=null)for(const[t,n]of Object.entries(r)){const o=[...e,t];if(yield o.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!CID$2.asCID(n))if(Array.isArray(n))for(const[i,a]of n.entries()){const s=[...o,i];yield s.join("/"),typeof a=="object"&&!CID$2.asCID(a)&&(yield*tree(a,s))}else yield*tree(n,o)}},get=(r,e)=>{let t=r;for(const[n,o]of e.entries()){if(t=t[o],t==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(a=>`[${JSON.stringify(a)}]`).join("")}`);const i=CID$2.asCID(t);if(i)return{value:i,remaining:e.slice(n+1).join("/")}}return{value:t}};class Block{constructor({cid:e,bytes:t,value:n}){if(!e||!t||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:readonly(),bytes:readonly(),value:readonly(),asBlock:readonly()})}links(){return links(this.value,[])}tree(){return tree(this.value,[])}get(e="/"){return get(this.value,e.split("/").filter(Boolean))}}const encode$7=async({value:r,codec:e,hasher:t})=>{if(typeof r>"u")throw new Error('Missing required argument "value"');if(!e||!t)throw new Error("Missing required argument: codec or hasher");const n=e.encode(r),o=await t.digest(n),i=CID$2.create(1,e.code,o);return new Block({value:r,bytes:n,cid:i})},createUnsafe=({bytes:r,cid:e,value:t,codec:n})=>{const o=t!==void 0?t:n&&n.decode(r);if(o===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new Block({cid:e,bytes:r,value:o})},create=async({bytes:r,cid:e,hasher:t,codec:n})=>{if(!r)throw new Error('Missing required argument "bytes"');if(!t)throw new Error('Missing required argument "hasher"');const o=n.decode(r),i=await t.digest(r);if(!equals$3(e.multihash.bytes,i.bytes))throw new Error("CID hash does not match bytes");return createUnsafe({bytes:r,cid:e,value:o,codec:n})};function mitt(r){return{all:r=r||new Map,on:function(e,t){var n=r.get(e);n?n.push(t):r.set(e,[t])},off:function(e,t){var n=r.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):r.set(e,[]))},emit:function(e,t){var n=r.get(e);n&&n.slice().map(function(o){o(t)}),(n=r.get("*"))&&n.slice().map(function(o){o(e,t)})}}}const{isBinary}=byteslib,encode$6=r=>isBinary(r)?encode$7({value:r,hasher:sha256,codec:raw}):encode$7({value:r,hasher:sha256,codec:dagCBOR}),decode$5=({bytes:r,cid:e})=>{let t,n;const{code:o}=e,i=e.multihash.code||decode$9(e.multihash).code;if(i===18)t=sha256;else throw new Error("Unsupported hash function: "+i);if(o===113)n=dagCBOR;else if(o===85)n=raw;else throw new Error("Unsupported codec: "+o);return create({bytes:r,cid:e,codec:n,hasher:t})};class Transaction{constructor(){Object.assign(this,mitt()),this.blocks=[]}static create(){return new this}static async load(e){const t=await CarReader.fromBytes(e),[n]=await t.getRoots();return{root:n,get:i=>t.get(i).then(a=>decode$5(a)).then(({value:a})=>a)}}async add(e){const t=await encode$6(e);return this.last=t,this.blocks.push(t),this.emit("size",this.size),t.cid}undo(){return this.blocks.pop()}async commit(){const e=this.last.cid;let t=0,n=headerLength({roots:[e]});t+=n;for(const a of this.blocks)t+=blockLength(a);const o=new Uint8Array(t),i=await createWriter(o,{headerSize:n});i.addRoot(e);for(const a of this.blocks)i.write(a);return await i.close(),i.bytes}get size(){if(!(this!=null&&this.last))return 0;const e=this.last.cid;let t=0;t+=headerLength({roots:[e]});for(const o of this.blocks)t+=blockLength(o);return t}}var f_=Object.create,fo=Object.defineProperty,l_=Object.getOwnPropertyDescriptor,d_=Object.getOwnPropertyNames,p_=Object.getPrototypeOf,h_=Object.prototype.hasOwnProperty,B=(r,e)=>()=>(r&&(e=r(r=0)),e),h=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),G=(r,e)=>{for(var t in e)fo(r,t,{get:e[t],enumerable:!0})},zl=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of d_(e))!h_.call(r,o)&&o!==t&&fo(r,o,{get:()=>e[o],enumerable:!(n=l_(e,o))||n.enumerable});return r},_=(r,e,t)=>(t=r!=null?f_(p_(r)):{},zl(e||!r||!r.__esModule?fo(t,"default",{value:r,enumerable:!0}):t,r)),ue=r=>zl(fo({},"__esModule",{value:!0}),r),Gl=h(r=>{u(),r.byteLength=c,r.toByteArray=f,r.fromByteArray=w;var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0,a=o.length;i<a;++i)e[i]=o[i],t[o.charCodeAt(i)]=i;var i,a;t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;function s(E){var d=E.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var T=E.indexOf("=");T===-1&&(T=d);var O=T===d?0:4-T%4;return[T,O]}function c(E){var d=s(E),T=d[0],O=d[1];return(T+O)*3/4-O}function l(E,d,T){return(d+T)*3/4-T}function f(E){var d,T=s(E),O=T[0],I=T[1],j=new n(l(E,O,I)),q=0,H=I>0?O-4:O,L;for(L=0;L<H;L+=4)d=t[E.charCodeAt(L)]<<18|t[E.charCodeAt(L+1)]<<12|t[E.charCodeAt(L+2)]<<6|t[E.charCodeAt(L+3)],j[q++]=d>>16&255,j[q++]=d>>8&255,j[q++]=d&255;return I===2&&(d=t[E.charCodeAt(L)]<<2|t[E.charCodeAt(L+1)]>>4,j[q++]=d&255),I===1&&(d=t[E.charCodeAt(L)]<<10|t[E.charCodeAt(L+1)]<<4|t[E.charCodeAt(L+2)]>>2,j[q++]=d>>8&255,j[q++]=d&255),j}function g(E){return e[E>>18&63]+e[E>>12&63]+e[E>>6&63]+e[E&63]}function D(E,d,T){for(var O,I=[],j=d;j<T;j+=3)O=(E[j]<<16&16711680)+(E[j+1]<<8&65280)+(E[j+2]&255),I.push(g(O));return I.join("")}function w(E){for(var d,T=E.length,O=T%3,I=[],j=16383,q=0,H=T-O;q<H;q+=j)I.push(D(E,q,q+j>H?H:q+j));return O===1?(d=E[T-1],I.push(e[d>>2]+e[d<<4&63]+"==")):O===2&&(d=(E[T-2]<<8)+E[T-1],I.push(e[d>>10]+e[d>>4&63]+e[d<<2&63]+"=")),I.join("")}}),Hl=h(r=>{u(),r.read=function(e,t,n,o,i){var a,s,c=i*8-o-1,l=(1<<c)-1,f=l>>1,g=-7,D=n?i-1:0,w=n?-1:1,E=e[t+D];for(D+=w,a=E&(1<<-g)-1,E>>=-g,g+=c;g>0;a=a*256+e[t+D],D+=w,g-=8);for(s=a&(1<<-g)-1,a>>=-g,g+=o;g>0;s=s*256+e[t+D],D+=w,g-=8);if(a===0)a=1-f;else{if(a===l)return s?NaN:(E?-1:1)*(1/0);s=s+Math.pow(2,o),a=a-f}return(E?-1:1)*s*Math.pow(2,a-o)},r.write=function(e,t,n,o,i,a){var s,c,l,f=a*8-i-1,g=(1<<f)-1,D=g>>1,w=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=o?0:a-1,d=o?1:-1,T=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,s=g):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+D>=1?t+=w/l:t+=w*Math.pow(2,1-D),t*l>=2&&(s++,l/=2),s+D>=g?(c=0,s=g):s+D>=1?(c=(t*l-1)*Math.pow(2,i),s=s+D):(c=t*Math.pow(2,D-1)*Math.pow(2,i),s=0));i>=8;e[n+E]=c&255,E+=d,c/=256,i-=8);for(s=s<<i|c,f+=i;f>0;e[n+E]=s&255,E+=d,s/=256,f-=8);e[n+E-d]|=T*128}}),ct=h(r=>{u();var e=Gl(),t=Hl(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=s,r.SlowBuffer=I,r.INSPECT_MAX_BYTES=50;var o=2147483647;r.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let k=new Uint8Array(1),P={foo:function(){return 42}};return Object.setPrototypeOf(P,Uint8Array.prototype),Object.setPrototypeOf(k,P),k.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function a(k){if(k>o)throw new RangeError('The value "'+k+'" is invalid for option "size"');let P=new Uint8Array(k);return Object.setPrototypeOf(P,s.prototype),P}function s(k,P,F){if(typeof k=="number"){if(typeof P=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(k)}return c(k,P,F)}s.poolSize=8192;function c(k,P,F){if(typeof k=="string")return D(k,P);if(ArrayBuffer.isView(k))return E(k);if(k==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if(_t(k,ArrayBuffer)||k&&_t(k.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(_t(k,SharedArrayBuffer)||k&&_t(k.buffer,SharedArrayBuffer)))return d(k,P,F);if(typeof k=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let ee=k.valueOf&&k.valueOf();if(ee!=null&&ee!==k)return s.from(ee,P,F);let ce=T(k);if(ce)return ce;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof k[Symbol.toPrimitive]=="function")return s.from(k[Symbol.toPrimitive]("string"),P,F);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k)}s.from=function(k,P,F){return c(k,P,F)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function l(k){if(typeof k!="number")throw new TypeError('"size" argument must be of type number');if(k<0)throw new RangeError('The value "'+k+'" is invalid for option "size"')}function f(k,P,F){return l(k),k<=0?a(k):P!==void 0?typeof F=="string"?a(k).fill(P,F):a(k).fill(P):a(k)}s.alloc=function(k,P,F){return f(k,P,F)};function g(k){return l(k),a(k<0?0:O(k)|0)}s.allocUnsafe=function(k){return g(k)},s.allocUnsafeSlow=function(k){return g(k)};function D(k,P){if((typeof P!="string"||P==="")&&(P="utf8"),!s.isEncoding(P))throw new TypeError("Unknown encoding: "+P);let F=j(k,P)|0,ee=a(F),ce=ee.write(k,P);return ce!==F&&(ee=ee.slice(0,ce)),ee}function w(k){let P=k.length<0?0:O(k.length)|0,F=a(P);for(let ee=0;ee<P;ee+=1)F[ee]=k[ee]&255;return F}function E(k){if(_t(k,Uint8Array)){let P=new Uint8Array(k);return d(P.buffer,P.byteOffset,P.byteLength)}return w(k)}function d(k,P,F){if(P<0||k.byteLength<P)throw new RangeError('"offset" is outside of buffer bounds');if(k.byteLength<P+(F||0))throw new RangeError('"length" is outside of buffer bounds');let ee;return P===void 0&&F===void 0?ee=new Uint8Array(k):F===void 0?ee=new Uint8Array(k,P):ee=new Uint8Array(k,P,F),Object.setPrototypeOf(ee,s.prototype),ee}function T(k){if(s.isBuffer(k)){let P=O(k.length)|0,F=a(P);return F.length===0||k.copy(F,0,0,P),F}if(k.length!==void 0)return typeof k.length!="number"||Dt(k.length)?a(0):w(k);if(k.type==="Buffer"&&Array.isArray(k.data))return w(k.data)}function O(k){if(k>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return k|0}function I(k){return+k!=k&&(k=0),s.alloc(+k)}s.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==s.prototype},s.compare=function(k,P){if(_t(k,Uint8Array)&&(k=s.from(k,k.offset,k.byteLength)),_t(P,Uint8Array)&&(P=s.from(P,P.offset,P.byteLength)),!s.isBuffer(k)||!s.isBuffer(P))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===P)return 0;let F=k.length,ee=P.length;for(let ce=0,ye=Math.min(F,ee);ce<ye;++ce)if(k[ce]!==P[ce]){F=k[ce],ee=P[ce];break}return F<ee?-1:ee<F?1:0},s.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(k,P){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return s.alloc(0);let F;if(P===void 0)for(P=0,F=0;F<k.length;++F)P+=k[F].length;let ee=s.allocUnsafe(P),ce=0;for(F=0;F<k.length;++F){let ye=k[F];if(_t(ye,Uint8Array))ce+ye.length>ee.length?(s.isBuffer(ye)||(ye=s.from(ye)),ye.copy(ee,ce)):Uint8Array.prototype.set.call(ee,ye,ce);else if(s.isBuffer(ye))ye.copy(ee,ce);else throw new TypeError('"list" argument must be an Array of Buffers');ce+=ye.length}return ee};function j(k,P){if(s.isBuffer(k))return k.length;if(ArrayBuffer.isView(k)||_t(k,ArrayBuffer))return k.byteLength;if(typeof k!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);let F=k.length,ee=arguments.length>2&&arguments[2]===!0;if(!ee&&F===0)return 0;let ce=!1;for(;;)switch(P){case"ascii":case"latin1":case"binary":return F;case"utf8":case"utf-8":return ot(k).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F*2;case"hex":return F>>>1;case"base64":return Ct(k).length;default:if(ce)return ee?-1:ot(k).length;P=(""+P).toLowerCase(),ce=!0}}s.byteLength=j;function q(k,P,F){let ee=!1;if((P===void 0||P<0)&&(P=0),P>this.length||((F===void 0||F>this.length)&&(F=this.length),F<=0)||(F>>>=0,P>>>=0,F<=P))return"";for(k||(k="utf8");;)switch(k){case"hex":return it(this,P,F);case"utf8":case"utf-8":return Le(this,P,F);case"ascii":return lt(this,P,F);case"latin1":case"binary":return nt(this,P,F);case"base64":return Re(this,P,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ft(this,P,F);default:if(ee)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase(),ee=!0}}s.prototype._isBuffer=!0;function H(k,P,F){let ee=k[P];k[P]=k[F],k[F]=ee}s.prototype.swap16=function(){let k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let P=0;P<k;P+=2)H(this,P,P+1);return this},s.prototype.swap32=function(){let k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let P=0;P<k;P+=4)H(this,P,P+3),H(this,P+1,P+2);return this},s.prototype.swap64=function(){let k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let P=0;P<k;P+=8)H(this,P,P+7),H(this,P+1,P+6),H(this,P+2,P+5),H(this,P+3,P+4);return this},s.prototype.toString=function(){let k=this.length;return k===0?"":arguments.length===0?Le(this,0,k):q.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(k){if(!s.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:s.compare(this,k)===0},s.prototype.inspect=function(){let k="",P=r.INSPECT_MAX_BYTES;return k=this.toString("hex",0,P).replace(/(.{2})/g,"$1 ").trim(),this.length>P&&(k+=" ... "),"<Buffer "+k+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(k,P,F,ee,ce){if(_t(k,Uint8Array)&&(k=s.from(k,k.offset,k.byteLength)),!s.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(P===void 0&&(P=0),F===void 0&&(F=k?k.length:0),ee===void 0&&(ee=0),ce===void 0&&(ce=this.length),P<0||F>k.length||ee<0||ce>this.length)throw new RangeError("out of range index");if(ee>=ce&&P>=F)return 0;if(ee>=ce)return-1;if(P>=F)return 1;if(P>>>=0,F>>>=0,ee>>>=0,ce>>>=0,this===k)return 0;let ye=ce-ee,Be=F-P,st=Math.min(ye,Be),wt=this.slice(ee,ce),ut=k.slice(P,F);for(let at=0;at<st;++at)if(wt[at]!==ut[at]){ye=wt[at],Be=ut[at];break}return ye<Be?-1:Be<ye?1:0};function L(k,P,F,ee,ce){if(k.length===0)return-1;if(typeof F=="string"?(ee=F,F=0):F>2147483647?F=2147483647:F<-2147483648&&(F=-2147483648),F=+F,Dt(F)&&(F=ce?0:k.length-1),F<0&&(F=k.length+F),F>=k.length){if(ce)return-1;F=k.length-1}else if(F<0)if(ce)F=0;else return-1;if(typeof P=="string"&&(P=s.from(P,ee)),s.isBuffer(P))return P.length===0?-1:J(k,P,F,ee,ce);if(typeof P=="number")return P=P&255,typeof Uint8Array.prototype.indexOf=="function"?ce?Uint8Array.prototype.indexOf.call(k,P,F):Uint8Array.prototype.lastIndexOf.call(k,P,F):J(k,[P],F,ee,ce);throw new TypeError("val must be string, number or Buffer")}function J(k,P,F,ee,ce){let ye=1,Be=k.length,st=P.length;if(ee!==void 0&&(ee=String(ee).toLowerCase(),ee==="ucs2"||ee==="ucs-2"||ee==="utf16le"||ee==="utf-16le")){if(k.length<2||P.length<2)return-1;ye=2,Be/=2,st/=2,F/=2}function wt(at,bt){return ye===1?at[bt]:at.readUInt16BE(bt*ye)}let ut;if(ce){let at=-1;for(ut=F;ut<Be;ut++)if(wt(k,ut)===wt(P,at===-1?0:ut-at)){if(at===-1&&(at=ut),ut-at+1===st)return at*ye}else at!==-1&&(ut-=ut-at),at=-1}else for(F+st>Be&&(F=Be-st),ut=F;ut>=0;ut--){let at=!0;for(let bt=0;bt<st;bt++)if(wt(k,ut+bt)!==wt(P,bt)){at=!1;break}if(at)return ut}return-1}s.prototype.includes=function(k,P,F){return this.indexOf(k,P,F)!==-1},s.prototype.indexOf=function(k,P,F){return L(this,k,P,F,!0)},s.prototype.lastIndexOf=function(k,P,F){return L(this,k,P,F,!1)};function X(k,P,F,ee){F=Number(F)||0;let ce=k.length-F;ee?(ee=Number(ee),ee>ce&&(ee=ce)):ee=ce;let ye=P.length;ee>ye/2&&(ee=ye/2);let Be;for(Be=0;Be<ee;++Be){let st=parseInt(P.substr(Be*2,2),16);if(Dt(st))return Be;k[F+Be]=st}return Be}function re(k,P,F,ee){return St(ot(P,k.length-F),k,F,ee)}function he(k,P,F,ee){return St(Ke(P),k,F,ee)}function me(k,P,F,ee){return St(Ct(P),k,F,ee)}function _e(k,P,F,ee){return St(fe(P,k.length-F),k,F,ee)}s.prototype.write=function(k,P,F,ee){if(P===void 0)ee="utf8",F=this.length,P=0;else if(F===void 0&&typeof P=="string")ee=P,F=this.length,P=0;else if(isFinite(P))P=P>>>0,isFinite(F)?(F=F>>>0,ee===void 0&&(ee="utf8")):(ee=F,F=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let ce=this.length-P;if((F===void 0||F>ce)&&(F=ce),k.length>0&&(F<0||P<0)||P>this.length)throw new RangeError("Attempt to write outside buffer bounds");ee||(ee="utf8");let ye=!1;for(;;)switch(ee){case"hex":return X(this,k,P,F);case"utf8":case"utf-8":return re(this,k,P,F);case"ascii":case"latin1":case"binary":return he(this,k,P,F);case"base64":return me(this,k,P,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,k,P,F);default:if(ye)throw new TypeError("Unknown encoding: "+ee);ee=(""+ee).toLowerCase(),ye=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Re(k,P,F){return P===0&&F===k.length?e.fromByteArray(k):e.fromByteArray(k.slice(P,F))}function Le(k,P,F){F=Math.min(k.length,F);let ee=[],ce=P;for(;ce<F;){let ye=k[ce],Be=null,st=ye>239?4:ye>223?3:ye>191?2:1;if(ce+st<=F){let wt,ut,at,bt;switch(st){case 1:ye<128&&(Be=ye);break;case 2:wt=k[ce+1],(wt&192)===128&&(bt=(ye&31)<<6|wt&63,bt>127&&(Be=bt));break;case 3:wt=k[ce+1],ut=k[ce+2],(wt&192)===128&&(ut&192)===128&&(bt=(ye&15)<<12|(wt&63)<<6|ut&63,bt>2047&&(bt<55296||bt>57343)&&(Be=bt));break;case 4:wt=k[ce+1],ut=k[ce+2],at=k[ce+3],(wt&192)===128&&(ut&192)===128&&(at&192)===128&&(bt=(ye&15)<<18|(wt&63)<<12|(ut&63)<<6|at&63,bt>65535&&bt<1114112&&(Be=bt))}}Be===null?(Be=65533,st=1):Be>65535&&(Be-=65536,ee.push(Be>>>10&1023|55296),Be=56320|Be&1023),ee.push(Be),ce+=st}return ze(ee)}var Qe=4096;function ze(k){let P=k.length;if(P<=Qe)return String.fromCharCode.apply(String,k);let F="",ee=0;for(;ee<P;)F+=String.fromCharCode.apply(String,k.slice(ee,ee+=Qe));return F}function lt(k,P,F){let ee="";F=Math.min(k.length,F);for(let ce=P;ce<F;++ce)ee+=String.fromCharCode(k[ce]&127);return ee}function nt(k,P,F){let ee="";F=Math.min(k.length,F);for(let ce=P;ce<F;++ce)ee+=String.fromCharCode(k[ce]);return ee}function it(k,P,F){let ee=k.length;(!P||P<0)&&(P=0),(!F||F<0||F>ee)&&(F=ee);let ce="";for(let ye=P;ye<F;++ye)ce+=jt[k[ye]];return ce}function ft(k,P,F){let ee=k.slice(P,F),ce="";for(let ye=0;ye<ee.length-1;ye+=2)ce+=String.fromCharCode(ee[ye]+ee[ye+1]*256);return ce}s.prototype.slice=function(k,P){let F=this.length;k=~~k,P=P===void 0?F:~~P,k<0?(k+=F,k<0&&(k=0)):k>F&&(k=F),P<0?(P+=F,P<0&&(P=0)):P>F&&(P=F),P<k&&(P=k);let ee=this.subarray(k,P);return Object.setPrototypeOf(ee,s.prototype),ee};function tt(k,P,F){if(k%1!==0||k<0)throw new RangeError("offset is not uint");if(k+P>F)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(k,P,F){k=k>>>0,P=P>>>0,F||tt(k,P,this.length);let ee=this[k],ce=1,ye=0;for(;++ye<P&&(ce*=256);)ee+=this[k+ye]*ce;return ee},s.prototype.readUintBE=s.prototype.readUIntBE=function(k,P,F){k=k>>>0,P=P>>>0,F||tt(k,P,this.length);let ee=this[k+--P],ce=1;for(;P>0&&(ce*=256);)ee+=this[k+--P]*ce;return ee},s.prototype.readUint8=s.prototype.readUInt8=function(k,P){return k=k>>>0,P||tt(k,1,this.length),this[k]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(k,P){return k=k>>>0,P||tt(k,2,this.length),this[k]|this[k+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(k,P){return k=k>>>0,P||tt(k,2,this.length),this[k]<<8|this[k+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(k,P){return k=k>>>0,P||tt(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(k,P){return k=k>>>0,P||tt(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},s.prototype.readBigUInt64LE=At(function(k){k=k>>>0,Y(k,"offset");let P=this[k],F=this[k+7];(P===void 0||F===void 0)&&Z(k,this.length-8);let ee=P+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24,ce=this[++k]+this[++k]*2**8+this[++k]*2**16+F*2**24;return BigInt(ee)+(BigInt(ce)<<BigInt(32))}),s.prototype.readBigUInt64BE=At(function(k){k=k>>>0,Y(k,"offset");let P=this[k],F=this[k+7];(P===void 0||F===void 0)&&Z(k,this.length-8);let ee=P*2**24+this[++k]*2**16+this[++k]*2**8+this[++k],ce=this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+F;return(BigInt(ee)<<BigInt(32))+BigInt(ce)}),s.prototype.readIntLE=function(k,P,F){k=k>>>0,P=P>>>0,F||tt(k,P,this.length);let ee=this[k],ce=1,ye=0;for(;++ye<P&&(ce*=256);)ee+=this[k+ye]*ce;return ce*=128,ee>=ce&&(ee-=Math.pow(2,8*P)),ee},s.prototype.readIntBE=function(k,P,F){k=k>>>0,P=P>>>0,F||tt(k,P,this.length);let ee=P,ce=1,ye=this[k+--ee];for(;ee>0&&(ce*=256);)ye+=this[k+--ee]*ce;return ce*=128,ye>=ce&&(ye-=Math.pow(2,8*P)),ye},s.prototype.readInt8=function(k,P){return k=k>>>0,P||tt(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},s.prototype.readInt16LE=function(k,P){k=k>>>0,P||tt(k,2,this.length);let F=this[k]|this[k+1]<<8;return F&32768?F|4294901760:F},s.prototype.readInt16BE=function(k,P){k=k>>>0,P||tt(k,2,this.length);let F=this[k+1]|this[k]<<8;return F&32768?F|4294901760:F},s.prototype.readInt32LE=function(k,P){return k=k>>>0,P||tt(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},s.prototype.readInt32BE=function(k,P){return k=k>>>0,P||tt(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},s.prototype.readBigInt64LE=At(function(k){k=k>>>0,Y(k,"offset");let P=this[k],F=this[k+7];(P===void 0||F===void 0)&&Z(k,this.length-8);let ee=this[k+4]+this[k+5]*2**8+this[k+6]*2**16+(F<<24);return(BigInt(ee)<<BigInt(32))+BigInt(P+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24)}),s.prototype.readBigInt64BE=At(function(k){k=k>>>0,Y(k,"offset");let P=this[k],F=this[k+7];(P===void 0||F===void 0)&&Z(k,this.length-8);let ee=(P<<24)+this[++k]*2**16+this[++k]*2**8+this[++k];return(BigInt(ee)<<BigInt(32))+BigInt(this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+F)}),s.prototype.readFloatLE=function(k,P){return k=k>>>0,P||tt(k,4,this.length),t.read(this,k,!0,23,4)},s.prototype.readFloatBE=function(k,P){return k=k>>>0,P||tt(k,4,this.length),t.read(this,k,!1,23,4)},s.prototype.readDoubleLE=function(k,P){return k=k>>>0,P||tt(k,8,this.length),t.read(this,k,!0,52,8)},s.prototype.readDoubleBE=function(k,P){return k=k>>>0,P||tt(k,8,this.length),t.read(this,k,!1,52,8)};function ae(k,P,F,ee,ce,ye){if(!s.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(P>ce||P<ye)throw new RangeError('"value" argument is out of bounds');if(F+ee>k.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(k,P,F,ee){if(k=+k,P=P>>>0,F=F>>>0,!ee){let Be=Math.pow(2,8*F)-1;ae(this,k,P,F,Be,0)}let ce=1,ye=0;for(this[P]=k&255;++ye<F&&(ce*=256);)this[P+ye]=k/ce&255;return P+F},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(k,P,F,ee){if(k=+k,P=P>>>0,F=F>>>0,!ee){let Be=Math.pow(2,8*F)-1;ae(this,k,P,F,Be,0)}let ce=F-1,ye=1;for(this[P+ce]=k&255;--ce>=0&&(ye*=256);)this[P+ce]=k/ye&255;return P+F},s.prototype.writeUint8=s.prototype.writeUInt8=function(k,P,F){return k=+k,P=P>>>0,F||ae(this,k,P,1,255,0),this[P]=k&255,P+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(k,P,F){return k=+k,P=P>>>0,F||ae(this,k,P,2,65535,0),this[P]=k&255,this[P+1]=k>>>8,P+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(k,P,F){return k=+k,P=P>>>0,F||ae(this,k,P,2,65535,0),this[P]=k>>>8,this[P+1]=k&255,P+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(k,P,F){return k=+k,P=P>>>0,F||ae(this,k,P,4,4294967295,0),this[P+3]=k>>>24,this[P+2]=k>>>16,this[P+1]=k>>>8,this[P]=k&255,P+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(k,P,F){return k=+k,P=P>>>0,F||ae(this,k,P,4,4294967295,0),this[P]=k>>>24,this[P+1]=k>>>16,this[P+2]=k>>>8,this[P+3]=k&255,P+4};function pe(k,P,F,ee,ce){Ue(P,ee,ce,k,F,7);let ye=Number(P&BigInt(4294967295));k[F++]=ye,ye=ye>>8,k[F++]=ye,ye=ye>>8,k[F++]=ye,ye=ye>>8,k[F++]=ye;let Be=Number(P>>BigInt(32)&BigInt(4294967295));return k[F++]=Be,Be=Be>>8,k[F++]=Be,Be=Be>>8,k[F++]=Be,Be=Be>>8,k[F++]=Be,F}function $e(k,P,F,ee,ce){Ue(P,ee,ce,k,F,7);let ye=Number(P&BigInt(4294967295));k[F+7]=ye,ye=ye>>8,k[F+6]=ye,ye=ye>>8,k[F+5]=ye,ye=ye>>8,k[F+4]=ye;let Be=Number(P>>BigInt(32)&BigInt(4294967295));return k[F+3]=Be,Be=Be>>8,k[F+2]=Be,Be=Be>>8,k[F+1]=Be,Be=Be>>8,k[F]=Be,F+8}s.prototype.writeBigUInt64LE=At(function(k,P=0){return pe(this,k,P,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=At(function(k,P=0){return $e(this,k,P,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(k,P,F,ee){if(k=+k,P=P>>>0,!ee){let st=Math.pow(2,8*F-1);ae(this,k,P,F,st-1,-st)}let ce=0,ye=1,Be=0;for(this[P]=k&255;++ce<F&&(ye*=256);)k<0&&Be===0&&this[P+ce-1]!==0&&(Be=1),this[P+ce]=(k/ye>>0)-Be&255;return P+F},s.prototype.writeIntBE=function(k,P,F,ee){if(k=+k,P=P>>>0,!ee){let st=Math.pow(2,8*F-1);ae(this,k,P,F,st-1,-st)}let ce=F-1,ye=1,Be=0;for(this[P+ce]=k&255;--ce>=0&&(ye*=256);)k<0&&Be===0&&this[P+ce+1]!==0&&(Be=1),this[P+ce]=(k/ye>>0)-Be&255;return P+F},s.prototype.writeInt8=function(k,P,F){return k=+k,P=P>>>0,F||ae(this,k,P,1,127,-128),k<0&&(k=255+k+1),this[P]=k&255,P+1},s.prototype.writeInt16LE=function(k,P,F){return k=+k,P=P>>>0,F||ae(this,k,P,2,32767,-32768),this[P]=k&255,this[P+1]=k>>>8,P+2},s.prototype.writeInt16BE=function(k,P,F){return k=+k,P=P>>>0,F||ae(this,k,P,2,32767,-32768),this[P]=k>>>8,this[P+1]=k&255,P+2},s.prototype.writeInt32LE=function(k,P,F){return k=+k,P=P>>>0,F||ae(this,k,P,4,2147483647,-2147483648),this[P]=k&255,this[P+1]=k>>>8,this[P+2]=k>>>16,this[P+3]=k>>>24,P+4},s.prototype.writeInt32BE=function(k,P,F){return k=+k,P=P>>>0,F||ae(this,k,P,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[P]=k>>>24,this[P+1]=k>>>16,this[P+2]=k>>>8,this[P+3]=k&255,P+4},s.prototype.writeBigInt64LE=At(function(k,P=0){return pe(this,k,P,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=At(function(k,P=0){return $e(this,k,P,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Pe(k,P,F,ee,ce,ye){if(F+ee>k.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("Index out of range")}function et(k,P,F,ee,ce){return P=+P,F=F>>>0,ce||Pe(k,P,F,4),t.write(k,P,F,ee,23,4),F+4}s.prototype.writeFloatLE=function(k,P,F){return et(this,k,P,!0,F)},s.prototype.writeFloatBE=function(k,P,F){return et(this,k,P,!1,F)};function Ze(k,P,F,ee,ce){return P=+P,F=F>>>0,ce||Pe(k,P,F,8),t.write(k,P,F,ee,52,8),F+8}s.prototype.writeDoubleLE=function(k,P,F){return Ze(this,k,P,!0,F)},s.prototype.writeDoubleBE=function(k,P,F){return Ze(this,k,P,!1,F)},s.prototype.copy=function(k,P,F,ee){if(!s.isBuffer(k))throw new TypeError("argument should be a Buffer");if(F||(F=0),!ee&&ee!==0&&(ee=this.length),P>=k.length&&(P=k.length),P||(P=0),ee>0&&ee<F&&(ee=F),ee===F||k.length===0||this.length===0)return 0;if(P<0)throw new RangeError("targetStart out of bounds");if(F<0||F>=this.length)throw new RangeError("Index out of range");if(ee<0)throw new RangeError("sourceEnd out of bounds");ee>this.length&&(ee=this.length),k.length-P<ee-F&&(ee=k.length-P+F);let ce=ee-F;return this===k&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(P,F,ee):Uint8Array.prototype.set.call(k,this.subarray(F,ee),P),ce},s.prototype.fill=function(k,P,F,ee){if(typeof k=="string"){if(typeof P=="string"?(ee=P,P=0,F=this.length):typeof F=="string"&&(ee=F,F=this.length),ee!==void 0&&typeof ee!="string")throw new TypeError("encoding must be a string");if(typeof ee=="string"&&!s.isEncoding(ee))throw new TypeError("Unknown encoding: "+ee);if(k.length===1){let ye=k.charCodeAt(0);(ee==="utf8"&&ye<128||ee==="latin1")&&(k=ye)}}else typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=Number(k));if(P<0||this.length<P||this.length<F)throw new RangeError("Out of range index");if(F<=P)return this;P=P>>>0,F=F===void 0?this.length:F>>>0,k||(k=0);let ce;if(typeof k=="number")for(ce=P;ce<F;++ce)this[ce]=k;else{let ye=s.isBuffer(k)?k:s.from(k,ee),Be=ye.length;if(Be===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(ce=0;ce<F-P;++ce)this[ce+P]=ye[ce%Be]}return this};var ie={};function le(k,P,F){ie[k]=class extends F{constructor(){super(),Object.defineProperty(this,"message",{value:P.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${k}]`,this.stack,delete this.name}get code(){return k}set code(ee){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ee,writable:!0})}toString(){return`${this.name} [${k}]: ${this.message}`}}}le("ERR_BUFFER_OUT_OF_BOUNDS",function(k){return k?`${k} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),le("ERR_INVALID_ARG_TYPE",function(k,P){return`The "${k}" argument must be of type number. Received type ${typeof P}`},TypeError),le("ERR_OUT_OF_RANGE",function(k,P,F){let ee=`The value of "${k}" is out of range.`,ce=F;return Number.isInteger(F)&&Math.abs(F)>2**32?ce=we(String(F)):typeof F=="bigint"&&(ce=String(F),(F>BigInt(2)**BigInt(32)||F<-(BigInt(2)**BigInt(32)))&&(ce=we(ce)),ce+="n"),ee+=` It must be ${P}. Received ${ce}`,ee},RangeError);function we(k){let P="",F=k.length,ee=k[0]==="-"?1:0;for(;F>=ee+4;F-=3)P=`_${k.slice(F-3,F)}${P}`;return`${k.slice(0,F)}${P}`}function je(k,P,F){Y(P,"offset"),(k[P]===void 0||k[P+F]===void 0)&&Z(P,k.length-(F+1))}function Ue(k,P,F,ee,ce,ye){if(k>F||k<P){let Be=typeof P=="bigint"?"n":"",st;throw ye>3?P===0||P===BigInt(0)?st=`>= 0${Be} and < 2${Be} ** ${(ye+1)*8}${Be}`:st=`>= -(2${Be} ** ${(ye+1)*8-1}${Be}) and < 2 ** ${(ye+1)*8-1}${Be}`:st=`>= ${P}${Be} and <= ${F}${Be}`,new ie.ERR_OUT_OF_RANGE("value",st,k)}je(ee,ce,ye)}function Y(k,P){if(typeof k!="number")throw new ie.ERR_INVALID_ARG_TYPE(P,"number",k)}function Z(k,P,F){throw Math.floor(k)!==k?(Y(k,F),new ie.ERR_OUT_OF_RANGE(F||"offset","an integer",k)):P<0?new ie.ERR_BUFFER_OUT_OF_BOUNDS:new ie.ERR_OUT_OF_RANGE(F||"offset",`>= ${F?1:0} and <= ${P}`,k)}var Ee=/[^+/0-9A-Za-z-_]/g;function Ie(k){if(k=k.split("=")[0],k=k.trim().replace(Ee,""),k.length<2)return"";for(;k.length%4!==0;)k=k+"=";return k}function ot(k,P){P=P||1/0;let F,ee=k.length,ce=null,ye=[];for(let Be=0;Be<ee;++Be){if(F=k.charCodeAt(Be),F>55295&&F<57344){if(!ce){if(F>56319){(P-=3)>-1&&ye.push(239,191,189);continue}else if(Be+1===ee){(P-=3)>-1&&ye.push(239,191,189);continue}ce=F;continue}if(F<56320){(P-=3)>-1&&ye.push(239,191,189),ce=F;continue}F=(ce-55296<<10|F-56320)+65536}else ce&&(P-=3)>-1&&ye.push(239,191,189);if(ce=null,F<128){if((P-=1)<0)break;ye.push(F)}else if(F<2048){if((P-=2)<0)break;ye.push(F>>6|192,F&63|128)}else if(F<65536){if((P-=3)<0)break;ye.push(F>>12|224,F>>6&63|128,F&63|128)}else if(F<1114112){if((P-=4)<0)break;ye.push(F>>18|240,F>>12&63|128,F>>6&63|128,F&63|128)}else throw new Error("Invalid code point")}return ye}function Ke(k){let P=[];for(let F=0;F<k.length;++F)P.push(k.charCodeAt(F)&255);return P}function fe(k,P){let F,ee,ce,ye=[];for(let Be=0;Be<k.length&&!((P-=2)<0);++Be)F=k.charCodeAt(Be),ee=F>>8,ce=F%256,ye.push(ce),ye.push(ee);return ye}function Ct(k){return e.toByteArray(Ie(k))}function St(k,P,F,ee){let ce;for(ce=0;ce<ee&&!(ce+F>=P.length||ce>=k.length);++ce)P[ce+F]=k[ce];return ce}function _t(k,P){return k instanceof P||k!=null&&k.constructor!=null&&k.constructor.name!=null&&k.constructor.name===P.name}function Dt(k){return k!==k}var jt=function(){let k="0123456789abcdef",P=new Array(256);for(let F=0;F<16;++F){let ee=F*16;for(let ce=0;ce<16;++ce)P[ee+ce]=k[F]+k[ce]}return P}();function At(k){return typeof BigInt>"u"?xt:k}function xt(){throw new Error("BigInt not supported")}}),yd=h((r,e)=>{u();var t=e.exports={},n,o;function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=i}catch{n=i}try{typeof clearTimeout=="function"?o=clearTimeout:o=a}catch{o=a}})();function s(O){if(n===setTimeout)return setTimeout(O,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(O,0);try{return n(O,0)}catch{try{return n.call(null,O,0)}catch{return n.call(this,O,0)}}}function c(O){if(o===clearTimeout)return clearTimeout(O);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(O);try{return o(O)}catch{try{return o.call(null,O)}catch{return o.call(this,O)}}}var l=[],f=!1,g,D=-1;function w(){!f||!g||(f=!1,g.length?l=g.concat(l):D=-1,l.length&&E())}function E(){if(!f){var O=s(w);f=!0;for(var I=l.length;I;){for(g=l,l=[];++D<I;)g&&g[D].run();D=-1,I=l.length}g=null,f=!1,c(O)}}t.nextTick=function(O){var I=new Array(arguments.length-1);if(arguments.length>1)for(var j=1;j<arguments.length;j++)I[j-1]=arguments[j];l.push(new d(O,I)),l.length===1&&!f&&s(E)};function d(O,I){this.fun=O,this.array=I}d.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function T(){}t.on=T,t.addListener=T,t.once=T,t.off=T,t.removeListener=T,t.removeAllListeners=T,t.emit=T,t.prependListener=T,t.prependOnceListener=T,t.listeners=function(O){return[]},t.binding=function(O){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(O){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}}),Buffer,process$1,global$1,u=B(()=>{Buffer=ct().Buffer,process$1=yd(),global$1=typeof global$1<"u"?global$1:typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{},globalThis&&globalThis.process&&globalThis.process.env&&(globalThis.process.env.LIBP2P_FORCE_PNET=!1)}),za=h((r,e)=>{u(),e.exports=t;function t(n,o,i){if(!n)return i;var a,s;if(Array.isArray(o)&&(a=o.slice(0)),typeof o=="string"&&(a=o.split(".")),typeof o=="symbol"&&(a=[o]),!Array.isArray(a))throw new Error("props arg must be an array, a string or a symbol");for(;a.length;)if(s=a.shift(),!n||(n=n[s],n===void 0))return i;return n}}),wd=h((r,e)=>{u();var t=1e3,n=t*60,o=n*60,i=o*24,a=i*7,s=i*365.25;e.exports=function(D,w){w=w||{};var E=typeof D;if(E==="string"&&D.length>0)return c(D);if(E==="number"&&isFinite(D))return w.long?f(D):l(D);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(D))};function c(D){if(D=String(D),!(D.length>100)){var w=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(D);if(w){var E=parseFloat(w[1]),d=(w[2]||"ms").toLowerCase();switch(d){case"years":case"year":case"yrs":case"yr":case"y":return E*s;case"weeks":case"week":case"w":return E*a;case"days":case"day":case"d":return E*i;case"hours":case"hour":case"hrs":case"hr":case"h":return E*o;case"minutes":case"minute":case"mins":case"min":case"m":return E*n;case"seconds":case"second":case"secs":case"sec":case"s":return E*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return E;default:return}}}}function l(D){var w=Math.abs(D);return w>=i?Math.round(D/i)+"d":w>=o?Math.round(D/o)+"h":w>=n?Math.round(D/n)+"m":w>=t?Math.round(D/t)+"s":D+"ms"}function f(D){var w=Math.abs(D);return w>=i?g(D,w,i,"day"):w>=o?g(D,w,o,"hour"):w>=n?g(D,w,n,"minute"):w>=t?g(D,w,t,"second"):D+" ms"}function g(D,w,E,d){var T=w>=E*1.5;return Math.round(D/E)+" "+d+(T?"s":"")}}),vd=h((r,e)=>{u();function t(n){i.debug=i,i.default=i,i.coerce=g,i.disable=c,i.enable=s,i.enabled=l,i.humanize=wd(),i.destroy=D,Object.keys(n).forEach(w=>{i[w]=n[w]}),i.names=[],i.skips=[],i.formatters={};function o(w){let E=0;for(let d=0;d<w.length;d++)E=(E<<5)-E+w.charCodeAt(d),E|=0;return i.colors[Math.abs(E)%i.colors.length]}i.selectColor=o;function i(w){let E,d=null,T,O;function I(...j){if(!I.enabled)return;let q=I,H=Number(new Date),L=H-(E||H);q.diff=L,q.prev=E,q.curr=H,E=H,j[0]=i.coerce(j[0]),typeof j[0]!="string"&&j.unshift("%O");let J=0;j[0]=j[0].replace(/%([a-zA-Z%])/g,(X,re)=>{if(X==="%%")return"%";J++;let he=i.formatters[re];if(typeof he=="function"){let me=j[J];X=he.call(q,me),j.splice(J,1),J--}return X}),i.formatArgs.call(q,j),(q.log||i.log).apply(q,j)}return I.namespace=w,I.useColors=i.useColors(),I.color=i.selectColor(w),I.extend=a,I.destroy=i.destroy,Object.defineProperty(I,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(T!==i.namespaces&&(T=i.namespaces,O=i.enabled(w)),O),set:j=>{d=j}}),typeof i.init=="function"&&i.init(I),I}function a(w,E){let d=i(this.namespace+(typeof E>"u"?":":E)+w);return d.log=this.log,d}function s(w){i.save(w),i.namespaces=w,i.names=[],i.skips=[];let E,d=(typeof w=="string"?w:"").split(/[\s,]+/),T=d.length;for(E=0;E<T;E++)!d[E]||(w=d[E].replace(/\*/g,".*?"),w[0]==="-"?i.skips.push(new RegExp("^"+w.slice(1)+"$")):i.names.push(new RegExp("^"+w+"$")))}function c(){let w=[...i.names.map(f),...i.skips.map(f).map(E=>"-"+E)].join(",");return i.enable(""),w}function l(w){if(w[w.length-1]==="*")return!0;let E,d;for(E=0,d=i.skips.length;E<d;E++)if(i.skips[E].test(w))return!1;for(E=0,d=i.names.length;E<d;E++)if(i.names[E].test(w))return!0;return!1}function f(w){return w.toString().substring(2,w.toString().length-2).replace(/\.\*\?$/,"*")}function g(w){return w instanceof Error?w.stack||w.message:w}function D(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}e.exports=t}),We=h((r,e)=>{u(),r.formatArgs=n,r.save=o,r.load=i,r.useColors=t,r.storage=a(),r.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let l="color: "+this.color;c.splice(1,0,l,"color: inherit");let f=0,g=0;c[0].replace(/%[a-zA-Z%]/g,D=>{D!=="%%"&&(f++,D==="%c"&&(g=f))}),c.splice(g,0,l)}r.log=console.debug||console.log||(()=>{});function o(c){try{c?r.storage.setItem("debug",c):r.storage.removeItem("debug")}catch{}}function i(){let c;try{c=r.storage.getItem("debug")}catch{}return!c&&typeof process$1<"u"&&"env"in process$1&&(c=process$1.env.DEBUG),c}function a(){try{return localStorage}catch{}}e.exports=vd()(r);var{formatters:s}=e.exports;s.j=function(c){try{return JSON.stringify(c)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}}),dt=h((r,e)=>{u();function t(o,i){for(let a in i)Object.defineProperty(o,a,{value:i[a],enumerable:!0,configurable:!0});return o}function n(o,i,a){if(!o||typeof o=="string")throw new TypeError("Please pass an Error to err-code");a||(a={}),typeof i=="object"&&(a=i,i=""),i&&(a.code=i);try{return t(o,a)}catch{a.message=o.message,a.stack=o.stack;let s=function(){};return s.prototype=Object.create(Object.getPrototypeOf(o)),t(new s,a)}}e.exports=n});function Ad(r,e,t){e=e||[],t=t||0;for(var n=t;r>=d1;)e[t++]=r&255|xd,r/=128;for(;r&l1;)e[t++]=r&255|xd,r>>>=7;return e[t]=r|0,Ad.bytes=t-n+1,e}function Wa(r,n){var t=0,n=n||0,o=0,i=n,a,s=r.length;do{if(i>=s)throw Wa.bytes=0,new RangeError("Could not decode varint");a=r[i++],t+=o<28?(a&Dd)<<o:(a&Dd)*Math.pow(2,o),o+=7}while(a>=h1);return Wa.bytes=i-n,t}var c1,xd,f1,l1,d1,p1,h1,Dd,y1,g1,m1,w1,b1,v1,E1,_1,x1,D1,A1,S1,ii,Sd=B(()=>{u(),c1=Ad,xd=128,f1=127,l1=~f1,d1=Math.pow(2,31),p1=Wa,h1=128,Dd=127,y1=Math.pow(2,7),g1=Math.pow(2,14),m1=Math.pow(2,21),w1=Math.pow(2,28),b1=Math.pow(2,35),v1=Math.pow(2,42),E1=Math.pow(2,49),_1=Math.pow(2,56),x1=Math.pow(2,63),D1=function(r){return r<y1?1:r<g1?2:r<m1?3:r<w1?4:r<b1?5:r<v1?6:r<E1?7:r<_1?8:r<x1?9:10},A1={encode:c1,decode:p1,encodingLength:D1},S1=A1,ii=S1}),oi,nn,on,bo=B(()=>{u(),Sd(),oi=r=>[ii.decode(r),ii.decode.bytes],nn=(r,e,t=0)=>(ii.encode(r,e,t),e),on=r=>ii.encodingLength(r)}),Cd,Ot,Od,Td,qt=B(()=>{u(),Cd=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},Ot=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},Od=r=>new TextEncoder().encode(r),Td=r=>new TextDecoder().decode(r)}),Ge={};G(Ge,{Digest:()=>gr,create:()=>Ut,decode:()=>Ve,equals:()=>Ga});var Ut,Ve,Ga,gr,pt=B(()=>{u(),qt(),bo(),Ut=(r,e)=>{let t=e.byteLength,n=on(r),o=n+on(t),i=new Uint8Array(o+t);return nn(r,i,0),nn(t,i,n),i.set(e,o),new gr(r,t,e,i)},Ve=r=>{let e=Ot(r),[t,n]=oi(e),[o,i]=oi(e.subarray(n)),a=e.subarray(n+i);if(a.byteLength!==o)throw new Error("Incorrect length");return new gr(t,o,a,e)},Ga=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&Cd(r.bytes,e.bytes),gr=class{constructor(r,e,t,n){this.code=r,this.size=e,this.digest=t,this.bytes=n}}});function C1(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var o=0;o<r.length;o++){var i=r.charAt(o),a=i.charCodeAt(0);if(t[a]!==255)throw new TypeError(i+" is ambiguous");t[a]=o}var s=r.length,c=r.charAt(0),l=Math.log(s)/Math.log(256),f=Math.log(256)/Math.log(s);function g(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var d=0,T=0,O=0,I=E.length;O!==I&&E[O]===0;)O++,d++;for(var j=(I-O)*f+1>>>0,q=new Uint8Array(j);O!==I;){for(var H=E[O],L=0,J=j-1;(H!==0||L<T)&&J!==-1;J--,L++)H+=256*q[J]>>>0,q[J]=H%s>>>0,H=H/s>>>0;if(H!==0)throw new Error("Non-zero carry");T=L,O++}for(var X=j-T;X!==j&&q[X]===0;)X++;for(var re=c.repeat(d);X<j;++X)re+=r.charAt(q[X]);return re}function D(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var d=0;if(E[d]!==" "){for(var T=0,O=0;E[d]===c;)T++,d++;for(var I=(E.length-d)*l+1>>>0,j=new Uint8Array(I);E[d];){var q=t[E.charCodeAt(d)];if(q===255)return;for(var H=0,L=I-1;(q!==0||H<O)&&L!==-1;L--,H++)q+=s*j[L]>>>0,j[L]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");O=H,d++}if(E[d]!==" "){for(var J=I-O;J!==I&&j[J]===0;)J++;for(var X=new Uint8Array(T+(I-J)),re=T;J!==I;)X[re++]=j[J++];return X}}}function w(E){var d=D(E);if(d)return d;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:D,decode:w}}var O1,T1,Id,Rd=B(()=>{u(),O1=C1,T1=O1,Id=T1}),Ha,Ja,Ya,Bd,Qa,sn,$t,I1,R1,z,He=B(()=>{u(),Rd(),qt(),Ha=class{constructor(r,e,t){this.name=r,this.prefix=e,this.baseEncode=t}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}},Ja=class{constructor(r,e,t){if(this.name=r,this.prefix=e,e.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=t}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return Bd(this,r)}},Ya=class{constructor(r){this.decoders=r}or(r){return Bd(this,r)}decode(r){let e=r[0],t=this.decoders[e];if(t)return t.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Bd=(r,e)=>new Ya({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),Qa=class{constructor(r,e,t,n){this.name=r,this.prefix=e,this.baseEncode=t,this.baseDecode=n,this.encoder=new Ha(r,e,t),this.decoder=new Ja(r,e,n)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}},sn=({name:r,prefix:e,encode:t,decode:n})=>new Qa(r,e,t,n),$t=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:o}=Id(t,e);return sn({prefix:r,name:e,encode:n,decode:i=>Ot(o(i))})},I1=(r,e,t,n)=>{let o={};for(let f=0;f<e.length;++f)o[e[f]]=f;let i=r.length;for(;r[i-1]==="=";)--i;let a=new Uint8Array(i*t/8|0),s=0,c=0,l=0;for(let f=0;f<i;++f){let g=o[r[f]];if(g===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|g,s+=t,s>=8&&(s-=8,a[l++]=255&c>>s)}if(s>=t||255&c<<8-s)throw new SyntaxError("Unexpected end of data");return a},R1=(r,e,t)=>{let n=e[e.length-1]==="=",o=(1<<t)-1,i="",a=0,s=0;for(let c=0;c<r.length;++c)for(s=s<<8|r[c],a+=8;a>t;)a-=t,i+=e[o&s>>a];if(a&&(i+=e[o&s<<t-a]),n)for(;i.length*t&7;)i+="=";return i},z=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>sn({prefix:e,name:r,encode(o){return R1(o,n,t)},decode(o){return I1(o,n,t,r)}})}),si={};G(si,{base58btc:()=>xe,base58flickr:()=>B1});var xe,B1,an=B(()=>{u(),He(),xe=$t({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),B1=$t({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})}),vo={};G(vo,{base32:()=>U,base32hex:()=>F1,base32hexpad:()=>L1,base32hexpadupper:()=>M1,base32hexupper:()=>N1,base32pad:()=>Za,base32padupper:()=>k1,base32upper:()=>P1,base32z:()=>j1});var U,P1,Za,k1,F1,N1,L1,M1,j1,ht=B(()=>{u(),He(),U=z({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),P1=z({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Za=z({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),k1=z({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),F1=z({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),N1=z({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),L1=z({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),M1=z({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),j1=z({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),Xa={};G(Xa,{CID:()=>S});var S,q1,U1,$1,ai,K1,Pd,kd,Eo,_o,z1,W1,V1,ge=B(()=>{u(),bo(),pt(),an(),ht(),qt(),S=class{constructor(r,e,t,n){this.code=e,this.version=r,this.multihash=t,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:_o,byteLength:_o,code:Eo,version:Eo,multihash:Eo,bytes:Eo,_baseCache:_o,asCID:_o})}toV0(){switch(this.version){case 0:return this;default:{let{code:r,multihash:e}=this;if(r!==ai)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(e.code!==K1)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return S.createV0(e)}}}toV1(){switch(this.version){case 0:{let{code:r,digest:e}=this.multihash,t=Ut(r,e);return S.createV1(this.code,t)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(r){return r&&this.code===r.code&&this.version===r.version&&Ga(this.multihash,r.multihash)}toString(r){let{bytes:e,version:t,_baseCache:n}=this;switch(t){case 0:return U1(e,n,r||xe.encoder);default:return $1(e,n,r||U.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(r){return W1(/^0\.0/,V1),!!(r&&(r[kd]||r.asCID===r))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(r){if(r instanceof S)return r;if(r!=null&&r.asCID===r){let{version:e,code:t,multihash:n,bytes:o}=r;return new S(e,t,n,o||Pd(e,t,n.bytes))}else if(r!=null&&r[kd]===!0){let{version:e,multihash:t,code:n}=r,o=Ve(t);return S.create(e,n,o)}else return null}static create(r,e,t){if(typeof e!="number")throw new Error("String codecs are no longer supported");switch(r){case 0:{if(e!==ai)throw new Error(`Version 0 CID must use dag-pb (code: ${ai}) block encoding`);return new S(r,e,t,t.bytes)}case 1:{let n=Pd(r,e,t.bytes);return new S(r,e,t,n)}default:throw new Error("Invalid version")}}static createV0(r){return S.create(0,ai,r)}static createV1(r,e){return S.create(1,r,e)}static decode(r){let[e,t]=S.decodeFirst(r);if(t.length)throw new Error("Incorrect length");return e}static decodeFirst(r){let e=S.inspectBytes(r),t=e.size-e.multihashSize,n=Ot(r.subarray(t,t+e.multihashSize));if(n.byteLength!==e.multihashSize)throw new Error("Incorrect length");let o=n.subarray(e.multihashSize-e.digestSize),i=new gr(e.multihashCode,e.digestSize,o,n);return[e.version===0?S.createV0(i):S.createV1(e.codec,i),r.subarray(e.size)]}static inspectBytes(r){let e=0,t=()=>{let[f,g]=oi(r.subarray(e));return e+=g,f},n=t(),o=ai;if(n===18?(n=0,e=0):n===1&&(o=t()),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);let i=e,a=t(),s=t(),c=e+s,l=c-i;return{version:n,codec:o,multihashCode:a,digestSize:s,multihashSize:l,size:c}}static parse(r,e){let[t,n]=q1(r,e),o=S.decode(n);return o._baseCache.set(t,r),o}},q1=(r,e)=>{switch(r[0]){case"Q":{let t=e||xe;return[xe.prefix,t.decode(`${xe.prefix}${r}`)]}case xe.prefix:{let t=e||xe;return[xe.prefix,t.decode(r)]}case U.prefix:{let t=e||U;return[U.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},U1=(r,e,t)=>{let{prefix:n}=t;if(n!==xe.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let o=e.get(n);if(o==null){let i=t.encode(r).slice(1);return e.set(n,i),i}else return o},$1=(r,e,t)=>{let{prefix:n}=t,o=e.get(n);if(o==null){let i=t.encode(r);return e.set(n,i),i}else return o},ai=112,K1=18,Pd=(r,e,t)=>{let n=on(r),o=n+on(e),i=new Uint8Array(o+t.byteLength);return nn(r,i,0),nn(e,i,n),i.set(t,o),i},kd=Symbol.for("@ipld/js-cid/CID"),Eo={writable:!1,configurable:!1,enumerable:!0},_o={writable:!1,enumerable:!1,configurable:!1},z1="0.0.0-dev",W1=(r,e)=>{if(r.test(z1))console.warn(e);else throw new Error(e)},V1=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`}),Fd,Nd=B(()=>{u(),Fd="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"}),tu={};G(tu,{customAlphabet:()=>G1,customRandom:()=>Md,nanoid:()=>eu,random:()=>Ld,urlAlphabet:()=>Fd});var Ld,Md,G1,eu,xo=B(()=>{u(),Nd(),Ld=r=>crypto.getRandomValues(new Uint8Array(r)),Md=(r,e,t)=>{let n=(2<<Math.log(r.length-1)/Math.LN2)-1,o=-~(1.6*n*e/r.length);return(i=e)=>{let a="";for(;;){let s=t(o),c=o;for(;c--;)if(a+=r[s[c]&n]||"",a.length===i)return a}}},G1=(r,e=21)=>Md(r,e,Ld),eu=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"")}),ru={};G(ru,{identity:()=>H1});var H1,jd=B(()=>{u(),He(),qt(),H1=sn({prefix:"\0",name:"identity",encode:r=>Td(r),decode:r=>Od(r)})}),nu={};G(nu,{base2:()=>J1});var J1,qd=B(()=>{u(),He(),J1=z({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),iu={};G(iu,{base8:()=>Y1});var Y1,Ud=B(()=>{u(),He(),Y1=z({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),ou={};G(ou,{base10:()=>Q1});var Q1,$d=B(()=>{u(),He(),Q1=$t({prefix:"9",name:"base10",alphabet:"0123456789"})}),su={};G(su,{base16:()=>Z1,base16upper:()=>X1});var Z1,X1,Kd=B(()=>{u(),He(),Z1=z({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),X1=z({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})}),au={};G(au,{base36:()=>ex,base36upper:()=>tx});var ex,tx,zd=B(()=>{u(),He(),ex=$t({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),tx=$t({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),uu={};G(uu,{base64:()=>rx,base64pad:()=>nx,base64url:()=>ix,base64urlpad:()=>ox});var rx,nx,ix,ox,Wd=B(()=>{u(),He(),rx=z({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),nx=z({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ix=z({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ox=z({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})}),cu={};G(cu,{base256emoji:()=>fx});function ux(r){return r.reduce((e,t)=>(e+=sx[t],e),"")}function cx(r){let e=[];for(let t of r){let n=ax[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var Vd,sx,ax,fx,Gd=B(()=>{u(),He(),Vd=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),sx=Vd.reduce((r,e,t)=>(r[t]=e,r),[]),ax=Vd.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]),fx=sn({prefix:"\u{1F680}",name:"base256emoji",encode:ux,decode:cx})}),lu,fu,du=B(()=>{u(),pt(),lu=({name:r,code:e,encode:t})=>new fu(r,e,t),fu=class{constructor(r,e,t){this.name=r,this.code=e,this.encode=t}digest(r){if(r instanceof Uint8Array){let e=this.encode(r);return e instanceof Uint8Array?Ut(this.code,e):e.then(t=>Ut(this.code,t))}else throw Error("Unknown type, must be binary type")}}}),pu={};G(pu,{sha256:()=>un,sha512:()=>lx});var Jd,un,lx,Do=B(()=>{u(),du(),Jd=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),un=lu({name:"sha2-256",code:18,encode:Jd("SHA-256")}),lx=lu({name:"sha2-512",code:19,encode:Jd("SHA-512")})}),yu={};G(yu,{identity:()=>hu});var Yd,dx,Qd,px,hu,gu=B(()=>{u(),qt(),pt(),Yd=0,dx="identity",Qd=Ot,px=r=>Ut(Yd,Qd(r)),hu={code:Yd,name:dx,encode:Qd,digest:px}}),ui,ci=B(()=>{u(),qt(),ui=85}),Zd=B(()=>{u(),new TextEncoder,new TextDecoder}),So=B(()=>{u(),ge(),bo(),qt(),du(),pt()}),mu,Xd=B(()=>{u(),jd(),qd(),Ud(),$d(),Kd(),ht(),zd(),an(),Wd(),Gd(),Do(),gu(),ci(),Zd(),So(),mu={...ru,...nu,...iu,...ou,...su,...vo,...au,...si,...uu,...cu},{...pu,...yu}});function Co(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}var wu=B(()=>{u()});function tp(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var ep,bu,yx,Oo,vu=B(()=>{u(),Xd(),wu(),ep=tp("utf8","u",r=>{let e=new TextDecoder("utf8");return"u"+e.decode(r)},r=>new TextEncoder().encode(r.substring(1))),bu=tp("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=Co(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),yx={utf8:ep,"utf-8":ep,hex:mu.base16,latin1:bu,ascii:bu,binary:bu,...mu},Oo=yx}),fi={};G(fi,{toString:()=>de});function de(r,e="utf8"){let t=Oo[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var ke=B(()=>{u(),vu()}),rp={};G(rp,{fromString:()=>oe});function oe(r,e="utf8"){let t=Oo[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}var yt=B(()=>{u(),vu()}),Eu=h((r,e)=>{u();var t=async n=>{let o=0;for await(let i of n)o++;return o};e.exports=t}),Dh=h((r,e)=>{u(),e.exports=t;function t(n,o){for(var i=new Array(arguments.length-1),a=0,s=2,c=!0;s<arguments.length;)i[a++]=arguments[s++];return new Promise(function(l,f){i[a]=function(g){if(c)if(c=!1,g)f(g);else{for(var D=new Array(arguments.length-1),w=0;w<D.length;)D[w++]=arguments[w];l.apply(null,D)}};try{n.apply(o||null,i)}catch(g){c&&(c=!1,f(g))}})}}),Oh=h(r=>{u();var e=r;e.length=function(a){var s=a.length;if(!s)return 0;for(var c=0;--s%4>1&&a.charAt(s)==="=";)++c;return Math.ceil(a.length*3)/4-c};var t=new Array(64),n=new Array(123);for(o=0;o<64;)n[t[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;var o;e.encode=function(a,s,c){for(var l=null,f=[],g=0,D=0,w;s<c;){var E=a[s++];switch(D){case 0:f[g++]=t[E>>2],w=(E&3)<<4,D=1;break;case 1:f[g++]=t[w|E>>4],w=(E&15)<<2,D=2;break;case 2:f[g++]=t[w|E>>6],f[g++]=t[E&63],D=0;break}g>8191&&((l||(l=[])).push(String.fromCharCode.apply(String,f)),g=0)}return D&&(f[g++]=t[w],f[g++]=61,D===1&&(f[g++]=61)),l?(g&&l.push(String.fromCharCode.apply(String,f.slice(0,g))),l.join("")):String.fromCharCode.apply(String,f.slice(0,g))};var i="invalid encoding";e.decode=function(a,s,c){for(var l=c,f=0,g,D=0;D<a.length;){var w=a.charCodeAt(D++);if(w===61&&f>1)break;if((w=n[w])===void 0)throw Error(i);switch(f){case 0:g=w,f=1;break;case 1:s[c++]=g<<2|(w&48)>>4,g=w,f=2;break;case 2:s[c++]=(g&15)<<4|(w&60)>>2,g=w,f=3;break;case 3:s[c++]=(g&3)<<6|w,f=0;break}}if(f===1)throw Error(i);return c-l},e.test=function(a){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(a)}}),Ih=h((r,e)=>{u(),e.exports=t;function t(){this._listeners={}}t.prototype.on=function(n,o,i){return(this._listeners[n]||(this._listeners[n]=[])).push({fn:o,ctx:i||this}),this},t.prototype.off=function(n,o){if(n===void 0)this._listeners={};else if(o===void 0)this._listeners[n]=[];else for(var i=this._listeners[n],a=0;a<i.length;)i[a].fn===o?i.splice(a,1):++a;return this},t.prototype.emit=function(n){var o=this._listeners[n];if(o){for(var i=[],a=1;a<arguments.length;)i.push(arguments[a++]);for(a=0;a<o.length;)o[a].fn.apply(o[a++].ctx,i)}return this}}),Lh=h((r,e)=>{u(),e.exports=t(t);function t(s){return typeof Float32Array<"u"?function(){var c=new Float32Array([-0]),l=new Uint8Array(c.buffer),f=l[3]===128;function g(d,T,O){c[0]=d,T[O]=l[0],T[O+1]=l[1],T[O+2]=l[2],T[O+3]=l[3]}function D(d,T,O){c[0]=d,T[O]=l[3],T[O+1]=l[2],T[O+2]=l[1],T[O+3]=l[0]}s.writeFloatLE=f?g:D,s.writeFloatBE=f?D:g;function w(d,T){return l[0]=d[T],l[1]=d[T+1],l[2]=d[T+2],l[3]=d[T+3],c[0]}function E(d,T){return l[3]=d[T],l[2]=d[T+1],l[1]=d[T+2],l[0]=d[T+3],c[0]}s.readFloatLE=f?w:E,s.readFloatBE=f?E:w}():function(){function c(f,g,D,w){var E=g<0?1:0;if(E&&(g=-g),g===0)f(1/g>0?0:2147483648,D,w);else if(isNaN(g))f(2143289344,D,w);else if(g>34028234663852886e22)f((E<<31|2139095040)>>>0,D,w);else if(g<11754943508222875e-54)f((E<<31|Math.round(g/1401298464324817e-60))>>>0,D,w);else{var d=Math.floor(Math.log(g)/Math.LN2),T=Math.round(g*Math.pow(2,-d)*8388608)&8388607;f((E<<31|d+127<<23|T)>>>0,D,w)}}s.writeFloatLE=c.bind(null,n),s.writeFloatBE=c.bind(null,o);function l(f,g,D){var w=f(g,D),E=(w>>31)*2+1,d=w>>>23&255,T=w&8388607;return d===255?T?NaN:E*(1/0):d===0?E*1401298464324817e-60*T:E*Math.pow(2,d-150)*(T+8388608)}s.readFloatLE=l.bind(null,i),s.readFloatBE=l.bind(null,a)}(),typeof Float64Array<"u"?function(){var c=new Float64Array([-0]),l=new Uint8Array(c.buffer),f=l[7]===128;function g(d,T,O){c[0]=d,T[O]=l[0],T[O+1]=l[1],T[O+2]=l[2],T[O+3]=l[3],T[O+4]=l[4],T[O+5]=l[5],T[O+6]=l[6],T[O+7]=l[7]}function D(d,T,O){c[0]=d,T[O]=l[7],T[O+1]=l[6],T[O+2]=l[5],T[O+3]=l[4],T[O+4]=l[3],T[O+5]=l[2],T[O+6]=l[1],T[O+7]=l[0]}s.writeDoubleLE=f?g:D,s.writeDoubleBE=f?D:g;function w(d,T){return l[0]=d[T],l[1]=d[T+1],l[2]=d[T+2],l[3]=d[T+3],l[4]=d[T+4],l[5]=d[T+5],l[6]=d[T+6],l[7]=d[T+7],c[0]}function E(d,T){return l[7]=d[T],l[6]=d[T+1],l[5]=d[T+2],l[4]=d[T+3],l[3]=d[T+4],l[2]=d[T+5],l[1]=d[T+6],l[0]=d[T+7],c[0]}s.readDoubleLE=f?w:E,s.readDoubleBE=f?E:w}():function(){function c(f,g,D,w,E,d){var T=w<0?1:0;if(T&&(w=-w),w===0)f(0,E,d+g),f(1/w>0?0:2147483648,E,d+D);else if(isNaN(w))f(0,E,d+g),f(2146959360,E,d+D);else if(w>17976931348623157e292)f(0,E,d+g),f((T<<31|2146435072)>>>0,E,d+D);else{var O;if(w<22250738585072014e-324)O=w/5e-324,f(O>>>0,E,d+g),f((T<<31|O/4294967296)>>>0,E,d+D);else{var I=Math.floor(Math.log(w)/Math.LN2);I===1024&&(I=1023),O=w*Math.pow(2,-I),f(O*4503599627370496>>>0,E,d+g),f((T<<31|I+1023<<20|O*1048576&1048575)>>>0,E,d+D)}}}s.writeDoubleLE=c.bind(null,n,0,4),s.writeDoubleBE=c.bind(null,o,4,0);function l(f,g,D,w,E){var d=f(w,E+g),T=f(w,E+D),O=(T>>31)*2+1,I=T>>>20&2047,j=4294967296*(T&1048575)+d;return I===2047?j?NaN:O*(1/0):I===0?O*5e-324*j:O*Math.pow(2,I-1075)*(j+4503599627370496)}s.readDoubleLE=l.bind(null,i,0,4),s.readDoubleBE=l.bind(null,a,4,0)}(),s}function n(s,c,l){c[l]=s&255,c[l+1]=s>>>8&255,c[l+2]=s>>>16&255,c[l+3]=s>>>24}function o(s,c,l){c[l]=s>>>24,c[l+1]=s>>>16&255,c[l+2]=s>>>8&255,c[l+3]=s&255}function i(s,c){return(s[c]|s[c+1]<<8|s[c+2]<<16|s[c+3]<<24)>>>0}function a(s,c){return(s[c]<<24|s[c+1]<<16|s[c+2]<<8|s[c+3])>>>0}}),Mh=h((exports,module)=>{u(),module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}}),qh=h(r=>{u();var e=r;e.length=function(t){for(var n=0,o=0,i=0;i<t.length;++i)o=t.charCodeAt(i),o<128?n+=1:o<2048?n+=2:(o&64512)===55296&&(t.charCodeAt(i+1)&64512)===56320?(++i,n+=4):n+=3;return n},e.read=function(t,n,o){var i=o-n;if(i<1)return"";for(var a=null,s=[],c=0,l;n<o;)l=t[n++],l<128?s[c++]=l:l>191&&l<224?s[c++]=(l&31)<<6|t[n++]&63:l>239&&l<365?(l=((l&7)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536,s[c++]=55296+(l>>10),s[c++]=56320+(l&1023)):s[c++]=(l&15)<<12|(t[n++]&63)<<6|t[n++]&63,c>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,s)),c=0);return a?(c&&a.push(String.fromCharCode.apply(String,s.slice(0,c))),a.join("")):String.fromCharCode.apply(String,s.slice(0,c))},e.write=function(t,n,o){for(var i=o,a,s,c=0;c<t.length;++c)a=t.charCodeAt(c),a<128?n[o++]=a:a<2048?(n[o++]=a>>6|192,n[o++]=a&63|128):(a&64512)===55296&&((s=t.charCodeAt(c+1))&64512)===56320?(a=65536+((a&1023)<<10)+(s&1023),++c,n[o++]=a>>18|240,n[o++]=a>>12&63|128,n[o++]=a>>6&63|128,n[o++]=a&63|128):(n[o++]=a>>12|224,n[o++]=a>>6&63|128,n[o++]=a&63|128);return o-i}}),$h=h((r,e)=>{u(),e.exports=t;function t(n,o,i){var a=i||8192,s=a>>>1,c=null,l=a;return function(f){if(f<1||f>s)return n(f);l+f>a&&(c=n(a),l=0);var g=o.call(c,l,l+=f);return l&7&&(l=(l|7)+1),g}}}),zh=h((r,e)=>{u(),e.exports=n;var t=Vt();function n(s,c){this.lo=s>>>0,this.hi=c>>>0}var o=n.zero=new n(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var i=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(s){if(s===0)return o;var c=s<0;c&&(s=-s);var l=s>>>0,f=(s-l)/4294967296>>>0;return c&&(f=~f>>>0,l=~l>>>0,++l>4294967295&&(l=0,++f>4294967295&&(f=0))),new n(l,f)},n.from=function(s){if(typeof s=="number")return n.fromNumber(s);if(t.isString(s))if(t.Long)s=t.Long.fromString(s);else return n.fromNumber(parseInt(s,10));return s.low||s.high?new n(s.low>>>0,s.high>>>0):o},n.prototype.toNumber=function(s){if(!s&&this.hi>>>31){var c=~this.lo+1>>>0,l=~this.hi>>>0;return c||(l=l+1>>>0),-(c+l*4294967296)}return this.lo+this.hi*4294967296},n.prototype.toLong=function(s){return t.Long?new t.Long(this.lo|0,this.hi|0,Boolean(s)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(s)}};var a=String.prototype.charCodeAt;n.fromHash=function(s){return s===i?o:new n((a.call(s,0)|a.call(s,1)<<8|a.call(s,2)<<16|a.call(s,3)<<24)>>>0,(a.call(s,4)|a.call(s,5)<<8|a.call(s,6)<<16|a.call(s,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var s=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^s)>>>0,this.lo=(this.lo<<1^s)>>>0,this},n.prototype.zzDecode=function(){var s=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^s)>>>0,this.hi=(this.hi>>>1^s)>>>0,this},n.prototype.length=function(){var s=this.lo,c=(this.lo>>>28|this.hi<<4)>>>0,l=this.hi>>>24;return l===0?c===0?s<16384?s<128?1:2:s<2097152?3:4:c<16384?c<128?5:6:c<2097152?7:8:l<128?9:10}}),Vt=h(r=>{u();var e=r;e.asPromise=Dh(),e.base64=Oh(),e.EventEmitter=Ih(),e.float=Lh(),e.inquire=Mh(),e.utf8=qh(),e.pool=$h(),e.LongBits=zh(),e.isNode=Boolean(typeof global$1<"u"&&global$1&&global$1.process&&global$1.process.versions&&global$1.process.versions.node),e.global=e.isNode&&global$1||typeof window<"u"&&window||typeof self<"u"&&self||r,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o},e.isString=function(o){return typeof o=="string"||o instanceof String},e.isObject=function(o){return o&&typeof o=="object"},e.isset=e.isSet=function(o,i){var a=o[i];return a!=null&&o.hasOwnProperty(i)?typeof a!="object"||(Array.isArray(a)?a.length:Object.keys(a).length)>0:!1},e.Buffer=function(){try{var o=e.inquire("buffer").Buffer;return o.prototype.utf8Write?o:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(o){return typeof o=="number"?e.Buffer?e._Buffer_allocUnsafe(o):new e.Array(o):e.Buffer?e._Buffer_from(o):typeof Uint8Array>"u"?o:new Uint8Array(o)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(o){return o?e.LongBits.from(o).toHash():e.LongBits.zeroHash},e.longFromHash=function(o,i){var a=e.LongBits.fromHash(o);return e.Long?e.Long.fromBits(a.lo,a.hi,i):a.toNumber(Boolean(i))};function t(o,i,a){for(var s=Object.keys(i),c=0;c<s.length;++c)(o[s[c]]===void 0||!a)&&(o[s[c]]=i[s[c]]);return o}e.merge=t,e.lcFirst=function(o){return o.charAt(0).toLowerCase()+o.substring(1)};function n(o){function i(a,s){if(!(this instanceof i))return new i(a,s);Object.defineProperty(this,"message",{get:function(){return a}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:new Error().stack||""}),s&&t(this,s)}return(i.prototype=Object.create(Error.prototype)).constructor=i,Object.defineProperty(i.prototype,"name",{get:function(){return o}}),i.prototype.toString=function(){return this.name+": "+this.message},i}e.newError=n,e.ProtocolError=n("ProtocolError"),e.oneOfGetter=function(o){for(var i={},a=0;a<o.length;++a)i[o[a]]=1;return function(){for(var s=Object.keys(this),c=s.length-1;c>-1;--c)if(i[s[c]]===1&&this[s[c]]!==void 0&&this[s[c]]!==null)return s[c]}},e.oneOfSetter=function(o){return function(i){for(var a=0;a<o.length;++a)o[a]!==i&&delete this[o[a]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var o=e.Buffer;if(!o){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=o.from!==Uint8Array.from&&o.from||function(i,a){return new o(i,a)},e._Buffer_allocUnsafe=o.allocUnsafe||function(i){return new o(i)}}}),qu=h((r,e)=>{u(),e.exports=f;var t=Vt(),n,o=t.LongBits,i=t.base64,a=t.utf8;function s(I,j,q){this.fn=I,this.len=j,this.next=void 0,this.val=q}function c(){}function l(I){this.head=I.head,this.tail=I.tail,this.len=I.len,this.next=I.states}function f(){this.len=0,this.head=new s(c,0,0),this.tail=this.head,this.states=null}var g=function(){return t.Buffer?function(){return(f.create=function(){return new n})()}:function(){return new f}};f.create=g(),f.alloc=function(I){return new t.Array(I)},t.Array!==Array&&(f.alloc=t.pool(f.alloc,t.Array.prototype.subarray)),f.prototype._push=function(I,j,q){return this.tail=this.tail.next=new s(I,j,q),this.len+=j,this};function D(I,j,q){j[q]=I&255}function w(I,j,q){for(;I>127;)j[q++]=I&127|128,I>>>=7;j[q]=I}function E(I,j){this.len=I,this.next=void 0,this.val=j}E.prototype=Object.create(s.prototype),E.prototype.fn=w,f.prototype.uint32=function(I){return this.len+=(this.tail=this.tail.next=new E((I=I>>>0)<128?1:I<16384?2:I<2097152?3:I<268435456?4:5,I)).len,this},f.prototype.int32=function(I){return I<0?this._push(d,10,o.fromNumber(I)):this.uint32(I)},f.prototype.sint32=function(I){return this.uint32((I<<1^I>>31)>>>0)};function d(I,j,q){for(;I.hi;)j[q++]=I.lo&127|128,I.lo=(I.lo>>>7|I.hi<<25)>>>0,I.hi>>>=7;for(;I.lo>127;)j[q++]=I.lo&127|128,I.lo=I.lo>>>7;j[q++]=I.lo}f.prototype.uint64=function(I){var j=o.from(I);return this._push(d,j.length(),j)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(I){var j=o.from(I).zzEncode();return this._push(d,j.length(),j)},f.prototype.bool=function(I){return this._push(D,1,I?1:0)};function T(I,j,q){j[q]=I&255,j[q+1]=I>>>8&255,j[q+2]=I>>>16&255,j[q+3]=I>>>24}f.prototype.fixed32=function(I){return this._push(T,4,I>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(I){var j=o.from(I);return this._push(T,4,j.lo)._push(T,4,j.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(I){return this._push(t.float.writeFloatLE,4,I)},f.prototype.double=function(I){return this._push(t.float.writeDoubleLE,8,I)};var O=t.Array.prototype.set?function(I,j,q){j.set(I,q)}:function(I,j,q){for(var H=0;H<I.length;++H)j[q+H]=I[H]};f.prototype.bytes=function(I){var j=I.length>>>0;if(!j)return this._push(D,1,0);if(t.isString(I)){var q=f.alloc(j=i.length(I));i.decode(I,q,0),I=q}return this.uint32(j)._push(O,j,I)},f.prototype.string=function(I){var j=a.length(I);return j?this.uint32(j)._push(a.write,j,I):this._push(D,1,0)},f.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new s(c,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(c,0,0),this.len=0),this},f.prototype.ldelim=function(){var I=this.head,j=this.tail,q=this.len;return this.reset().uint32(q),q&&(this.tail.next=I.next,this.tail=j,this.len+=q),this},f.prototype.finish=function(){for(var I=this.head.next,j=this.constructor.alloc(this.len),q=0;I;)I.fn(I.val,j,q),q+=I.len,I=I.next;return j},f._configure=function(I){n=I,f.create=g(),n._configure()}}),Xh=h((r,e)=>{u(),e.exports=o;var t=qu();(o.prototype=Object.create(t.prototype)).constructor=o;var n=Vt();function o(){t.call(this)}o._configure=function(){o.alloc=n._Buffer_allocUnsafe,o.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&n.Buffer.prototype.set.name==="set"?function(a,s,c){s.set(a,c)}:function(a,s,c){if(a.copy)a.copy(s,c,0,a.length);else for(var l=0;l<a.length;)s[c++]=a[l++]}},o.prototype.bytes=function(a){n.isString(a)&&(a=n._Buffer_from(a,"base64"));var s=a.length>>>0;return this.uint32(s),s&&this._push(o.writeBytesBuffer,s,a),this};function i(a,s,c){a.length<40?n.utf8.write(a,s,c):s.utf8Write?s.utf8Write(a,c):s.write(a,c)}o.prototype.string=function(a){var s=n.Buffer.byteLength(a);return this.uint32(s),s&&this._push(i,s,a),this},o._configure()}),Ku=h((r,e)=>{u(),e.exports=s;var t=Vt(),n,o=t.LongBits,i=t.utf8;function a(w,E){return RangeError("index out of range: "+w.pos+" + "+(E||1)+" > "+w.len)}function s(w){this.buf=w,this.pos=0,this.len=w.length}var c=typeof Uint8Array<"u"?function(w){if(w instanceof Uint8Array||Array.isArray(w))return new s(w);throw Error("illegal buffer")}:function(w){if(Array.isArray(w))return new s(w);throw Error("illegal buffer")},l=function(){return t.Buffer?function(w){return(s.create=function(E){return t.Buffer.isBuffer(E)?new n(E):c(E)})(w)}:c};s.create=l(),s.prototype._slice=t.Array.prototype.subarray||t.Array.prototype.slice,s.prototype.uint32=function(){var w=4294967295;return function(){if(w=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(w=(w|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(w=(w|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(w=(w|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(w=(w|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return w;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return w}}(),s.prototype.int32=function(){return this.uint32()|0},s.prototype.sint32=function(){var w=this.uint32();return w>>>1^-(w&1)|0};function f(){var w=new o(0,0),E=0;if(this.len-this.pos>4){for(;E<4;++E)if(w.lo=(w.lo|(this.buf[this.pos]&127)<<E*7)>>>0,this.buf[this.pos++]<128)return w;if(w.lo=(w.lo|(this.buf[this.pos]&127)<<28)>>>0,w.hi=(w.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return w;E=0}else{for(;E<3;++E){if(this.pos>=this.len)throw a(this);if(w.lo=(w.lo|(this.buf[this.pos]&127)<<E*7)>>>0,this.buf[this.pos++]<128)return w}return w.lo=(w.lo|(this.buf[this.pos++]&127)<<E*7)>>>0,w}if(this.len-this.pos>4){for(;E<5;++E)if(w.hi=(w.hi|(this.buf[this.pos]&127)<<E*7+3)>>>0,this.buf[this.pos++]<128)return w}else for(;E<5;++E){if(this.pos>=this.len)throw a(this);if(w.hi=(w.hi|(this.buf[this.pos]&127)<<E*7+3)>>>0,this.buf[this.pos++]<128)return w}throw Error("invalid varint encoding")}s.prototype.bool=function(){return this.uint32()!==0};function g(w,E){return(w[E-4]|w[E-3]<<8|w[E-2]<<16|w[E-1]<<24)>>>0}s.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return g(this.buf,this.pos+=4)},s.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return g(this.buf,this.pos+=4)|0};function D(){if(this.pos+8>this.len)throw a(this,8);return new o(g(this.buf,this.pos+=4),g(this.buf,this.pos+=4))}s.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var w=t.float.readFloatLE(this.buf,this.pos);return this.pos+=4,w},s.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var w=t.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,w},s.prototype.bytes=function(){var w=this.uint32(),E=this.pos,d=this.pos+w;if(d>this.len)throw a(this,w);return this.pos+=w,Array.isArray(this.buf)?this.buf.slice(E,d):E===d?new this.buf.constructor(0):this._slice.call(this.buf,E,d)},s.prototype.string=function(){var w=this.bytes();return i.read(w,0,w.length)},s.prototype.skip=function(w){if(typeof w=="number"){if(this.pos+w>this.len)throw a(this,w);this.pos+=w}else do if(this.pos>=this.len)throw a(this);while(this.buf[this.pos++]&128);return this},s.prototype.skipType=function(w){switch(w){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(w=this.uint32()&7)!==4;)this.skipType(w);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+w+" at offset "+this.pos)}return this},s._configure=function(w){n=w,s.create=l(),n._configure();var E=t.Long?"toLong":"toNumber";t.merge(s.prototype,{int64:function(){return f.call(this)[E](!1)},uint64:function(){return f.call(this)[E](!0)},sint64:function(){return f.call(this).zzDecode()[E](!1)},fixed64:function(){return D.call(this)[E](!0)},sfixed64:function(){return D.call(this)[E](!1)}})}}),uy=h((r,e)=>{u(),e.exports=o;var t=Ku();(o.prototype=Object.create(t.prototype)).constructor=o;var n=Vt();function o(i){t.call(this,i)}o._configure=function(){n.Buffer&&(o.prototype._slice=n.Buffer.prototype.slice)},o.prototype.string=function(){var i=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+i,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+i,this.len))},o._configure()}),fy=h((r,e)=>{u(),e.exports=n;var t=Vt();(n.prototype=Object.create(t.EventEmitter.prototype)).constructor=n;function n(o,i,a){if(typeof o!="function")throw TypeError("rpcImpl must be a function");t.EventEmitter.call(this),this.rpcImpl=o,this.requestDelimited=Boolean(i),this.responseDelimited=Boolean(a)}n.prototype.rpcCall=function o(i,a,s,c,l){if(!c)throw TypeError("request must be specified");var f=this;if(!l)return t.asPromise(o,f,i,a,s,c);if(!f.rpcImpl){setTimeout(function(){l(Error("already ended"))},0);return}try{return f.rpcImpl(i,a[f.requestDelimited?"encodeDelimited":"encode"](c).finish(),function(g,D){if(g)return f.emit("error",g,i),l(g);if(D===null){f.end(!0);return}if(!(D instanceof s))try{D=s[f.responseDelimited?"decodeDelimited":"decode"](D)}catch(w){return f.emit("error",w,i),l(w)}return f.emit("data",D,i),l(null,D)})}catch(g){f.emit("error",g,i),setTimeout(function(){l(g)},0);return}},n.prototype.end=function(o){return this.rpcImpl&&(o||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),dy=h(r=>{u();var e=r;e.Service=fy()}),hy=h((r,e)=>{u(),e.exports={}}),my=h(r=>{u();var e=r;e.build="minimal",e.Writer=qu(),e.BufferWriter=Xh(),e.Reader=Ku(),e.BufferReader=uy(),e.util=Vt(),e.rpc=dy(),e.roots=hy(),e.configure=t;function t(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}t()}),Ht=h((r,e)=>{u(),e.exports=my()}),_y=h((r,e)=>{u(),Object.defineProperty(r,"__esModule",{value:!0}),t.BASE=2166136261;function t(n,o=t.BASE){let i=n.length;for(let a=0;a<i;a++)o^=n.charCodeAt(a),o+=(o<<1)+(o<<4)+(o<<7)+(o<<8)+(o<<24);return o>>>0}r.default=t,e.exports=t}),Ay=h((r,e)=>{u(),e.exports=a;var t=128,n=127,o=~n,i=Math.pow(2,31);function a(s,c,l){if(Number.MAX_SAFE_INTEGER&&s>Number.MAX_SAFE_INTEGER)throw a.bytes=0,new RangeError("Could not encode varint");c=c||[],l=l||0;for(var f=l;s>=i;)c[l++]=s&255|t,s/=128;for(;s&o;)c[l++]=s&255|t,s>>>=7;return c[l]=s|0,a.bytes=l-f+1,c}}),Oy=h((r,e)=>{u(),e.exports=o;var t=128,n=127;function o(i,c){var s=0,c=c||0,l=0,f=c,g,D=i.length;do{if(f>=D||l>49)throw o.bytes=0,new RangeError("Could not decode varint");g=i[f++],s+=l<28?(g&n)<<l:(g&n)*Math.pow(2,l),l+=7}while(g>=t);return o.bytes=f-c,s}}),Iy=h((r,e)=>{u();var t=Math.pow(2,7),n=Math.pow(2,14),o=Math.pow(2,21),i=Math.pow(2,28),a=Math.pow(2,35),s=Math.pow(2,42),c=Math.pow(2,49),l=Math.pow(2,56),f=Math.pow(2,63);e.exports=function(g){return g<t?1:g<n?2:g<o?3:g<i?4:g<a?5:g<s?6:g<c?7:g<l?8:g<f?9:10}}),xi=h((r,e)=>{u(),e.exports={encode:Ay(),decode:Oy(),encodingLength:Iy()}}),Yu={};G(Yu,{concat:()=>Ai});function Ai(r,e){e||(e=r.reduce((o,i)=>o+i.length,0));let t=Co(e),n=0;for(let o of r)t.set(o,n),n+=o.length;return t}var Ho=B(()=>{u(),wu()}),Qy=h((r,e)=>{u();var t="[a-fA-F\\d:]",n=g=>g&&g.includeBoundaries?`(?:(?<=\\s|^)(?=${t})|(?<=${t})(?=\\s|$))`:"",o="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",a=`
(?:
(?:${i}:){7}(?:${i}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${i}:){6}(?:${o}|:${i}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${i}:){5}(?::${o}|(?::${i}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${i}:){4}(?:(?::${i}){0,1}:${o}|(?::${i}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${i}:){3}(?:(?::${i}){0,2}:${o}|(?::${i}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${i}:){2}(?:(?::${i}){0,3}:${o}|(?::${i}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${i}:){1}(?:(?::${i}){0,4}:${o}|(?::${i}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${i}){0,5}:${o}|(?::${i}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp(`(?:^${o}$)|(?:^${a}$)`),c=new RegExp(`^${o}$`),l=new RegExp(`^${a}$`),f=g=>g&&g.exact?s:new RegExp(`(?:${n(g)}${o}${n(g)})|(?:${n(g)}${a}${n(g)})`,"g");f.v4=g=>g&&g.exact?c:new RegExp(`${n(g)}${o}${n(g)}`,"g"),f.v6=g=>g&&g.exact?l:new RegExp(`${n(g)}${a}${n(g)}`,"g"),e.exports=f}),Xy=h((r,e)=>{u();var t=Qy(),n=o=>t({exact:!0}).test(o);n.v4=o=>t.v4({exact:!0}).test(o),n.v6=o=>t.v6({exact:!0}).test(o),n.version=o=>n(o)?n.v4(o)?4:6:void 0,e.exports=n}),ig=h((r,e)=>{u();var t=Xy(),{toString:n}=(ke(),ue(fi)),o=t,i=t.v4,a=t.v6,s=function(l,f,g){g=~~g;let D;if(i(l))D=f||new Uint8Array(g+4),l.split(/\./g).map(function(w){D[g++]=parseInt(w,10)&255});else if(a(l)){let w=l.split(":",8),E;for(E=0;E<w.length;E++){let d=i(w[E]),T;d&&(T=s(w[E]),w[E]=n(T.slice(0,2),"base16")),T&&++E<8&&w.splice(E,0,n(T.slice(2,4),"base16"))}if(w[0]==="")for(;w.length<8;)w.unshift("0");else if(w[w.length-1]==="")for(;w.length<8;)w.push("0");else if(w.length<8){for(E=0;E<w.length&&w[E]!=="";E++);let d=[E,"1"];for(E=9-w.length;E>0;E--)d.push("0");w.splice.apply(w,d)}for(D=f||new Uint8Array(g+16),E=0;E<w.length;E++){let d=parseInt(w[E],16);D[g++]=d>>8&255,D[g++]=d&255}}if(!D)throw Error("Invalid ip address: "+l);return D},c=function(l,f,g){f=~~f,g=g||l.length-f;let D=[],w,E=new DataView(l.buffer);if(g===4){for(let d=0;d<g;d++)D.push(l[f+d]);w=D.join(".")}else if(g===16){for(let d=0;d<g;d+=2)D.push(E.getUint16(f+d).toString(16));w=D.join(":"),w=w.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),w=w.replace(/:{3,4}/,"::")}return w};e.exports={isIP:o,isV4:i,isV6:a,toBytes:s,toString:c}}),rs=h((r,e)=>{u();function t(i){if(typeof i=="number"){if(t.codes[i])return t.codes[i];throw new Error("no protocol with code: "+i)}else if(typeof i=="string"){if(t.names[i])return t.names[i];throw new Error("no protocol with name: "+i)}throw new Error("invalid protocol id type: "+i)}var n=-1;t.lengthPrefixedVarSize=n,t.V=n,t.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,n,"ip6zone"],[53,n,"dns","resolvable"],[54,n,"dns4","resolvable"],[55,n,"dns6","resolvable"],[56,n,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,n,"unix",!1,"path"],[421,n,"ipfs"],[421,n,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,n,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,n,"memory"]],t.names={},t.codes={},t.table.map(i=>{let a=o.apply(null,i);return t.codes[a.code]=a,t.names[a.name]=a,null}),t.object=o;function o(i,a,s,c,l){return{code:i,size:a,name:s,resolvable:Boolean(c),path:Boolean(l)}}e.exports=t}),hg=h((r,e)=>{u();var t=ig(),n=rs(),{CID:o}=(ge(),ue(Xa)),{base32:i}=(ht(),ue(vo)),{base58btc:a}=(an(),ue(si)),s=(pt(),ue(Ge)),c=xi(),{toString:l}=(ke(),ue(fi)),{fromString:f}=(yt(),ue(rp)),{concat:g}=(Ho(),ue(Yu));e.exports=D;function D(X,re){return re instanceof Uint8Array?D.toString(X,re):D.toBytes(X,re)}D.toString=function(X,re){switch(n(X).code){case 4:case 41:return E(re);case 6:case 273:case 33:case 132:return T(re).toString();case 53:case 54:case 55:case 56:case 400:case 777:return I(re);case 421:return q(re);case 444:return J(re);case 445:return J(re);default:return l(re,"base16")}},D.toBytes=function(X,re){switch(n(X).code){case 4:return w(re);case 41:return w(re);case 6:case 273:case 33:case 132:return d(parseInt(re,10));case 53:case 54:case 55:case 56:case 400:case 777:return O(re);case 421:return j(re);case 444:return H(re);case 445:return L(re);default:return f(re,"base16")}};function w(X){if(!t.isIP(X))throw new Error("invalid ip address");return t.toBytes(X)}function E(X){let re=t.toString(X);if(!re||!t.isIP(re))throw new Error("invalid ip address");return re}function d(X){let re=new ArrayBuffer(2);return new DataView(re).setUint16(0,X),new Uint8Array(re)}function T(X){return new DataView(X.buffer).getUint16(X.byteOffset)}function O(X){let re=f(X),he=Uint8Array.from(c.encode(re.length));return g([he,re],he.length+re.length)}function I(X){let re=c.decode(X);if(X=X.slice(c.decode.bytes),X.length!==re)throw new Error("inconsistent lengths");return l(X)}function j(X){let re;X[0]==="Q"||X[0]==="1"?re=s.decode(a.decode(`z${X}`)).bytes:re=o.parse(X).multihash.bytes;let he=Uint8Array.from(c.encode(re.length));return g([he,re],he.length+re.length)}function q(X){let re=c.decode(X),he=X.slice(c.decode.bytes);if(he.length!==re)throw new Error("inconsistent lengths");return l(he,"base58btc")}function H(X){let re=X.split(":");if(re.length!==2)throw new Error("failed to parse onion addr: "+re+" does not contain a port number");if(re[0].length!==16)throw new Error("failed to parse onion addr: "+re[0]+" not a Tor onion address.");let he=i.decode("b"+re[0]),me=parseInt(re[1],10);if(me<1||me>65536)throw new Error("Port number is not in range(1, 65536)");let _e=d(me);return g([he,_e],he.length+_e.length)}function L(X){let re=X.split(":");if(re.length!==2)throw new Error("failed to parse onion addr: "+re+" does not contain a port number");if(re[0].length!==56)throw new Error("failed to parse onion addr: "+re[0]+" not a Tor onion3 address.");let he=i.decode("b"+re[0]),me=parseInt(re[1],10);if(me<1||me>65536)throw new Error("Port number is not in range(1, 65536)");let _e=d(me);return g([he,_e],he.length+_e.length)}function J(X){let re=X.slice(0,X.length-2),he=X.slice(X.length-2),me=l(re,"base32"),_e=T(he);return me+":"+_e}}),Sg=h((r,e)=>{u();var t=hg(),n=rs(),o=xi(),{concat:i}=(Ho(),ue(Yu)),{toString:a}=(ke(),ue(fi));e.exports={stringToStringTuples:s,stringTuplesToString:c,tuplesToStringTuples:f,stringTuplesToTuples:l,bytesToTuples:w,tuplesToBytes:g,bytesToString:E,stringToBytes:d,fromString:T,fromBytes:O,validateBytes:I,isValidBytes:j,cleanPath:q,ParseError:H,protoFromTuple:L,sizeForAddr:D};function s(J){let X=[],re=J.split("/").slice(1);if(re.length===1&&re[0]==="")return[];for(let he=0;he<re.length;he++){let me=re[he],_e=n(me);if(_e.size===0){X.push([me]);continue}if(he++,he>=re.length)throw H("invalid address: "+J);if(_e.path){X.push([me,q(re.slice(he).join("/"))]);break}X.push([me,re[he]])}return X}function c(J){let X=[];return J.map(re=>{let he=L(re);return X.push(he.name),re.length>1&&X.push(re[1]),null}),q(X.join("/"))}function l(J){return J.map(X=>{Array.isArray(X)||(X=[X]);let re=L(X);return X.length>1?[re.code,t.toBytes(re.code,X[1])]:[re.code]})}function f(J){return J.map(X=>{let re=L(X);return X[1]?[re.code,t.toString(re.code,X[1])]:[re.code]})}function g(J){return O(i(J.map(X=>{let re=L(X),he=Uint8Array.from(o.encode(re.code));return X.length>1&&(he=i([he,X[1]])),he})))}function D(J,X){return J.size>0?J.size/8:J.size===0?0:o.decode(X)+o.decode.bytes}function w(J){let X=[],re=0;for(;re<J.length;){let he=o.decode(J,re),me=o.decode.bytes,_e=n(he),Re=D(_e,J.slice(re+me));if(Re===0){X.push([he]),re+=me;continue}let Le=J.slice(re+me,re+me+Re);if(re+=Re+me,re>J.length)throw H("Invalid address Uint8Array: "+a(J,"base16"));X.push([he,Le])}return X}function E(J){let X=w(J),re=f(X);return c(re)}function d(J){J=q(J);let X=s(J),re=l(X);return g(re)}function T(J){return d(J)}function O(J){let X=I(J);if(X)throw X;return Uint8Array.from(J)}function I(J){try{w(J)}catch(X){return X}}function j(J){return I(J)===void 0}function q(J){return"/"+J.trim().split("/").filter(X=>X).join("/")}function H(J){return new Error("Error parsing address: "+J)}function L(J){return n(J[0])}}),Cg={};G(Cg,{equals:()=>pD});function pD(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var Og=B(()=>{u()}),Bg=h((r,e)=>{u();var t=Sg(),n=rs(),o=xi(),{CID:i}=(ge(),ue(Xa)),{base58btc:a}=(an(),ue(si)),s=dt(),c=Symbol.for("nodejs.util.inspect.custom"),{toString:l}=(ke(),ue(fi)),{equals:f}=(Og(),ue(Cg)),g=new Map,D=Symbol.for("@multiformats/js-multiaddr/multiaddr"),w=class{constructor(d){if(d==null&&(d=""),Object.defineProperty(this,D,{value:!0}),d instanceof Uint8Array)this.bytes=t.fromBytes(d);else if(typeof d=="string"){if(d.length>0&&d.charAt(0)!=="/")throw new Error(`multiaddr "${d}" must start with a "/"`);this.bytes=t.fromString(d)}else if(w.isMultiaddr(d))this.bytes=t.fromBytes(d.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return t.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let d={},T=this.toString().split("/");return d.family=T[1]==="ip4"?4:6,d.host=T[2],d.transport=T[3],d.port=parseInt(T[4]),d}protos(){return this.protoCodes().map(d=>Object.assign({},n(d)))}protoCodes(){let d=[],T=this.bytes,O=0;for(;O<T.length;){let I=o.decode(T,O),j=o.decode.bytes,q=n(I);O+=t.sizeForAddr(q,T.slice(O+j))+j,d.push(I)}return d}protoNames(){return this.protos().map(d=>d.name)}tuples(){return t.bytesToTuples(this.bytes)}stringTuples(){let d=t.bytesToTuples(this.bytes);return t.tuplesToStringTuples(d)}encapsulate(d){return d=new w(d),new w(this.toString()+d.toString())}decapsulate(d){let T=d.toString(),O=this.toString(),I=O.lastIndexOf(T);if(I<0)throw new Error("Address "+this+" does not contain subaddress: "+d);return new w(O.slice(0,I))}decapsulateCode(d){let T=this.tuples();for(let O=T.length-1;O>=0;O--)if(T[O][0]===d)return new w(t.tuplesToBytes(T.slice(0,O)));return this}getPeerId(){try{let d=this.stringTuples().filter(T=>T[0]===n.names.ipfs.code).pop();if(d&&d[1]){let T=d[1];return T[0]==="Q"||T[0]==="1"?l(a.decode(`z${T}`),"base58btc"):l(i.parse(T).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let d=null;try{d=this.stringTuples().filter(T=>!!n(T[0]).path)[0][1],d||(d=null)}catch{d=null}return d}equals(d){return f(this.bytes,d.bytes)}async resolve(){let d=this.protos().find(O=>O.resolvable);if(!d)return[this];let T=g.get(d.name);if(!T)throw s(new Error(`no available resolver for ${d.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await T(this)).map(O=>new w(O))}nodeAddress(){let d=this.protoCodes(),T=this.protoNames(),O=this.toString().split("/").slice(1);if(O.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(d[0]!==4&&d[0]!==41&&d[0]!==54&&d[0]!==55)throw new Error(`no protocol with name: "'${T[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(O[2]!=="tcp"&&O[2]!=="udp")throw new Error(`no protocol with name: "'${T[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:d[0]===41||d[0]===55?6:4,address:O[1],port:parseInt(O[3])}}isThinWaistAddress(d){let T=(d||this).protos();return!(T.length!==2||T[0].code!==4&&T[0].code!==41||T[1].code!==6&&T[1].code!==273)}static fromNodeAddress(d,T){if(!d)throw new Error("requires node address object");if(!T)throw new Error("requires transport protocol");let O;switch(d.family){case 4:O="ip4";break;case 6:O="ip6";break;default:throw Error(`Invalid addr family. Got '${d.family}' instead of 4 or 6`)}return new w("/"+[O,d.address,T,d.port].join("/"))}static isName(d){return w.isMultiaddr(d)?d.protos().some(T=>T.resolvable):!1}static isMultiaddr(d){return d instanceof w||Boolean(d&&d[D])}[c](){return"<Multiaddr "+l(this.bytes,"base16")+" - "+t.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+l(this.bytes,"base16")+" - "+t.bytesToString(this.bytes)+">"}};w.protocols=n,w.resolvers=g;function E(d){return new w(d)}e.exports={Multiaddr:w,multiaddr:E,protocols:n,resolvers:g}}),$g=h((r,e)=>{u(),e.exports=a,e.exports.format=s,e.exports.parse=c;var t=/\B(?=(\d{3})+(?!\d))/g,n=/(?:\.0*|(\.[^0]+)0+)$/,o={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},i=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function a(l,f){return typeof l=="string"?c(l):typeof l=="number"?s(l,f):null}function s(l,f){if(!Number.isFinite(l))return null;var g=Math.abs(l),D=f&&f.thousandsSeparator||"",w=f&&f.unitSeparator||"",E=f&&f.decimalPlaces!==void 0?f.decimalPlaces:2,d=Boolean(f&&f.fixedDecimals),T=f&&f.unit||"";(!T||!o[T.toLowerCase()])&&(g>=o.pb?T="PB":g>=o.tb?T="TB":g>=o.gb?T="GB":g>=o.mb?T="MB":g>=o.kb?T="KB":T="B");var O=l/o[T.toLowerCase()],I=O.toFixed(E);return d||(I=I.replace(n,"$1")),D&&(I=I.split(".").map(function(j,q){return q===0?j.replace(t,D):j}).join(".")),I+w+T}function c(l){if(typeof l=="number"&&!isNaN(l))return l;if(typeof l!="string")return null;var f=i.exec(l),g,D="b";return f?(g=parseFloat(f[1]),D=f[4].toLowerCase()):(g=parseInt(l,10),D="b"),isNaN(g)?null:Math.floor(o[D]*g)}}),xc=h((r,e)=>{u(),e.exports=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let n=Object.getPrototypeOf(t);return n===null||n===Object.prototype}}),Jg=h((r,e)=>{u();var t=xc(),{hasOwnProperty:n}=Object.prototype,{propertyIsEnumerable:o}=Object,i=(d,T,O)=>Object.defineProperty(d,T,{value:O,writable:!0,enumerable:!0,configurable:!0}),a=r,s={concatArrays:!1,ignoreUndefined:!1},c=d=>{let T=[];for(let O in d)n.call(d,O)&&T.push(O);if(Object.getOwnPropertySymbols){let O=Object.getOwnPropertySymbols(d);for(let I of O)o.call(d,I)&&T.push(I)}return T};function l(d){return Array.isArray(d)?f(d):t(d)?g(d):d}function f(d){let T=d.slice(0,0);return c(d).forEach(O=>{i(T,O,l(d[O]))}),T}function g(d){let T=Object.getPrototypeOf(d)===null?Object.create(null):{};return c(d).forEach(O=>{i(T,O,l(d[O]))}),T}var D=(d,T,O,I)=>(O.forEach(j=>{typeof T[j]>"u"&&I.ignoreUndefined||(j in d&&d[j]!==Object.getPrototypeOf(d)?i(d,j,E(d[j],T[j],I)):i(d,j,l(T[j])))}),d),w=(d,T,O)=>{let I=d.slice(0,0),j=0;return[d,T].forEach(q=>{let H=[];for(let L=0;L<q.length;L++)!n.call(q,L)||(H.push(String(L)),q===d?i(I,j++,q[L]):i(I,j++,l(q[L])));I=D(I,q,c(q).filter(L=>!H.includes(L)),O)}),I};function E(d,T,O){return O.concatArrays&&Array.isArray(d)&&Array.isArray(T)?w(d,T,O):!t(T)||!t(d)?l(T):D(d,T,c(T),O)}e.exports=function(...d){let T=E(l(s),this!==a&&this||{},s),O={_:{}};for(let I of d)if(I!==void 0){if(!t(I))throw new TypeError("`"+I+"` is not an Option Object");O=E(O,{_:I},T)}return O._}}),Cc=h((r,e)=>{u();var t=Object.prototype.hasOwnProperty,n="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(n=!1));function i(l,f,g){this.fn=l,this.context=f,this.once=g||!1}function a(l,f,g,D,w){if(typeof g!="function")throw new TypeError("The listener must be a function");var E=new i(g,D||l,w),d=n?n+f:f;return l._events[d]?l._events[d].fn?l._events[d]=[l._events[d],E]:l._events[d].push(E):(l._events[d]=E,l._eventsCount++),l}function s(l,f){--l._eventsCount===0?l._events=new o:delete l._events[f]}function c(){this._events=new o,this._eventsCount=0}c.prototype.eventNames=function(){var l=[],f,g;if(this._eventsCount===0)return l;for(g in f=this._events)t.call(f,g)&&l.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(f)):l},c.prototype.listeners=function(l){var f=n?n+l:l,g=this._events[f];if(!g)return[];if(g.fn)return[g.fn];for(var D=0,w=g.length,E=new Array(w);D<w;D++)E[D]=g[D].fn;return E},c.prototype.listenerCount=function(l){var f=n?n+l:l,g=this._events[f];return g?g.fn?1:g.length:0},c.prototype.emit=function(l,f,g,D,w,E){var d=n?n+l:l;if(!this._events[d])return!1;var T=this._events[d],O=arguments.length,I,j;if(T.fn){switch(T.once&&this.removeListener(l,T.fn,void 0,!0),O){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,f),!0;case 3:return T.fn.call(T.context,f,g),!0;case 4:return T.fn.call(T.context,f,g,D),!0;case 5:return T.fn.call(T.context,f,g,D,w),!0;case 6:return T.fn.call(T.context,f,g,D,w,E),!0}for(j=1,I=new Array(O-1);j<O;j++)I[j-1]=arguments[j];T.fn.apply(T.context,I)}else{var q=T.length,H;for(j=0;j<q;j++)switch(T[j].once&&this.removeListener(l,T[j].fn,void 0,!0),O){case 1:T[j].fn.call(T[j].context);break;case 2:T[j].fn.call(T[j].context,f);break;case 3:T[j].fn.call(T[j].context,f,g);break;case 4:T[j].fn.call(T[j].context,f,g,D);break;default:if(!I)for(H=1,I=new Array(O-1);H<O;H++)I[H-1]=arguments[H];T[j].fn.apply(T[j].context,I)}}return!0},c.prototype.on=function(l,f,g){return a(this,l,f,g,!1)},c.prototype.once=function(l,f,g){return a(this,l,f,g,!0)},c.prototype.removeListener=function(l,f,g,D){var w=n?n+l:l;if(!this._events[w])return this;if(!f)return s(this,w),this;var E=this._events[w];if(E.fn)E.fn===f&&(!D||E.once)&&(!g||E.context===g)&&s(this,w);else{for(var d=0,T=[],O=E.length;d<O;d++)(E[d].fn!==f||D&&!E[d].once||g&&E[d].context!==g)&&T.push(E[d]);T.length?this._events[w]=T.length===1?T[0]:T:s(this,w)}return this},c.prototype.removeAllListeners=function(l){var f;return l?(f=n?n+l:l,this._events[f]&&s(this,f)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,typeof e<"u"&&(e.exports=c)}),om=h((r,e)=>{u(),e.exports=(t,n)=>(n=n||(()=>{}),t.then(o=>new Promise(i=>{i(n())}).then(()=>o),o=>new Promise(i=>{i(n())}).then(()=>{throw o})))}),Oc=h((r,e)=>{u();var t=om(),n=class extends Error{constructor(i){super(i),this.name="TimeoutError"}},o=(i,a,s)=>new Promise((c,l)=>{if(typeof a!="number"||a<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(a===1/0){c(i);return}let f=setTimeout(()=>{if(typeof s=="function"){try{c(s())}catch(w){l(w)}return}let g=typeof s=="string"?s:`Promise timed out after ${a} milliseconds`,D=s instanceof Error?s:new n(g);typeof i.cancel=="function"&&i.cancel(),l(D)},a);t(i.then(c,l),()=>{clearTimeout(f)})});e.exports=o,e.exports.default=o,e.exports.TimeoutError=n}),am=h(r=>{u(),Object.defineProperty(r,"__esModule",{value:!0});function e(t,n,o){let i=0,a=t.length;for(;a>0;){let s=a/2|0,c=i+s;o(t[c],n)<=0?(i=++c,a-=s+1):a=s}return i}r.default=e}),um=h(r=>{u(),Object.defineProperty(r,"__esModule",{value:!0});var e=am(),t=class{constructor(){this._queue=[]}enqueue(n,o){o=Object.assign({priority:0},o);let i={priority:o.priority,run:n};if(this.size&&this._queue[this.size-1].priority>=o.priority){this._queue.push(i);return}let a=e.default(this._queue,i,(s,c)=>c.priority-s.priority);this._queue.splice(a,0,i)}dequeue(){let n=this._queue.shift();return n==null?void 0:n.run}filter(n){return this._queue.filter(o=>o.priority===n.priority).map(o=>o.run)}get size(){return this._queue.length}};r.default=t}),fm=h(r=>{u(),Object.defineProperty(r,"__esModule",{value:!0});var e=Cc(),t=Oc(),n=um(),o=()=>{},i=new t.TimeoutError,a=class extends e{constructor(s){var c,l,f,g;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=o,this._resolveIdle=o,s=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},s),!(typeof s.intervalCap=="number"&&s.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(l=(c=s.intervalCap)===null||c===void 0?void 0:c.toString())!==null&&l!==void 0?l:""}\` (${typeof s.intervalCap})`);if(s.interval===void 0||!(Number.isFinite(s.interval)&&s.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(g=(f=s.interval)===null||f===void 0?void 0:f.toString())!==null&&g!==void 0?g:""}\` (${typeof s.interval})`);this._carryoverConcurrencyCount=s.carryoverConcurrencyCount,this._isIntervalIgnored=s.intervalCap===1/0||s.interval===0,this._intervalCap=s.intervalCap,this._interval=s.interval,this._queue=new s.queueClass,this._queueClass=s.queueClass,this.concurrency=s.concurrency,this._timeout=s.timeout,this._throwOnTimeout=s.throwOnTimeout===!0,this._isPaused=s.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=o,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=o,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let s=Date.now();if(this._intervalId===void 0){let c=this._intervalEnd-s;if(c<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},c)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let s=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let c=this._queue.dequeue();return c?(this.emit("active"),c(),s&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(s){if(!(typeof s=="number"&&s>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${s}\` (${typeof s})`);this._concurrency=s,this._processQueue()}async add(s,c={}){return new Promise((l,f)=>{let g=async()=>{this._pendingCount++,this._intervalCount++;try{let D=this._timeout===void 0&&c.timeout===void 0?s():t.default(Promise.resolve(s()),c.timeout===void 0?this._timeout:c.timeout,()=>{(c.throwOnTimeout===void 0?this._throwOnTimeout:c.throwOnTimeout)&&f(i)});l(await D)}catch(D){f(D)}this._next()};this._queue.enqueue(g,c),this._tryToStartAnother(),this.emit("add")})}async addAll(s,c){return Promise.all(s.map(async l=>this.add(l,c)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(s=>{let c=this._resolveEmpty;this._resolveEmpty=()=>{c(),s()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(s=>{let c=this._resolveIdle;this._resolveIdle=()=>{c(),s()}})}get size(){return this._queue.size}sizeBy(s){return this._queue.filter(s).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(s){this._timeout=s}};r.default=a}),pm=h((r,e)=>{u(),e.exports=t;function t(o,i,a){var s,c;if(Array.isArray(i)&&(s=i.slice(0)),typeof i=="string"&&(s=i.split(".")),typeof i=="symbol"&&(s=[i]),!Array.isArray(s))throw new Error("props arg must be an array, a string or a symbol");if(c=s.pop(),!c)return!1;n(c);for(var l;l=s.shift();)if(n(l),typeof o[l]>"u"&&(o[l]={}),o=o[l],!o||typeof o!="object")return!1;return o[c]=a,!0}function n(o){if(o==="__proto__"||o==="constructor"||o==="prototype")throw new Error("setting of prototype values not supported")}}),wm=h((r,e)=>{u();var t=xc();e.exports=(n,o={})=>{if(!t(n)&&!Array.isArray(n))throw new TypeError("Expected a plain object or array");let{deep:i}=o,a=[],s=[],c=f=>{let g=a.indexOf(f);if(g!==-1)return s[g];let D=[];return a.push(f),s.push(D),D.push(...f.map(w=>Array.isArray(w)?c(w):t(w)?l(w):w)),D},l=f=>{let g=a.indexOf(f);if(g!==-1)return s[g];let D={},w=Object.keys(f).sort(o.compare);a.push(f),s.push(D);for(let E of w){let d=f[E],T;i&&Array.isArray(d)?T=c(d):T=i&&t(d)?l(d):d,Object.defineProperty(D,E,{...Object.getOwnPropertyDescriptor(f,E),value:T})}return D};return Array.isArray(n)?i?c(n):n.slice():l(n)}}),Or=h((r,e)=>{u();var t=async function*(n,o){for await(let i of n)await o(i)&&(yield i)};e.exports=t}),Dm=h((r,e)=>{u(),e.exports=class{constructor(t){if(!(t>0)||(t-1&t)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}push(t){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){let t=this.buffer[this.btm];if(t!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}}),Fi=h((r,e)=>{u();var t=Dm();e.exports=class{constructor(n){this.hwm=n||16,this.head=new t(this.hwm),this.tail=this.head}push(n){if(!this.head.push(n)){let o=this.head;this.head=o.next=new t(2*this.head.buffer.length),this.head.push(n)}}shift(){let n=this.tail.shift();if(n===void 0&&this.tail.next){let o=this.tail.next;return this.tail.next=null,this.tail=o,this.tail.shift()}return n}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}}),Om=h((r,e)=>{u();var t=Fi();e.exports=n=>{n=n||{};let o;typeof n=="function"?(o=n,n={}):o=n.onEnd;let i=new t,a,s,c,l=()=>{if(!i.isEmpty()){if(n.writev){let I,j=[];for(;!i.isEmpty();){if(I=i.shift(),I.error)throw I.error;j.push(I.value)}return{done:I.done,value:j}}let O=i.shift();if(O.error)throw O.error;return O}return c?{done:!0}:new Promise((O,I)=>{s=j=>(s=null,j.error?I(j.error):n.writev&&!j.done?O({done:j.done,value:[j.value]}):O(j),a)})},f=O=>s?s(O):(i.push(O),a),g=O=>(i=new t,s?s({error:O}):(i.push({error:O}),a)),D=O=>c?a:f({done:!1,value:O}),w=O=>c?a:(c=!0,O?g(O):f({done:!0})),E=()=>(i=new t,w(),{done:!0}),d=O=>(w(O),{done:!0});if(a={[Symbol.asyncIterator](){return this},next:l,return:E,throw:d,push:D,end:w},!o)return a;let T=a;return a={[Symbol.asyncIterator](){return this},next(){return T.next()},throw(O){return T.throw(O),o&&(o(O),o=null),{done:!0}},return(){return T.return(),o&&(o(),o=null),{done:!0}},push:D,end(O){return T.end(O),o&&(o(O),o=null),a}},a}}),On=h((r,e)=>{u();var t=async n=>{for await(let o of n);};e.exports=t}),qm=h((r,e)=>{u();var t=async n=>{for await(let o of n)return o};e.exports=t}),Mi=h((r,e)=>{u();var t=async function*(n,o){for await(let i of n)yield o(i)};e.exports=t}),Rn=h((r,e)=>{u();var t=typeof Reflect=="object"?Reflect:null,n=t&&typeof t.apply=="function"?t.apply:function(L,J,X){return Function.prototype.apply.call(L,J,X)},o;t&&typeof t.ownKeys=="function"?o=t.ownKeys:Object.getOwnPropertySymbols?o=function(L){return Object.getOwnPropertyNames(L).concat(Object.getOwnPropertySymbols(L))}:o=function(L){return Object.getOwnPropertyNames(L)};function i(L){console&&console.warn&&console.warn(L)}var a=Number.isNaN||function(L){return L!==L};function s(){s.init.call(this)}e.exports=s,e.exports.once=j,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function l(L){if(typeof L!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof L)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(L){if(typeof L!="number"||L<0||a(L))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+L+".");c=L}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(L){if(typeof L!="number"||L<0||a(L))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+L+".");return this._maxListeners=L,this};function f(L){return L._maxListeners===void 0?s.defaultMaxListeners:L._maxListeners}s.prototype.getMaxListeners=function(){return f(this)},s.prototype.emit=function(L){for(var J=[],X=1;X<arguments.length;X++)J.push(arguments[X]);var re=L==="error",he=this._events;if(he!==void 0)re=re&&he.error===void 0;else if(!re)return!1;if(re){var me;if(J.length>0&&(me=J[0]),me instanceof Error)throw me;var _e=new Error("Unhandled error."+(me?" ("+me.message+")":""));throw _e.context=me,_e}var Re=he[L];if(Re===void 0)return!1;if(typeof Re=="function")n(Re,this,J);else for(var Le=Re.length,Qe=T(Re,Le),X=0;X<Le;++X)n(Qe[X],this,J);return!0};function g(L,J,X,re){var he,me,_e;if(l(X),me=L._events,me===void 0?(me=L._events=Object.create(null),L._eventsCount=0):(me.newListener!==void 0&&(L.emit("newListener",J,X.listener?X.listener:X),me=L._events),_e=me[J]),_e===void 0)_e=me[J]=X,++L._eventsCount;else if(typeof _e=="function"?_e=me[J]=re?[X,_e]:[_e,X]:re?_e.unshift(X):_e.push(X),he=f(L),he>0&&_e.length>he&&!_e.warned){_e.warned=!0;var Re=new Error("Possible EventEmitter memory leak detected. "+_e.length+" "+String(J)+" listeners added. Use emitter.setMaxListeners() to increase limit");Re.name="MaxListenersExceededWarning",Re.emitter=L,Re.type=J,Re.count=_e.length,i(Re)}return L}s.prototype.addListener=function(L,J){return g(this,L,J,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(L,J){return g(this,L,J,!0)};function D(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function w(L,J,X){var re={fired:!1,wrapFn:void 0,target:L,type:J,listener:X},he=D.bind(re);return he.listener=X,re.wrapFn=he,he}s.prototype.once=function(L,J){return l(J),this.on(L,w(this,L,J)),this},s.prototype.prependOnceListener=function(L,J){return l(J),this.prependListener(L,w(this,L,J)),this},s.prototype.removeListener=function(L,J){var X,re,he,me,_e;if(l(J),re=this._events,re===void 0)return this;if(X=re[L],X===void 0)return this;if(X===J||X.listener===J)--this._eventsCount===0?this._events=Object.create(null):(delete re[L],re.removeListener&&this.emit("removeListener",L,X.listener||J));else if(typeof X!="function"){for(he=-1,me=X.length-1;me>=0;me--)if(X[me]===J||X[me].listener===J){_e=X[me].listener,he=me;break}if(he<0)return this;he===0?X.shift():O(X,he),X.length===1&&(re[L]=X[0]),re.removeListener!==void 0&&this.emit("removeListener",L,_e||J)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(L){var J,X,re;if(X=this._events,X===void 0)return this;if(X.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):X[L]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete X[L]),this;if(arguments.length===0){var he=Object.keys(X),me;for(re=0;re<he.length;++re)me=he[re],me!=="removeListener"&&this.removeAllListeners(me);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(J=X[L],typeof J=="function")this.removeListener(L,J);else if(J!==void 0)for(re=J.length-1;re>=0;re--)this.removeListener(L,J[re]);return this};function E(L,J,X){var re=L._events;if(re===void 0)return[];var he=re[J];return he===void 0?[]:typeof he=="function"?X?[he.listener||he]:[he]:X?I(he):T(he,he.length)}s.prototype.listeners=function(L){return E(this,L,!0)},s.prototype.rawListeners=function(L){return E(this,L,!1)},s.listenerCount=function(L,J){return typeof L.listenerCount=="function"?L.listenerCount(J):d.call(L,J)},s.prototype.listenerCount=d;function d(L){var J=this._events;if(J!==void 0){var X=J[L];if(typeof X=="function")return 1;if(X!==void 0)return X.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function T(L,J){for(var X=new Array(J),re=0;re<J;++re)X[re]=L[re];return X}function O(L,J){for(;J+1<L.length;J++)L[J]=L[J+1];L.pop()}function I(L){for(var J=new Array(L.length),X=0;X<J.length;++X)J[X]=L[X].listener||L[X];return J}function j(L,J){return new Promise(function(X,re){function he(_e){L.removeListener(J,me),re(_e)}function me(){typeof L.removeListener=="function"&&L.removeListener("error",he),X([].slice.call(arguments))}H(L,J,me,{once:!0}),J!=="error"&&q(L,he,{once:!0})})}function q(L,J,X){typeof L.on=="function"&&H(L,"error",J,X)}function H(L,J,X,re){if(typeof L.on=="function")re.once?L.once(J,X):L.on(J,X);else if(typeof L.addEventListener=="function")L.addEventListener(J,function he(me){re.once&&L.removeEventListener(J,he),X(me)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof L)}}),Vc=h((r,e)=>{u(),e.exports={WORKER_REQUEST_READ_LOCK:"lock:worker:request-read",WORKER_RELEASE_READ_LOCK:"lock:worker:release-read",MASTER_GRANT_READ_LOCK:"lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK:"lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK:"lock:worker:release-write",MASTER_GRANT_WRITE_LOCK:"lock:master:grant-write"}}),aw=h(()=>{u()}),mw=h((r,e)=>{u();var t=Rn().EventEmitter,{nanoid:n}=(xo(),ue(tu)),{WORKER_REQUEST_READ_LOCK:o,WORKER_RELEASE_READ_LOCK:i,MASTER_GRANT_READ_LOCK:a,WORKER_REQUEST_WRITE_LOCK:s,WORKER_RELEASE_WRITE_LOCK:c,MASTER_GRANT_WRITE_LOCK:l}=Vc(),f,g=(w,E,d,T,O)=>(I,j)=>{j&&j.type===d&&w.emit(E,j.name,()=>(I.send({type:O,name:j.name,identifier:j.identifier}),new Promise(q=>{let H=L=>{L&&L.type===T&&L.identifier===j.identifier&&(I.removeListener("message",H),q())};I.on("message",H)})))},D=(w,E,d,T)=>()=>{let O=n();return process$1.send({type:E,identifier:O,name:w}),new Promise(I=>{let j=q=>{q&&q.type===d&&q.identifier===O&&(process$1.removeListener("message",j),I(()=>{process$1.send({type:T,identifier:O,name:w})}))};process$1.on("message",j)})};e.exports=w=>{try{if(f=aw(),!Object.keys(f).length)return}catch{return}if(f.isMaster||w.singleProcess){let E=new t;return f.on("message",g(E,"requestReadLock",o,i,a)),f.on("message",g(E,"requestWriteLock",s,c,l)),E}return{isWorker:!0,readLock:E=>D(E,o,a,i),writeLock:E=>D(E,s,l,c)}}}),Gc=h((r,e)=>{u();var t={},n=o=>{o.addEventListener("message",i=>{n.dispatchEvent("message",o,i)}),o.port&&o.port.addEventListener("message",i=>{n.dispatchEvent("message",o,i)})};n.addEventListener=(o,i)=>{t[o]||(t[o]=[]),t[o].push(i)},n.removeEventListener=(o,i)=>{!t[o]||(t[o]=t[o].filter(a=>a===i))},n.dispatchEvent=function(){let o=Array.prototype.slice.call(arguments),i=o.shift();!t[i]||t[i].forEach(a=>a.apply(null,o))},e.exports=n}),Tw=h((r,e)=>{u();var t=Rn().EventEmitter,{nanoid:n}=(xo(),ue(tu)),{WORKER_REQUEST_READ_LOCK:o,WORKER_RELEASE_READ_LOCK:i,MASTER_GRANT_READ_LOCK:a,WORKER_REQUEST_WRITE_LOCK:s,WORKER_RELEASE_WRITE_LOCK:c,MASTER_GRANT_WRITE_LOCK:l}=Vc(),f=Gc(),g=(E,d,T,O,I)=>(j,q)=>{if(!q||!q.data||q.data.type!==T)return;let H={type:q.data.type,name:q.data.name,identifier:q.data.identifier};E.emit(d,H.name,()=>(j.postMessage({type:I,name:H.name,identifier:H.identifier}),new Promise(L=>{let J=X=>{if(!X||!X.data)return;let re={type:X.data.type,name:X.data.name,identifier:X.data.identifier};re&&re.type===O&&re.identifier===H.identifier&&(j.removeEventListener("message",J),L())};j.addEventListener("message",J)})))},D=(E,d,T,O)=>()=>{let I=n();return globalThis.postMessage({type:d,identifier:I,name:E}),new Promise(j=>{let q=H=>{if(!H||!H.data)return;let L={type:H.data.type,identifier:H.data.identifier};L&&L.type===T&&L.identifier===I&&(globalThis.removeEventListener("message",q),j(()=>{globalThis.postMessage({type:O,identifier:I,name:E})}))};globalThis.addEventListener("message",q)})},w={singleProcess:!1};e.exports=E=>{if(E=Object.assign({},w,E),!!globalThis.document||E.singleProcess){let d=new t;return f.addEventListener("message",g(d,"requestReadLock",o,i,a)),f.addEventListener("message",g(d,"requestWriteLock",s,c,l)),d}return{isWorker:!0,readLock:d=>D(d,o,a,i),writeLock:d=>D(d,s,l,c)}}}),Iw=h(r=>{u(),Object.defineProperty(r,"__esModule",{value:!0});function e(t,n,o){let i=0,a=t.length;for(;a>0;){let s=a/2|0,c=i+s;o(t[c],n)<=0?(i=++c,a-=s+1):a=s}return i}r.default=e}),Rw=h(r=>{u(),Object.defineProperty(r,"__esModule",{value:!0});var e=Iw(),t=class{constructor(){this._queue=[]}enqueue(n,o){o=Object.assign({priority:0},o);let i={priority:o.priority,run:n};if(this.size&&this._queue[this.size-1].priority>=o.priority){this._queue.push(i);return}let a=e.default(this._queue,i,(s,c)=>c.priority-s.priority);this._queue.splice(a,0,i)}dequeue(){let n=this._queue.shift();return n==null?void 0:n.run}filter(n){return this._queue.filter(o=>o.priority===n.priority).map(o=>o.run)}get size(){return this._queue.length}};r.default=t}),Pw=h(r=>{u(),Object.defineProperty(r,"__esModule",{value:!0});var e=Cc(),t=Oc(),n=Rw(),o=()=>{},i=new t.TimeoutError,a=class extends e{constructor(s){var c,l,f,g;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=o,this._resolveIdle=o,s=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},s),!(typeof s.intervalCap=="number"&&s.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(l=(c=s.intervalCap)===null||c===void 0?void 0:c.toString())!==null&&l!==void 0?l:""}\` (${typeof s.intervalCap})`);if(s.interval===void 0||!(Number.isFinite(s.interval)&&s.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(g=(f=s.interval)===null||f===void 0?void 0:f.toString())!==null&&g!==void 0?g:""}\` (${typeof s.interval})`);this._carryoverConcurrencyCount=s.carryoverConcurrencyCount,this._isIntervalIgnored=s.intervalCap===1/0||s.interval===0,this._intervalCap=s.intervalCap,this._interval=s.interval,this._queue=new s.queueClass,this._queueClass=s.queueClass,this.concurrency=s.concurrency,this._timeout=s.timeout,this._throwOnTimeout=s.throwOnTimeout===!0,this._isPaused=s.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=o,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=o,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let s=Date.now();if(this._intervalId===void 0){let c=this._intervalEnd-s;if(c<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},c)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let s=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let c=this._queue.dequeue();return c?(this.emit("active"),c(),s&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(s){if(!(typeof s=="number"&&s>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${s}\` (${typeof s})`);this._concurrency=s,this._processQueue()}async add(s,c={}){return new Promise((l,f)=>{let g=async()=>{this._pendingCount++,this._intervalCount++;try{let D=this._timeout===void 0&&c.timeout===void 0?s():t.default(Promise.resolve(s()),c.timeout===void 0?this._timeout:c.timeout,()=>{(c.throwOnTimeout===void 0?this._throwOnTimeout:c.throwOnTimeout)&&f(i)});l(await D)}catch(D){f(D)}this._next()};this._queue.enqueue(g,c),this._tryToStartAnother(),this.emit("add")})}async addAll(s,c){return Promise.all(s.map(async l=>this.add(l,c)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(s=>{let c=this._resolveEmpty;this._resolveEmpty=()=>{c(),s()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(s=>{let c=this._resolveIdle;this._resolveIdle=()=>{c(),s()}})}get size(){return this._queue.size}sizeBy(s){return this._queue.filter(s).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(s){this._timeout=s}};r.default=a}),kw=h((r,e)=>{u();var t;e.exports.timeout=function(n,o){var i=new t,a;return Promise.race([n,new Promise(function(s,c){a=setTimeout(function(){c(i)},o)})]).then(function(s){return clearTimeout(a),s},function(s){throw clearTimeout(a),s})},t=e.exports.TimeoutError=function(){Error.call(this),this.stack=Error().stack,this.message="Timeout"},t.prototype=Object.create(Error.prototype),t.prototype.name="TimeoutError"}),Nw=h((r,e)=>{u();var t=mw(),n=Tw(),{default:o}=Pw(),{timeout:i}=kw(),a=Gc(),s={},c;function l(D,w){let E,d=new Promise(T=>{E=T});return D.add(()=>i((()=>new Promise(T=>{E(()=>{T()})}))(),w.timeout)),d}var f=(D,w)=>{if(c.isWorker)return{readLock:c.readLock(D,w),writeLock:c.writeLock(D,w)};let E=new o({concurrency:1}),d=null;return{readLock:()=>{if(d)return l(d,w);d=new o({concurrency:w.concurrency,autoStart:!1});let T=d,O=l(d,w);return E.add(()=>(T.start(),T.onIdle().then(()=>{d===T&&(d=null)}))),O},writeLock:()=>(d=null,l(E,w))}},g={concurrency:1/0,timeout:846e5,global:global$1,singleProcess:!1};e.exports=(D,w)=>(w||(w={}),typeof D=="object"&&(w=D,D="lock"),D||(D="lock"),w=Object.assign({},g,w),c||(c=t(w)||n(w),c.isWorker||(c.on("requestReadLock",(E,d)=>{!s[E]||s[E].readLock().then(T=>d().finally(()=>T()))}),c.on("requestWriteLock",async(E,d)=>{!s[E]||s[E].writeLock().then(T=>d().finally(()=>T()))}))),s[D]||(s[D]=f(D,w)),s[D]),e.exports.Worker=function(D,w){w=w||global$1.Worker;let E;try{E=new w(D)}catch(d){d.message.includes("not a constructor")&&(E=w(D))}if(!E)throw new Error("Could not create Worker from",w);return a(E),E}}),Mw=h((r,e)=>{u();async function*t(n,o=1){let i=[];o<1&&(o=1);for await(let a of n)for(i.push(a);i.length>=o;)yield i.slice(0,o),i=i.slice(o);for(;i.length;)yield i.slice(0,o),i=i.slice(o)}e.exports=t}),qw=h((r,e)=>{u();var t=Mw();async function*n(o,i=1){for await(let a of t(o,i)){let s=a.map(c=>c().then(l=>({ok:!0,value:l}),l=>({ok:!1,err:l})));for(let c=0;c<s.length;c++){let l=await s[c];if(l.ok)yield l.value;else throw l.err}}}e.exports=n}),Kw=h((r,e)=>{u();var t=(...s)=>{let c;for(;s.length;)c=s.shift()(c);return c},n=s=>s&&(typeof s[Symbol.asyncIterator]=="function"||typeof s[Symbol.iterator]=="function"||typeof s.next=="function"),o=s=>s&&typeof s.sink=="function"&&n(s.source),i=s=>c=>(s.sink(c),s.source),a=(...s)=>{if(o(s[0])){let c=s[0];s[0]=()=>c.source}else if(n(s[0])){let c=s[0];s[0]=()=>c}if(s.length>1&&o(s[s.length-1])&&(s[s.length-1]=s[s.length-1].sink),s.length>2)for(let c=1;c<s.length-1;c++)o(s[c])&&(s[c]=i(s[c]));return t(...s)};e.exports=a,e.exports.pipe=a,e.exports.rawPipe=t,e.exports.isIterable=n,e.exports.isDuplex=o}),Ww=h((r,e)=>{u();var t=Fi();e.exports=n=>{n=n||{};let o;typeof n=="function"?(o=n,n={}):o=n.onEnd;let i=new t,a,s,c,l=()=>{if(!i.isEmpty()){if(n.writev){let I,j=[];for(;!i.isEmpty();){if(I=i.shift(),I.error)throw I.error;j.push(I.value)}return{done:I.done,value:j}}let O=i.shift();if(O.error)throw O.error;return O}return c?{done:!0}:new Promise((O,I)=>{s=j=>(s=null,j.error?I(j.error):n.writev&&!j.done?O({done:j.done,value:[j.value]}):O(j),a)})},f=O=>s?s(O):(i.push(O),a),g=O=>(i=new t,s?s({error:O}):(i.push({error:O}),a)),D=O=>c?a:f({done:!1,value:O}),w=O=>c?a:(c=!0,O?g(O):f({done:!0})),E=()=>(i=new t,w(),{done:!0}),d=O=>(w(O),{done:!0});if(a={[Symbol.asyncIterator](){return this},next:l,return:E,throw:d,push:D,end:w},!o)return a;let T=a;return a={[Symbol.asyncIterator](){return this},next(){return T.next()},throw(O){return T.throw(O),o&&(o(O),o=null),{done:!0}},return(){return T.return(),o&&(o(),o=null),{done:!0}},push:D,end(O){return T.end(O),o&&(o(O),o=null),a}},a}}),of=h((r,e)=>{u();var t=Ww(),n=async function*(...o){let i=t();setTimeout(async()=>{try{await Promise.all(o.map(async a=>{for await(let s of a)i.push(s)})),i.end()}catch(a){i.end(a)}},0),yield*i};e.exports=n}),Is=h((r,e)=>{u();var t=async n=>{let o=[];for await(let i of n)o.push(i);return o};e.exports=t}),Ui=h((r,e)=>{u();var t=async function*(n,o){let i=0;if(!(o<1)){for await(let a of n)if(yield a,i++,i===o)return}};e.exports=t}),fb=h((r,e)=>{u();var t=(...s)=>{let c;for(;s.length;)c=s.shift()(c);return c},n=s=>s&&(typeof s[Symbol.asyncIterator]=="function"||typeof s[Symbol.iterator]=="function"||typeof s.next=="function"),o=s=>s&&typeof s.sink=="function"&&n(s.source),i=s=>c=>(s.sink(c),s.source),a=(...s)=>{if(o(s[0])){let c=s[0];s[0]=()=>c.source}else if(n(s[0])){let c=s[0];s[0]=()=>c}if(s.length>1&&o(s[s.length-1])&&(s[s.length-1]=s[s.length-1].sink),s.length>2)for(let c=1;c<s.length-1;c++)o(s[c])&&(s[c]=i(s[c]));return t(...s)};e.exports=a,e.exports.pipe=a,e.exports.rawPipe=t,e.exports.isIterable=n,e.exports.isDuplex=o}),pb=h((r,e)=>{u();var t=Fi();e.exports=n=>{n=n||{};let o;typeof n=="function"?(o=n,n={}):o=n.onEnd;let i=new t,a,s,c,l=()=>{if(!i.isEmpty()){if(n.writev){let I,j=[];for(;!i.isEmpty();){if(I=i.shift(),I.error)throw I.error;j.push(I.value)}return{done:I.done,value:j}}let O=i.shift();if(O.error)throw O.error;return O}return c?{done:!0}:new Promise((O,I)=>{s=j=>(s=null,j.error?I(j.error):n.writev&&!j.done?O({done:j.done,value:[j.value]}):O(j),a)})},f=O=>s?s(O):(i.push(O),a),g=O=>(i=new t,s?s({error:O}):(i.push({error:O}),a)),D=O=>c?a:f({done:!1,value:O}),w=O=>c?a:(c=!0,O?g(O):f({done:!0})),E=()=>(i=new t,w(),{done:!0}),d=O=>(w(O),{done:!0});if(a={[Symbol.asyncIterator](){return this},next:l,return:E,throw:d,push:D,end:w},!o)return a;let T=a;return a={[Symbol.asyncIterator](){return this},next(){return T.next()},throw(O){return T.throw(O),o&&(o(O),o=null),{done:!0}},return(){return T.return(),o&&(o(),o=null),{done:!0}},push:D,end(O){return T.end(O),o&&(o(O),o=null),a}},a}}),gb=h((r,e)=>{u();var t=Is(),n=async function*(o,i){yield*(await t(o)).sort(i)};e.exports=n}),hf=h((r,e)=>{u(),e.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),o=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(o)!=="[object Symbol]")return!1;var i=42;t[n]=i;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var a=Object.getOwnPropertySymbols(t);if(a.length!==1||a[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,n);if(s.value!==i||s.enumerable!==!0)return!1}return!0}}),$i=h((r,e)=>{u();var t=hf();e.exports=function(){return t()&&!!Symbol.toStringTag}}),Eb=h((r,e)=>{u();var t=typeof Symbol<"u"&&Symbol,n=hf();e.exports=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:n()}}),xb=h((r,e)=>{u();var t="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,o=Object.prototype.toString,i="[object Function]";e.exports=function(a){var s=this;if(typeof s!="function"||o.call(s)!==i)throw new TypeError(t+s);for(var c=n.call(arguments,1),l,f=function(){if(this instanceof l){var d=s.apply(this,c.concat(n.call(arguments)));return Object(d)===d?d:this}else return s.apply(a,c.concat(n.call(arguments)))},g=Math.max(0,s.length-c.length),D=[],w=0;w<g;w++)D.push("$"+w);if(l=Function("binder","return function ("+D.join(",")+"){ return binder.apply(this,arguments); }")(f),s.prototype){var E=function(){};E.prototype=s.prototype,l.prototype=new E,E.prototype=null}return l}}),Ps=h((r,e)=>{u();var t=xb();e.exports=Function.prototype.bind||t}),Sb=h((r,e)=>{u();var t=Ps();e.exports=t.call(Function.call,Object.prototype.hasOwnProperty)}),Ns=h((r,e)=>{u();var t,n=SyntaxError,o=Function,i=TypeError,a=function(_e){try{return o('"use strict"; return ('+_e+").constructor;")()}catch{}},s=Object.getOwnPropertyDescriptor;if(s)try{s({},"")}catch{s=null}var c=function(){throw new i},l=s?function(){try{return arguments.callee,c}catch{try{return s(arguments,"callee").get}catch{return c}}}():c,f=Eb()(),g=Object.getPrototypeOf||function(_e){return _e.__proto__},D={},w=typeof Uint8Array>"u"?t:g(Uint8Array),E={"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":f?g([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":D,"%AsyncGenerator%":D,"%AsyncGeneratorFunction%":D,"%AsyncIteratorPrototype%":D,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":D,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f?g(g([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!f?t:g(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!f?t:g(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f?g(""[Symbol.iterator]()):t,"%Symbol%":f?Symbol:t,"%SyntaxError%":n,"%ThrowTypeError%":l,"%TypedArray%":w,"%TypeError%":i,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet},d=function _e(Re){var Le;if(Re==="%AsyncFunction%")Le=a("async function () {}");else if(Re==="%GeneratorFunction%")Le=a("function* () {}");else if(Re==="%AsyncGeneratorFunction%")Le=a("async function* () {}");else if(Re==="%AsyncGenerator%"){var Qe=_e("%AsyncGeneratorFunction%");Qe&&(Le=Qe.prototype)}else if(Re==="%AsyncIteratorPrototype%"){var ze=_e("%AsyncGenerator%");ze&&(Le=g(ze.prototype))}return E[Re]=Le,Le},T={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},O=Ps(),I=Sb(),j=O.call(Function.call,Array.prototype.concat),q=O.call(Function.apply,Array.prototype.splice),H=O.call(Function.call,String.prototype.replace),L=O.call(Function.call,String.prototype.slice),J=O.call(Function.call,RegExp.prototype.exec),X=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,re=/\\(\\)?/g,he=function(_e){var Re=L(_e,0,1),Le=L(_e,-1);if(Re==="%"&&Le!=="%")throw new n("invalid intrinsic syntax, expected closing `%`");if(Le==="%"&&Re!=="%")throw new n("invalid intrinsic syntax, expected opening `%`");var Qe=[];return H(_e,X,function(ze,lt,nt,it){Qe[Qe.length]=nt?H(it,re,"$1"):lt||ze}),Qe},me=function(_e,Re){var Le=_e,Qe;if(I(T,Le)&&(Qe=T[Le],Le="%"+Qe[0]+"%"),I(E,Le)){var ze=E[Le];if(ze===D&&(ze=d(Le)),typeof ze>"u"&&!Re)throw new i("intrinsic "+_e+" exists, but is not available. Please file an issue!");return{alias:Qe,name:Le,value:ze}}throw new n("intrinsic "+_e+" does not exist!")};e.exports=function(_e,Re){if(typeof _e!="string"||_e.length===0)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Re!="boolean")throw new i('"allowMissing" argument must be a boolean');if(J(/^%?[^%]*%?$/g,_e)===null)throw new n("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Le=he(_e),Qe=Le.length>0?Le[0]:"",ze=me("%"+Qe+"%",Re),lt=ze.name,nt=ze.value,it=!1,ft=ze.alias;ft&&(Qe=ft[0],q(Le,j([0,1],ft)));for(var tt=1,ae=!0;tt<Le.length;tt+=1){var pe=Le[tt],$e=L(pe,0,1),Pe=L(pe,-1);if(($e==='"'||$e==="'"||$e==="`"||Pe==='"'||Pe==="'"||Pe==="`")&&$e!==Pe)throw new n("property names with quotes must have matching quotes");if((pe==="constructor"||!ae)&&(it=!0),Qe+="."+pe,lt="%"+Qe+"%",I(E,lt))nt=E[lt];else if(nt!=null){if(!(pe in nt)){if(!Re)throw new i("base intrinsic for "+_e+" exists, but the property is not available.");return}if(s&&tt+1>=Le.length){var et=s(nt,pe);ae=!!et,ae&&"get"in et&&!("originalValue"in et.get)?nt=et.get:nt=nt[pe]}else ae=I(nt,pe),nt=nt[pe];ae&&!it&&(E[lt]=nt)}}return nt}}),Nb=h((r,e)=>{u();var t=Ps(),n=Ns(),o=n("%Function.prototype.apply%"),i=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||t.call(i,o),s=n("%Object.getOwnPropertyDescriptor%",!0),c=n("%Object.defineProperty%",!0),l=n("%Math.max%");if(c)try{c({},"a",{value:1})}catch{c=null}e.exports=function(g){var D=a(t,i,arguments);if(s&&c){var w=s(D,"length");w.configurable&&c(D,"length",{value:1+l(0,g.length-(arguments.length-1))})}return D};var f=function(){return a(t,o,arguments)};c?c(e.exports,"apply",{value:f}):e.exports.apply=f}),Ms=h((r,e)=>{u();var t=Ns(),n=Nb(),o=n(t("String.prototype.indexOf"));e.exports=function(i,a){var s=t(i,!!a);return typeof s=="function"&&o(i,".prototype.")>-1?n(s):s}}),$b=h((r,e)=>{u();var t=$i()(),n=Ms(),o=n("Object.prototype.toString"),i=function(c){return t&&c&&typeof c=="object"&&Symbol.toStringTag in c?!1:o(c)==="[object Arguments]"},a=function(c){return i(c)?!0:c!==null&&typeof c=="object"&&typeof c.length=="number"&&c.length>=0&&o(c)!=="[object Array]"&&o(c.callee)==="[object Function]"},s=function(){return i(arguments)}();i.isLegacyArguments=a,e.exports=s?i:a}),Wb=h((r,e)=>{u();var t=Object.prototype.toString,n=Function.prototype.toString,o=/^\s*(?:function)?\*/,i=$i()(),a=Object.getPrototypeOf,s=function(){if(!i)return!1;try{return Function("return function*() {}")()}catch{}},c;e.exports=function(l){if(typeof l!="function")return!1;if(o.test(n.call(l)))return!0;if(!i){var f=t.call(l);return f==="[object GeneratorFunction]"}if(!a)return!1;if(typeof c>"u"){var g=s();c=g?a(g):!1}return a(l)===c}}),Jb=h((r,e)=>{u();var t=Function.prototype.toString,n=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,o,i;if(typeof n=="function"&&typeof Object.defineProperty=="function")try{o=Object.defineProperty({},"length",{get:function(){throw i}}),i={},n(function(){throw 42},null,o)}catch(E){E!==i&&(n=null)}else n=null;var a=/^\s*class\b/,s=function(E){try{var d=t.call(E);return a.test(d)}catch{return!1}},c=function(E){try{return s(E)?!1:(t.call(E),!0)}catch{return!1}},l=Object.prototype.toString,f="[object Function]",g="[object GeneratorFunction]",D=typeof Symbol=="function"&&!!Symbol.toStringTag,w=typeof document=="object"&&typeof document.all>"u"&&document.all!==void 0?document.all:{};e.exports=n?function(E){if(E===w)return!0;if(!E||typeof E!="function"&&typeof E!="object")return!1;if(typeof E=="function"&&!E.prototype)return!0;try{n(E,null,o)}catch(d){if(d!==i)return!1}return!s(E)}:function(E){if(E===w)return!0;if(!E||typeof E!="function"&&typeof E!="object")return!1;if(typeof E=="function"&&!E.prototype)return!0;if(D)return c(E);if(s(E))return!1;var d=l.call(E);return d===f||d===g}}),Df=h((r,e)=>{u();var t=Jb(),n=Object.prototype.toString,o=Object.prototype.hasOwnProperty,i=function(l,f,g){for(var D=0,w=l.length;D<w;D++)o.call(l,D)&&(g==null?f(l[D],D,l):f.call(g,l[D],D,l))},a=function(l,f,g){for(var D=0,w=l.length;D<w;D++)g==null?f(l.charAt(D),D,l):f.call(g,l.charAt(D),D,l)},s=function(l,f,g){for(var D in l)o.call(l,D)&&(g==null?f(l[D],D,l):f.call(g,l[D],D,l))},c=function(l,f,g){if(!t(f))throw new TypeError("iterator must be a function");var D;arguments.length>=3&&(D=g),n.call(l)==="[object Array]"?i(l,f,D):typeof l=="string"?a(l,f,D):s(l,f,D)};e.exports=c}),Sf=h((r,e)=>{u();var t=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],n=typeof globalThis>"u"?global$1:globalThis;e.exports=function(){for(var o=[],i=0;i<t.length;i++)typeof n[t[i]]=="function"&&(o[o.length]=t[i]);return o}}),Cf=h((r,e)=>{u();var t=Ns(),n=t("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch{n=null}e.exports=n}),If=h((r,e)=>{u();var t=Df(),n=Sf(),o=Ms(),i=o("Object.prototype.toString"),a=$i()(),s=typeof globalThis>"u"?global$1:globalThis,c=n(),l=o("Array.prototype.indexOf",!0)||function(d,T){for(var O=0;O<d.length;O+=1)if(d[O]===T)return O;return-1},f=o("String.prototype.slice"),g={},D=Cf(),w=Object.getPrototypeOf;a&&D&&w&&t(c,function(d){var T=new s[d];if(Symbol.toStringTag in T){var O=w(T),I=D(O,Symbol.toStringTag);if(!I){var j=w(O);I=D(j,Symbol.toStringTag)}g[d]=I.get}});var E=function(d){var T=!1;return t(g,function(O,I){if(!T)try{T=O.call(d)===I}catch{}}),T};e.exports=function(d){if(!d||typeof d!="object")return!1;if(!a||!(Symbol.toStringTag in d)){var T=f(i(d),8,-1);return l(c,T)>-1}return D?E(d):!1}}),l0=h((r,e)=>{u();var t=Df(),n=Sf(),o=Ms(),i=o("Object.prototype.toString"),a=$i()(),s=typeof globalThis>"u"?global$1:globalThis,c=n(),l=o("String.prototype.slice"),f={},g=Cf(),D=Object.getPrototypeOf;a&&g&&D&&t(c,function(d){if(typeof s[d]=="function"){var T=new s[d];if(Symbol.toStringTag in T){var O=D(T),I=g(O,Symbol.toStringTag);if(!I){var j=D(O);I=g(j,Symbol.toStringTag)}f[d]=I.get}}});var w=function(d){var T=!1;return t(f,function(O,I){if(!T)try{var j=O.call(d);j===I&&(T=j)}catch{}}),T},E=If();e.exports=function(d){return E(d)?!a||!(Symbol.toStringTag in d)?l(i(d),8,-1):w(d):!1}}),A0=h(r=>{u();var e=$b(),t=Wb(),n=l0(),o=If();function i(fe){return fe.call.bind(fe)}var a=typeof BigInt<"u",s=typeof Symbol<"u",c=i(Object.prototype.toString),l=i(Number.prototype.valueOf),f=i(String.prototype.valueOf),g=i(Boolean.prototype.valueOf);a&&(D=i(BigInt.prototype.valueOf));var D;s&&(w=i(Symbol.prototype.valueOf));var w;function E(fe,Ct){if(typeof fe!="object")return!1;try{return Ct(fe),!0}catch{return!1}}r.isArgumentsObject=e,r.isGeneratorFunction=t,r.isTypedArray=o;function d(fe){return typeof Promise<"u"&&fe instanceof Promise||fe!==null&&typeof fe=="object"&&typeof fe.then=="function"&&typeof fe.catch=="function"}r.isPromise=d;function T(fe){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(fe):o(fe)||pe(fe)}r.isArrayBufferView=T;function O(fe){return n(fe)==="Uint8Array"}r.isUint8Array=O;function I(fe){return n(fe)==="Uint8ClampedArray"}r.isUint8ClampedArray=I;function j(fe){return n(fe)==="Uint16Array"}r.isUint16Array=j;function q(fe){return n(fe)==="Uint32Array"}r.isUint32Array=q;function H(fe){return n(fe)==="Int8Array"}r.isInt8Array=H;function L(fe){return n(fe)==="Int16Array"}r.isInt16Array=L;function J(fe){return n(fe)==="Int32Array"}r.isInt32Array=J;function X(fe){return n(fe)==="Float32Array"}r.isFloat32Array=X;function re(fe){return n(fe)==="Float64Array"}r.isFloat64Array=re;function he(fe){return n(fe)==="BigInt64Array"}r.isBigInt64Array=he;function me(fe){return n(fe)==="BigUint64Array"}r.isBigUint64Array=me;function _e(fe){return c(fe)==="[object Map]"}_e.working=typeof Map<"u"&&_e(new Map);function Re(fe){return typeof Map>"u"?!1:_e.working?_e(fe):fe instanceof Map}r.isMap=Re;function Le(fe){return c(fe)==="[object Set]"}Le.working=typeof Set<"u"&&Le(new Set);function Qe(fe){return typeof Set>"u"?!1:Le.working?Le(fe):fe instanceof Set}r.isSet=Qe;function ze(fe){return c(fe)==="[object WeakMap]"}ze.working=typeof WeakMap<"u"&&ze(new WeakMap);function lt(fe){return typeof WeakMap>"u"?!1:ze.working?ze(fe):fe instanceof WeakMap}r.isWeakMap=lt;function nt(fe){return c(fe)==="[object WeakSet]"}nt.working=typeof WeakSet<"u"&&nt(new WeakSet);function it(fe){return nt(fe)}r.isWeakSet=it;function ft(fe){return c(fe)==="[object ArrayBuffer]"}ft.working=typeof ArrayBuffer<"u"&&ft(new ArrayBuffer);function tt(fe){return typeof ArrayBuffer>"u"?!1:ft.working?ft(fe):fe instanceof ArrayBuffer}r.isArrayBuffer=tt;function ae(fe){return c(fe)==="[object DataView]"}ae.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&ae(new DataView(new ArrayBuffer(1),0,1));function pe(fe){return typeof DataView>"u"?!1:ae.working?ae(fe):fe instanceof DataView}r.isDataView=pe;var $e=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Pe(fe){return c(fe)==="[object SharedArrayBuffer]"}function et(fe){return typeof $e>"u"?!1:(typeof Pe.working>"u"&&(Pe.working=Pe(new $e)),Pe.working?Pe(fe):fe instanceof $e)}r.isSharedArrayBuffer=et;function Ze(fe){return c(fe)==="[object AsyncFunction]"}r.isAsyncFunction=Ze;function ie(fe){return c(fe)==="[object Map Iterator]"}r.isMapIterator=ie;function le(fe){return c(fe)==="[object Set Iterator]"}r.isSetIterator=le;function we(fe){return c(fe)==="[object Generator]"}r.isGeneratorObject=we;function je(fe){return c(fe)==="[object WebAssembly.Module]"}r.isWebAssemblyCompiledModule=je;function Ue(fe){return E(fe,l)}r.isNumberObject=Ue;function Y(fe){return E(fe,f)}r.isStringObject=Y;function Z(fe){return E(fe,g)}r.isBooleanObject=Z;function Ee(fe){return a&&E(fe,D)}r.isBigIntObject=Ee;function Ie(fe){return s&&E(fe,w)}r.isSymbolObject=Ie;function ot(fe){return Ue(fe)||Y(fe)||Z(fe)||Ee(fe)||Ie(fe)}r.isBoxedPrimitive=ot;function Ke(fe){return typeof Uint8Array<"u"&&(tt(fe)||et(fe))}r.isAnyArrayBuffer=Ke,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(fe){Object.defineProperty(r,fe,{enumerable:!1,value:function(){throw new Error(fe+" is not supported in userland")}})})}),C0=h((r,e)=>{u(),e.exports=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}}),Te=h((r,e)=>{u(),typeof Object.create=="function"?e.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,n){if(n){t.super_=n;var o=function(){};o.prototype=n.prototype,t.prototype=new o,t.prototype.constructor=t}}}),P0=h(r=>{u();var e=Object.getOwnPropertyDescriptors||function(ae){for(var pe=Object.keys(ae),$e={},Pe=0;Pe<pe.length;Pe++)$e[pe[Pe]]=Object.getOwnPropertyDescriptor(ae,pe[Pe]);return $e},t=/%[sdj%]/g;r.format=function(ae){if(!H(ae)){for(var pe=[],$e=0;$e<arguments.length;$e++)pe.push(a(arguments[$e]));return pe.join(" ")}for(var $e=1,Pe=arguments,et=Pe.length,Ze=String(ae).replace(t,function(we){if(we==="%%")return"%";if($e>=et)return we;switch(we){case"%s":return String(Pe[$e++]);case"%d":return Number(Pe[$e++]);case"%j":try{return JSON.stringify(Pe[$e++])}catch{return"[Circular]"}default:return we}}),ie=Pe[$e];$e<et;ie=Pe[++$e])I(ie)||!re(ie)?Ze+=" "+ie:Ze+=" "+a(ie);return Ze},r.deprecate=function(ae,pe){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return ae;if(typeof process$1>"u")return function(){return r.deprecate(ae,pe).apply(this,arguments)};var $e=!1;function Pe(){if(!$e){if(process$1.throwDeprecation)throw new Error(pe);process$1.traceDeprecation?console.trace(pe):console.error(pe),$e=!0}return ae.apply(this,arguments)}return Pe};var n={},o=/^$/;process$1.env.NODE_DEBUG&&(i=process$1.env.NODE_DEBUG,i=i.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+i+"$","i"));var i;r.debuglog=function(ae){if(ae=ae.toUpperCase(),!n[ae])if(o.test(ae)){var pe=process$1.pid;n[ae]=function(){var $e=r.format.apply(r,arguments);console.error("%s %d: %s",ae,pe,$e)}}else n[ae]=function(){};return n[ae]};function a(ae,pe){var $e={seen:[],stylize:c};return arguments.length>=3&&($e.depth=arguments[2]),arguments.length>=4&&($e.colors=arguments[3]),O(pe)?$e.showHidden=pe:pe&&r._extend($e,pe),J($e.showHidden)&&($e.showHidden=!1),J($e.depth)&&($e.depth=2),J($e.colors)&&($e.colors=!1),J($e.customInspect)&&($e.customInspect=!0),$e.colors&&($e.stylize=s),f($e,ae,$e.depth)}r.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function s(ae,pe){var $e=a.styles[pe];return $e?"\x1B["+a.colors[$e][0]+"m"+ae+"\x1B["+a.colors[$e][1]+"m":ae}function c(ae,pe){return ae}function l(ae){var pe={};return ae.forEach(function($e,Pe){pe[$e]=!0}),pe}function f(ae,pe,$e){if(ae.customInspect&&pe&&_e(pe.inspect)&&pe.inspect!==r.inspect&&!(pe.constructor&&pe.constructor.prototype===pe)){var Pe=pe.inspect($e,ae);return H(Pe)||(Pe=f(ae,Pe,$e)),Pe}var et=g(ae,pe);if(et)return et;var Ze=Object.keys(pe),ie=l(Ze);if(ae.showHidden&&(Ze=Object.getOwnPropertyNames(pe)),me(pe)&&(Ze.indexOf("message")>=0||Ze.indexOf("description")>=0))return D(pe);if(Ze.length===0){if(_e(pe)){var le=pe.name?": "+pe.name:"";return ae.stylize("[Function"+le+"]","special")}if(X(pe))return ae.stylize(RegExp.prototype.toString.call(pe),"regexp");if(he(pe))return ae.stylize(Date.prototype.toString.call(pe),"date");if(me(pe))return D(pe)}var we="",je=!1,Ue=["{","}"];if(T(pe)&&(je=!0,Ue=["[","]"]),_e(pe)){var Y=pe.name?": "+pe.name:"";we=" [Function"+Y+"]"}if(X(pe)&&(we=" "+RegExp.prototype.toString.call(pe)),he(pe)&&(we=" "+Date.prototype.toUTCString.call(pe)),me(pe)&&(we=" "+D(pe)),Ze.length===0&&(!je||pe.length==0))return Ue[0]+we+Ue[1];if($e<0)return X(pe)?ae.stylize(RegExp.prototype.toString.call(pe),"regexp"):ae.stylize("[Object]","special");ae.seen.push(pe);var Z;return je?Z=w(ae,pe,$e,ie,Ze):Z=Ze.map(function(Ee){return E(ae,pe,$e,ie,Ee,je)}),ae.seen.pop(),d(Z,we,Ue)}function g(ae,pe){if(J(pe))return ae.stylize("undefined","undefined");if(H(pe)){var $e="'"+JSON.stringify(pe).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ae.stylize($e,"string")}if(q(pe))return ae.stylize(""+pe,"number");if(O(pe))return ae.stylize(""+pe,"boolean");if(I(pe))return ae.stylize("null","null")}function D(ae){return"["+Error.prototype.toString.call(ae)+"]"}function w(ae,pe,$e,Pe,et){for(var Ze=[],ie=0,le=pe.length;ie<le;++ie)nt(pe,String(ie))?Ze.push(E(ae,pe,$e,Pe,String(ie),!0)):Ze.push("");return et.forEach(function(we){we.match(/^\d+$/)||Ze.push(E(ae,pe,$e,Pe,we,!0))}),Ze}function E(ae,pe,$e,Pe,et,Ze){var ie,le,we;if(we=Object.getOwnPropertyDescriptor(pe,et)||{value:pe[et]},we.get?we.set?le=ae.stylize("[Getter/Setter]","special"):le=ae.stylize("[Getter]","special"):we.set&&(le=ae.stylize("[Setter]","special")),nt(Pe,et)||(ie="["+et+"]"),le||(ae.seen.indexOf(we.value)<0?(I($e)?le=f(ae,we.value,null):le=f(ae,we.value,$e-1),le.indexOf(`
`)>-1&&(Ze?le=le.split(`
`).map(function(je){return"  "+je}).join(`
`).substr(2):le=`
`+le.split(`
`).map(function(je){return"   "+je}).join(`
`))):le=ae.stylize("[Circular]","special")),J(ie)){if(Ze&&et.match(/^\d+$/))return le;ie=JSON.stringify(""+et),ie.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ie=ie.substr(1,ie.length-2),ie=ae.stylize(ie,"name")):(ie=ie.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ie=ae.stylize(ie,"string"))}return ie+": "+le}function d(ae,pe,$e){var Pe=0,et=ae.reduce(function(Ze,ie){return Pe++,ie.indexOf(`
`)>=0&&Pe++,Ze+ie.replace(/\u001b\[\d\d?m/g,"").length+1},0);return et>60?$e[0]+(pe===""?"":pe+`
 `)+" "+ae.join(`,
  `)+" "+$e[1]:$e[0]+pe+" "+ae.join(", ")+" "+$e[1]}r.types=A0();function T(ae){return Array.isArray(ae)}r.isArray=T;function O(ae){return typeof ae=="boolean"}r.isBoolean=O;function I(ae){return ae===null}r.isNull=I;function j(ae){return ae==null}r.isNullOrUndefined=j;function q(ae){return typeof ae=="number"}r.isNumber=q;function H(ae){return typeof ae=="string"}r.isString=H;function L(ae){return typeof ae=="symbol"}r.isSymbol=L;function J(ae){return ae===void 0}r.isUndefined=J;function X(ae){return re(ae)&&Le(ae)==="[object RegExp]"}r.isRegExp=X,r.types.isRegExp=X;function re(ae){return typeof ae=="object"&&ae!==null}r.isObject=re;function he(ae){return re(ae)&&Le(ae)==="[object Date]"}r.isDate=he,r.types.isDate=he;function me(ae){return re(ae)&&(Le(ae)==="[object Error]"||ae instanceof Error)}r.isError=me,r.types.isNativeError=me;function _e(ae){return typeof ae=="function"}r.isFunction=_e;function Re(ae){return ae===null||typeof ae=="boolean"||typeof ae=="number"||typeof ae=="string"||typeof ae=="symbol"||typeof ae>"u"}r.isPrimitive=Re,r.isBuffer=C0();function Le(ae){return Object.prototype.toString.call(ae)}function Qe(ae){return ae<10?"0"+ae.toString(10):ae.toString(10)}var ze=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function lt(){var ae=new Date,pe=[Qe(ae.getHours()),Qe(ae.getMinutes()),Qe(ae.getSeconds())].join(":");return[ae.getDate(),ze[ae.getMonth()],pe].join(" ")}r.log=function(){console.log("%s - %s",lt(),r.format.apply(r,arguments))},r.inherits=Te(),r._extend=function(ae,pe){if(!pe||!re(pe))return ae;for(var $e=Object.keys(pe),Pe=$e.length;Pe--;)ae[$e[Pe]]=pe[$e[Pe]];return ae};function nt(ae,pe){return Object.prototype.hasOwnProperty.call(ae,pe)}var it=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;r.promisify=function(ae){if(typeof ae!="function")throw new TypeError('The "original" argument must be of type Function');if(it&&ae[it]){var pe=ae[it];if(typeof pe!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(pe,it,{value:pe,enumerable:!1,writable:!1,configurable:!0}),pe}function pe(){for(var $e,Pe,et=new Promise(function(le,we){$e=le,Pe=we}),Ze=[],ie=0;ie<arguments.length;ie++)Ze.push(arguments[ie]);Ze.push(function(le,we){le?Pe(le):$e(we)});try{ae.apply(this,Ze)}catch(le){Pe(le)}return et}return Object.setPrototypeOf(pe,Object.getPrototypeOf(ae)),it&&Object.defineProperty(pe,it,{value:pe,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(pe,e(ae))},r.promisify.custom=it;function ft(ae,pe){if(!ae){var $e=new Error("Promise was rejected with a falsy value");$e.reason=ae,ae=$e}return pe(ae)}function tt(ae){if(typeof ae!="function")throw new TypeError('The "original" argument must be of type Function');function pe(){for(var $e=[],Pe=0;Pe<arguments.length;Pe++)$e.push(arguments[Pe]);var et=$e.pop();if(typeof et!="function")throw new TypeError("The last argument must be of type Function");var Ze=this,ie=function(){return et.apply(Ze,arguments)};ae.apply(this,$e).then(function(le){process$1.nextTick(ie.bind(null,null,le))},function(le){process$1.nextTick(ft.bind(null,le,ie))})}return Object.setPrototypeOf(pe,Object.getPrototypeOf(ae)),Object.defineProperties(pe,e(ae)),pe}r.callbackify=tt}),Uf=h((r,e)=>{u(),e.exports=function(...n){let o=n.reduce((i,a)=>Object.assign(i,a),{});return Object.assign(o,{bufferKeys:o.bufferKeys||!1,snapshots:o.snapshots||!1,permanence:o.permanence||!1,seek:o.seek||!1,clear:o.clear||!1,getMany:o.getMany||!1,keyIterator:o.keyIterator||!1,valueIterator:o.valueIterator||!1,iteratorNextv:o.iteratorNextv||!1,iteratorAll:o.iteratorAll||!1,status:o.status||!1,idempotentOpen:o.idempotentOpen||!1,passiveOpen:o.passiveOpen||!1,serialize:o.serialize||!1,createIfMissing:o.createIfMissing||!1,errorIfExists:o.errorIfExists||!1,deferredOpen:o.deferredOpen||!1,openCallback:o.openCallback||!1,promises:o.promises||!1,streams:o.streams||!1,encodings:t(o.encodings),events:t(o.events),additionalMethods:Object.assign({},o.additionalMethods)})};function t(n){return n?Object.assign({},n):!1}}),L0=h((r,e)=>{u(),e.exports=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}}),j0=h((r,e)=>{u(),e.exports=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t)}),ta=h(r=>{u();var e=j0();r.fromCallback=function(t,n){if(t===void 0){var o=new Promise(function(i,a){t=function(s,c){s?a(s):i(c)}});t[n!==void 0?n:"promise"]=o}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t},r.fromPromise=function(t,n){if(n===void 0)return t;t.then(function(o){e(()=>n(null,o))}).catch(function(o){e(()=>n(o))})}}),ra=h((r,e)=>{u();var t;e.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global$1):n=>(t||(t=Promise.resolve())).then(n).catch(o=>setTimeout(()=>{throw o},0))}),na=h((r,e)=>{u();var t=ra();e.exports=function(n,...o){o.length===0?t(n):t(()=>n(...o))}}),Kf=h((r,e)=>{u();function t(n){if(typeof n!="object"||n===null)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=n,this._ended=!1,this._nexting=!1}t.prototype.next=function(n){let o=this;if(n===void 0)o=new Promise(function(i,a){n=function(s,c,l){s?a(s):c===void 0&&l===void 0?i():i([c,l])}});else if(typeof n!="function")throw new Error("next() requires a callback argument");return this._ended?(this._nextTick(n,new Error("cannot call next() after end()")),o):this._nexting?(this._nextTick(n,new Error("cannot call next() before previous next() has completed")),o):(this._nexting=!0,this._next((i,...a)=>{this._nexting=!1,n(i,...a)}),o)},t.prototype._next=function(n){this._nextTick(n)},t.prototype.seek=function(n){if(this._ended)throw new Error("cannot call seek() after end()");if(this._nexting)throw new Error("cannot call seek() before next() has completed");n=this.db._serializeKey(n),this._seek(n)},t.prototype._seek=function(n){},t.prototype.end=function(n){let o;if(n===void 0)o=new Promise(function(i,a){n=function(s){s?a(s):i()}});else if(typeof n!="function")throw new Error("end() requires a callback argument");return this._ended?(this._nextTick(n,new Error("end() already called on iterator")),o):(this._ended=!0,this._end(n),o)},t.prototype._end=function(n){this._nextTick(n)},t.prototype[Symbol.asyncIterator]=async function*(){try{let n;for(;(n=await this.next())!==void 0;)yield n}finally{this._ended||await this.end()}},t.prototype._nextTick=na(),e.exports=t}),zf=h((r,e)=>{u();var t=Object.freeze({});function n(o){if(typeof o!="object"||o===null)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=o,this._operations=[],this._written=!1}n.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},n.prototype.put=function(o,i,a){this._checkWritten();let s=this.db._checkKey(o)||this.db._checkValue(i);if(s)throw s;return o=this.db._serializeKey(o),i=this.db._serializeValue(i),this._put(o,i,a!=null?a:t),this},n.prototype._put=function(o,i,a){this._operations.push({...a,type:"put",key:o,value:i})},n.prototype.del=function(o,i){this._checkWritten();let a=this.db._checkKey(o);if(a)throw a;return o=this.db._serializeKey(o),this._del(o,i!=null?i:t),this},n.prototype._del=function(o,i){this._operations.push({...i,type:"del",key:o})},n.prototype.clear=function(){return this._checkWritten(),this._clear(),this},n.prototype._clear=function(){this._operations=[]},n.prototype.write=function(o,i){if(this._checkWritten(),typeof o=="function"&&(i=o),typeof i!="function")throw new Error("write() requires a callback argument");(typeof o!="object"||o===null)&&(o={}),this._written=!0,this._write(o,i)},n.prototype._write=function(o,i){this.db._batch(this._operations,o,i)},n.prototype._nextTick=na(),e.exports=n}),Vf=h(r=>{u(),r.getCallback=function(e,t){return typeof e=="function"?e:t},r.getOptions=function(e){return typeof e=="object"&&e!==null?e:{}}}),Y0=h((r,e)=>{u();var t=Uf(),n=L0(),o=ta(),i=Kf(),a=zf(),s=Vf().getCallback,c=Vf().getOptions,l=Object.prototype.hasOwnProperty,f=["lt","lte","gt","gte"];function g(d){this.status="new",this.supports=t(d,{status:!0})}g.prototype.open=function(d,T){let O=this.status;if(typeof d=="function"&&(T=d),typeof T!="function")throw new Error("open() requires a callback argument");(typeof d!="object"||d===null)&&(d={}),d.createIfMissing=d.createIfMissing!==!1,d.errorIfExists=!!d.errorIfExists,this.status="opening",this._open(d,I=>{if(I)return this.status=O,T(I);this.status="open",T()})},g.prototype._open=function(d,T){this._nextTick(T)},g.prototype.close=function(d){let T=this.status;if(typeof d!="function")throw new Error("close() requires a callback argument");this.status="closing",this._close(O=>{if(O)return this.status=T,d(O);this.status="closed",d()})},g.prototype._close=function(d){this._nextTick(d)},g.prototype.get=function(d,T,O){if(typeof T=="function"&&(O=T),typeof O!="function")throw new Error("get() requires a callback argument");let I=this._checkKey(d);if(I)return this._nextTick(O,I);d=this._serializeKey(d),(typeof T!="object"||T===null)&&(T={}),T.asBuffer=T.asBuffer!==!1,this._get(d,T,O)},g.prototype._get=function(d,T,O){this._nextTick(function(){O(new Error("NotFound"))})},g.prototype.getMany=function(d,T,O){if(O=s(T,O),O=o.fromCallback(O),T=c(T),E(this,O))return O.promise;if(!Array.isArray(d))return this._nextTick(O,new Error("getMany() requires an array argument")),O.promise;if(d.length===0)return this._nextTick(O,null,[]),O.promise;typeof T.asBuffer!="boolean"&&(T={...T,asBuffer:!0});let I=new Array(d.length);for(let j=0;j<d.length;j++){let q=d[j],H=this._checkKey(q);if(H)return this._nextTick(O,H),O.promise;I[j]=this._serializeKey(q)}return this._getMany(I,T,O),O.promise},g.prototype._getMany=function(d,T,O){this._nextTick(O,null,new Array(d.length).fill(void 0))},g.prototype.put=function(d,T,O,I){if(typeof O=="function"&&(I=O),typeof I!="function")throw new Error("put() requires a callback argument");let j=this._checkKey(d)||this._checkValue(T);if(j)return this._nextTick(I,j);d=this._serializeKey(d),T=this._serializeValue(T),(typeof O!="object"||O===null)&&(O={}),this._put(d,T,O,I)},g.prototype._put=function(d,T,O,I){this._nextTick(I)},g.prototype.del=function(d,T,O){if(typeof T=="function"&&(O=T),typeof O!="function")throw new Error("del() requires a callback argument");let I=this._checkKey(d);if(I)return this._nextTick(O,I);d=this._serializeKey(d),(typeof T!="object"||T===null)&&(T={}),this._del(d,T,O)},g.prototype._del=function(d,T,O){this._nextTick(O)},g.prototype.batch=function(d,T,O){if(!arguments.length)return this._chainedBatch();if(typeof T=="function"&&(O=T),typeof d=="function"&&(O=d),typeof O!="function")throw new Error("batch(array) requires a callback argument");if(!Array.isArray(d))return this._nextTick(O,new Error("batch(array) requires an array argument"));if(d.length===0)return this._nextTick(O);(typeof T!="object"||T===null)&&(T={});let I=new Array(d.length);for(let j=0;j<d.length;j++){if(typeof d[j]!="object"||d[j]===null)return this._nextTick(O,new Error("batch(array) element must be an object and not `null`"));let q=Object.assign({},d[j]);if(q.type!=="put"&&q.type!=="del")return this._nextTick(O,new Error("`type` must be 'put' or 'del'"));let H=this._checkKey(q.key);if(H)return this._nextTick(O,H);if(q.key=this._serializeKey(q.key),q.type==="put"){let L=this._checkValue(q.value);if(L)return this._nextTick(O,L);q.value=this._serializeValue(q.value)}I[j]=q}this._batch(I,T,O)},g.prototype._batch=function(d,T,O){this._nextTick(O)},g.prototype.clear=function(d,T){if(typeof d=="function")T=d;else if(typeof T!="function")throw new Error("clear() requires a callback argument");d=D(this,d),d.reverse=!!d.reverse,d.limit="limit"in d?d.limit:-1,this._clear(d,T)},g.prototype._clear=function(d,T){d.keys=!0,d.values=!1,d.keyAsBuffer=!0,d.valueAsBuffer=!0;let O=this._iterator(d),I={},j=q=>{if(q)return O.end(function(){T(q)});O.next((H,L)=>{if(H)return j(H);if(L===void 0)return O.end(T);this._del(L,I,j)})};j()},g.prototype._setupIteratorOptions=function(d){return d=D(this,d),d.reverse=!!d.reverse,d.keys=d.keys!==!1,d.values=d.values!==!1,d.limit="limit"in d?d.limit:-1,d.keyAsBuffer=d.keyAsBuffer!==!1,d.valueAsBuffer=d.valueAsBuffer!==!1,d};function D(d,T){let O={};for(let I in T){if(!l.call(T,I))continue;if(I==="start"||I==="end")throw new Error('Legacy range options ("start" and "end") have been removed');let j=T[I];w(I)&&(j=d._serializeKey(j)),O[I]=j}return O}function w(d){return f.indexOf(d)!==-1}g.prototype.iterator=function(d){return(typeof d!="object"||d===null)&&(d={}),d=this._setupIteratorOptions(d),this._iterator(d)},g.prototype._iterator=function(d){return new i(this)},g.prototype._chainedBatch=function(){return new a(this)},g.prototype._serializeKey=function(d){return d},g.prototype._serializeValue=function(d){return d},g.prototype._checkKey=function(d){if(d==null)return new Error("key cannot be `null` or `undefined`");if(n(d)&&d.length===0)return new Error("key cannot be an empty Buffer");if(d==="")return new Error("key cannot be an empty String");if(Array.isArray(d)&&d.length===0)return new Error("key cannot be an empty Array")},g.prototype._checkValue=function(d){if(d==null)return new Error("value cannot be `null` or `undefined`")},g.prototype.isOperational=function(){return this.status==="open"||this._isOperational()},g.prototype._isOperational=function(){return!1},g.prototype._nextTick=na(),e.exports=g;function E(d,T){return d.isOperational()?!1:(d._nextTick(T,new Error("Database is not open")),!0)}}),Nt=h(r=>{u(),r.AbstractLevelDOWN=Y0(),r.AbstractIterator=Kf(),r.AbstractChainedBatch=zf()}),Gf=h(r=>{u(),r.getCallback=function(e,t,n){let o=e[e.length-1];if(typeof o!="function"){let i=new Promise((a,s)=>{e.push(o=function(c,...l){c?s(c):a(n?n(...l):l[0])})});o[t]=i}return o}}),rv=h((r,e)=>{u();var{AbstractIterator:t}=Nt(),n=Te(),o=Gf().getCallback,i=Symbol("options"),a=Symbol("iterator"),s=Symbol("operations"),c=Symbol("promise");function l(f,g){t.call(this,f),this[i]=g,this[a]=null,this[s]=[]}n(l,t),l.prototype.setDb=function(f){this[a]=f.iterator(this[i]);for(let g of this[s].splice(0,this[s].length))this[a][g.method](...g.args)},l.prototype.next=function(...f){if(this.db.status==="open")return this[a].next(...f);let g=o(f,c,function(D,w){if(!(D===void 0&&w===void 0))return[D,w]});return this.db.status==="opening"?this[s].push({method:"next",args:f}):this._nextTick(g,new Error("Database is not open")),g[c]||this},l.prototype.seek=function(...f){if(this.db.status==="open")this[a].seek(...f);else if(this.db.status==="opening")this[s].push({method:"seek",args:f});else throw new Error("Database is not open")},l.prototype.end=function(...f){if(this.db.status==="open")return this[a].end(...f);let g=o(f,c);return this.db.status==="opening"?this[s].push({method:"end",args:f}):this._nextTick(g,new Error("Database is not open")),g[c]||this};for(let f of["next","seek","end"])l.prototype["_"+f]=function(){throw new Error("Did not expect private method to be called: "+f)};e.exports=l}),iv=h((r,e)=>{u();var{AbstractChainedBatch:t}=Nt(),n=Symbol("operations");e.exports=class extends t{constructor(o){super(o),this[n]=[]}_put(o,i,a){this[n].push({...a,type:"put",key:o,value:i})}_del(o,i){this[n].push({...i,type:"del",key:o})}_clear(){this[n]=[]}_write(o,i){this.db.batch(this[n],o,i)}}}),cv=h((r,e)=>{u();var{AbstractLevelDOWN:t}=Nt(),n=Te(),o=rv(),i=iv(),a=Gf().getCallback,s=["put","get","getMany","del","batch","clear"],c=["approximateSize","compactRange"],l=Symbol("innerDb"),f=Symbol("operations"),g=Symbol("promise");function D(E){t.call(this,E.supports||{});for(let d of c)typeof E[d]=="function"&&!this.supports.additionalMethods[d]&&(this.supports.additionalMethods[d]=!0);this[l]=E,this[f]=[],w(this)}n(D,t),D.prototype.type="deferred-leveldown",Object.defineProperty(D.prototype,"_db",{enumerable:!0,get(){return this[l]}}),D.prototype._open=function(E,d){let T=O=>{if(O||this[l].status!=="open")return d(O||new Error("Database is not open"));let I=this[f];this[f]=[];for(let j of I)j.iterator?j.iterator.setDb(this[l]):this[l][j.method](...j.args);if(this[f].length>0)throw new Error("Did not expect further operations");d()};this[l].status==="new"||this[l].status==="closed"?this[l].open(E,T):this._nextTick(T)},D.prototype._close=function(E){this[l].close(E)},D.prototype._isOperational=function(){return this.status==="opening"};function w(E){let d=Object.keys(E.supports.additionalMethods);for(let T of s.concat(d))E[T]=function(...O){if(T==="batch"&&O.length===0)return new i(this);if(this.status==="open")return this[l][T](...O);let I=a(O,g);return this.status==="opening"?this[f].push({method:T,args:O}):this._nextTick(I,new Error("Database is not open")),I[g]};E.iterator=function(T){if(this.status==="open")return this[l].iterator(T);if(this.status==="opening"){let O=new o(this,T);return this[f].push({iterator:O}),O}else throw new Error("Database is not open")};for(let T of s.concat(["iterator"]))E["_"+T]=function(){throw new Error("Did not expect private method to be called: "+T)}}e.exports=D,e.exports.DeferredIterator=o}),Jf=h((r,e)=>{u(),e.exports=Rn().EventEmitter}),Yf=h(()=>{u()}),hv=h((r,e)=>{u();function t(E,d){var T=Object.keys(E);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(E);d&&(O=O.filter(function(I){return Object.getOwnPropertyDescriptor(E,I).enumerable})),T.push.apply(T,O)}return T}function n(E){for(var d=1;d<arguments.length;d++){var T=arguments[d]!=null?arguments[d]:{};d%2?t(Object(T),!0).forEach(function(O){o(E,O,T[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(E,Object.getOwnPropertyDescriptors(T)):t(Object(T)).forEach(function(O){Object.defineProperty(E,O,Object.getOwnPropertyDescriptor(T,O))})}return E}function o(E,d,T){return d in E?Object.defineProperty(E,d,{value:T,enumerable:!0,configurable:!0,writable:!0}):E[d]=T,E}function i(E,d){if(!(E instanceof d))throw new TypeError("Cannot call a class as a function")}function a(E,d){for(var T=0;T<d.length;T++){var O=d[T];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(E,O.key,O)}}function s(E,d,T){return d&&a(E.prototype,d),T&&a(E,T),E}var c=ct(),l=c.Buffer,f=Yf(),g=f.inspect,D=g&&g.custom||"inspect";function w(E,d,T){l.prototype.copy.call(E,d,T)}e.exports=function(){function E(){i(this,E),this.head=null,this.tail=null,this.length=0}return s(E,[{key:"push",value:function(d){var T={data:d,next:null};this.length>0?this.tail.next=T:this.head=T,this.tail=T,++this.length}},{key:"unshift",value:function(d){var T={data:d,next:this.head};this.length===0&&(this.tail=T),this.head=T,++this.length}},{key:"shift",value:function(){if(this.length!==0){var d=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,d}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(d){if(this.length===0)return"";for(var T=this.head,O=""+T.data;T=T.next;)O+=d+T.data;return O}},{key:"concat",value:function(d){if(this.length===0)return l.alloc(0);for(var T=l.allocUnsafe(d>>>0),O=this.head,I=0;O;)w(O.data,T,I),I+=O.data.length,O=O.next;return T}},{key:"consume",value:function(d,T){var O;return d<this.head.data.length?(O=this.head.data.slice(0,d),this.head.data=this.head.data.slice(d)):d===this.head.data.length?O=this.shift():O=T?this._getString(d):this._getBuffer(d),O}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(d){var T=this.head,O=1,I=T.data;for(d-=I.length;T=T.next;){var j=T.data,q=d>j.length?j.length:d;if(q===j.length?I+=j:I+=j.slice(0,d),d-=q,d===0){q===j.length?(++O,T.next?this.head=T.next:this.head=this.tail=null):(this.head=T,T.data=j.slice(q));break}++O}return this.length-=O,I}},{key:"_getBuffer",value:function(d){var T=l.allocUnsafe(d),O=this.head,I=1;for(O.data.copy(T),d-=O.data.length;O=O.next;){var j=O.data,q=d>j.length?j.length:d;if(j.copy(T,T.length-d,0,q),d-=q,d===0){q===j.length?(++I,O.next?this.head=O.next:this.head=this.tail=null):(this.head=O,O.data=j.slice(q));break}++I}return this.length-=I,T}},{key:D,value:function(d,T){return g(this,n({},T,{depth:0,customInspect:!1}))}}]),E}()}),Xf=h((r,e)=>{u();function t(c,l){var f=this,g=this._readableState&&this._readableState.destroyed,D=this._writableState&&this._writableState.destroyed;return g||D?(l?l(c):c&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(a,this,c)):process$1.nextTick(a,this,c)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(c||null,function(w){!l&&w?f._writableState?f._writableState.errorEmitted?process$1.nextTick(o,f):(f._writableState.errorEmitted=!0,process$1.nextTick(n,f,w)):process$1.nextTick(n,f,w):l?(process$1.nextTick(o,f),l(w)):process$1.nextTick(o,f)}),this)}function n(c,l){a(c,l),o(c)}function o(c){c._writableState&&!c._writableState.emitClose||c._readableState&&!c._readableState.emitClose||c.emit("close")}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(c,l){c.emit("error",l)}function s(c,l){var f=c._readableState,g=c._writableState;f&&f.autoDestroy||g&&g.autoDestroy?c.destroy(l):c.emit("error",l)}e.exports={destroy:t,undestroy:i,errorOrDestroy:s}}),Mr=h((r,e)=>{u();function t(l,f){l.prototype=Object.create(f.prototype),l.prototype.constructor=l,l.__proto__=f}var n={};function o(l,f,g){g||(g=Error);function D(E,d,T){return typeof f=="string"?f:f(E,d,T)}var w=function(E){t(d,E);function d(T,O,I){return E.call(this,D(T,O,I))||this}return d}(g);w.prototype.name=g.name,w.prototype.code=l,n[l]=w}function i(l,f){if(Array.isArray(l)){var g=l.length;return l=l.map(function(D){return String(D)}),g>2?"one of ".concat(f," ").concat(l.slice(0,g-1).join(", "),", or ")+l[g-1]:g===2?"one of ".concat(f," ").concat(l[0]," or ").concat(l[1]):"of ".concat(f," ").concat(l[0])}else return"of ".concat(f," ").concat(String(l))}function a(l,f,g){return l.substr(!g||g<0?0:+g,f.length)===f}function s(l,f,g){return(g===void 0||g>l.length)&&(g=l.length),l.substring(g-f.length,g)===f}function c(l,f,g){return typeof g!="number"&&(g=0),g+f.length>l.length?!1:l.indexOf(f,g)!==-1}o("ERR_INVALID_OPT_VALUE",function(l,f){return'The value "'+f+'" is invalid for option "'+l+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(l,f,g){var D;typeof f=="string"&&a(f,"not ")?(D="must not be",f=f.replace(/^not /,"")):D="must be";var w;if(s(l," argument"))w="The ".concat(l," ").concat(D," ").concat(i(f,"type"));else{var E=c(l,".")?"property":"argument";w='The "'.concat(l,'" ').concat(E," ").concat(D," ").concat(i(f,"type"))}return w+=". Received type ".concat(typeof g),w},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(l){return"The "+l+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(l){return"Cannot call "+l+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(l){return"Unknown encoding: "+l},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=n}),el=h((r,e)=>{u();var t=Mr().codes.ERR_INVALID_OPT_VALUE;function n(i,a,s){return i.highWaterMark!=null?i.highWaterMark:a?i[s]:null}function o(i,a,s,c){var l=n(a,c,s);if(l!=null){if(!(isFinite(l)&&Math.floor(l)===l)||l<0){var f=c?s:"highWaterMark";throw new t(f,l)}return Math.floor(l)}return i.objectMode?16:16*1024}e.exports={getHighWaterMark:o}}),_v=h((r,e)=>{u(),e.exports=t;function t(o,i){if(n("noDeprecation"))return o;var a=!1;function s(){if(!a){if(n("throwDeprecation"))throw new Error(i);n("traceDeprecation")?console.trace(i):console.warn(i),a=!0}return o.apply(this,arguments)}return s}function n(o){try{if(!global$1.localStorage)return!1}catch{return!1}var i=global$1.localStorage[o];return i==null?!1:String(i).toLowerCase()==="true"}}),il=h((r,e)=>{u(),e.exports=he;function t(ie){var le=this;this.next=null,this.entry=null,this.finish=function(){Ze(le,ie)}}var n;he.WritableState=X;var o={deprecate:_v()},i=Jf(),a=ct().Buffer,s=global$1.Uint8Array||function(){};function c(ie){return a.from(ie)}function l(ie){return a.isBuffer(ie)||ie instanceof s}var f=Xf(),g=el(),D=g.getHighWaterMark,w=Mr().codes,E=w.ERR_INVALID_ARG_TYPE,d=w.ERR_METHOD_NOT_IMPLEMENTED,T=w.ERR_MULTIPLE_CALLBACK,O=w.ERR_STREAM_CANNOT_PIPE,I=w.ERR_STREAM_DESTROYED,j=w.ERR_STREAM_NULL_VALUES,q=w.ERR_STREAM_WRITE_AFTER_END,H=w.ERR_UNKNOWN_ENCODING,L=f.errorOrDestroy;Te()(he,i);function J(){}function X(ie,le,we){n=n||jr(),ie=ie||{},typeof we!="boolean"&&(we=le instanceof n),this.objectMode=!!ie.objectMode,we&&(this.objectMode=this.objectMode||!!ie.writableObjectMode),this.highWaterMark=D(this,ie,"writableHighWaterMark",we),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var je=ie.decodeStrings===!1;this.decodeStrings=!je,this.defaultEncoding=ie.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ue){nt(le,Ue)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=ie.emitClose!==!1,this.autoDestroy=!!ie.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}X.prototype.getBuffer=function(){for(var ie=this.bufferedRequest,le=[];ie;)le.push(ie),ie=ie.next;return le},function(){try{Object.defineProperty(X.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var re;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(re=Function.prototype[Symbol.hasInstance],Object.defineProperty(he,Symbol.hasInstance,{value:function(ie){return re.call(this,ie)?!0:this!==he?!1:ie&&ie._writableState instanceof X}})):re=function(ie){return ie instanceof this};function he(ie){n=n||jr();var le=this instanceof n;if(!le&&!re.call(he,this))return new he(ie);this._writableState=new X(ie,this,le),this.writable=!0,ie&&(typeof ie.write=="function"&&(this._write=ie.write),typeof ie.writev=="function"&&(this._writev=ie.writev),typeof ie.destroy=="function"&&(this._destroy=ie.destroy),typeof ie.final=="function"&&(this._final=ie.final)),i.call(this)}he.prototype.pipe=function(){L(this,new O)};function me(ie,le){var we=new q;L(ie,we),process$1.nextTick(le,we)}function _e(ie,le,we,je){var Ue;return we===null?Ue=new j:typeof we!="string"&&!le.objectMode&&(Ue=new E("chunk",["string","Buffer"],we)),Ue?(L(ie,Ue),process$1.nextTick(je,Ue),!1):!0}he.prototype.write=function(ie,le,we){var je=this._writableState,Ue=!1,Y=!je.objectMode&&l(ie);return Y&&!a.isBuffer(ie)&&(ie=c(ie)),typeof le=="function"&&(we=le,le=null),Y?le="buffer":le||(le=je.defaultEncoding),typeof we!="function"&&(we=J),je.ending?me(this,we):(Y||_e(this,je,ie,we))&&(je.pendingcb++,Ue=Le(this,je,Y,ie,le,we)),Ue},he.prototype.cork=function(){this._writableState.corked++},he.prototype.uncork=function(){var ie=this._writableState;ie.corked&&(ie.corked--,!ie.writing&&!ie.corked&&!ie.bufferProcessing&&ie.bufferedRequest&&tt(this,ie))},he.prototype.setDefaultEncoding=function(ie){if(typeof ie=="string"&&(ie=ie.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ie+"").toLowerCase())>-1))throw new H(ie);return this._writableState.defaultEncoding=ie,this},Object.defineProperty(he.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Re(ie,le,we){return!ie.objectMode&&ie.decodeStrings!==!1&&typeof le=="string"&&(le=a.from(le,we)),le}Object.defineProperty(he.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Le(ie,le,we,je,Ue,Y){if(!we){var Z=Re(le,je,Ue);je!==Z&&(we=!0,Ue="buffer",je=Z)}var Ee=le.objectMode?1:je.length;le.length+=Ee;var Ie=le.length<le.highWaterMark;if(Ie||(le.needDrain=!0),le.writing||le.corked){var ot=le.lastBufferedRequest;le.lastBufferedRequest={chunk:je,encoding:Ue,isBuf:we,callback:Y,next:null},ot?ot.next=le.lastBufferedRequest:le.bufferedRequest=le.lastBufferedRequest,le.bufferedRequestCount+=1}else Qe(ie,le,!1,Ee,je,Ue,Y);return Ie}function Qe(ie,le,we,je,Ue,Y,Z){le.writelen=je,le.writecb=Z,le.writing=!0,le.sync=!0,le.destroyed?le.onwrite(new I("write")):we?ie._writev(Ue,le.onwrite):ie._write(Ue,Y,le.onwrite),le.sync=!1}function ze(ie,le,we,je,Ue){--le.pendingcb,we?(process$1.nextTick(Ue,je),process$1.nextTick(Pe,ie,le),ie._writableState.errorEmitted=!0,L(ie,je)):(Ue(je),ie._writableState.errorEmitted=!0,L(ie,je),Pe(ie,le))}function lt(ie){ie.writing=!1,ie.writecb=null,ie.length-=ie.writelen,ie.writelen=0}function nt(ie,le){var we=ie._writableState,je=we.sync,Ue=we.writecb;if(typeof Ue!="function")throw new T;if(lt(we),le)ze(ie,we,je,le,Ue);else{var Y=ae(we)||ie.destroyed;!Y&&!we.corked&&!we.bufferProcessing&&we.bufferedRequest&&tt(ie,we),je?process$1.nextTick(it,ie,we,Y,Ue):it(ie,we,Y,Ue)}}function it(ie,le,we,je){we||ft(ie,le),le.pendingcb--,je(),Pe(ie,le)}function ft(ie,le){le.length===0&&le.needDrain&&(le.needDrain=!1,ie.emit("drain"))}function tt(ie,le){le.bufferProcessing=!0;var we=le.bufferedRequest;if(ie._writev&&we&&we.next){var je=le.bufferedRequestCount,Ue=new Array(je),Y=le.corkedRequestsFree;Y.entry=we;for(var Z=0,Ee=!0;we;)Ue[Z]=we,we.isBuf||(Ee=!1),we=we.next,Z+=1;Ue.allBuffers=Ee,Qe(ie,le,!0,le.length,Ue,"",Y.finish),le.pendingcb++,le.lastBufferedRequest=null,Y.next?(le.corkedRequestsFree=Y.next,Y.next=null):le.corkedRequestsFree=new t(le),le.bufferedRequestCount=0}else{for(;we;){var Ie=we.chunk,ot=we.encoding,Ke=we.callback,fe=le.objectMode?1:Ie.length;if(Qe(ie,le,!1,fe,Ie,ot,Ke),we=we.next,le.bufferedRequestCount--,le.writing)break}we===null&&(le.lastBufferedRequest=null)}le.bufferedRequest=we,le.bufferProcessing=!1}he.prototype._write=function(ie,le,we){we(new d("_write()"))},he.prototype._writev=null,he.prototype.end=function(ie,le,we){var je=this._writableState;return typeof ie=="function"?(we=ie,ie=null,le=null):typeof le=="function"&&(we=le,le=null),ie!=null&&this.write(ie,le),je.corked&&(je.corked=1,this.uncork()),je.ending||et(this,je,we),this},Object.defineProperty(he.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ae(ie){return ie.ending&&ie.length===0&&ie.bufferedRequest===null&&!ie.finished&&!ie.writing}function pe(ie,le){ie._final(function(we){le.pendingcb--,we&&L(ie,we),le.prefinished=!0,ie.emit("prefinish"),Pe(ie,le)})}function $e(ie,le){!le.prefinished&&!le.finalCalled&&(typeof ie._final=="function"&&!le.destroyed?(le.pendingcb++,le.finalCalled=!0,process$1.nextTick(pe,ie,le)):(le.prefinished=!0,ie.emit("prefinish")))}function Pe(ie,le){var we=ae(le);if(we&&($e(ie,le),le.pendingcb===0&&(le.finished=!0,ie.emit("finish"),le.autoDestroy))){var je=ie._readableState;(!je||je.autoDestroy&&je.endEmitted)&&ie.destroy()}return we}function et(ie,le,we){le.ending=!0,Pe(ie,le),we&&(le.finished?process$1.nextTick(we):ie.once("finish",we)),le.ended=!0,ie.writable=!1}function Ze(ie,le,we){var je=ie.entry;for(ie.entry=null;je;){var Ue=je.callback;le.pendingcb--,Ue(we),je=je.next}le.corkedRequestsFree.next=ie}Object.defineProperty(he.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(ie){!this._writableState||(this._writableState.destroyed=ie)}}),he.prototype.destroy=f.destroy,he.prototype._undestroy=f.undestroy,he.prototype._destroy=function(ie,le){le(ie)}}),jr=h((r,e)=>{u();var t=Object.keys||function(g){var D=[];for(var w in g)D.push(w);return D};e.exports=c;var n=al(),o=il();for(Te()(c,n),i=t(o.prototype),s=0;s<i.length;s++)a=i[s],c.prototype[a]||(c.prototype[a]=o.prototype[a]);var i,a,s;function c(g){if(!(this instanceof c))return new c(g);n.call(this,g),o.call(this,g),this.allowHalfOpen=!0,g&&(g.readable===!1&&(this.readable=!1),g.writable===!1&&(this.writable=!1),g.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",l)))}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function l(){this._writableState.ended||process$1.nextTick(f,this)}function f(g){g.end()}Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=g,this._writableState.destroyed=g)}})}),Pv=h((r,e)=>{u();var t=ct(),n=t.Buffer;function o(a,s){for(var c in a)s[c]=a[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=t:(o(t,r),r.Buffer=i);function i(a,s,c){return n(a,s,c)}i.prototype=Object.create(n.prototype),o(n,i),i.from=function(a,s,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,s,c)},i.alloc=function(a,s,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var l=n(a);return s!==void 0?typeof c=="string"?l.fill(s,c):l.fill(s):l.fill(0),l},i.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},i.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}}),ll=h(r=>{u();var e=Pv().Buffer,t=e.isEncoding||function(I){switch(I=""+I,I&&I.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(I){if(!I)return"utf8";for(var j;;)switch(I){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return I;default:if(j)return;I=(""+I).toLowerCase(),j=!0}}function o(I){var j=n(I);if(typeof j!="string"&&(e.isEncoding===t||!t(I)))throw new Error("Unknown encoding: "+I);return j||I}r.StringDecoder=i;function i(I){this.encoding=o(I);var j;switch(this.encoding){case"utf16le":this.text=D,this.end=w,j=4;break;case"utf8":this.fillLast=l,j=4;break;case"base64":this.text=E,this.end=d,j=3;break;default:this.write=T,this.end=O;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(j)}i.prototype.write=function(I){if(I.length===0)return"";var j,q;if(this.lastNeed){if(j=this.fillLast(I),j===void 0)return"";q=this.lastNeed,this.lastNeed=0}else q=0;return q<I.length?j?j+this.text(I,q):this.text(I,q):j||""},i.prototype.end=g,i.prototype.text=f,i.prototype.fillLast=function(I){if(this.lastNeed<=I.length)return I.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);I.copy(this.lastChar,this.lastTotal-this.lastNeed,0,I.length),this.lastNeed-=I.length};function a(I){return I<=127?0:I>>5===6?2:I>>4===14?3:I>>3===30?4:I>>6===2?-1:-2}function s(I,j,q){var H=j.length-1;if(H<q)return 0;var L=a(j[H]);return L>=0?(L>0&&(I.lastNeed=L-1),L):--H<q||L===-2?0:(L=a(j[H]),L>=0?(L>0&&(I.lastNeed=L-2),L):--H<q||L===-2?0:(L=a(j[H]),L>=0?(L>0&&(L===2?L=0:I.lastNeed=L-3),L):0))}function c(I,j,q){if((j[0]&192)!==128)return I.lastNeed=0,"\uFFFD";if(I.lastNeed>1&&j.length>1){if((j[1]&192)!==128)return I.lastNeed=1,"\uFFFD";if(I.lastNeed>2&&j.length>2&&(j[2]&192)!==128)return I.lastNeed=2,"\uFFFD"}}function l(I){var j=this.lastTotal-this.lastNeed,q=c(this,I);if(q!==void 0)return q;if(this.lastNeed<=I.length)return I.copy(this.lastChar,j,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);I.copy(this.lastChar,j,0,I.length),this.lastNeed-=I.length}function f(I,j){var q=s(this,I,j);if(!this.lastNeed)return I.toString("utf8",j);this.lastTotal=q;var H=I.length-(q-this.lastNeed);return I.copy(this.lastChar,0,H),I.toString("utf8",j,H)}function g(I){var j=I&&I.length?this.write(I):"";return this.lastNeed?j+"\uFFFD":j}function D(I,j){if((I.length-j)%2===0){var q=I.toString("utf16le",j);if(q){var H=q.charCodeAt(q.length-1);if(H>=55296&&H<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=I[I.length-2],this.lastChar[1]=I[I.length-1],q.slice(0,-1)}return q}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=I[I.length-1],I.toString("utf16le",j,I.length-1)}function w(I){var j=I&&I.length?this.write(I):"";if(this.lastNeed){var q=this.lastTotal-this.lastNeed;return j+this.lastChar.toString("utf16le",0,q)}return j}function E(I,j){var q=(I.length-j)%3;return q===0?I.toString("base64",j):(this.lastNeed=3-q,this.lastTotal=3,q===1?this.lastChar[0]=I[I.length-1]:(this.lastChar[0]=I[I.length-2],this.lastChar[1]=I[I.length-1]),I.toString("base64",j,I.length-q))}function d(I){var j=I&&I.length?this.write(I):"";return this.lastNeed?j+this.lastChar.toString("base64",0,3-this.lastNeed):j}function T(I){return I.toString(this.encoding)}function O(I){return I&&I.length?this.write(I):""}}),pa=h((r,e)=>{u();var t=Mr().codes.ERR_STREAM_PREMATURE_CLOSE;function n(s){var c=!1;return function(){if(!c){c=!0;for(var l=arguments.length,f=new Array(l),g=0;g<l;g++)f[g]=arguments[g];s.apply(this,f)}}}function o(){}function i(s){return s.setHeader&&typeof s.abort=="function"}function a(s,c,l){if(typeof c=="function")return a(s,null,c);c||(c={}),l=n(l||o);var f=c.readable||c.readable!==!1&&s.readable,g=c.writable||c.writable!==!1&&s.writable,D=function(){s.writable||E()},w=s._writableState&&s._writableState.finished,E=function(){g=!1,w=!0,f||l.call(s)},d=s._readableState&&s._readableState.endEmitted,T=function(){f=!1,d=!0,g||l.call(s)},O=function(q){l.call(s,q)},I=function(){var q;if(f&&!d)return(!s._readableState||!s._readableState.ended)&&(q=new t),l.call(s,q);if(g&&!w)return(!s._writableState||!s._writableState.ended)&&(q=new t),l.call(s,q)},j=function(){s.req.on("finish",E)};return i(s)?(s.on("complete",E),s.on("abort",I),s.req?j():s.on("request",j)):g&&!s._writableState&&(s.on("end",D),s.on("close",D)),s.on("end",T),s.on("finish",E),c.error!==!1&&s.on("error",O),s.on("close",I),function(){s.removeListener("complete",E),s.removeListener("abort",I),s.removeListener("request",j),s.req&&s.req.removeListener("finish",E),s.removeListener("end",D),s.removeListener("close",D),s.removeListener("finish",E),s.removeListener("end",T),s.removeListener("error",O),s.removeListener("close",I)}}e.exports=a}),qv=h((r,e)=>{u();var t;function n(j,q,H){return q in j?Object.defineProperty(j,q,{value:H,enumerable:!0,configurable:!0,writable:!0}):j[q]=H,j}var o=pa(),i=Symbol("lastResolve"),a=Symbol("lastReject"),s=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),f=Symbol("handlePromise"),g=Symbol("stream");function D(j,q){return{value:j,done:q}}function w(j){var q=j[i];if(q!==null){var H=j[g].read();H!==null&&(j[l]=null,j[i]=null,j[a]=null,q(D(H,!1)))}}function E(j){process$1.nextTick(w,j)}function d(j,q){return function(H,L){j.then(function(){if(q[c]){H(D(void 0,!0));return}q[f](H,L)},L)}}var T=Object.getPrototypeOf(function(){}),O=Object.setPrototypeOf((t={get stream(){return this[g]},next:function(){var j=this,q=this[s];if(q!==null)return Promise.reject(q);if(this[c])return Promise.resolve(D(void 0,!0));if(this[g].destroyed)return new Promise(function(X,re){process$1.nextTick(function(){j[s]?re(j[s]):X(D(void 0,!0))})});var H=this[l],L;if(H)L=new Promise(d(H,this));else{var J=this[g].read();if(J!==null)return Promise.resolve(D(J,!1));L=new Promise(this[f])}return this[l]=L,L}},n(t,Symbol.asyncIterator,function(){return this}),n(t,"return",function(){var j=this;return new Promise(function(q,H){j[g].destroy(null,function(L){if(L){H(L);return}q(D(void 0,!0))})})}),t),T),I=function(j){var q,H=Object.create(O,(q={},n(q,g,{value:j,writable:!0}),n(q,i,{value:null,writable:!0}),n(q,a,{value:null,writable:!0}),n(q,s,{value:null,writable:!0}),n(q,c,{value:j._readableState.endEmitted,writable:!0}),n(q,f,{value:function(L,J){var X=H[g].read();X?(H[l]=null,H[i]=null,H[a]=null,L(D(X,!1))):(H[i]=L,H[a]=J)},writable:!0}),q));return H[l]=null,o(j,function(L){if(L&&L.code!=="ERR_STREAM_PREMATURE_CLOSE"){var J=H[a];J!==null&&(H[l]=null,H[i]=null,H[a]=null,J(L)),H[s]=L;return}var X=H[i];X!==null&&(H[l]=null,H[i]=null,H[a]=null,X(D(void 0,!0))),H[c]=!0}),j.on("readable",E.bind(null,H)),H};e.exports=I}),$v=h((r,e)=>{u(),e.exports=function(){throw new Error("Readable.from is not available in the browser")}}),al=h((r,e)=>{u(),e.exports=me;var t;me.ReadableState=he,Rn().EventEmitter;var n=function(Y,Z){return Y.listeners(Z).length},o=Jf(),i=ct().Buffer,a=global$1.Uint8Array||function(){};function s(Y){return i.from(Y)}function c(Y){return i.isBuffer(Y)||Y instanceof a}var l=Yf(),f;l&&l.debuglog?f=l.debuglog("stream"):f=function(){};var g=hv(),D=Xf(),w=el(),E=w.getHighWaterMark,d=Mr().codes,T=d.ERR_INVALID_ARG_TYPE,O=d.ERR_STREAM_PUSH_AFTER_EOF,I=d.ERR_METHOD_NOT_IMPLEMENTED,j=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,q,H,L;Te()(me,o);var J=D.errorOrDestroy,X=["error","close","destroy","pause","resume"];function re(Y,Z,Ee){if(typeof Y.prependListener=="function")return Y.prependListener(Z,Ee);!Y._events||!Y._events[Z]?Y.on(Z,Ee):Array.isArray(Y._events[Z])?Y._events[Z].unshift(Ee):Y._events[Z]=[Ee,Y._events[Z]]}function he(Y,Z,Ee){t=t||jr(),Y=Y||{},typeof Ee!="boolean"&&(Ee=Z instanceof t),this.objectMode=!!Y.objectMode,Ee&&(this.objectMode=this.objectMode||!!Y.readableObjectMode),this.highWaterMark=E(this,Y,"readableHighWaterMark",Ee),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Y.emitClose!==!1,this.autoDestroy=!!Y.autoDestroy,this.destroyed=!1,this.defaultEncoding=Y.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Y.encoding&&(q||(q=ll().StringDecoder),this.decoder=new q(Y.encoding),this.encoding=Y.encoding)}function me(Y){if(t=t||jr(),!(this instanceof me))return new me(Y);var Z=this instanceof t;this._readableState=new he(Y,this,Z),this.readable=!0,Y&&(typeof Y.read=="function"&&(this._read=Y.read),typeof Y.destroy=="function"&&(this._destroy=Y.destroy)),o.call(this)}Object.defineProperty(me.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(Y){!this._readableState||(this._readableState.destroyed=Y)}}),me.prototype.destroy=D.destroy,me.prototype._undestroy=D.undestroy,me.prototype._destroy=function(Y,Z){Z(Y)},me.prototype.push=function(Y,Z){var Ee=this._readableState,Ie;return Ee.objectMode?Ie=!0:typeof Y=="string"&&(Z=Z||Ee.defaultEncoding,Z!==Ee.encoding&&(Y=i.from(Y,Z),Z=""),Ie=!0),_e(this,Y,Z,!1,Ie)},me.prototype.unshift=function(Y){return _e(this,Y,null,!0,!1)};function _e(Y,Z,Ee,Ie,ot){f("readableAddChunk",Z);var Ke=Y._readableState;if(Z===null)Ke.reading=!1,nt(Y,Ke);else{var fe;if(ot||(fe=Le(Ke,Z)),fe)J(Y,fe);else if(Ke.objectMode||Z&&Z.length>0)if(typeof Z!="string"&&!Ke.objectMode&&Object.getPrototypeOf(Z)!==i.prototype&&(Z=s(Z)),Ie)Ke.endEmitted?J(Y,new j):Re(Y,Ke,Z,!0);else if(Ke.ended)J(Y,new O);else{if(Ke.destroyed)return!1;Ke.reading=!1,Ke.decoder&&!Ee?(Z=Ke.decoder.write(Z),Ke.objectMode||Z.length!==0?Re(Y,Ke,Z,!1):tt(Y,Ke)):Re(Y,Ke,Z,!1)}else Ie||(Ke.reading=!1,tt(Y,Ke))}return!Ke.ended&&(Ke.length<Ke.highWaterMark||Ke.length===0)}function Re(Y,Z,Ee,Ie){Z.flowing&&Z.length===0&&!Z.sync?(Z.awaitDrain=0,Y.emit("data",Ee)):(Z.length+=Z.objectMode?1:Ee.length,Ie?Z.buffer.unshift(Ee):Z.buffer.push(Ee),Z.needReadable&&it(Y)),tt(Y,Z)}function Le(Y,Z){var Ee;return!c(Z)&&typeof Z!="string"&&Z!==void 0&&!Y.objectMode&&(Ee=new T("chunk",["string","Buffer","Uint8Array"],Z)),Ee}me.prototype.isPaused=function(){return this._readableState.flowing===!1},me.prototype.setEncoding=function(Y){q||(q=ll().StringDecoder);var Z=new q(Y);this._readableState.decoder=Z,this._readableState.encoding=this._readableState.decoder.encoding;for(var Ee=this._readableState.buffer.head,Ie="";Ee!==null;)Ie+=Z.write(Ee.data),Ee=Ee.next;return this._readableState.buffer.clear(),Ie!==""&&this._readableState.buffer.push(Ie),this._readableState.length=Ie.length,this};var Qe=1073741824;function ze(Y){return Y>=Qe?Y=Qe:(Y--,Y|=Y>>>1,Y|=Y>>>2,Y|=Y>>>4,Y|=Y>>>8,Y|=Y>>>16,Y++),Y}function lt(Y,Z){return Y<=0||Z.length===0&&Z.ended?0:Z.objectMode?1:Y!==Y?Z.flowing&&Z.length?Z.buffer.head.data.length:Z.length:(Y>Z.highWaterMark&&(Z.highWaterMark=ze(Y)),Y<=Z.length?Y:Z.ended?Z.length:(Z.needReadable=!0,0))}me.prototype.read=function(Y){f("read",Y),Y=parseInt(Y,10);var Z=this._readableState,Ee=Y;if(Y!==0&&(Z.emittedReadable=!1),Y===0&&Z.needReadable&&((Z.highWaterMark!==0?Z.length>=Z.highWaterMark:Z.length>0)||Z.ended))return f("read: emitReadable",Z.length,Z.ended),Z.length===0&&Z.ended?we(this):it(this),null;if(Y=lt(Y,Z),Y===0&&Z.ended)return Z.length===0&&we(this),null;var Ie=Z.needReadable;f("need readable",Ie),(Z.length===0||Z.length-Y<Z.highWaterMark)&&(Ie=!0,f("length less than watermark",Ie)),Z.ended||Z.reading?(Ie=!1,f("reading or ended",Ie)):Ie&&(f("do read"),Z.reading=!0,Z.sync=!0,Z.length===0&&(Z.needReadable=!0),this._read(Z.highWaterMark),Z.sync=!1,Z.reading||(Y=lt(Ee,Z)));var ot;return Y>0?ot=le(Y,Z):ot=null,ot===null?(Z.needReadable=Z.length<=Z.highWaterMark,Y=0):(Z.length-=Y,Z.awaitDrain=0),Z.length===0&&(Z.ended||(Z.needReadable=!0),Ee!==Y&&Z.ended&&we(this)),ot!==null&&this.emit("data",ot),ot};function nt(Y,Z){if(f("onEofChunk"),!Z.ended){if(Z.decoder){var Ee=Z.decoder.end();Ee&&Ee.length&&(Z.buffer.push(Ee),Z.length+=Z.objectMode?1:Ee.length)}Z.ended=!0,Z.sync?it(Y):(Z.needReadable=!1,Z.emittedReadable||(Z.emittedReadable=!0,ft(Y)))}}function it(Y){var Z=Y._readableState;f("emitReadable",Z.needReadable,Z.emittedReadable),Z.needReadable=!1,Z.emittedReadable||(f("emitReadable",Z.flowing),Z.emittedReadable=!0,process$1.nextTick(ft,Y))}function ft(Y){var Z=Y._readableState;f("emitReadable_",Z.destroyed,Z.length,Z.ended),!Z.destroyed&&(Z.length||Z.ended)&&(Y.emit("readable"),Z.emittedReadable=!1),Z.needReadable=!Z.flowing&&!Z.ended&&Z.length<=Z.highWaterMark,ie(Y)}function tt(Y,Z){Z.readingMore||(Z.readingMore=!0,process$1.nextTick(ae,Y,Z))}function ae(Y,Z){for(;!Z.reading&&!Z.ended&&(Z.length<Z.highWaterMark||Z.flowing&&Z.length===0);){var Ee=Z.length;if(f("maybeReadMore read 0"),Y.read(0),Ee===Z.length)break}Z.readingMore=!1}me.prototype._read=function(Y){J(this,new I("_read()"))},me.prototype.pipe=function(Y,Z){var Ee=this,Ie=this._readableState;switch(Ie.pipesCount){case 0:Ie.pipes=Y;break;case 1:Ie.pipes=[Ie.pipes,Y];break;default:Ie.pipes.push(Y);break}Ie.pipesCount+=1,f("pipe count=%d opts=%j",Ie.pipesCount,Z);var ot=(!Z||Z.end!==!1)&&Y!==process$1.stdout&&Y!==process$1.stderr,Ke=ot?Ct:P;Ie.endEmitted?process$1.nextTick(Ke):Ee.once("end",Ke),Y.on("unpipe",fe);function fe(F,ee){f("onunpipe"),F===Ee&&ee&&ee.hasUnpiped===!1&&(ee.hasUnpiped=!0,Dt())}function Ct(){f("onend"),Y.end()}var St=pe(Ee);Y.on("drain",St);var _t=!1;function Dt(){f("cleanup"),Y.removeListener("close",xt),Y.removeListener("finish",k),Y.removeListener("drain",St),Y.removeListener("error",At),Y.removeListener("unpipe",fe),Ee.removeListener("end",Ct),Ee.removeListener("end",P),Ee.removeListener("data",jt),_t=!0,Ie.awaitDrain&&(!Y._writableState||Y._writableState.needDrain)&&St()}Ee.on("data",jt);function jt(F){f("ondata");var ee=Y.write(F);f("dest.write",ee),ee===!1&&((Ie.pipesCount===1&&Ie.pipes===Y||Ie.pipesCount>1&&Ue(Ie.pipes,Y)!==-1)&&!_t&&(f("false write response, pause",Ie.awaitDrain),Ie.awaitDrain++),Ee.pause())}function At(F){f("onerror",F),P(),Y.removeListener("error",At),n(Y,"error")===0&&J(Y,F)}re(Y,"error",At);function xt(){Y.removeListener("finish",k),P()}Y.once("close",xt);function k(){f("onfinish"),Y.removeListener("close",xt),P()}Y.once("finish",k);function P(){f("unpipe"),Ee.unpipe(Y)}return Y.emit("pipe",Ee),Ie.flowing||(f("pipe resume"),Ee.resume()),Y};function pe(Y){return function(){var Z=Y._readableState;f("pipeOnDrain",Z.awaitDrain),Z.awaitDrain&&Z.awaitDrain--,Z.awaitDrain===0&&n(Y,"data")&&(Z.flowing=!0,ie(Y))}}me.prototype.unpipe=function(Y){var Z=this._readableState,Ee={hasUnpiped:!1};if(Z.pipesCount===0)return this;if(Z.pipesCount===1)return Y&&Y!==Z.pipes?this:(Y||(Y=Z.pipes),Z.pipes=null,Z.pipesCount=0,Z.flowing=!1,Y&&Y.emit("unpipe",this,Ee),this);if(!Y){var Ie=Z.pipes,ot=Z.pipesCount;Z.pipes=null,Z.pipesCount=0,Z.flowing=!1;for(var Ke=0;Ke<ot;Ke++)Ie[Ke].emit("unpipe",this,{hasUnpiped:!1});return this}var fe=Ue(Z.pipes,Y);return fe===-1?this:(Z.pipes.splice(fe,1),Z.pipesCount-=1,Z.pipesCount===1&&(Z.pipes=Z.pipes[0]),Y.emit("unpipe",this,Ee),this)},me.prototype.on=function(Y,Z){var Ee=o.prototype.on.call(this,Y,Z),Ie=this._readableState;return Y==="data"?(Ie.readableListening=this.listenerCount("readable")>0,Ie.flowing!==!1&&this.resume()):Y==="readable"&&!Ie.endEmitted&&!Ie.readableListening&&(Ie.readableListening=Ie.needReadable=!0,Ie.flowing=!1,Ie.emittedReadable=!1,f("on readable",Ie.length,Ie.reading),Ie.length?it(this):Ie.reading||process$1.nextTick(Pe,this)),Ee},me.prototype.addListener=me.prototype.on,me.prototype.removeListener=function(Y,Z){var Ee=o.prototype.removeListener.call(this,Y,Z);return Y==="readable"&&process$1.nextTick($e,this),Ee},me.prototype.removeAllListeners=function(Y){var Z=o.prototype.removeAllListeners.apply(this,arguments);return(Y==="readable"||Y===void 0)&&process$1.nextTick($e,this),Z};function $e(Y){var Z=Y._readableState;Z.readableListening=Y.listenerCount("readable")>0,Z.resumeScheduled&&!Z.paused?Z.flowing=!0:Y.listenerCount("data")>0&&Y.resume()}function Pe(Y){f("readable nexttick read 0"),Y.read(0)}me.prototype.resume=function(){var Y=this._readableState;return Y.flowing||(f("resume"),Y.flowing=!Y.readableListening,et(this,Y)),Y.paused=!1,this};function et(Y,Z){Z.resumeScheduled||(Z.resumeScheduled=!0,process$1.nextTick(Ze,Y,Z))}function Ze(Y,Z){f("resume",Z.reading),Z.reading||Y.read(0),Z.resumeScheduled=!1,Y.emit("resume"),ie(Y),Z.flowing&&!Z.reading&&Y.read(0)}me.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function ie(Y){var Z=Y._readableState;for(f("flow",Z.flowing);Z.flowing&&Y.read()!==null;);}me.prototype.wrap=function(Y){var Z=this,Ee=this._readableState,Ie=!1;Y.on("end",function(){if(f("wrapped end"),Ee.decoder&&!Ee.ended){var fe=Ee.decoder.end();fe&&fe.length&&Z.push(fe)}Z.push(null)}),Y.on("data",function(fe){if(f("wrapped data"),Ee.decoder&&(fe=Ee.decoder.write(fe)),!(Ee.objectMode&&fe==null)&&!(!Ee.objectMode&&(!fe||!fe.length))){var Ct=Z.push(fe);Ct||(Ie=!0,Y.pause())}});for(var ot in Y)this[ot]===void 0&&typeof Y[ot]=="function"&&(this[ot]=function(fe){return function(){return Y[fe].apply(Y,arguments)}}(ot));for(var Ke=0;Ke<X.length;Ke++)Y.on(X[Ke],this.emit.bind(this,X[Ke]));return this._read=function(fe){f("wrapped _read",fe),Ie&&(Ie=!1,Y.resume())},this},typeof Symbol=="function"&&(me.prototype[Symbol.asyncIterator]=function(){return H===void 0&&(H=qv()),H(this)}),Object.defineProperty(me.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(me.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(me.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Y){this._readableState&&(this._readableState.flowing=Y)}}),me._fromList=le,Object.defineProperty(me.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function le(Y,Z){if(Z.length===0)return null;var Ee;return Z.objectMode?Ee=Z.buffer.shift():!Y||Y>=Z.length?(Z.decoder?Ee=Z.buffer.join(""):Z.buffer.length===1?Ee=Z.buffer.first():Ee=Z.buffer.concat(Z.length),Z.buffer.clear()):Ee=Z.buffer.consume(Y,Z.decoder),Ee}function we(Y){var Z=Y._readableState;f("endReadable",Z.endEmitted),Z.endEmitted||(Z.ended=!0,process$1.nextTick(je,Z,Y))}function je(Y,Z){if(f("endReadableNT",Y.endEmitted,Y.length),!Y.endEmitted&&Y.length===0&&(Y.endEmitted=!0,Z.readable=!1,Z.emit("end"),Y.autoDestroy)){var Ee=Z._writableState;(!Ee||Ee.autoDestroy&&Ee.finished)&&Z.destroy()}}typeof Symbol=="function"&&(me.from=function(Y,Z){return L===void 0&&(L=$v()),L(me,Y,Z)});function Ue(Y,Z){for(var Ee=0,Ie=Y.length;Ee<Ie;Ee++)if(Y[Ee]===Z)return Ee;return-1}}),_l=h((r,e)=>{u(),e.exports=l;var t=Mr().codes,n=t.ERR_METHOD_NOT_IMPLEMENTED,o=t.ERR_MULTIPLE_CALLBACK,i=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=t.ERR_TRANSFORM_WITH_LENGTH_0,s=jr();Te()(l,s);function c(D,w){var E=this._transformState;E.transforming=!1;var d=E.writecb;if(d===null)return this.emit("error",new o);E.writechunk=null,E.writecb=null,w!=null&&this.push(w),d(D);var T=this._readableState;T.reading=!1,(T.needReadable||T.length<T.highWaterMark)&&this._read(T.highWaterMark)}function l(D){if(!(this instanceof l))return new l(D);s.call(this,D),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,D&&(typeof D.transform=="function"&&(this._transform=D.transform),typeof D.flush=="function"&&(this._flush=D.flush)),this.on("prefinish",f)}function f(){var D=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(w,E){g(D,w,E)}):g(this,null,null)}l.prototype.push=function(D,w){return this._transformState.needTransform=!1,s.prototype.push.call(this,D,w)},l.prototype._transform=function(D,w,E){E(new n("_transform()"))},l.prototype._write=function(D,w,E){var d=this._transformState;if(d.writecb=E,d.writechunk=D,d.writeencoding=w,!d.transforming){var T=this._readableState;(d.needTransform||T.needReadable||T.length<T.highWaterMark)&&this._read(T.highWaterMark)}},l.prototype._read=function(D){var w=this._transformState;w.writechunk!==null&&!w.transforming?(w.transforming=!0,this._transform(w.writechunk,w.writeencoding,w.afterTransform)):w.needTransform=!0},l.prototype._destroy=function(D,w){s.prototype._destroy.call(this,D,function(E){w(E)})};function g(D,w,E){if(w)return D.emit("error",w);if(E!=null&&D.push(E),D._writableState.length)throw new a;if(D._transformState.transforming)throw new i;return D.push(null)}}),nE=h((r,e)=>{u(),e.exports=n;var t=_l();Te()(n,t);function n(o){if(!(this instanceof n))return new n(o);t.call(this,o)}n.prototype._transform=function(o,i,a){a(null,o)}}),uE=h((r,e)=>{u();var t;function n(E){var d=!1;return function(){d||(d=!0,E.apply(void 0,arguments))}}var o=Mr().codes,i=o.ERR_MISSING_ARGS,a=o.ERR_STREAM_DESTROYED;function s(E){if(E)throw E}function c(E){return E.setHeader&&typeof E.abort=="function"}function l(E,d,T,O){O=n(O);var I=!1;E.on("close",function(){I=!0}),t===void 0&&(t=pa()),t(E,{readable:d,writable:T},function(q){if(q)return O(q);I=!0,O()});var j=!1;return function(q){if(!I&&!j){if(j=!0,c(E))return E.abort();if(typeof E.destroy=="function")return E.destroy();O(q||new a("pipe"))}}}function f(E){E()}function g(E,d){return E.pipe(d)}function D(E){return!E.length||typeof E[E.length-1]!="function"?s:E.pop()}function w(){for(var E=arguments.length,d=new Array(E),T=0;T<E;T++)d[T]=arguments[T];var O=D(d);if(Array.isArray(d[0])&&(d=d[0]),d.length<2)throw new i("streams");var I,j=d.map(function(q,H){var L=H<d.length-1,J=H>0;return l(q,L,J,function(X){I||(I=X),X&&j.forEach(f),!L&&(j.forEach(f),O(I))})});return d.reduce(g)}e.exports=w}),fE=h((r,e)=>{u(),r=e.exports=al(),r.Stream=r,r.Readable=r,r.Writable=il(),r.Duplex=jr(),r.Transform=_l(),r.PassThrough=nE(),r.finished=pa(),r.pipeline=uE()}),pE=h((r,e)=>{u();var t=Te(),{Readable:n}=fE();e.exports=o,t(o,n);function o(i,a){if(!(this instanceof o))return new o(i,a);a=a||{},n.call(this,Object.assign({},a,{objectMode:!0})),this._iterator=i,this._options=a,this.on("end",this.destroy.bind(this,null,null))}o.prototype._read=function(){this.destroyed||this._iterator.next((i,a,s)=>{if(!this.destroyed){if(i)return this.destroy(i);a===void 0&&s===void 0?this.push(null):this._options.keys!==!1&&this._options.values===!1?this.push(a):this._options.keys===!1&&this._options.values!==!1?this.push(s):this.push({key:a,value:s})}})},o.prototype._destroy=function(i,a){this._iterator.end(function(s){a(i||s)})}}),_a=h((r,e)=>{u();function t(o,i){let a=function(s,c){if(typeof s=="object"&&s!==null&&(c=c||s,s=s.message||s.name),s=s||"",c=c||void 0,typeof c=="object"&&c.type===o&&c.message===s)return c;Object.defineProperty(this,"type",{value:o,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"name",{value:o,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"cause",{value:c,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"message",{value:s,enumerable:!1,writable:!0,configurable:!0}),Error.call(this),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,a)};return a.prototype=new i,a}var n=t("LevelUPError",Error);e.exports={LevelUPError:n,InitializationError:t("InitializationError",n),OpenError:t("OpenError",n),ReadError:t("ReadError",n),WriteError:t("WriteError",n),NotFoundError:t("NotFoundError",n),EncodingError:t("EncodingError",n)},e.exports.NotFoundError.prototype.notFound=!0,e.exports.NotFoundError.prototype.status=404}),ro=h(r=>{u(),r.getCallback=function(e,t){return typeof e=="function"?e:t},r.getOptions=function(e){return typeof e=="object"&&e!==null?e:{}}}),yE=h((r,e)=>{u();var t=_a().WriteError,n=ta(),o=ro().getCallback,i=ro().getOptions;function a(s){this.db=s,this.batch=s.db.batch(),this.ops=[],this.length=0}a.prototype.put=function(s,c,l){try{this.batch.put(s,c,l)}catch(f){throw new t(f)}return this.ops.push({...l,type:"put",key:s,value:c}),this.length++,this},a.prototype.del=function(s,c){try{this.batch.del(s,c)}catch(l){throw new t(l)}return this.ops.push({...c,type:"del",key:s}),this.length++,this},a.prototype.clear=function(){try{this.batch.clear()}catch(s){throw new t(s)}return this.ops=[],this.length=0,this},a.prototype.write=function(s,c){let l=this.db,f=this.ops;c=o(s,c),c=n.fromCallback(c),s=i(s);try{this.batch.write(s,function(g){if(g)return c(new t(g));l.emit("batch",f),c()})}catch(g){throw new t(g)}return c.promise},e.exports=a}),wE=h((r,e)=>{u();var t=ra();e.exports=function(n,...o){o.length===0?t(n):t(()=>n(...o))}}),EE=h((r,e)=>{u();var t=Rn().EventEmitter,n=P0().inherits,o=cv(),i=pE(),a=yE(),s=_a(),c=Uf(),l=ta(),f=ro().getCallback,g=ro().getOptions,D=wE(),w=s.WriteError,E=s.ReadError,d=s.NotFoundError,T=s.OpenError,O=s.InitializationError;function I(q,H,L){if(!(this instanceof I))return new I(q,H,L);let J;if(t.call(this),this.setMaxListeners(1/0),typeof H=="function"&&(L=H,H={}),H=H||{},!q||typeof q!="object"){if(J=new O("First argument must be an abstract-leveldown compliant store"),typeof L=="function")return D(L,J);throw J}if(typeof q.status!="string")throw new Error(".status required, old abstract-leveldown");this.options=g(H),this._db=q,this.db=null,this.open(L||(X=>{X&&this.emit("error",X)})),this.supports=c(this.db.supports,{status:!0,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});for(let X of Object.keys(this.supports.additionalMethods))this[X]==null&&(this[X]=function(...re){return this.db[X](...re)})}I.prototype.emit=t.prototype.emit,I.prototype.once=t.prototype.once,n(I,t),Object.defineProperty(I.prototype,"status",{enumerable:!0,get(){return this.db.status}}),I.prototype.isOperational=function(){return this.db.status==="open"||this.db.status==="opening"},I.prototype.open=function(q,H){return typeof q=="function"&&(H=q,q=null),H=l.fromCallback(H),q||(q=this.options),this.db&&this.isOpen()?(D(H,null,this),H.promise):this.db&&this._isOpening()?(this.once("open",()=>{H(null,this)}),H.promise):(this.db=new o(this._db),this.emit("opening"),this.db.open(q,L=>{if(L)return H(new T(L));this.db=this._db,H(null,this),this.emit("open"),this.emit("ready")}),H.promise)},I.prototype.close=function(q){return q=l.fromCallback(q),this.isOpen()?(this.db.close((H,...L)=>{this.emit("closed"),q(H,...L)}),this.emit("closing")):this.isClosed()?D(q):this.db.status==="closing"?this.once("closed",q):this._isOpening()&&this.once("open",()=>{this.close(q)}),q.promise},I.prototype.isOpen=function(){return this.db.status==="open"},I.prototype._isOpening=function(){return this.db.status==="opening"},I.prototype.isClosed=function(){return/^clos|new/.test(this.db.status)},I.prototype.get=function(q,H,L){return L=f(H,L),L=l.fromCallback(L),j(this,L)||(H=g(H),this.db.get(q,H,function(J,X){if(J)return/notfound/i.test(J)||J.notFound?J=new d("Key not found in database ["+q+"]",J):J=new E(J),L(J);L(null,X)})),L.promise},I.prototype.getMany=function(q,H,L){return this.db.getMany(q,H,L)},I.prototype.put=function(q,H,L,J){return J=f(L,J),J=l.fromCallback(J),j(this,J)||(L=g(L),this.db.put(q,H,L,X=>{if(X)return J(new w(X));this.emit("put",q,H),J()})),J.promise},I.prototype.del=function(q,H,L){return L=f(H,L),L=l.fromCallback(L),j(this,L)||(H=g(H),this.db.del(q,H,J=>{if(J)return L(new w(J));this.emit("del",q),L()})),L.promise},I.prototype.batch=function(q,H,L){return arguments.length?(typeof q=="function"?L=q:L=f(H,L),L=l.fromCallback(L),j(this,L)||(H=g(H),this.db.batch(q,H,J=>{if(J)return L(new w(J));this.emit("batch",q),L()})),L.promise):new a(this)},I.prototype.iterator=function(q){return this.db.iterator(q)},I.prototype.clear=function(q,H){return H=f(q,H),q=g(q),H=l.fromCallback(H),j(this,H)||this.db.clear(q,L=>{if(L)return H(new w(L));this.emit("clear",q),H()}),H.promise},I.prototype.readStream=I.prototype.createReadStream=function(q){return q=Object.assign({keys:!0,values:!0},q),typeof q.limit!="number"&&(q.limit=-1),new i(this.db.iterator(q),q)},I.prototype.keyStream=I.prototype.createKeyStream=function(q){return this.createReadStream(Object.assign({},q,{keys:!0,values:!1}))},I.prototype.valueStream=I.prototype.createValueStream=function(q){return this.createReadStream(Object.assign({},q,{keys:!1,values:!0}))},I.prototype.toString=function(){return"LevelUP"},I.prototype.type="levelup",I.prototype._nextTick=D;function j(q,H){return q.isOperational()?!1:(D(H,new E("Database is not open")),!0)}I.errors=s,e.exports=I}),_E=h(r=>{u();var{Buffer:e}=ct();r.utf8=r["utf-8"]={encode:function(i){return o(i)?i:String(i)},decode:n,buffer:!1,type:"utf8"},r.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},r.binary={encode:function(i){return o(i)?i:e.from(i)},decode:n,buffer:!0,type:"binary"},r.none={encode:n,decode:n,buffer:!1,type:"id"},r.id=r.none;var t=["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"];for(let i of t)r[i]={encode:function(a){return o(a)?a:e.from(a,i)},decode:function(a){return a.toString(i)},buffer:!0,type:i};function n(i){return i}function o(i){return i==null||e.isBuffer(i)}}),DE=h((r,e)=>{u();var t=_E(),n=new Set(["lt","gt","lte","gte"]);e.exports=o;function o(i){if(!(this instanceof o))return new o(i);this.opts=i||{},this.encodings=t}o.prototype._encoding=function(i){return typeof i=="string"&&(i=t[i]),i||(i=t.id),i},o.prototype._keyEncoding=function(i,a){return this._encoding(a&&a.keyEncoding||i&&i.keyEncoding||this.opts.keyEncoding)},o.prototype._valueEncoding=function(i,a){return this._encoding(a&&(a.valueEncoding||a.encoding)||i&&(i.valueEncoding||i.encoding)||this.opts.valueEncoding||this.opts.encoding)},o.prototype.encodeKey=function(i,a,s){return this._keyEncoding(a,s).encode(i)},o.prototype.encodeValue=function(i,a,s){return this._valueEncoding(a,s).encode(i)},o.prototype.decodeKey=function(i,a){return this._keyEncoding(a).decode(i)},o.prototype.decodeValue=function(i,a){return this._valueEncoding(a).decode(i)},o.prototype.encodeBatch=function(i,a){return i.map(s=>{let c={type:s.type,key:this.encodeKey(s.key,a,s)};return this.keyAsBuffer(a,s)&&(c.keyEncoding="binary"),s.prefix&&(c.prefix=s.prefix),"value"in s&&(c.value=this.encodeValue(s.value,a,s),this.valueAsBuffer(a,s)&&(c.valueEncoding="binary")),c})},o.prototype.encodeLtgt=function(i){let a={};for(let s of Object.keys(i)){if(s==="start"||s==="end")throw new Error('Legacy range options ("start" and "end") have been removed');a[s]=n.has(s)?this.encodeKey(i[s],i):i[s]}return a},o.prototype.createStreamDecoder=function(i){return i.keys&&i.values?(a,s)=>({key:this.decodeKey(a,i),value:this.decodeValue(s,i)}):i.keys?a=>this.decodeKey(a,i):i.values?(a,s)=>this.decodeValue(s,i):function(){}},o.prototype.keyAsBuffer=function(i){return this._keyEncoding(i).buffer},o.prototype.valueAsBuffer=function(i){return this._valueEncoding(i).buffer}}),TE=h((r,e)=>{u();var t=Nt().AbstractLevelDOWN,n=Nt().AbstractChainedBatch,o=Nt().AbstractIterator,i=Te(),a=DE(),s=_a().EncodingError,c=["approximateSize","compactRange"];e.exports=l;function l(D,w){if(!(this instanceof l))return new l(D,w);let E=D.supports||{},d=E.additionalMethods||{};t.call(this,E),this.supports.encodings=!0,this.supports.additionalMethods={},c.forEach(function(T){let O=typeof D[T]=="function";(d[T]||O)&&(this.supports.additionalMethods[T]=!0,this[T]=function(I,j,q,H){return I=this.codec.encodeKey(I,q),j=this.codec.encodeKey(j,q),this.db[T](I,j,q,H)})},this),w=w||{},typeof w.keyEncoding>"u"&&(w.keyEncoding="utf8"),typeof w.valueEncoding>"u"&&(w.valueEncoding="utf8"),this.db=D,this.codec=new a(w)}i(l,t),l.prototype.type="encoding-down",l.prototype._serializeKey=l.prototype._serializeValue=function(D){return D},l.prototype._open=function(D,w){this.db.open(D,w)},l.prototype._close=function(D){this.db.close(D)},l.prototype._put=function(D,w,E,d){D=this.codec.encodeKey(D,E),w=this.codec.encodeValue(w,E),this.db.put(D,w,E,d)},l.prototype._get=function(D,w,E){D=this.codec.encodeKey(D,w),w.asBuffer=this.codec.valueAsBuffer(w),this.db.get(D,w,(d,T)=>{if(d)return E(d);try{T=this.codec.decodeValue(T,w)}catch(O){return E(new s(O))}E(null,T)})},l.prototype._getMany=function(D,w,E){D=D.map(d=>this.codec.encodeKey(d,w)),w.asBuffer=this.codec.valueAsBuffer(w),this.db.getMany(D,w,(d,T)=>{if(d)return E(d);let O=new Array(T.length);for(let I=0;I<T.length;I++){if(T[I]===void 0){O[I]=void 0;continue}try{O[I]=this.codec.decodeValue(T[I],w)}catch(j){return E(new s(j))}}E(null,O)})},l.prototype._del=function(D,w,E){D=this.codec.encodeKey(D,w),this.db.del(D,w,E)},l.prototype._chainedBatch=function(){return new g(this)},l.prototype._batch=function(D,w,E){D=this.codec.encodeBatch(D,w),this.db.batch(D,w,E)},l.prototype._iterator=function(D){return D.keyAsBuffer=this.codec.keyAsBuffer(D),D.valueAsBuffer=this.codec.valueAsBuffer(D),new f(this,D)},l.prototype._clear=function(D,w){D=this.codec.encodeLtgt(D),this.db.clear(D,w)};function f(D,w){o.call(this,D),this.codec=D.codec,this.keys=w.keys,this.values=w.values,this.opts=this.codec.encodeLtgt(w),this.it=D.db.iterator(this.opts)}i(f,o),f.prototype._next=function(D){this.it.next((w,E,d)=>{if(w)return D(w);try{this.keys&&typeof E<"u"?E=this.codec.decodeKey(E,this.opts):E=void 0,this.values&&typeof d<"u"?d=this.codec.decodeValue(d,this.opts):d=void 0}catch(T){return D(new s(T))}D(null,E,d)})},f.prototype._seek=function(D){D=this.codec.encodeKey(D,this.opts),this.it.seek(D)},f.prototype._end=function(D){this.it.end(D)};function g(D,w){n.call(this,D),this.codec=D.codec,this.batch=D.db.batch()}i(g,n),g.prototype._put=function(D,w,E){D=this.codec.encodeKey(D,E),w=this.codec.encodeValue(w,E),this.batch.put(D,w)},g.prototype._del=function(D,w){D=this.codec.encodeKey(D,w),this.batch.del(D)},g.prototype._clear=function(){this.batch.clear()},g.prototype._write=function(D,w){this.batch.write(D,w)}}),BE=h((r,e)=>{u();var t=EE(),n=TE();function o(i){function a(c,l,f){return typeof c=="function"?f=c:typeof l=="function"&&(f=l),s(l)||(l=s(c)?c:{}),t(n(i(c,l),l),l,f)}function s(c){return typeof c=="object"&&c!==null}for(let c of["destroy","repair"])typeof i[c]=="function"&&(a[c]=function(...l){i[c](...l)});return a.errors=t.errors,a}e.exports=o}),kE=h((r,e)=>{u(),e.exports=n;var t=ra();function n(o,i,a){if(typeof i!="number")throw new Error("second argument must be a Number");let s,c,l,f,g,D=!0,w;Array.isArray(o)?(s=[],l=c=o.length):(f=Object.keys(o),s={},l=c=f.length);function E(T){function O(){a&&a(T,s),a=null}D?t(O):O()}function d(T,O,I){if(s[T]=I,O&&(g=!0),--l===0||O)E(O);else if(!g&&w<c){let j;f?(j=f[w],w+=1,o[j](function(q,H){d(j,q,H)})):(j=w,w+=1,o[j](function(q,H){d(j,q,H)}))}}w=i,l?f?f.some(function(T,O){return o[T](function(I,j){d(T,I,j)}),O===i-1}):o.some(function(T,O){return T(function(I,j){d(O,I,j)}),O===i-1}):E(null),D=!1}}),NE=h(r=>{u(),r.compare=function(w,E){if(Buffer.isBuffer(w)){for(var d=Math.min(w.length,E.length),T=0;T<d;T++){var O=w[T]-E[T];if(O)return O}return w.length-E.length}return w<E?-1:w>E?1:0};function e(w){return w!==void 0&&w!==""}function t(w,E){return Object.hasOwnProperty.call(w,E)}function n(w,E){return Object.hasOwnProperty.call(w,E)&&E}var o=r.lowerBoundKey=function(w){return n(w,"gt")||n(w,"gte")||n(w,"min")||(w.reverse?n(w,"end"):n(w,"start"))||void 0},i=r.lowerBound=function(w,E){var d=o(w);return d?w[d]:E},a=r.lowerBoundInclusive=function(w){return!t(w,"gt")},s=r.upperBoundInclusive=function(w){return!t(w,"lt")},c=r.lowerBoundExclusive=function(w){return!a(w)},l=r.upperBoundExclusive=function(w){return!s(w)},f=r.upperBoundKey=function(w){return n(w,"lt")||n(w,"lte")||n(w,"max")||(w.reverse?n(w,"start"):n(w,"end"))||void 0},g=r.upperBound=function(w,E){var d=f(w);return d?w[d]:E};r.start=function(w,E){return w.reverse?g(w,E):i(w,E)},r.end=function(w,E){return w.reverse?i(w,E):g(w,E)},r.startInclusive=function(w){return w.reverse?s(w):a(w)},r.endInclusive=function(w){return w.reverse?a(w):s(w)};function D(w){return w}r.toLtgt=function(w,E,d,T,O){E=E||{},d=d||D;var I=arguments.length>3,j=r.lowerBoundKey(w),q=r.upperBoundKey(w);return j?j==="gt"?E.gt=d(w.gt,!1):E.gte=d(w[j],!1):I&&(E.gte=d(T,!1)),q?q==="lt"?E.lt=d(w.lt,!0):E.lte=d(w[q],!0):I&&(E.lte=d(O,!0)),w.reverse!=null&&(E.reverse=!!w.reverse),t(E,"max")&&delete E.max,t(E,"min")&&delete E.min,t(E,"start")&&delete E.start,t(E,"end")&&delete E.end,E},r.contains=function(w,E,d){d=d||r.compare;var T=i(w);if(e(T)){var O=d(E,T);if(O<0||O===0&&c(w))return!1}var I=g(w);if(e(I)){var O=d(E,I);if(O>0||O===0&&l(w))return!1}return!0},r.filter=function(w,E){return function(d){return r.contains(w,d,E)}}}),kl=h((r,e)=>{u();var t=NE(),n=Symbol("none");e.exports=function(o){let i=t.lowerBound(o,n),a=t.upperBound(o,n),s=t.lowerBoundExclusive(o,n),c=t.upperBoundExclusive(o,n);return i!==n&&a!==n?IDBKeyRange.bound(i,a,s,c):i!==n?IDBKeyRange.lowerBound(i,s):a!==n?IDBKeyRange.upperBound(a,c):null}}),Fl=h((r,e)=>{u();var t=ct().Buffer,n=function(){if(global$1.TextDecoder){let a=new TextDecoder("utf-8");return a.decode.bind(a)}else return function(a){return i(a).toString()}}(),o=function(){if(global$1.TextDecoder){let a=new TextDecoder("utf-8");return a.decode.bind(a)}else return function(a){return t.from(a).toString()}}();function i(a){let s=t.from(a.buffer);return a.byteLength===a.buffer.byteLength?s:s.slice(a.byteOffset,a.byteOffset+a.byteLength)}e.exports=function(a,s){return a instanceof Uint8Array?s?i(a):n(a):a instanceof ArrayBuffer?s?t.from(a):o(a):s?t.from(String(a)):String(a)}}),KE=h((r,e)=>{u();var t=Te(),n=Nt().AbstractIterator,o=kl(),i=Fl(),a=function(){};e.exports=s;function s(c,l,f){if(n.call(this,c),this._limit=f.limit,this._count=0,this._callback=null,this._cache=[],this._completed=!1,this._aborted=!1,this._error=null,this._transaction=null,this._keys=f.keys,this._values=f.values,this._keyAsBuffer=f.keyAsBuffer,this._valueAsBuffer=f.valueAsBuffer,this._limit===0){this._completed=!0;return}let g;try{g=o(f)}catch{this._completed=!0;return}this.createIterator(l,g,f.reverse)}t(s,n),s.prototype.createIterator=function(c,l,f){let g=this.db.db.transaction([c],"readonly"),D=g.objectStore(c).openCursor(l,f?"prev":"next");D.onsuccess=w=>{let E=w.target.result;E&&this.onItem(E)},this._transaction=g,g.onabort=()=>{this.onAbort(this._transaction.error||new Error("aborted by user"))},g.oncomplete=()=>{this.onComplete()}},s.prototype.onItem=function(c){this._cache.push(c.key,c.value),(this._limit<=0||++this._count<this._limit)&&c.continue(),this.maybeNext()},s.prototype.onAbort=function(c){this._aborted=!0,this._error=c,this.maybeNext()},s.prototype.onComplete=function(){this._completed=!0,this.maybeNext()},s.prototype.maybeNext=function(){this._callback&&(this._next(this._callback),this._callback=null)},s.prototype._next=function(c){if(this._aborted){let l=this._error;this._error=null,this._nextTick(c,l)}else if(this._cache.length>0){let l=this._cache.shift(),f=this._cache.shift();this._keys&&l!==void 0?l=this._deserializeKey(l,this._keyAsBuffer):l=void 0,this._values&&f!==void 0?f=this._deserializeValue(f,this._valueAsBuffer):f=void 0,this._nextTick(c,null,l,f)}else this._completed?this._nextTick(c):this._callback=c},s.prototype._deserializeKey=i,s.prototype._deserializeValue=i,s.prototype._end=function(c){if(this._aborted||this._completed)return this._nextTick(c,this._error);this.onItem=a,this.onAbort=c,this.onComplete=c}}),VE=h((r,e)=>{u();var t=ct().Buffer,n=function(){if(global$1.TextEncoder){let o=new TextEncoder("utf-8");return o.encode.bind(o)}else return t.from}();e.exports=function(o,i){return i?t.isBuffer(o)?o:n(String(o)):String(o)}}),GE=h(r=>{u();var e=ct().Buffer;r.test=function(t){return function(n){try{return n.cmp(t,0),!0}catch{return!1}}},r.bufferKeys=r.test(e.alloc(0))}),JE=h((r,e)=>{u(),e.exports=function(t,n,o,i,a){if(i.limit===0)return t._nextTick(a);let s=t.db.transaction([n],"readwrite"),c=s.objectStore(n),l=0;s.oncomplete=function(){a()},s.onabort=function(){a(s.error||new Error("aborted by user"))};let f=c.openKeyCursor?"openKeyCursor":"openCursor",g=i.reverse?"prev":"next";c[f](o,g).onsuccess=function(D){let w=D.target.result;w&&(c.delete(w.key).onsuccess=function(){(i.limit<=0||++l<i.limit)&&w.continue()})}}}),e_=h((r,e)=>{u(),e.exports=D;var t=Nt().AbstractLevelDOWN,n=Te(),o=kE(),i=KE(),a=VE(),s=Fl(),c=GE(),l=JE(),f=kl(),g="level-js-";function D(w,E){if(!(this instanceof D))return new D(w,E);if(t.call(this,{bufferKeys:c.bufferKeys(indexedDB),snapshots:!0,permanence:!0,clear:!0,getMany:!0}),E=E||{},typeof w!="string")throw new Error("constructor requires a location string argument");this.location=w,this.prefix=E.prefix==null?g:E.prefix,this.version=parseInt(E.version||1,10)}n(D,t),D.prototype.type="level-js",D.prototype._open=function(w,E){let d=indexedDB.open(this.prefix+this.location,this.version);d.onerror=function(){E(d.error||new Error("unknown error"))},d.onsuccess=()=>{this.db=d.result,E()},d.onupgradeneeded=T=>{let O=T.target.result;O.objectStoreNames.contains(this.location)||O.createObjectStore(this.location)}},D.prototype.store=function(w){return this.db.transaction([this.location],w).objectStore(this.location)},D.prototype.await=function(w,E){let d=w.transaction;d.onabort=function(){E(d.error||new Error("aborted by user"))},d.oncomplete=function(){E(null,w.result)}},D.prototype._get=function(w,E,d){let T=this.store("readonly"),O;try{O=T.get(w)}catch(I){return this._nextTick(d,I)}this.await(O,function(I,j){if(I)return d(I);if(j===void 0)return d(new Error("NotFound"));d(null,s(j,E.asBuffer))})},D.prototype._getMany=function(w,E,d){let T=E.asBuffer,O=this.store("readonly"),I=w.map(j=>q=>{let H;try{H=O.get(j)}catch(L){return q(L)}H.onsuccess=()=>{let L=H.result;q(null,L===void 0?L:s(L,T))},H.onerror=L=>{L.stopPropagation(),q(H.error)}});o(I,16,d)},D.prototype._del=function(w,E,d){let T=this.store("readwrite"),O;try{O=T.delete(w)}catch(I){return this._nextTick(d,I)}this.await(O,d)},D.prototype._put=function(w,E,d,T){let O=this.store("readwrite"),I;try{I=O.put(E,w)}catch(j){return this._nextTick(T,j)}this.await(I,T)},D.prototype._serializeKey=function(w){return a(w,this.supports.bufferKeys)},D.prototype._serializeValue=function(w){return a(w,!0)},D.prototype._iterator=function(w){return new i(this,this.location,w)},D.prototype._batch=function(w,E,d){if(w.length===0)return this._nextTick(d);let T=this.store("readwrite"),O=T.transaction,I=0,j;O.onabort=function(){d(j||O.error||new Error("aborted by user"))},O.oncomplete=function(){d()};function q(){let H=w[I++],L=H.key,J;try{J=H.type==="del"?T.delete(L):T.put(H.value,L)}catch(X){j=X,O.abort();return}I<w.length&&(J.onsuccess=q)}q()},D.prototype._clear=function(w,E){let d,T;try{d=f(w)}catch{return this._nextTick(E)}if(w.limit>=0)return l(this,this.location,d,w,E);try{let O=this.store("readwrite");T=d?O.delete(d):O.clear()}catch(O){return this._nextTick(E,O)}this.await(T,E)},D.prototype._close=function(w){this.db.close(),this._nextTick(w)},D.prototype.upgrade=function(w){if(this.status!=="open")return this._nextTick(w,new Error("cannot upgrade() before open()"));let E=this.iterator(),d={},T=this;E._deserializeKey=E._deserializeValue=q,O();function O(H){if(H)return j(H);E.next(I)}function I(H,L,J){if(H||L===void 0)return j(H);let X=T._serializeKey(s(L,!0)),re=T._serializeValue(s(J,!0));T._batch([{type:"del",key:L},{type:"put",key:X,value:re}],d,O)}function j(H){E.end(function(L){w(H||L)})}function q(H){return H}},D.destroy=function(w,E,d){typeof E=="function"&&(d=E,E=g);let T=indexedDB.deleteDatabase(E+w);T.onsuccess=function(){d()},T.onerror=function(O){d(O)}}}),r_=h((r,e)=>{u(),e.exports=BE()(e_())}),s_=h((r,e)=>{u();var t=Fi();e.exports=n=>{n=n||{};let o;typeof n=="function"?(o=n,n={}):o=n.onEnd;let i=new t,a,s,c,l=()=>{if(!i.isEmpty()){if(n.writev){let I,j=[];for(;!i.isEmpty();){if(I=i.shift(),I.error)throw I.error;j.push(I.value)}return{done:I.done,value:j}}let O=i.shift();if(O.error)throw O.error;return O}return c?{done:!0}:new Promise((O,I)=>{s=j=>(s=null,j.error?I(j.error):n.writev&&!j.done?O({done:j.done,value:[j.value]}):O(j),a)})},f=O=>s?s(O):(i.push(O),a),g=O=>(i=new t,s?s({error:O}):(i.push({error:O}),a)),D=O=>c?a:f({done:!1,value:O}),w=O=>c?a:(c=!0,O?g(O):f({done:!0})),E=()=>(i=new t,w(),{done:!0}),d=O=>(w(O),{done:!0});if(a={[Symbol.asyncIterator](){return this},next:l,return:E,throw:d,push:D,end:w},!o)return a;let T=a;return a={[Symbol.asyncIterator](){return this},next(){return T.next()},throw(O){return T.throw(O),o&&(o(O),o=null),{done:!0}},return(){return T.return(),o&&(o(),o=null),{done:!0}},push:D,end(O){return T.end(O),o&&(o(O),o=null),a}},a}});u();u();var cf=_(za(),1),Xw=_(We(),1),Ir=_(dt(),1);u();u();u();ge();u();xo();ke();yt();var Tt="/",np=new TextEncoder().encode(Tt),To=np[0],A=class{constructor(r,e){if(typeof r=="string")this._buf=oe(r);else if(r instanceof Uint8Array)this._buf=r;else throw new Error("Invalid key, should be String of Uint8Array");if(e==null&&(e=!0),e&&this.clean(),this._buf.byteLength===0||this._buf[0]!==To)throw new Error("Invalid key")}toString(r="utf8"){return de(this._buf,r)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(r){return new A(r.join(Tt))}static random(){return new A(eu().replace(/-/g,""))}static asKey(r){return r instanceof Uint8Array||typeof r=="string"?new A(r):r.uint8Array?new A(r.uint8Array()):null}clean(){if((!this._buf||this._buf.byteLength===0)&&(this._buf=np),this._buf[0]!==To){let r=new Uint8Array(this._buf.byteLength+1);r.fill(To,0,1),r.set(this._buf,1),this._buf=r}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===To;)this._buf=this._buf.subarray(0,-1)}less(r){let e=this.list(),t=r.list();for(let n=0;n<e.length;n++){if(t.length<n+1)return!1;let o=e[n],i=t[n];if(o<i)return!0;if(o>i)return!1}return e.length<t.length}reverse(){return A.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let r=this.namespaces();return r[r.length-1]}list(){return this.toString().split(Tt).slice(1)}type(){return gx(this.baseNamespace())}name(){return mx(this.baseNamespace())}instance(r){return new A(this.toString()+":"+r)}path(){let r=this.parent().toString();return r.endsWith(Tt)||(r+=Tt),r+=this.type(),new A(r)}parent(){let r=this.list();return r.length===1?new A(Tt):new A(r.slice(0,-1).join(Tt))}child(r){return this.toString()===Tt?r:r.toString()===Tt?this:new A(this.toString()+r.toString(),!1)}isAncestorOf(r){return r.toString()===this.toString()?!1:r.toString().startsWith(this.toString())}isDecendantOf(r){return r.toString()===this.toString()?!1:this.toString().startsWith(r.toString())}isTopLevel(){return this.list().length===1}concat(...r){return A.withNamespaces([...this.namespaces(),...wx(r.map(e=>e.namespaces()))])}};function gx(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function mx(r){let e=r.split(":");return e[e.length-1]}function wx(r){return[].concat(...r)}var sp=_(We(),1),ap=_(Eu(),1);ht();ci();pt();var vx=(0,sp.default)("ipfs:repo:migrator:migration-8");function up(r){return r.child?up(r.child):r}function Ex(r){try{let e=U.decode(`b${r.toString().toLowerCase().slice(1)}`),t=S.decode(e).multihash.bytes,n=U.encode(t).slice(1).toUpperCase();return new A(`/${n}`,!1)}catch{return r}}function _x(r){try{let e=U.decode(`b${r.toString().toLowerCase().slice(1)}`),t=Ve(e),n=U.encode(S.createV1(ui,t).bytes).slice(1);return new A(`/${n.toUpperCase()}`,!1)}catch{return r}}async function op(r,e,t){let n=r.blocks;await n.open();let o=up(n),i=await(0,ap.default)(o.queryKeys({filters:[a=>t(a).toString()!==a.toString()]}));try{let a=0;for await(let s of o.query({})){let c=t(s.key);c.toString()!==s.key.toString()&&(a+=1,vx(`Migrating Block from ${s.key} to ${c}`,await o.has(s.key)),await o.delete(s.key),await o.put(c,s.value),e(a/i*100,`Migrated Block from ${s.key} to ${c}`))}}finally{await n.close()}}var cp={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(r,e=()=>{})=>op(r,e,Ex),revert:(r,e=()=>{})=>op(r,e,_x)};u();ge();u();ge();u();var xx=new TextDecoder;function _u(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");let o=r[e++];if(t+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[t,e]}function Io(r,e){let t;[t,e]=_u(r,e);let n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function fp(r,e){let t;return[t,e]=_u(r,e),[t&7,t>>3,e]}function Dx(r){let e={},t=r.length,n=0;for(;n<t;){let o,i;if([o,i,n]=fp(r,n),i===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=Io(r,n)}else if(i===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let a;[a,n]=Io(r,n),e.Name=xx.decode(a)}else if(i===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[e.Tsize,n]=_u(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${i}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function lp(r){let e=r.length,t=0,n,o=!1,i;for(;t<e;){let s,c;if([s,c,t]=fp(r,t),s!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${s}`);if(c===1){if(i)throw new Error("protobuf: (PBNode) duplicate Data section");[i,t]=Io(r,t),n&&(o=!0)}else if(c===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let l;[l,t]=Io(r,t),n.push(Dx(l))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");let a={};return i&&(a.Data=i),a.Links=n||[],a}u();var pp=new TextEncoder,dp=2**32,Ax=2**31;function Sx(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=li(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){let n=pp.encode(r.Name);t-=n.length,e.set(n,t),t=li(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=li(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function hp(r){let e=Ox(r),t=new Uint8Array(e),n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=li(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let o=r.Links.length-1;o>=0;o--){let i=Sx(r.Links[o],t.subarray(0,n));n-=i,n=li(t,n,i)-1,t[n]=18}return t}function Cx(r){let e=0;if(r.Hash){let t=r.Hash.length;e+=1+t+cn(t)}if(typeof r.Name=="string"){let t=pp.encode(r.Name).length;e+=1+t+cn(t)}return typeof r.Tsize=="number"&&(e+=1+cn(r.Tsize)),e}function Ox(r){let e=0;if(r.Data){let t=r.Data.length;e+=1+t+cn(t)}if(r.Links)for(let t of r.Links){let n=Cx(t);e+=1+n+cn(n)}return e}function li(r,e,t){e-=cn(t);let n=e;for(;t>=Ax;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function cn(r){return r%2===0&&r++,Math.floor((Tx(r)+6)/7)}function Tx(r){let e=0;return r>=dp&&(r=Math.floor(r/dp),e=32),r>=1<<16&&(r>>>=16,e+=16),r>=1<<8&&(r>>>=8,e+=8),e+Ix[r]}var Ix=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];u();ge();var Rx=["Data","Links"],Bx=["Hash","Name","Tsize"],yp=new TextEncoder;function Px(r,e){if(r===e)return 0;let t=r.Name?yp.encode(r.Name):[],n=e.Name?yp.encode(e.Name):[],o=t.length,i=n.length;for(let a=0,s=Math.min(o,i);a<s;++a)if(t[a]!==n[a]){o=t[a],i=n[a];break}return o<i?-1:i<o?1:0}function gp(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function mp(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");if(!gp(r,Rx))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<r.Links.length;e++){let t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!gp(t,Bx))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!t.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash.asCID!==t.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0&&(typeof t.Tsize!="number"||t.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&Px(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}var It=112;function di(r){mp(r);let e={};return r.Links&&(e.Links=r.Links.map(t=>{let n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),hp(e)}function pi$1(r){let e=lp(r),t={};return e.Data&&(t.Data=e.Data),e.Links&&(t.Links=e.Links.map(n=>{let o={};try{o.Hash=S.decode(n.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(o.Name=n.Name),n.Tsize!==void 0&&(o.Tsize=n.Tsize),o})),t}u();u();u();var kx=["string","number","bigint","symbol"],Fx=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function wp(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let e=typeof r;return kx.includes(e)?e:e==="function"?"Function":Array.isArray(r)?"Array":Nx(r)?"Buffer":Lx(r)||"Object"}function Nx(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function Lx(r){let e=Object.prototype.toString.call(r).slice(8,-1);if(Fx.includes(e))return e}u();var m=class{constructor(r,e,t){this.major=r,this.majorEncoded=r<<5,this.name=e,this.terminal=t}toString(){return`Type[${this.major}].${this.name}`}compare(r){return this.major<r.major?-1:this.major>r.major?1:0}};m.uint=new m(0,"uint",!0);m.negint=new m(1,"negint",!0);m.bytes=new m(2,"bytes",!0);m.string=new m(3,"string",!0);m.array=new m(4,"array",!1);m.map=new m(5,"map",!1);m.tag=new m(6,"tag",!1);m.float=new m(7,"float",!0);m.false=new m(7,"false",!0);m.true=new m(7,"true",!0);m.null=new m(7,"null",!0);m.undefined=new m(7,"undefined",!0);m.break=new m(7,"break",!0);var x$1=class{constructor(r,e,t){this.type=r,this.value=e,this.encodedLength=t,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};u();u();var fn=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Mx=new TextDecoder,jx=new TextEncoder;function Ro(r){return fn&&globalThis.Buffer.isBuffer(r)}function Du(r){return r instanceof Uint8Array?Ro(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}var _p=fn?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):vp(r,e,t):(r,e,t)=>t-e>64?Mx.decode(r.subarray(e,t)):vp(r,e,t),xp=fn?r=>r.length>64?globalThis.Buffer.from(r):bp(r):r=>r.length>64?jx.encode(r):bp(r),gt=r=>Uint8Array.from(r),ln=fn?(r,e,t)=>Ro(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),Dp=fn?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),Du(globalThis.Buffer.concat(r,e))):(r,e)=>{let t=new Uint8Array(e),n=0;for(let o of r)n+o.length>t.length&&(o=o.subarray(0,t.length-n)),t.set(o,n),n+=o.length;return t},Ap=fn?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function Sp(r,e){if(Ro(r)&&Ro(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function bp(r,e=1/0){let t,n=r.length,o=null,i=[];for(let a=0;a<n;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!o){if(t>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=t;continue}if(t<56320){(e-=3)>-1&&i.push(239,191,189),o=t;continue}t=(o-55296<<10|t-56320)+65536}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,t<128){if((e-=1)<0)break;i.push(t)}else if(t<2048){if((e-=2)<0)break;i.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;i.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;i.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return i}function vp(r,e,t){let n=[];for(;e<t;){let o=r[e],i=null,a=o>239?4:o>223?3:o>191?2:1;if(e+a<=t){let s,c,l,f;switch(a){case 1:o<128&&(i=o);break;case 2:s=r[e+1],(s&192)===128&&(f=(o&31)<<6|s&63,f>127&&(i=f));break;case 3:s=r[e+1],c=r[e+2],(s&192)===128&&(c&192)===128&&(f=(o&15)<<12|(s&63)<<6|c&63,f>2047&&(f<55296||f>57343)&&(i=f));break;case 4:s=r[e+1],c=r[e+2],l=r[e+3],(s&192)===128&&(c&192)===128&&(l&192)===128&&(f=(o&15)<<18|(s&63)<<12|(c&63)<<6|l&63,f>65535&&f<1114112&&(i=f))}}i===null?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),e+=a}return qx(n)}var Ep=4096;function qx(r){let e=r.length;if(e<=Ep)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=Ep));return t}var Ux=256,hi=class{constructor(r=Ux){this.chunkSize=r,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(r){let e=this.chunks[this.chunks.length-1];if(this.cursor+r.length<=this.maxCursor+1){let t=e.length-(this.maxCursor-this.cursor)-1;e.set(r,t)}else{if(e){let t=e.length-(this.maxCursor-this.cursor)-1;t<e.length&&(this.chunks[this.chunks.length-1]=e.subarray(0,t),this.maxCursor=this.cursor-1)}r.length<64&&r.length<this.chunkSize?(e=Ap(this.chunkSize),this.chunks.push(e),this.maxCursor+=e.length,this._initReuseChunk===null&&(this._initReuseChunk=e),e.set(r,0)):(this.chunks.push(r),this.maxCursor+=r.length)}this.cursor+=r.length}toBytes(r=!1){let e;if(this.chunks.length===1){let t=this.chunks[0];r&&this.cursor>t.length/2?(e=this.cursor===t.length?t:t.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=ln(t,0,this.cursor)}else e=Dp(this.chunks,this.cursor);return r&&this.reset(),e}};u();var C="CBOR decode error:",Au="CBOR encode error:";function Rt(r,e,t){if(r.length-e<t)throw new Error(`${C} not enough data for type`)}u();u();var te=[24,256,65536,4294967296,BigInt("18446744073709551616")];function De(r,e,t){Rt(r,e,1);let n=r[e];if(t.strict===!0&&n<te[0])throw new Error(`${C} integer encoded in more bytes than necessary (strict decode)`);return n}function Ae(r,e,t){Rt(r,e,2);let n=r[e]<<8|r[e+1];if(t.strict===!0&&n<te[1])throw new Error(`${C} integer encoded in more bytes than necessary (strict decode)`);return n}function Se(r,e,t){Rt(r,e,4);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<te[2])throw new Error(`${C} integer encoded in more bytes than necessary (strict decode)`);return n}function Ce(r,e,t){Rt(r,e,8);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],o=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],i=(BigInt(n)<<BigInt(32))+BigInt(o);if(t.strict===!0&&i<te[3])throw new Error(`${C} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(t.allowBigInt===!0)return i;throw new Error(`${C} integers outside of the safe integer range are not supported`)}function Cp(r,e,t,n){return new x$1(m.uint,De(r,e+1,n),2)}function Op(r,e,t,n){return new x$1(m.uint,Ae(r,e+1,n),3)}function Tp(r,e,t,n){return new x$1(m.uint,Se(r,e+1,n),5)}function Ip(r,e,t,n){return new x$1(m.uint,Ce(r,e+1,n),9)}function Fe(r,e){return se(r,0,e.value)}function se(r,e,t){if(t<te[0]){let n=Number(t);r.push([e|n])}else if(t<te[1]){let n=Number(t);r.push([e|24,n])}else if(t<te[2]){let n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<te[3]){let n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<te[4]){let o=[e|27,0,0,0,0,0,0,0],i=Number(n&BigInt(4294967295)),a=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=i&255,i=i>>8,o[7]=i&255,i=i>>8,o[6]=i&255,i=i>>8,o[5]=i&255,o[4]=a&255,a=a>>8,o[3]=a&255,a=a>>8,o[2]=a&255,a=a>>8,o[1]=a&255,r.push(o)}else throw new Error(`${C} encountered BigInt larger than allowable range`)}}Fe.encodedSize=function(r){return se.encodedSize(r.value)};se.encodedSize=function(r){return r<te[0]?1:r<te[1]?2:r<te[2]?3:r<te[3]?5:9};Fe.compareTokens=function(r,e){return r.value<e.value?-1:r.value>e.value?1:0};u();function Rp(r,e,t,n){return new x$1(m.negint,-1-De(r,e+1,n),2)}function Bp(r,e,t,n){return new x$1(m.negint,-1-Ae(r,e+1,n),3)}function Pp(r,e,t,n){return new x$1(m.negint,-1-Se(r,e+1,n),5)}var Su=BigInt(-1),kp=BigInt(1);function Fp(r,e,t,n){let o=Ce(r,e+1,n);if(typeof o!="bigint"){let i=-1-o;if(i>=Number.MIN_SAFE_INTEGER)return new x$1(m.negint,i,9)}if(n.allowBigInt!==!0)throw new Error(`${C} integers outside of the safe integer range are not supported`);return new x$1(m.negint,Su-BigInt(o),9)}function Bo(r,e){let t=e.value,n=typeof t=="bigint"?t*Su-kp:t*-1-1;se(r,e.type.majorEncoded,n)}Bo.encodedSize=function(r){let e=r.value,t=typeof e=="bigint"?e*Su-kp:e*-1-1;return t<te[0]?1:t<te[1]?2:t<te[2]?3:t<te[3]?5:9};Bo.compareTokens=function(r,e){return r.value<e.value?1:r.value>e.value?-1:0};u();function gi(r,e,t,n){Rt(r,e,t+n);let o=ln(r,e+t,e+t+n);return new x$1(m.bytes,o,t+n)}function Np(r,e,t,n){return gi(r,e,1,t)}function Lp(r,e,t,n){return gi(r,e,2,De(r,e+1,n))}function Mp(r,e,t,n){return gi(r,e,3,Ae(r,e+1,n))}function jp(r,e,t,n){return gi(r,e,5,Se(r,e+1,n))}function qp(r,e,t,n){let o=Ce(r,e+1,n);if(typeof o=="bigint")throw new Error(`${C} 64-bit integer bytes lengths not supported`);return gi(r,e,9,o)}function Po(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===m.string?xp(r.value):r.value),r.encodedBytes}function dn(r,e){let t=Po(e);se(r,e.type.majorEncoded,t.length),r.push(t)}dn.encodedSize=function(r){let e=Po(r);return se.encodedSize(e.length)+e.length};dn.compareTokens=function(r,e){return Kx(Po(r),Po(e))};function Kx(r,e){return r.length<e.length?-1:r.length>e.length?1:Sp(r,e)}u();function mi(r,e,t,n,o){let i=t+n;Rt(r,e,i);let a=new x$1(m.string,_p(r,e+t,e+i),i);return o.retainStringBytes===!0&&(a.byteValue=ln(r,e+t,e+i)),a}function Up(r,e,t,n){return mi(r,e,1,t,n)}function $p(r,e,t,n){return mi(r,e,2,De(r,e+1,n),n)}function Kp(r,e,t,n){return mi(r,e,3,Ae(r,e+1,n),n)}function zp(r,e,t,n){return mi(r,e,5,Se(r,e+1,n),n)}function Wp(r,e,t,n){let o=Ce(r,e+1,n);if(typeof o=="bigint")throw new Error(`${C} 64-bit integer string lengths not supported`);return mi(r,e,9,o,n)}var Vp=dn;u();function pn(r,e,t,n){return new x$1(m.array,n,t)}function Gp(r,e,t,n){return pn(r,e,1,t)}function Hp(r,e,t,n){return pn(r,e,2,De(r,e+1,n))}function Jp(r,e,t,n){return pn(r,e,3,Ae(r,e+1,n))}function Yp(r,e,t,n){return pn(r,e,5,Se(r,e+1,n))}function Qp(r,e,t,n){let o=Ce(r,e+1,n);if(typeof o=="bigint")throw new Error(`${C} 64-bit integer array lengths not supported`);return pn(r,e,9,o)}function Zp(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${C} indefinite length items not allowed`);return pn(r,e,1,1/0)}function ko(r,e){se(r,m.array.majorEncoded,e.value)}ko.compareTokens=Fe.compareTokens;ko.encodedSize=function(r){return se.encodedSize(r.value)};u();function hn(r,e,t,n){return new x$1(m.map,n,t)}function Xp(r,e,t,n){return hn(r,e,1,t)}function eh(r,e,t,n){return hn(r,e,2,De(r,e+1,n))}function th(r,e,t,n){return hn(r,e,3,Ae(r,e+1,n))}function rh(r,e,t,n){return hn(r,e,5,Se(r,e+1,n))}function nh(r,e,t,n){let o=Ce(r,e+1,n);if(typeof o=="bigint")throw new Error(`${C} 64-bit integer map lengths not supported`);return hn(r,e,9,o)}function ih(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${C} indefinite length items not allowed`);return hn(r,e,1,1/0)}function Fo(r,e){se(r,m.map.majorEncoded,e.value)}Fo.compareTokens=Fe.compareTokens;Fo.encodedSize=function(r){return se.encodedSize(r.value)};u();function oh(r,e,t,n){return new x$1(m.tag,t,1)}function sh(r,e,t,n){return new x$1(m.tag,De(r,e+1,n),2)}function ah(r,e,t,n){return new x$1(m.tag,Ae(r,e+1,n),3)}function uh(r,e,t,n){return new x$1(m.tag,Se(r,e+1,n),5)}function ch(r,e,t,n){return new x$1(m.tag,Ce(r,e+1,n),9)}function No(r,e){se(r,m.tag.majorEncoded,e.value)}No.compareTokens=Fe.compareTokens;No.encodedSize=function(r){return se.encodedSize(r.value)};u();var Jx=20,Yx=21,Qx=22,Zx=23;function fh(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${C} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new x$1(m.null,null,1):new x$1(m.undefined,void 0,1)}function lh(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${C} indefinite length items not allowed`);return new x$1(m.break,void 0,1)}function Cu(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${C} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${C} Infinity values are not supported`)}return new x$1(m.float,r,e)}function dh(r,e,t,n){return Cu(Ou(r,e+1),3,n)}function ph(r,e,t,n){return Cu(Tu(r,e+1),5,n)}function hh(r,e,t,n){return Cu(wh(r,e+1),9,n)}function Lo(r,e,t){let n=e.value;if(n===!1)r.push([m.float.majorEncoded|Jx]);else if(n===!0)r.push([m.float.majorEncoded|Yx]);else if(n===null)r.push([m.float.majorEncoded|Qx]);else if(n===void 0)r.push([m.float.majorEncoded|Zx]);else{let o,i=!1;(!t||t.float64!==!0)&&(gh(n),o=Ou(Je,1),n===o||Number.isNaN(n)?(Je[0]=249,r.push(Je.slice(0,3)),i=!0):(mh(n),o=Tu(Je,1),n===o&&(Je[0]=250,r.push(Je.slice(0,5)),i=!0))),i||(Xx(n),o=wh(Je,1),Je[0]=251,r.push(Je.slice(0,9)))}}Lo.encodedSize=function(r,e){let t=r.value;if(t===!1||t===!0||t===null||t===void 0)return 1;if(!e||e.float64!==!0){gh(t);let n=Ou(Je,1);if(t===n||Number.isNaN(t))return 3;if(mh(t),n=Tu(Je,1),t===n)return 5}return 9};var yh=new ArrayBuffer(9),Ne=new DataView(yh,1),Je=new Uint8Array(yh,0);function gh(r){if(r===1/0)Ne.setUint16(0,31744,!1);else if(r===-1/0)Ne.setUint16(0,64512,!1);else if(Number.isNaN(r))Ne.setUint16(0,32256,!1);else{Ne.setFloat32(0,r);let e=Ne.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)Ne.setUint16(0,31744,!1);else if(t===0)Ne.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let o=t-127;o<-24?Ne.setUint16(0,0):o<-14?Ne.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):Ne.setUint16(0,(e&2147483648)>>16|o+15<<10|n>>13,!1)}}}function Ou(r,e){if(r.length-e<2)throw new Error(`${C} not enough data for float16`);let t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,o=t&1023,i;return n===0?i=o*2**-24:n!==31?i=(o+1024)*2**(n-25):i=o===0?1/0:NaN,t&32768?-i:i}function mh(r){Ne.setFloat32(0,r,!1)}function Tu(r,e){if(r.length-e<4)throw new Error(`${C} not enough data for float32`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function Xx(r){Ne.setFloat64(0,r,!1)}function wh(r,e){if(r.length-e<8)throw new Error(`${C} not enough data for float64`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}Lo.compareTokens=Fe.compareTokens;function N(r,e,t){throw new Error(`${C} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function Mo(r){return()=>{throw new Error(`${C} ${r}`)}}var v=[];for(let r=0;r<=23;r++)v[r]=N;v[24]=Cp;v[25]=Op;v[26]=Tp;v[27]=Ip;v[28]=N;v[29]=N;v[30]=N;v[31]=N;for(let r=32;r<=55;r++)v[r]=N;v[56]=Rp;v[57]=Bp;v[58]=Pp;v[59]=Fp;v[60]=N;v[61]=N;v[62]=N;v[63]=N;for(let r=64;r<=87;r++)v[r]=Np;v[88]=Lp;v[89]=Mp;v[90]=jp;v[91]=qp;v[92]=N;v[93]=N;v[94]=N;v[95]=Mo("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)v[r]=Up;v[120]=$p;v[121]=Kp;v[122]=zp;v[123]=Wp;v[124]=N;v[125]=N;v[126]=N;v[127]=Mo("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)v[r]=Gp;v[152]=Hp;v[153]=Jp;v[154]=Yp;v[155]=Qp;v[156]=N;v[157]=N;v[158]=N;v[159]=Zp;for(let r=160;r<=183;r++)v[r]=Xp;v[184]=eh;v[185]=th;v[186]=rh;v[187]=nh;v[188]=N;v[189]=N;v[190]=N;v[191]=ih;for(let r=192;r<=215;r++)v[r]=oh;v[216]=sh;v[217]=ah;v[218]=uh;v[219]=ch;v[220]=N;v[221]=N;v[222]=N;v[223]=N;for(let r=224;r<=243;r++)v[r]=Mo("simple values are not supported");v[244]=N;v[245]=N;v[246]=N;v[247]=fh;v[248]=Mo("simple values are not supported");v[249]=dh;v[250]=ph;v[251]=hh;v[252]=N;v[253]=N;v[254]=N;v[255]=lh;var Ye=[];for(let r=0;r<24;r++)Ye[r]=new x$1(m.uint,r,1);for(let r=-1;r>=-24;r--)Ye[31-r]=new x$1(m.negint,r,1);Ye[64]=new x$1(m.bytes,new Uint8Array(0),1);Ye[96]=new x$1(m.string,"",1);Ye[128]=new x$1(m.array,0,1);Ye[160]=new x$1(m.map,0,1);Ye[244]=new x$1(m.false,!1,1);Ye[245]=new x$1(m.true,!0,1);Ye[246]=new x$1(m.null,null,1);function bh(r){switch(r.type){case m.false:return gt([244]);case m.true:return gt([245]);case m.null:return gt([246]);case m.bytes:return r.value.length?void 0:gt([64]);case m.string:return r.value===""?gt([96]):void 0;case m.array:return r.value===0?gt([128]):void 0;case m.map:return r.value===0?gt([160]):void 0;case m.uint:return r.value<24?gt([Number(r.value)]):void 0;case m.negint:if(r.value>=-24)return gt([31-Number(r.value)])}}var t2={float64:!1,mapSorter:i2,quickEncodeToken:bh};function r2(){let r=[];return r[m.uint.major]=Fe,r[m.negint.major]=Bo,r[m.bytes.major]=dn,r[m.string.major]=Vp,r[m.array.major]=ko,r[m.map.major]=Fo,r[m.tag.major]=No,r[m.float.major]=Lo,r}var vh=r2(),Iu=new hi,yn=class{constructor(r,e){this.obj=r,this.parent=e}includes(r){let e=this;do if(e.obj===r)return!0;while(e=e.parent);return!1}static createCheck(r,e){if(r&&r.includes(e))throw new Error(`${Au} object contains circular references`);return new yn(e,r)}},Kt={null:new x$1(m.null,null),undefined:new x$1(m.undefined,void 0),true:new x$1(m.true,!0),false:new x$1(m.false,!1),emptyArray:new x$1(m.array,0),emptyMap:new x$1(m.map,0)},zt={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new x$1(m.float,r):r>=0?new x$1(m.uint,r):new x$1(m.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new x$1(m.uint,r):new x$1(m.negint,r)},Uint8Array(r,e,t,n){return new x$1(m.bytes,r)},string(r,e,t,n){return new x$1(m.string,r)},boolean(r,e,t,n){return r?Kt.true:Kt.false},null(r,e,t,n){return Kt.null},undefined(r,e,t,n){return Kt.undefined},ArrayBuffer(r,e,t,n){return new x$1(m.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new x$1(m.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[Kt.emptyArray,new x$1(m.break)]:Kt.emptyArray;n=yn.createCheck(n,r);let o=[],i=0;for(let a of r)o[i++]=jo(a,t,n);return t.addBreakTokens?[new x$1(m.array,r.length),o,new x$1(m.break)]:[new x$1(m.array,r.length),o]},Object(r,e,t,n){let o=e!=="Object",i=o?r.keys():Object.keys(r),a=o?r.size:i.length;if(!a)return t.addBreakTokens===!0?[Kt.emptyMap,new x$1(m.break)]:Kt.emptyMap;n=yn.createCheck(n,r);let s=[],c=0;for(let l of i)s[c++]=[jo(l,t,n),jo(o?r.get(l):r[l],t,n)];return n2(s,t),t.addBreakTokens?[new x$1(m.map,a),s,new x$1(m.break)]:[new x$1(m.map,a),s]}};zt.Map=zt.Object;zt.Buffer=zt.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))zt[`${r}Array`]=zt.DataView;function jo(r,e={},t){let n=wp(r),o=e&&e.typeEncoders&&e.typeEncoders[n]||zt[n];if(typeof o=="function"){let a=o(r,n,e,t);if(a!=null)return a}let i=zt[n];if(!i)throw new Error(`${Au} unsupported type: ${n}`);return i(r,n,e,t)}function n2(r,e){e.mapSorter&&r.sort(e.mapSorter)}function i2(r,e){let t=Array.isArray(r[0])?r[0][0]:r[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==n.type)return t.type.compare(n.type);let o=t.type.major,i=vh[o].compareTokens(t,n);return i===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i}function Eh(r,e,t,n){if(Array.isArray(e))for(let o of e)Eh(r,o,t,n);else t[e.type.major](r,e,n)}function o2(r,e,t){let n=jo(r,t);if(!Array.isArray(n)&&t.quickEncodeToken){let o=t.quickEncodeToken(n);if(o)return o;let i=e[n.type.major];if(i.encodedSize){let a=i.encodedSize(n,t),s=new hi(a);if(i(s,n,t),s.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return Du(s.chunks[0])}}return Iu.reset(),Eh(Iu,n,e,t),Iu.toBytes(!0)}function wr(r,e){return e=Object.assign({},t2,e),o2(r,vh,e)}u();var s2={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},Ru=class{constructor(r,e={}){this.pos=0,this.data=r,this.options=e}done(){return this.pos>=this.data.length}next(){let r=this.data[this.pos],e=Ye[r];if(e===void 0){let t=v[r];if(!t)throw new Error(`${C} no decoder for major type ${r>>>5} (byte 0x${r.toString(16).padStart(2,"0")})`);let n=r&31;e=t(this.data,this.pos,n,this.options)}return this.pos+=e.encodedLength,e}},wi=Symbol.for("DONE"),qo=Symbol.for("BREAK");function a2(r,e,t){let n=[];for(let o=0;o<r.value;o++){let i=bi(e,t);if(i===qo){if(r.value===1/0)break;throw new Error(`${C} got unexpected break to lengthed array`)}if(i===wi)throw new Error(`${C} found array but not enough entries (got ${o}, expected ${r.value})`);n[o]=i}return n}function u2(r,e,t){let n=t.useMaps===!0,o=n?void 0:{},i=n?new Map:void 0;for(let a=0;a<r.value;a++){let s=bi(e,t);if(s===qo){if(r.value===1/0)break;throw new Error(`${C} got unexpected break to lengthed map`)}if(s===wi)throw new Error(`${C} found map but not enough entries (got ${a} [no key], expected ${r.value})`);if(n!==!0&&typeof s!="string")throw new Error(`${C} non-string keys not supported (got ${typeof s})`);let c=bi(e,t);if(c===wi)throw new Error(`${C} found map but not enough entries (got ${a} [no value], expected ${r.value})`);n?i.set(s,c):o[s]=c}return n?i:o}function bi(r,e){if(r.done())return wi;let t=r.next();if(t.type===m.break)return qo;if(t.type.terminal)return t.value;if(t.type===m.array)return a2(t,r,e);if(t.type===m.map)return u2(t,r,e);if(t.type===m.tag){if(e.tags&&typeof e.tags[t.value]=="function"){let n=bi(r,e);return e.tags[t.value](n)}throw new Error(`${C} tag not supported (${t.value})`)}throw new Error("unsupported")}function mt(r,e){if(!(r instanceof Uint8Array))throw new Error(`${C} data to decode must be a Uint8Array`);e=Object.assign({},s2,e);let t=e.tokenizer||new Ru(r,e),n=bi(t,e);if(n===wi)throw new Error(`${C} did not find any content to decode`);if(n===qo)throw new Error(`${C} got unexpected break`);if(!t.done())throw new Error(`${C} too many terminals, data makes no sense`);return n}u();ge();u();var Er=_(Ht(),1),by=Er.default.Reader,w2=Er.default.Writer;Er.default.util;var Wo=Er.default.roots.default||(Er.default.roots.default={}),vy=Wo.ipfs=(()=>{let r={};return r.pin=function(){let e={};return e.Set=function(){function t(n){if(n)for(var o=Object.keys(n),i=0;i<o.length;++i)n[o[i]]!=null&&(this[o[i]]=n[o[i]])}return t.prototype.version=0,t.prototype.fanout=0,t.prototype.seed=0,t.encode=function(n,o){return o||(o=w2.create()),n.version!=null&&Object.hasOwnProperty.call(n,"version")&&o.uint32(8).uint32(n.version),n.fanout!=null&&Object.hasOwnProperty.call(n,"fanout")&&o.uint32(16).uint32(n.fanout),n.seed!=null&&Object.hasOwnProperty.call(n,"seed")&&o.uint32(29).fixed32(n.seed),o},t.decode=function(n,o){n instanceof by||(n=by.create(n));for(var i=o===void 0?n.len:n.pos+o,a=new Wo.ipfs.pin.Set;n.pos<i;){var s=n.uint32();switch(s>>>3){case 1:a.version=n.uint32();break;case 2:a.fanout=n.uint32();break;case 3:a.seed=n.fixed32();break;default:n.skipType(s&7);break}}return a},t.fromObject=function(n){if(n instanceof Wo.ipfs.pin.Set)return n;var o=new Wo.ipfs.pin.Set;return n.version!=null&&(o.version=n.version>>>0),n.fanout!=null&&(o.fanout=n.fanout>>>0),n.seed!=null&&(o.seed=n.seed>>>0),o},t.toObject=function(n,o){o||(o={});var i={};return o.defaults&&(i.version=0,i.fanout=0,i.seed=0),n.version!=null&&n.hasOwnProperty("version")&&(i.version=n.version),n.fanout!=null&&n.hasOwnProperty("fanout")&&(i.fanout=n.fanout),n.seed!=null&&n.hasOwnProperty("seed")&&(i.seed=n.seed),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,Er.default.util.toJSONOptions)},t}(),e}(),r})(),ky=_(_y(),1),Jo=_(xi(),1);u();ht();ge();var Di=new A("/local/pins"),Go=256,By=8192,Hu=S.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),_r={direct:"direct",recursive:"recursive"};function Ju(r){return new A(`/${U.encode(r.multihash.bytes).toUpperCase().substring(1)}`)}Ho();u();function Py(r,e){for(let t=0;t<r.byteLength;t++){if(r[t]<e[t])return-1;if(r[t]>e[t])return 1}return r.byteLength>e.byteLength?1:r.byteLength<e.byteLength?-1:0}ke();yt();Do();var Qu=vy.pin.Set;function B2(r){let e=r.Data;if(!e)throw new Error("No data present");let t=Jo.default.decode(e),n=Jo.default.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+t>e.length)throw new Error("Impossibly large set header length");let o=e.slice(n,t+n),i=Qu.toObject(Qu.decode(o),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(i.version!==1)throw new Error(`Unsupported Set version: ${i.version}`);if(i.fanout>r.Links.length)throw new Error("Impossibly large fanout");return{header:i,data:e.slice(t+n)}}function P2(r,e){let t=new Uint8Array(4);new DataView(t.buffer).setUint32(0,r,!0);let n=oe(e.toString()),o=Ai([t,n],t.byteLength+n.byteLength);return(0,ky.default)(de(o))}async function*Fy(r,e){let t=B2(e),n=0;for(let o of e.Links){if(n<t.header.fanout){let i=o.Hash;if(!Hu.equals(i)){let a=await r.get(i),s=pi$1(a);yield*Fy(r,s)}}else yield o.Hash;n++}}async function*Si(r,e,t){let n=e.Links.find(a=>a.Name===t);if(!n)throw new Error("No link found with name "+t);let o=await r.get(n.Hash),i=pi$1(o);yield*Fy(r,i)}function k2(r,e){return t(e,0);async function t(n,o){let i=Qu.encode({version:1,fanout:Go,seed:o}).finish(),a=Jo.default.encode(i.length),s=Ai([a,i]),c=[];for(let f=0;f<Go;f++)c.push({Name:"",Tsize:1,Hash:Hu});if(n.length<=By){let f=n.map(D=>({link:{Name:"",Tsize:1,Hash:D.key},data:D.data||new Uint8Array})).sort((D,w)=>Py(D.link.Hash.bytes,w.link.Hash.bytes)),g=c.concat(f.map(D=>D.link));return{Data:Ai([s,...f.map(D=>D.data)]),Links:g}}else{let f=n.reduce((D,w)=>{let E=P2(o,w.key)%Go;return D[E]=E in D?D[E].concat([w]):[w],D},[]),g=0;for(let D of f){let w=await t(D,o+1);await l(w,g),g++}return{Data:s,Links:c}}async function l(f,g){let D=di(f),w=await un.digest(D),E=S.createV0(w);await r.put(E,D);let d=f.Links.reduce((T,O)=>T+(O.Tsize||0),0)+D.length;c[g]={Name:"",Tsize:d,Hash:E}}}}async function Zu(r,e,t){let n=await k2(r,t.map(c=>({key:c}))),o=di(n),i=await un.digest(o),a=S.createV0(i);await r.put(a,o);let s=n.Links.reduce((c,l)=>c+l.Tsize,0)+o.length;return{Name:e,Tsize:s,Hash:a}}var Yo=_(Eu(),1);Do();pt();ht();async function N2(r,e,t,n){if(!await e.has(Di))return;let o=await e.get(Di),i=S.decode(o),a=await r.get(i),s=pi$1(a),c=0,l=await(0,Yo.default)(Si(r,s,_r.recursive))+await(0,Yo.default)(Si(r,s,_r.direct));for await(let f of Si(r,s,_r.recursive)){c++;let g={depth:1/0};f.version!==0&&(g.version=f.version),f.code!==It&&(g.codec=f.code),await t.put(Ju(f),wr(g)),n(c/l*100,`Migrated recursive pin ${f}`)}for await(let f of Si(r,s,_r.direct)){c++;let g={depth:0};f.version!==0&&(g.version=f.version),f.code!==It&&(g.codec=f.code),await t.put(Ju(f),wr(g)),n(c/l*100,`Migrated direct pin ${f}`)}await r.delete(i),await e.delete(Di)}async function L2(r,e,t,n){let o=[],i=[],a=0,s=await(0,Yo.default)(t.queryKeys({}));for await(let{key:D,value:w}of t.query({})){a++;let E=mt(w),d=S.create(E.version||0,E.codec||It,Ve(U.decode("b"+D.toString().toLowerCase().split("/").pop())));E.depth===0?(n(a/s*100,`Reverted direct pin ${d}`),i.push(d)):(n(a/s*100,`Reverted recursive pin ${d}`),o.push(d))}n(100,"Updating pin root");let c={Links:[await Zu(r,_r.direct,i),await Zu(r,_r.recursive,o)]},l=di(c),f=await un.digest(l),g=S.createV0(f);await r.put(g,l),await e.put(Di,g.bytes)}async function Ny(r,e,t){let n=r.blocks,o=r.datastore,i=r.pins;await n.open(),await o.open(),await i.open();try{await t(n,o,i,e)}finally{await i.close(),await o.close(),await n.close()}}var Ly={version:9,description:"Migrates pins to datastore",migrate:(r,e=()=>{})=>Ny(r,e,N2),revert:(r,e=()=>{})=>Ny(r,e,L2)};u();u();var Me={};G(Me,{abortedError:()=>M2,dbDeleteFailedError:()=>ec,dbOpenFailedError:()=>Xu,dbWriteFailedError:()=>tc,notFoundError:()=>Bt});u();var mn=_(dt(),1);function Xu(r){return r=r||new Error("Cannot open database"),(0,mn.default)(r,"ERR_DB_OPEN_FAILED")}function ec(r){return r=r||new Error("Delete failed"),(0,mn.default)(r,"ERR_DB_DELETE_FAILED")}function tc(r){return r=r||new Error("Write failed"),(0,mn.default)(r,"ERR_DB_WRITE_FAILED")}function Bt(r){return r=r||new Error("Not Found"),(0,mn.default)(r,"ERR_NOT_FOUND")}function M2(r){return r=r||new Error("Aborted"),(0,mn.default)(r,"ERR_ABORTED")}var My=new A("/config"),Ci=new A("/version");function Oi(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}async function j2(r,e,t){let n=await e(r);if(n)return n;let o=Oi(t);return o?new Promise((i,a)=>{let s=o.store("readonly").get(r.toString());s.transaction.onabort=()=>{a(s.transaction.error)},s.transaction.oncomplete=()=>{i(Boolean(s.result))}}):!1}async function q2(r,e,t,n){if(await t(r))return e(r);let o=Oi(n);if(!o)throw Bt();return new Promise((i,a)=>{let s=o.store("readonly").get(r.toString());s.transaction.onabort=()=>{a(s.transaction.error)},s.transaction.oncomplete=()=>{if(s.result)return i(s.result);a(Bt())}})}function Qo(r){let e=r.get.bind(r),t=r.has.bind(r);return r.get=n=>q2(n,e,t,r),r.has=n=>j2(n,t,r),r}function rc(r){return{...r,root:Qo(r.root),datastore:Qo(r.datastore),pins:Qo(r.pins),keys:Qo(r.keys)}}yt();ke();async function U2(r,e,t=()=>{}){let n=Oi(e);if(!n){t(`${r} did not need an upgrade`);return}t(`Upgrading ${r}`),await $y(n,(o,i)=>[{type:"del",key:o},{type:"put",key:oe(o),value:i}])}async function $2(r,e,t=()=>{}){let n=Oi(e);if(!n){t(`${r} did not need a downgrade`);return}t(`Downgrading ${r}`),await $y(n,(o,i)=>[{type:"del",key:o},{type:"put",key:de(o),value:i}])}function qy(r){return r.child?qy(r.child):r}async function jy(r,e,t){let n=Object.entries(r).map(([a,s])=>({key:a,backend:qy(s)})).filter(({key:a,backend:s})=>s.constructor.name==="LevelDatastore").map(({key:a,backend:s})=>({name:a,store:s}));e(0,`Migrating ${n.length} dbs`);let o=0,i=a=>{e(Math.round(o/n.length*100),a)};for(let{name:a,store:s}of n){await s.open();try{await t(a,s,i)}finally{o++,await s.close()}}e(100,`Migrated ${n.length} dbs`)}var Uy={version:10,description:"Migrates datastore-level keys to binary",migrate:(r,e=()=>{})=>jy(r,e,U2),revert:(r,e=()=>{})=>jy(r,e,$2)};function $y(r,e){function t(n,o){let i=r.store("readwrite"),a=i.transaction,s=0,c;a.onabort=()=>o(c||a.error||new Error("aborted by user")),a.oncomplete=()=>o();function l(){let f=n[s++],g=f.key,D;try{D=f.type==="del"?i.delete(g):i.put(f.value,g)}catch(w){c=w,a.abort();return}s<n.length&&(D.onsuccess=l)}l()}return new Promise((n,o)=>{let i=r.iterator(),a=c=>c;i._deserializeKey=i._deserializeValue=a,s();function s(){let c=(l,f,g)=>{if(l||f===void 0){let D=w=>{if(w){o(w);return}n()};i.end(D);return}t(e(f,g),s)};i.next(c)}})}u();var Jt=new A("/local/filesroot");async function K2(r,e=()=>{}){if(e(100,"Migrating MFS root to repo datastore"),await r.root.open(),await r.datastore.open(),await r.root.has(Jt)){let t=await r.root.get(Jt);await r.datastore.put(Jt,t),await r.root.delete(Jt)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo datastore")}async function z2(r,e=()=>{}){if(e(100,"Migrating MFS root to repo root datastore"),await r.root.open(),await r.datastore.open(),await r.datastore.has(Jt)){let t=await r.datastore.get(Jt);await r.root.put(Jt,t),await r.datastore.delete(Jt)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo root datastore")}var Ky={version:11,description:"Store mfs root in the datastore",migrate:K2,revert:z2};u();var bc=_(Ht(),1);u();var xr=_(Ht(),1),zy=xr.default.Reader,W2=xr.default.Writer,V2=xr.default.util,Zo=xr.default.roots.default||(xr.default.roots.default={}),nc=Zo.Protocols=(()=>{function r(e){if(this.protocols=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.protocols=V2.emptyArray,r.encode=function(e,t){if(t||(t=W2.create()),e.protocols!=null&&e.protocols.length)for(var n=0;n<e.protocols.length;++n)t.uint32(10).string(e.protocols[n]);return t},r.decode=function(e,t){e instanceof zy||(e=zy.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new Zo.Protocols;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.protocols&&o.protocols.length||(o.protocols=[]),o.protocols.push(e.string());break;default:e.skipType(i&7);break}}return o},r.fromObject=function(e){if(e instanceof Zo.Protocols)return e;var t=new Zo.Protocols;if(e.protocols){if(!Array.isArray(e.protocols))throw TypeError(".Protocols.protocols: array expected");t.protocols=[];for(var n=0;n<e.protocols.length;++n)t.protocols[n]=String(e.protocols[n])}return t},r.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.protocols=[]),e.protocols&&e.protocols.length){n.protocols=[];for(var o=0;o<e.protocols.length;++o)n.protocols[o]=e.protocols[o]}return n},r.prototype.toJSON=function(){return this.constructor.toObject(this,xr.default.util.toJSONOptions)},r})();u();var Pt=_(Ht(),1),wn=Pt.default.Reader,ic=Pt.default.Writer,$=Pt.default.util,ne=Pt.default.roots.default||(Pt.default.roots.default={}),oc=ne.Addresses=(()=>{function r(e){if(this.addrs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.addrs=$.emptyArray,r.prototype.certifiedRecord=null,r.encode=function(e,t){if(t||(t=ic.create()),e.addrs!=null&&e.addrs.length)for(var n=0;n<e.addrs.length;++n)ne.Addresses.Address.encode(e.addrs[n],t.uint32(10).fork()).ldelim();return e.certifiedRecord!=null&&Object.hasOwnProperty.call(e,"certifiedRecord")&&ne.Addresses.CertifiedRecord.encode(e.certifiedRecord,t.uint32(18).fork()).ldelim(),t},r.decode=function(e,t){e instanceof wn||(e=wn.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new ne.Addresses;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.addrs&&o.addrs.length||(o.addrs=[]),o.addrs.push(ne.Addresses.Address.decode(e,e.uint32()));break;case 2:o.certifiedRecord=ne.Addresses.CertifiedRecord.decode(e,e.uint32());break;default:e.skipType(i&7);break}}return o},r.fromObject=function(e){if(e instanceof ne.Addresses)return e;var t=new ne.Addresses;if(e.addrs){if(!Array.isArray(e.addrs))throw TypeError(".Addresses.addrs: array expected");t.addrs=[];for(var n=0;n<e.addrs.length;++n){if(typeof e.addrs[n]!="object")throw TypeError(".Addresses.addrs: object expected");t.addrs[n]=ne.Addresses.Address.fromObject(e.addrs[n])}}if(e.certifiedRecord!=null){if(typeof e.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");t.certifiedRecord=ne.Addresses.CertifiedRecord.fromObject(e.certifiedRecord)}return t},r.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.addrs=[]),t.defaults&&(n.certifiedRecord=null),e.addrs&&e.addrs.length){n.addrs=[];for(var o=0;o<e.addrs.length;++o)n.addrs[o]=ne.Addresses.Address.toObject(e.addrs[o],t)}return e.certifiedRecord!=null&&e.hasOwnProperty("certifiedRecord")&&(n.certifiedRecord=ne.Addresses.CertifiedRecord.toObject(e.certifiedRecord,t)),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,Pt.default.util.toJSONOptions)},r.Address=function(){function e(n){if(n)for(var o=Object.keys(n),i=0;i<o.length;++i)n[o[i]]!=null&&(this[o[i]]=n[o[i]])}e.prototype.multiaddr=$.newBuffer([]),e.prototype.isCertified=null;let t;return Object.defineProperty(e.prototype,"_isCertified",{get:$.oneOfGetter(t=["isCertified"]),set:$.oneOfSetter(t)}),e.encode=function(n,o){return o||(o=ic.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&o.uint32(10).bytes(n.multiaddr),n.isCertified!=null&&Object.hasOwnProperty.call(n,"isCertified")&&o.uint32(16).bool(n.isCertified),o},e.decode=function(n,o){n instanceof wn||(n=wn.create(n));for(var i=o===void 0?n.len:n.pos+o,a=new ne.Addresses.Address;n.pos<i;){var s=n.uint32();switch(s>>>3){case 1:a.multiaddr=n.bytes();break;case 2:a.isCertified=n.bool();break;default:n.skipType(s&7);break}}return a},e.fromObject=function(n){if(n instanceof ne.Addresses.Address)return n;var o=new ne.Addresses.Address;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?$.base64.decode(n.multiaddr,o.multiaddr=$.newBuffer($.base64.length(n.multiaddr)),0):n.multiaddr.length&&(o.multiaddr=n.multiaddr)),n.isCertified!=null&&(o.isCertified=Boolean(n.isCertified)),o},e.toObject=function(n,o){o||(o={});var i={};return o.defaults&&(o.bytes===String?i.multiaddr="":(i.multiaddr=[],o.bytes!==Array&&(i.multiaddr=$.newBuffer(i.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(i.multiaddr=o.bytes===String?$.base64.encode(n.multiaddr,0,n.multiaddr.length):o.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),n.isCertified!=null&&n.hasOwnProperty("isCertified")&&(i.isCertified=n.isCertified,o.oneofs&&(i._isCertified="isCertified")),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,Pt.default.util.toJSONOptions)},e}(),r.CertifiedRecord=function(){function e(t){if(t)for(var n=Object.keys(t),o=0;o<n.length;++o)t[n[o]]!=null&&(this[n[o]]=t[n[o]])}return e.prototype.seq=$.Long?$.Long.fromBits(0,0,!0):0,e.prototype.raw=$.newBuffer([]),e.encode=function(t,n){return n||(n=ic.create()),t.seq!=null&&Object.hasOwnProperty.call(t,"seq")&&n.uint32(8).uint64(t.seq),t.raw!=null&&Object.hasOwnProperty.call(t,"raw")&&n.uint32(18).bytes(t.raw),n},e.decode=function(t,n){t instanceof wn||(t=wn.create(t));for(var o=n===void 0?t.len:t.pos+n,i=new ne.Addresses.CertifiedRecord;t.pos<o;){var a=t.uint32();switch(a>>>3){case 1:i.seq=t.uint64();break;case 2:i.raw=t.bytes();break;default:t.skipType(a&7);break}}return i},e.fromObject=function(t){if(t instanceof ne.Addresses.CertifiedRecord)return t;var n=new ne.Addresses.CertifiedRecord;return t.seq!=null&&($.Long?(n.seq=$.Long.fromValue(t.seq)).unsigned=!0:typeof t.seq=="string"?n.seq=parseInt(t.seq,10):typeof t.seq=="number"?n.seq=t.seq:typeof t.seq=="object"&&(n.seq=new $.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.raw!=null&&(typeof t.raw=="string"?$.base64.decode(t.raw,n.raw=$.newBuffer($.base64.length(t.raw)),0):t.raw.length&&(n.raw=t.raw)),n},e.toObject=function(t,n){n||(n={});var o={};if(n.defaults){if($.Long){var i=new $.Long(0,0,!0);o.seq=n.longs===String?i.toString():n.longs===Number?i.toNumber():i}else o.seq=n.longs===String?"0":0;n.bytes===String?o.raw="":(o.raw=[],n.bytes!==Array&&(o.raw=$.newBuffer(o.raw)))}return t.seq!=null&&t.hasOwnProperty("seq")&&(typeof t.seq=="number"?o.seq=n.longs===String?String(t.seq):t.seq:o.seq=n.longs===String?$.Long.prototype.toString.call(t.seq):n.longs===Number?new $.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.raw!=null&&t.hasOwnProperty("raw")&&(o.raw=n.bytes===String?$.base64.encode(t.raw,0,t.raw.length):n.bytes===Array?Array.prototype.slice.call(t.raw):t.raw),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Pt.default.util.toJSONOptions)},e}(),r})();u();var kt=_(Ht(),1),bn=kt.default.Reader,sc=kt.default.Writer,M=kt.default.util,Q=kt.default.roots.default||(kt.default.roots.default={}),ac=Q.Peer=(()=>{function r(t){if(this.addresses=[],this.protocols=[],this.metadata=[],t)for(var n=Object.keys(t),o=0;o<n.length;++o)t[n[o]]!=null&&(this[n[o]]=t[n[o]])}r.prototype.addresses=M.emptyArray,r.prototype.protocols=M.emptyArray,r.prototype.metadata=M.emptyArray,r.prototype.pubKey=null,r.prototype.peerRecordEnvelope=null;let e;return Object.defineProperty(r.prototype,"_pubKey",{get:M.oneOfGetter(e=["pubKey"]),set:M.oneOfSetter(e)}),Object.defineProperty(r.prototype,"_peerRecordEnvelope",{get:M.oneOfGetter(e=["peerRecordEnvelope"]),set:M.oneOfSetter(e)}),r.encode=function(t,n){if(n||(n=sc.create()),t.addresses!=null&&t.addresses.length)for(var o=0;o<t.addresses.length;++o)Q.Address.encode(t.addresses[o],n.uint32(10).fork()).ldelim();if(t.protocols!=null&&t.protocols.length)for(var o=0;o<t.protocols.length;++o)n.uint32(18).string(t.protocols[o]);if(t.metadata!=null&&t.metadata.length)for(var o=0;o<t.metadata.length;++o)Q.Metadata.encode(t.metadata[o],n.uint32(26).fork()).ldelim();return t.pubKey!=null&&Object.hasOwnProperty.call(t,"pubKey")&&n.uint32(34).bytes(t.pubKey),t.peerRecordEnvelope!=null&&Object.hasOwnProperty.call(t,"peerRecordEnvelope")&&n.uint32(42).bytes(t.peerRecordEnvelope),n},r.decode=function(t,n){t instanceof bn||(t=bn.create(t));for(var o=n===void 0?t.len:t.pos+n,i=new Q.Peer;t.pos<o;){var a=t.uint32();switch(a>>>3){case 1:i.addresses&&i.addresses.length||(i.addresses=[]),i.addresses.push(Q.Address.decode(t,t.uint32()));break;case 2:i.protocols&&i.protocols.length||(i.protocols=[]),i.protocols.push(t.string());break;case 3:i.metadata&&i.metadata.length||(i.metadata=[]),i.metadata.push(Q.Metadata.decode(t,t.uint32()));break;case 4:i.pubKey=t.bytes();break;case 5:i.peerRecordEnvelope=t.bytes();break;default:t.skipType(a&7);break}}return i},r.fromObject=function(t){if(t instanceof Q.Peer)return t;var n=new Q.Peer;if(t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".Peer.addresses: array expected");n.addresses=[];for(var o=0;o<t.addresses.length;++o){if(typeof t.addresses[o]!="object")throw TypeError(".Peer.addresses: object expected");n.addresses[o]=Q.Address.fromObject(t.addresses[o])}}if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Peer.protocols: array expected");n.protocols=[];for(var o=0;o<t.protocols.length;++o)n.protocols[o]=String(t.protocols[o])}if(t.metadata){if(!Array.isArray(t.metadata))throw TypeError(".Peer.metadata: array expected");n.metadata=[];for(var o=0;o<t.metadata.length;++o){if(typeof t.metadata[o]!="object")throw TypeError(".Peer.metadata: object expected");n.metadata[o]=Q.Metadata.fromObject(t.metadata[o])}}return t.pubKey!=null&&(typeof t.pubKey=="string"?M.base64.decode(t.pubKey,n.pubKey=M.newBuffer(M.base64.length(t.pubKey)),0):t.pubKey.length&&(n.pubKey=t.pubKey)),t.peerRecordEnvelope!=null&&(typeof t.peerRecordEnvelope=="string"?M.base64.decode(t.peerRecordEnvelope,n.peerRecordEnvelope=M.newBuffer(M.base64.length(t.peerRecordEnvelope)),0):t.peerRecordEnvelope.length&&(n.peerRecordEnvelope=t.peerRecordEnvelope)),n},r.toObject=function(t,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.addresses=[],o.protocols=[],o.metadata=[]),t.addresses&&t.addresses.length){o.addresses=[];for(var i=0;i<t.addresses.length;++i)o.addresses[i]=Q.Address.toObject(t.addresses[i],n)}if(t.protocols&&t.protocols.length){o.protocols=[];for(var i=0;i<t.protocols.length;++i)o.protocols[i]=t.protocols[i]}if(t.metadata&&t.metadata.length){o.metadata=[];for(var i=0;i<t.metadata.length;++i)o.metadata[i]=Q.Metadata.toObject(t.metadata[i],n)}return t.pubKey!=null&&t.hasOwnProperty("pubKey")&&(o.pubKey=n.bytes===String?M.base64.encode(t.pubKey,0,t.pubKey.length):n.bytes===Array?Array.prototype.slice.call(t.pubKey):t.pubKey,n.oneofs&&(o._pubKey="pubKey")),t.peerRecordEnvelope!=null&&t.hasOwnProperty("peerRecordEnvelope")&&(o.peerRecordEnvelope=n.bytes===String?M.base64.encode(t.peerRecordEnvelope,0,t.peerRecordEnvelope.length):n.bytes===Array?Array.prototype.slice.call(t.peerRecordEnvelope):t.peerRecordEnvelope,n.oneofs&&(o._peerRecordEnvelope="peerRecordEnvelope")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,kt.default.util.toJSONOptions)},r})();Q.Address=(()=>{function r(t){if(t)for(var n=Object.keys(t),o=0;o<n.length;++o)t[n[o]]!=null&&(this[n[o]]=t[n[o]])}r.prototype.multiaddr=M.newBuffer([]),r.prototype.isCertified=null;let e;return Object.defineProperty(r.prototype,"_isCertified",{get:M.oneOfGetter(e=["isCertified"]),set:M.oneOfSetter(e)}),r.encode=function(t,n){return n||(n=sc.create()),t.multiaddr!=null&&Object.hasOwnProperty.call(t,"multiaddr")&&n.uint32(10).bytes(t.multiaddr),t.isCertified!=null&&Object.hasOwnProperty.call(t,"isCertified")&&n.uint32(16).bool(t.isCertified),n},r.decode=function(t,n){t instanceof bn||(t=bn.create(t));for(var o=n===void 0?t.len:t.pos+n,i=new Q.Address;t.pos<o;){var a=t.uint32();switch(a>>>3){case 1:i.multiaddr=t.bytes();break;case 2:i.isCertified=t.bool();break;default:t.skipType(a&7);break}}return i},r.fromObject=function(t){if(t instanceof Q.Address)return t;var n=new Q.Address;return t.multiaddr!=null&&(typeof t.multiaddr=="string"?M.base64.decode(t.multiaddr,n.multiaddr=M.newBuffer(M.base64.length(t.multiaddr)),0):t.multiaddr.length&&(n.multiaddr=t.multiaddr)),t.isCertified!=null&&(n.isCertified=Boolean(t.isCertified)),n},r.toObject=function(t,n){n||(n={});var o={};return n.defaults&&(n.bytes===String?o.multiaddr="":(o.multiaddr=[],n.bytes!==Array&&(o.multiaddr=M.newBuffer(o.multiaddr)))),t.multiaddr!=null&&t.hasOwnProperty("multiaddr")&&(o.multiaddr=n.bytes===String?M.base64.encode(t.multiaddr,0,t.multiaddr.length):n.bytes===Array?Array.prototype.slice.call(t.multiaddr):t.multiaddr),t.isCertified!=null&&t.hasOwnProperty("isCertified")&&(o.isCertified=t.isCertified,n.oneofs&&(o._isCertified="isCertified")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,kt.default.util.toJSONOptions)},r})();Q.Metadata=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.key="",r.prototype.value=M.newBuffer([]),r.encode=function(e,t){return t||(t=sc.create()),e.key!=null&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).bytes(e.value),t},r.decode=function(e,t){e instanceof bn||(e=bn.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new Q.Metadata;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.key=e.string();break;case 2:o.value=e.bytes();break;default:e.skipType(i&7);break}}return o},r.fromObject=function(e){if(e instanceof Q.Metadata)return e;var t=new Q.Metadata;return e.key!=null&&(t.key=String(e.key)),e.value!=null&&(typeof e.value=="string"?M.base64.decode(e.value,t.value=M.newBuffer(M.base64.length(e.value)),0):e.value.length&&(t.value=e.value)),t},r.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.key="",t.bytes===String?n.value="":(n.value=[],t.bytes!==Array&&(n.value=M.newBuffer(n.value)))),e.key!=null&&e.hasOwnProperty("key")&&(n.key=e.key),e.value!=null&&e.hasOwnProperty("value")&&(n.value=t.bytes===String?M.base64.encode(e.value,0,e.value.length):t.bytes===Array?Array.prototype.slice.call(e.value):e.value),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,kt.default.util.toJSONOptions)},r})();u();var Dr=_(Ht(),1),Wy=Dr.default.Reader,G2=Dr.default.Writer,K=Dr.default.util,Xo=Dr.default.roots.default||(Dr.default.roots.default={}),Vy=Xo.Envelope=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.publicKey=K.newBuffer([]),r.prototype.payloadType=K.newBuffer([]),r.prototype.payload=K.newBuffer([]),r.prototype.signature=K.newBuffer([]),r.encode=function(e,t){return t||(t=G2.create()),e.publicKey!=null&&Object.hasOwnProperty.call(e,"publicKey")&&t.uint32(10).bytes(e.publicKey),e.payloadType!=null&&Object.hasOwnProperty.call(e,"payloadType")&&t.uint32(18).bytes(e.payloadType),e.payload!=null&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(26).bytes(e.payload),e.signature!=null&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(42).bytes(e.signature),t},r.decode=function(e,t){e instanceof Wy||(e=Wy.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new Xo.Envelope;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.publicKey=e.bytes();break;case 2:o.payloadType=e.bytes();break;case 3:o.payload=e.bytes();break;case 5:o.signature=e.bytes();break;default:e.skipType(i&7);break}}return o},r.fromObject=function(e){if(e instanceof Xo.Envelope)return e;var t=new Xo.Envelope;return e.publicKey!=null&&(typeof e.publicKey=="string"?K.base64.decode(e.publicKey,t.publicKey=K.newBuffer(K.base64.length(e.publicKey)),0):e.publicKey.length&&(t.publicKey=e.publicKey)),e.payloadType!=null&&(typeof e.payloadType=="string"?K.base64.decode(e.payloadType,t.payloadType=K.newBuffer(K.base64.length(e.payloadType)),0):e.payloadType.length&&(t.payloadType=e.payloadType)),e.payload!=null&&(typeof e.payload=="string"?K.base64.decode(e.payload,t.payload=K.newBuffer(K.base64.length(e.payload)),0):e.payload.length&&(t.payload=e.payload)),e.signature!=null&&(typeof e.signature=="string"?K.base64.decode(e.signature,t.signature=K.newBuffer(K.base64.length(e.signature)),0):e.signature.length&&(t.signature=e.signature)),t},r.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(t.bytes===String?n.publicKey="":(n.publicKey=[],t.bytes!==Array&&(n.publicKey=K.newBuffer(n.publicKey))),t.bytes===String?n.payloadType="":(n.payloadType=[],t.bytes!==Array&&(n.payloadType=K.newBuffer(n.payloadType))),t.bytes===String?n.payload="":(n.payload=[],t.bytes!==Array&&(n.payload=K.newBuffer(n.payload))),t.bytes===String?n.signature="":(n.signature=[],t.bytes!==Array&&(n.signature=K.newBuffer(n.signature)))),e.publicKey!=null&&e.hasOwnProperty("publicKey")&&(n.publicKey=t.bytes===String?K.base64.encode(e.publicKey,0,e.publicKey.length):t.bytes===Array?Array.prototype.slice.call(e.publicKey):e.publicKey),e.payloadType!=null&&e.hasOwnProperty("payloadType")&&(n.payloadType=t.bytes===String?K.base64.encode(e.payloadType,0,e.payloadType.length):t.bytes===Array?Array.prototype.slice.call(e.payloadType):e.payloadType),e.payload!=null&&e.hasOwnProperty("payload")&&(n.payload=t.bytes===String?K.base64.encode(e.payload,0,e.payload.length):t.bytes===Array?Array.prototype.slice.call(e.payload):e.payload),e.signature!=null&&e.hasOwnProperty("signature")&&(n.signature=t.bytes===String?K.base64.encode(e.signature,0,e.signature.length):t.bytes===Array?Array.prototype.slice.call(e.signature):e.signature),n},r.prototype.toJSON=function(){return this.constructor.toObject(this,Dr.default.util.toJSONOptions)},r})();u();var Yt=_(Ht(),1),es=Yt.default.Reader,Gy=Yt.default.Writer,W=Yt.default.util,Xe=Yt.default.roots.default||(Yt.default.roots.default={}),Hy=Xe.PeerRecord=(()=>{function r(e){if(this.addresses=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.peerId=W.newBuffer([]),r.prototype.seq=W.Long?W.Long.fromBits(0,0,!0):0,r.prototype.addresses=W.emptyArray,r.encode=function(e,t){if(t||(t=Gy.create()),e.peerId!=null&&Object.hasOwnProperty.call(e,"peerId")&&t.uint32(10).bytes(e.peerId),e.seq!=null&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),e.addresses!=null&&e.addresses.length)for(var n=0;n<e.addresses.length;++n)Xe.PeerRecord.AddressInfo.encode(e.addresses[n],t.uint32(26).fork()).ldelim();return t},r.decode=function(e,t){e instanceof es||(e=es.create(e));for(var n=t===void 0?e.len:e.pos+t,o=new Xe.PeerRecord;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:o.peerId=e.bytes();break;case 2:o.seq=e.uint64();break;case 3:o.addresses&&o.addresses.length||(o.addresses=[]),o.addresses.push(Xe.PeerRecord.AddressInfo.decode(e,e.uint32()));break;default:e.skipType(i&7);break}}return o},r.fromObject=function(e){if(e instanceof Xe.PeerRecord)return e;var t=new Xe.PeerRecord;if(e.peerId!=null&&(typeof e.peerId=="string"?W.base64.decode(e.peerId,t.peerId=W.newBuffer(W.base64.length(e.peerId)),0):e.peerId.length&&(t.peerId=e.peerId)),e.seq!=null&&(W.Long?(t.seq=W.Long.fromValue(e.seq)).unsigned=!0:typeof e.seq=="string"?t.seq=parseInt(e.seq,10):typeof e.seq=="number"?t.seq=e.seq:typeof e.seq=="object"&&(t.seq=new W.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),e.addresses){if(!Array.isArray(e.addresses))throw TypeError(".PeerRecord.addresses: array expected");t.addresses=[];for(var n=0;n<e.addresses.length;++n){if(typeof e.addresses[n]!="object")throw TypeError(".PeerRecord.addresses: object expected");t.addresses[n]=Xe.PeerRecord.AddressInfo.fromObject(e.addresses[n])}}return t},r.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.addresses=[]),t.defaults)if(t.bytes===String?n.peerId="":(n.peerId=[],t.bytes!==Array&&(n.peerId=W.newBuffer(n.peerId))),W.Long){var o=new W.Long(0,0,!0);n.seq=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.seq=t.longs===String?"0":0;if(e.peerId!=null&&e.hasOwnProperty("peerId")&&(n.peerId=t.bytes===String?W.base64.encode(e.peerId,0,e.peerId.length):t.bytes===Array?Array.prototype.slice.call(e.peerId):e.peerId),e.seq!=null&&e.hasOwnProperty("seq")&&(typeof e.seq=="number"?n.seq=t.longs===String?String(e.seq):e.seq:n.seq=t.longs===String?W.Long.prototype.toString.call(e.seq):t.longs===Number?new W.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),e.addresses&&e.addresses.length){n.addresses=[];for(var i=0;i<e.addresses.length;++i)n.addresses[i]=Xe.PeerRecord.AddressInfo.toObject(e.addresses[i],t)}return n},r.prototype.toJSON=function(){return this.constructor.toObject(this,Yt.default.util.toJSONOptions)},r.AddressInfo=function(){function e(t){if(t)for(var n=Object.keys(t),o=0;o<n.length;++o)t[n[o]]!=null&&(this[n[o]]=t[n[o]])}return e.prototype.multiaddr=W.newBuffer([]),e.encode=function(t,n){return n||(n=Gy.create()),t.multiaddr!=null&&Object.hasOwnProperty.call(t,"multiaddr")&&n.uint32(10).bytes(t.multiaddr),n},e.decode=function(t,n){t instanceof es||(t=es.create(t));for(var o=n===void 0?t.len:t.pos+n,i=new Xe.PeerRecord.AddressInfo;t.pos<o;){var a=t.uint32();switch(a>>>3){case 1:i.multiaddr=t.bytes();break;default:t.skipType(a&7);break}}return i},e.fromObject=function(t){if(t instanceof Xe.PeerRecord.AddressInfo)return t;var n=new Xe.PeerRecord.AddressInfo;return t.multiaddr!=null&&(typeof t.multiaddr=="string"?W.base64.decode(t.multiaddr,n.multiaddr=W.newBuffer(W.base64.length(t.multiaddr)),0):t.multiaddr.length&&(n.multiaddr=t.multiaddr)),n},e.toObject=function(t,n){n||(n={});var o={};return n.defaults&&(n.bytes===String?o.multiaddr="":(o.multiaddr=[],n.bytes!==Array&&(o.multiaddr=W.newBuffer(o.multiaddr)))),t.multiaddr!=null&&t.hasOwnProperty("multiaddr")&&(o.multiaddr=n.bytes===String?W.base64.encode(t.multiaddr,0,t.multiaddr.length):n.bytes===Array?Array.prototype.slice.call(t.multiaddr):t.multiaddr),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Yt.default.util.toJSONOptions)},e}(),r})(),wc=_(Bg(),1);bc.default.util.Long=void 0;bc.default.configure();async function vD(r,e=()=>{}){e(0,"Storing each peerstore key under a single datastore key"),await r.datastore.open();let t={},n=[];for await(let{key:o,value:i}of r.datastore.query({prefix:"/peers"})){n.push(o);let a=o.toString(),[s,c,l,f,g]=a.split("/");if(c==="peers"&&!!["protos","addrs","metadata","keys"].includes(l)&&!!f)if(t[f]=t[f]||{addresses:[],protocols:[],metadata:[]},l==="protos"){let D=nc.decode(i);t[f].protocols=D.protocols.sort()}else if(l==="addrs"){let D=oc.decode(i);t[f].addresses=D.addrs.sort((w,E)=>new wc.Multiaddr(w.multiaddr).toString().localeCompare(new wc.Multiaddr(E.multiaddr).toString())),D.certifiedRecord&&D.certifiedRecord.raw&&(t[f].peerRecordEnvelope=D.certifiedRecord.raw)}else l==="metadata"?t[f].metadata.push({key:g,value:i}):l==="keys"&&(t[f].pubKey=i)}e(33,"Read peer data from store");for(let o of n)await r.datastore.delete(o);e(66,"Removed existing peer data from store");for(let o of Object.keys(t)){let i=t[o];i.metadata=i.metadata.sort((s,c)=>s.key.localeCompare(c.key));let a=ac.encode(i).finish();await r.datastore.put(new A(`/peers/${o}`),a)}await r.datastore.close(),e(100,"Stored each peerstore key under a single datastore key")}async function ED(r,e=()=>{}){e(0,"Storing each peerstore key under a multiple datastore keys"),await r.datastore.open();let t={},n=[];for await(let{key:o,value:i}of r.datastore.query({prefix:"/peers"})){n.push(o);let a=o.toString(),[s,c,l]=a.split("/");t[l]=ac.decode(i)}e(33,"Read peer data from store");for(let o of n)await r.datastore.delete(o);e(66,"Removed existing peer data from store");for(let[o,i]of Object.entries(t)){if(i.protocols&&i.protocols.length>0&&await r.datastore.put(new A(`/peers/protos/${o}`),nc.encode({protocols:i.protocols}).finish()),i.addresses&&i.addresses.length>0){let a=i.peerRecordEnvelope,s;if(a){let c=Vy.decode(a),l=Hy.decode(c.payload);s={raw:a,seq:l.seq}}await r.datastore.put(new A(`/peers/addrs/${o}`),oc.encode({addrs:i.addresses,certifiedRecord:s}).finish())}if(i.metadata&&i.metadata.length>0)for(let{key:a,value:s}of i.metadata)await r.datastore.put(new A(`/peers/metadata/${o}/${a}`),s);i.pubKey&&await r.datastore.put(new A(`/peers/keys/${o}`),i.pubKey)}await r.datastore.close(),e(100,"Stored each peerstore key under multiple datastore keys")}var Pg={version:12,description:"Store each peerstore peer under a single datastore key",migrate:vD,revert:ED},Ar={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},us=[Object.assign({version:1},Ar),Object.assign({version:2},Ar),Object.assign({version:3},Ar),Object.assign({version:4},Ar),Object.assign({version:5},Ar),Object.assign({version:6},Ar),Object.assign({version:7},Ar),cp,Ly,Uy,Ky,Pg];u();u();var kg=_(We(),1),vc={};G(vc,{InvalidValueError:()=>An,MissingRepoOptionsError:()=>vt,NonReversibleMigrationError:()=>xn,NotInitializedRepoError:()=>Zt,RequiredParameterError:()=>Dn});u();var xn=class extends Error{constructor(r){super(r),this.name="NonReversibleMigrationError",this.code=xn.code,this.message=r}};xn.code="ERR_NON_REVERSIBLE_MIGRATION";var Zt=class extends Error{constructor(r){super(r),this.name="NotInitializedRepoError",this.code=Zt.code,this.message=r}};Zt.code="ERR_NOT_INITIALIZED_REPO";var Dn=class extends Error{constructor(r){super(r),this.name="RequiredParameterError",this.code=Dn.code,this.message=r}};Dn.code="ERR_REQUIRED_PARAMETER";var An=class extends Error{constructor(r){super(r),this.name="InvalidValueError",this.code=An.code,this.message=r}};An.code="ERR_INVALID_VALUE";var vt=class extends Error{constructor(r){super(r),this.name="MissingRepoOptionsError",this.code=vt.code,this.message=r}};vt.code="ERR_MISSING_REPO_OPTIONS";var Ec=(0,kg.default)("ipfs:repo:migrator:repo:init");async function Fg(r){if(!r)throw new vt("Please pass repo options when trying to open a repo");let e=r.root;try{await e.open();let t=await e.has(Ci),n=await e.has(My);return!t||!n?(Ec(`Version entry present: ${t}`),Ec(`Config entry present: ${n}`),!1):!0}catch(t){return Ec("While checking if repo is initialized error was thrown: "+t.message),!1}finally{if(e!==void 0)try{await e.close()}catch{}}}yt();ke();async function _c(r){if(!await Fg(r))throw new Zt("Repo is not initialized!");let e=r.root;await e.open();try{return parseInt(de(await e.get(Ci)))}finally{await e.close()}}async function Bi(r,e){if(!e)throw new vt("Please pass repo options when trying to open a repo");let t=e.root;await t.open(),await t.put(Ci,oe(String(r))),await t.close()}var Ng=_(We(),1),rt=(0,Ng.default)("ipfs:repo:migrator");function xD(r){return r=r||us,!Array.isArray(r)||r.length===0?0:r[r.length-1].version}async function Lg(r,e,t,n,{ignoreLock:o=!1,onProgress:i,isDryRun:a=!1,migrations:s}){if(s=s||us,!r)throw new qe.RequiredParameterError("Path argument is required!");if(!t)throw new qe.RequiredParameterError("repoOptions argument is required!");if(!n)throw new qe.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(n)||n<=0)throw new qe.InvalidValueError("Version has to be positive integer!");e=rc(e);let c=await _c(e);if(c===n){rt("Nothing to migrate.");return}if(c>n)throw new qe.InvalidValueError(`Current repo's version (${c}) is higher then toVersion (${n}), you probably wanted to revert it?`);jg(s,c,n);let l;!a&&!o&&(l=await t.repoLock.lock(r));try{for(let f of s){if(n!==void 0&&f.version>n)break;if(!(f.version<=c)){rt(`Migrating version ${f.version}`);try{if(!a){let g=()=>{};i&&(g=(D,w)=>i(f.version,D.toFixed(2),w)),await f.migrate(e,g)}}catch(g){let D=f.version-1;throw rt(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${D}`),await Bi(D,e),new Error(`During migration to version ${f.version} exception was raised: ${g.stack||g.message||g}`)}rt(`Migrating to version ${f.version} finished`)}}a||await Bi(n||xD(s),e),rt("Repo successfully migrated",n!==void 0?`to version ${n}!`:"to latest version!")}finally{!a&&!o&&l&&await l.close()}}async function Mg(r,e,t,n,{ignoreLock:o=!1,onProgress:i,isDryRun:a=!1,migrations:s}){if(s=s||us,!r)throw new qe.RequiredParameterError("Path argument is required!");if(!t)throw new qe.RequiredParameterError("repoOptions argument is required!");if(!n)throw new qe.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(n)||n<=0)throw new qe.InvalidValueError("Version has to be positive integer!");e=rc(e);let c=await _c(e);if(c===n){rt("Nothing to revert.");return}if(c<n)throw new qe.InvalidValueError(`Current repo's version (${c}) is lower then toVersion (${n}), you probably wanted to migrate it?`);jg(s,n,c,!0);let l;!a&&!o&&(l=await t.repoLock.lock(r)),rt(`Reverting from version ${c} to ${n}`);try{let f=s.slice().reverse();for(let g of f){if(g.version<=n)break;if(!(g.version>c)){rt(`Reverting migration version ${g.version}`);try{if(!a){let D=()=>{};i&&(D=(w,E)=>i(g.version,w.toFixed(2),E)),await g.revert(e,D)}}catch(D){let w=g.version;throw rt(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${w}`),await Bi(w,e),D.message=`During reversion to version ${g.version} exception was raised: ${D.message}`,D}rt(`Reverting to version ${g.version} finished`)}}a||await Bi(n,e),rt(`All migrations successfully reverted to version ${n}!`)}finally{!a&&!o&&l&&await l.close()}}function jg(r,e,t,n=!1){let o=0;for(let i of r){if(i.version>t)break;if(i.version>e){if(n&&!i.revert)throw new qe.NonReversibleMigrationError(`It is not possible to revert to version ${e} because migration version ${i.version} is not reversible. Cancelling reversion.`);o++}}if(o!==t-e)throw new qe.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${e} to ${t}`)}var qe=vc,eb=_($g(),1);u();var Yg=_(Jg(),1),Qg=Yg.default;u();u();var tm=_(We(),1);ke();yt();u();u();var Sr=class extends Error{constructor(r){super(r),this.name="LockExistsError",this.code=Sr.code}};Sr.code="ERR_LOCK_EXISTS";var Oe=class extends Error{constructor(r){super(r),this.name="NotFoundError",this.code=Oe.code}};Oe.code="ERR_NOT_FOUND";var Cr=class extends Error{constructor(r){super(r),this.name="InvalidRepoVersionError",this.code=Cr.code}};Cr.code="ERR_INVALID_REPO_VERSION";var Pi="ERR_REPO_NOT_INITIALIZED",Zg="ERR_REPO_ALREADY_OPEN",Xg="ERR_REPO_ALREADY_CLOSED";async function ds(r,e,t){let n=await e(r);if(n)return n;let o=em(t);return o?new Promise((i,a)=>{let s=o.store("readonly").get(r.toString());s.transaction.onabort=()=>{a(s.transaction.error)},s.transaction.oncomplete=()=>{i(Boolean(s.result))}}):!1}async function ps(r,e,t,n){if(await t(r))return e(r);let o=em(n);if(!o)throw new Oe;return new Promise((i,a)=>{let s=o.store("readonly").get(r.toString());s.transaction.onabort=()=>{a(s.transaction.error)},s.transaction.oncomplete=()=>{if(s.result)return i(s.result);a(new Oe)}})}function em(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}var ND=(0,tm.default)("ipfs:repo:version"),Ac=new A("version");function rm(r){return{async exists(){return ds(Ac,r.has.bind(r),r)},async get(){let e=await ps(Ac,r.get.bind(r),r.has.bind(r),r);return parseInt(de(e),10)},set(e){return r.put(Ac,oe(String(e)))},async check(e){let t=await this.get();return ND("comparing version: %s and %s",t,e),t===e||t===6&&e===7||e===6&&t===7}}}u();var ws=_(fm(),1),hm=_(za(),1),ym=_(pm(),1),bs=_(dt(),1);ke();yt();var VD=ws.default.default?ws.default.default:ws.default,kc=new A("config");function gm(r){let e=new VD({concurrency:1}),t={async getAll(i={}){let a=await ps(kc,r.get.bind(r),r.has.bind(r),r);return JSON.parse(de(a))},async get(i,a={}){if(i==null)throw new Oe(`Key ${i} does not exist in config`);let s=await this.getAll(a),c=(0,hm.default)(s,i);if(c===void 0)throw new Oe(`Key ${i} does not exist in config`);return c},set(i,a,s={}){if(typeof i!="string"&&!(i instanceof String))throw(0,bs.default)(new Error("Invalid key type: "+typeof i),"ERR_INVALID_KEY");if(a===void 0||a instanceof Uint8Array)throw(0,bs.default)(new Error("Invalid value type: "+typeof a),"ERR_INVALID_VALUE");return e.add(()=>n({key:i,value:a},s.signal))},replace(i,a={}){if(!i||i instanceof Uint8Array)throw(0,bs.default)(new Error("Invalid value type: "+typeof i),"ERR_INVALID_VALUE");return e.add(()=>n({key:void 0,value:i},a.signal))},async exists(){return ds(kc,r.has.bind(r),r)}};return t;async function n(i,a){if(a&&a.aborted)return;let s=i.key,c=i.value;if(s){let l=await t.getAll();return typeof l=="object"&&l!==null&&(0,ym.default)(l,s,c),o(l)}return o(c)}function o(i){let a=oe(JSON.stringify(i,null,2));return r.put(kc,a)}}u();u();var bm=_(wm(),1);ke();yt();var Nc=new A("datastore_spec");function vm(r){return{exists(){return r.has(Nc)},async get(){let e=await r.get(Nc);return JSON.parse(de(e))},async set(e){return r.put(Nc,oe(JSON.stringify((0,bm.default)(e,{deep:!0}))))}}}u();yt();var Lc=new A("api");function Em(r){return{async get(){let e=await r.get(Lc);return e&&e.toString()},set(e){return r.put(Lc,oe(e.toString()))},delete(){return r.delete(Lc)}}}u();var Im=_(Or(),1),Rm=_(Om(),1),Bm=_(On(),1);ge();var Pm=_(dt(),1);gu();function km(r){return{open(){return r.open()},close(){return r.close()},query(e,t){return r.query(e,t)},queryKeys(e,t){return r.queryKeys(e,t)},async get(e,t){let n=er(e);return n.isIdentity?Promise.resolve(n.digest):r.get(e,t)},async*getMany(e,t){for await(let n of e)yield this.get(n,t)},async put(e,t,n){let{isIdentity:o}=er(e);o||await r.put(e,t,n)},async*putMany(e,t){let n=(0,Rm.default)();(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{await(0,Bm.default)(r.putMany(async function*(){for await(let{key:o,value:i}of e)er(o).isIdentity||(yield{key:o,value:i}),n.push({key:o,value:i})}())),n.end()}catch(o){n.end(o)}}),yield*n},has(e,t){let{isIdentity:n}=er(e);return n?Promise.resolve(!0):r.has(e,t)},delete(e,t){let{isIdentity:n}=er(e);return n?Promise.resolve():r.delete(e,t)},deleteMany(e,t){return r.deleteMany((0,Im.default)(e,n=>!er(n).isIdentity),t)},batch(){let e=r.batch();return{put(t,n){let{isIdentity:o}=er(t);o||e.put(t,n)},delete(t){let{isIdentity:n}=er(t);n||e.delete(t)},commit:t=>e.commit(t)}}}}function er(r){let e=S.asCID(r);if(e==null)throw(0,Pm.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return e.multihash.code!==hu.code?{isIdentity:!1}:{isIdentity:!0,digest:e.multihash.digest}}u();u();var Fm=_(We(),1),Nm=(0,Fm.default)("ipfs:repo:lock:memory"),Lm="repo.lock",Ni={};async function JD(r){let e=r+"/"+Lm;if(Nm("locking %s",e),Ni[e]===!0)throw new Sr(`Lock already being held for file: ${e}`);return Ni[e]=!0,{async close(){Ni[e]&&delete Ni[e]}}}async function YD(r){let e=r+"/"+Lm;return Nm(`checking lock: ${e}`),Boolean(Ni[e])}var vs={lock:JD,locked:YD},Mm={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:vs};u();var jc={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};u();ge();var Km=_(dt(),1),zm=_(We(),1),zc=_(qm(),1);u();So();var Es=({enumerable:r=!0,configurable:e=!1}={})=>({enumerable:r,configurable:e,writable:!1}),qc=function*(r,e){if(r!=null&&!(r instanceof Uint8Array))for(let[t,n]of Object.entries(r)){let o=[...e,t];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(let[i,a]of n.entries()){let s=[...o,i],c=S.asCID(a);c?yield[s.join("/"),c]:typeof a=="object"&&(yield*qc(a,s))}else{let i=S.asCID(n);i?yield[o.join("/"),i]:yield*qc(n,o)}}},Uc=function*(r,e){if(r!=null)for(let[t,n]of Object.entries(r)){let o=[...e,t];if(yield o.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!S.asCID(n))if(Array.isArray(n))for(let[i,a]of n.entries()){let s=[...o,i];yield s.join("/"),typeof a=="object"&&!S.asCID(a)&&(yield*Uc(a,s))}else yield*Uc(n,o)}},ZD=(r,e)=>{let t=r;for(let[n,o]of e.entries()){if(t=t[o],t==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(a=>`[${JSON.stringify(a)}]`).join("")}`);let i=S.asCID(t);if(i)return{value:i,remaining:e.slice(n+1).join("/")}}return{value:t}},$c=class{constructor({cid:r,bytes:e,value:t}){if(!r||!e||typeof t>"u")throw new Error("Missing required argument");this.cid=r,this.bytes=e,this.value=t,this.asBlock=this,Object.defineProperties(this,{cid:Es(),bytes:Es(),value:Es(),asBlock:Es()})}links(){return qc(this.value,[])}tree(){return Uc(this.value,[])}get(r="/"){return ZD(this.value,r.split("/").filter(Boolean))}},_s=({bytes:r,cid:e,value:t,codec:n})=>{let o=t!==void 0?t:n&&n.decode(r);if(o===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new $c({cid:e,bytes:r,value:o})};u();So();ci();var Um=_(dt(),1);ht();pt();function Li(r){let e=S.asCID(r);if(e==null)throw(0,Um.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");let t=U.encode(e.multihash.bytes);return new A("/"+t.slice(1).toUpperCase(),!1)}function Kc(r){return Ve(U.decode(`b${r.toString().toLowerCase().substring(1)}`))}u();var $m=_(We(),1),XD=(0,$m.default)("ipfs:repo:utils:walk-dag");async function*Tn(r,e,t,n){try{let o=await e.get(r,n),i=await t(r.code),a=_s({bytes:o,cid:r,codec:i});for(let[,s]of a.links())yield s,yield*Tn(s,e,t,n)}catch(o){throw XD("Could not walk DAG for CID",r.toString(),o),o}}u();var be={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};function eA(r){let e=`Invalid type '${r}', must be one of {direct, indirect, recursive, all}`;return(0,Km.default)(new Error(e),"ERR_INVALID_PIN_TYPE")}var xs=class{constructor({pinstore:r,blockstore:e,loadCodec:t}){this.pinstore=r,this.blockstore=e,this.loadCodec=t,this.log=(0,zm.default)("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(r,e={}){await this.blockstore.get(r,e);let t={depth:0};return r.version!==0&&(t.version=r.version),r.code!==It&&(t.codec=r.code),e.metadata&&(t.metadata=e.metadata),this.pinstore.put(Li(r),wr(t))}unpin(r,e){return this.pinstore.delete(Li(r),e)}async pinRecursively(r,e={}){await this.fetchCompleteDag(r,e);let t={depth:1/0};r.version!==0&&(t.version=r.version),r.code!==It&&(t.codec=r.code),e.metadata&&(t.metadata=e.metadata),await this.pinstore.put(Li(r),wr(t))}async*directKeys(r){for await(let e of this.pinstore.query({filters:[t=>mt(t.value).depth===0]})){let t=mt(e.value),n=t.version||0,o=t.codec!=null?t.codec:It,i=Kc(e.key);yield{cid:S.create(n,o,i),metadata:t.metadata}}}async*recursiveKeys(r){for await(let e of this.pinstore.query({filters:[t=>mt(t.value).depth===1/0]})){let t=mt(e.value),n=t.version||0,o=t.codec!=null?t.codec:It,i=Kc(e.key);yield{cid:S.create(n,o,i),metadata:t.metadata}}}async*indirectKeys(r){for await(let{cid:e}of this.recursiveKeys())for await(let t of Tn(e,this.blockstore,this.loadCodec,r)){let n=[be.recursive];(await this.isPinnedWithType(t,n)).pinned||(yield t)}}async isPinnedWithType(r,e,t){Array.isArray(e)||(e=[e]);let n=e.includes(be.all),o=e.includes(be.direct),i=e.includes(be.recursive),a=e.includes(be.indirect);if(i||o||n){let l=await(0,zc.default)(this.pinstore.query({prefix:Li(r).toString(),filters:[f=>{if(n)return!0;let g=mt(f.value);return e.includes(g.depth===0?be.direct:be.recursive)}],limit:1}));if(l){let f=mt(l.value);return{cid:r,pinned:!0,reason:f.depth===0?be.direct:be.recursive,metadata:f.metadata}}}let s=this;async function*c(l,f){for await(let{cid:g}of f)for await(let D of Tn(g,s.blockstore,s.loadCodec))if(D.equals(l)){yield g;return}}if(n||a){let l=await(0,zc.default)(c(r,this.recursiveKeys()));if(l)return{cid:r,pinned:!0,reason:be.indirect,parent:l}}return{cid:r,pinned:!1}}async fetchCompleteDag(r,e){let t=new Set,n=async(o,i)=>{if(t.has(o.toString()))return;t.add(o.toString());let a=await this.blockstore.get(o,i),s=await this.loadCodec(o.code),c=_s({bytes:a,cid:o,codec:s});await Promise.all([...c.links()].map(([,l])=>n(l,i)))};await n(r,e)}static checkPinType(r){if(typeof r!="string"||!Object.keys(be).includes(r))throw eA(r);return!0}};u();var Gm=_(Mi(),1),Hm=_(dt(),1);function Jm(r,e){return{open(){return e.open()},close(){return e.close()},query(t,n){return e.query(t,n)},queryKeys(t,n){return e.queryKeys(t,n)},async get(t,n){return e.get(t,n)},async*getMany(t,n){yield*e.getMany(t,n)},async put(t,n,o){await e.put(t,n,o)},async*putMany(t,n){yield*e.putMany(t,n)},has(t,n){return e.has(t,n)},async delete(t,n){return await Vm(t,r),e.delete(t,n)},deleteMany(t,n){return e.deleteMany((0,Gm.default)(t,async o=>(await Vm(o,r),o)),n)},batch(){return e.batch()}}}async function Vm(r,e){let{pinned:t,reason:n}=await e.isPinnedWithType(r,be.all);if(t)throw(0,Hm.default)(new Error(`pinned: ${n}`),"ERR_BLOCK_PINNED")}var tb=_(Nw(),1);u();ge();var Gw=_(We(),1),Hw=_(qw(),1),Jw=_(Kw(),1),sf=_(of(),1),Ts=_(Mi(),1),Yw=_(Or(),1);ht();var qi=(0,Gw.default)("ipfs:repo:gc"),IA=Bt().code,RA=256,BA=new A("/local/filesroot");function Qw({gcLock:r,pins:e,blockstore:t,root:n,loadCodec:o}){async function*i(){let a=Date.now();qi("Creating set of marked blocks");let s=await r.writeLock();try{let c=await PA({pins:e,blockstore:t,root:n,loadCodec:o}),l=t.queryKeys({});yield*kA({blockstore:t},c,l),qi(`Complete (${Date.now()-a}ms)`)}finally{s()}}return i}async function PA({pins:r,blockstore:e,loadCodec:t,root:n}){let o=async function*(){let s;try{s=await n.get(BA)}catch(l){if(l.code===IA){qi("No blocks in MFS");return}throw l}let c=S.decode(s);yield c,yield*Tn(c,e,t)}(),i=(0,sf.default)((0,Ts.default)(r.recursiveKeys(),({cid:s})=>s),r.indirectKeys(),(0,Ts.default)(r.directKeys(),({cid:s})=>s),o),a=new Set;for await(let s of(0,sf.default)(i,o))a.add(U.encode(s.multihash.bytes));return a}async function*kA({blockstore:r},e,t){let n=0,o=0;yield*(0,Jw.pipe)((0,Hw.default)((0,Ts.default)(t,async i=>async function(){n++;try{let a=U.encode(i.multihash.bytes);if(e.has(a))return null;try{await r.delete(i),o++}catch(s){return{err:new Error(`Could not delete block with CID ${i}: ${s.message}`)}}return{cid:i}}catch(a){let s=`Could delete block with CID ${i}`;return qi(s,a),{err:new Error(s+`: ${a.message}`)}}}),RA),i=>(0,Yw.default)(i,Boolean)),qi(`Marked set has ${e.size} unique blocks. Blockstore has ${n} blocks. Deleted ${o} blocks.`)}var ve=(0,Xw.default)("ipfs:repo"),FA=Number.MAX_SAFE_INTEGER,NA="repoAutoMigrate",uf=class{constructor(r,e,t,n){if(typeof r!="string")throw new Error("missing repo path");if(typeof e!="function")throw new Error("missing codec loader");this.options=Qg(Mm,n),this.closed=!0,this.path=r,this.root=t.root,this.datastore=t.datastore,this.keys=t.keys;let o=t.blocks,i=t.pins;this.pins=new xs({pinstore:i,blockstore:o,loadCodec:e});let a=Jm(this.pins,o);this.blocks=km(a),this.version=rm(this.root),this.config=gm(this.root),this.spec=vm(this.root),this.apiAddr=Em(this.root),this.gcLock=(0,tb.default)(r,{singleProcess:this.options.repoOwner!==!1}),this.gc=Qw({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:e})}async init(r){ve("initializing at: %s",this.path),await this._openRoot(),await this.config.replace(LA(r)),await this.spec.set(MA(r)),await this.version.set(12)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch{return!1}}async open(){if(!this.closed)throw(0,Ir.default)(new Error("repo is already open"),Zg);ve("opening at: %s",this.path);try{if(await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),ve("acquired repo.lock"),!await this.version.check(12))if(await this._isAutoMigrationEnabled())await this._migrate(12,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys});else throw new Cr("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");ve("creating datastore"),await this.datastore.open(),ve("creating blocks"),await this.blocks.open(),ve("creating keystore"),await this.keys.open(),ve("creating pins"),await this.pins.pinstore.open(),this.closed=!1,ve("all opened")}catch(r){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(e){ve("error removing lock",e)}throw r}}async _openRoot(){try{await this.root.open()}catch(r){if(r.message!=="Already open")throw r}}async _openLock(){let r=await this.options.repoLock.lock(this.path);if(typeof r.close!="function")throw(0,Ir.default)(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return r}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){ve("init check");let r;try{[r]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(e){throw e.code==="ERR_NOT_FOUND"?(0,Ir.default)(new Error("repo is not initialized yet"),Pi,{path:this.path}):e}if(!r)throw(0,Ir.default)(new Error("repo is not initialized yet"),Pi,{path:this.path})}async close(){if(this.closed)throw(0,Ir.default)(new Error("repo is already closed"),Xg);ve("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(r){if(r.code!==Pi&&!r.message.startsWith("ENOENT"))throw r}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map(r=>r&&r.close())),ve("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){let[r,e,t,n,o]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),Zw(this.datastore),Zw(this.keys)]),i=e.size+n+o;return{repoPath:this.path,storageMax:r,version:t,numObjects:e.count,repoSize:i}}throw(0,Ir.default)(new Error("repo is not initialized yet"),Pi,{path:this.path})}async _isAutoMigrationEnabled(){if(this.options.autoMigrate!==void 0)return this.options.autoMigrate;let r;try{r=await this.config.get(NA)}catch(e){if(e.code===Oe.code)r=!0;else throw e}return r}async _migrate(r,e){return await this.version.get()>r?(ve(`reverting to version ${r}`),Mg(this.path,e,this.options,r,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):(ve(`migrating to version ${r}`),Lg(this.path,e,this.options,r,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{let r=await this.config.get("Datastore.StorageMax");return BigInt((0,eb.default)(r))}catch{return BigInt(FA)}}async _blockStat(){let r=BigInt(0),e=BigInt(0);if(this.blocks)for await(let{key:t,value:n}of this.blocks.query({}))r+=BigInt(1),e+=BigInt(n.byteLength),e+=BigInt(t.bytes.byteLength);return{count:r,size:e}}};async function Zw(r){let e=BigInt(0);for await(let t of r.query({}))e+=BigInt(t.value.byteLength),e+=BigInt(t.key.uint8Array().byteLength);return e}function rb(r,e,t,n){return new uf(r,e,t,n)}function LA(r){return r.Datastore=Object.assign({},jc,(0,cf.default)(r,"datastore")),r}function MA(r){let e={...jc.Spec,...(0,cf.default)(r,"Datastore.Spec")};return{type:e.type,mounts:e.mounts.map(t=>({mountpoint:t.mountpoint,type:t.child.type,path:t.child.path,shardFunc:t.child.shardFunc}))}}u();u();u();u();var nb="SHARDING",ib="_README";u();u();var sb=_(Is(),1),Rs=(r,e)=>async function*(){yield*(await(0,sb.default)(r)).sort(e)}(),ff=_(On(),1),Rr=_(Or(),1),lf=_(Ui(),1),Et=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(r,e,t){return Promise.reject(new Error(".put is not implemented"))}get(r,e){return Promise.reject(new Error(".get is not implemented"))}has(r,e){return Promise.reject(new Error(".has is not implemented"))}delete(r,e){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(r,e={}){for await(let{key:t,value:n}of r)await this.put(t,n,e),yield{key:t,value:n}}async*getMany(r,e={}){for await(let t of r)yield this.get(t,e)}async*deleteMany(r,e={}){for await(let t of r)await this.delete(t,e),yield t}batch(){let r=[],e=[];return{put(t,n){r.push({key:t,value:n})},delete(t){e.push(t)},commit:async t=>{await(0,ff.default)(this.putMany(r,t)),r=[],await(0,ff.default)(this.deleteMany(e,t)),e=[]}}}async*_all(r,e){throw new Error("._all is not implemented")}async*_allKeys(r,e){throw new Error("._allKeys is not implemented")}query(r,e){let t=this._all(r,e);if(r.prefix!=null&&(t=(0,Rr.default)(t,n=>n.key.toString().startsWith(r.prefix))),Array.isArray(r.filters)&&(t=r.filters.reduce((n,o)=>(0,Rr.default)(n,o),t)),Array.isArray(r.orders)&&(t=r.orders.reduce((n,o)=>Rs(n,o),t)),r.offset!=null){let n=0;t=(0,Rr.default)(t,()=>n++>=r.offset)}return r.limit!=null&&(t=(0,lf.default)(t,r.limit)),t}queryKeys(r,e){let t=this._allKeys(r,e);if(r.prefix!=null&&(t=(0,Rr.default)(t,n=>n.toString().startsWith(r.prefix))),Array.isArray(r.filters)&&(t=r.filters.reduce((n,o)=>(0,Rr.default)(n,o),t)),Array.isArray(r.orders)&&(t=r.orders.reduce((n,o)=>Rs(n,o),t)),r.offset!=null){let n=0;t=(0,Rr.default)(t,()=>n++>=r.offset)}return r.limit!=null&&(t=(0,lf.default)(t,r.limit)),t}};u();u();_(Mi(),1);_(fb(),1);u();new A(nb);new A(ib);u();_(Or(),1);_(Ui(),1);_(of(),1);u();var hb=_(We(),1);_(pb(),1);_(On(),1);(0,hb.default)("datastore:core:tiered");u();var co=_(Or(),1),n_=_(Mi(),1),Nl=_(Ui(),1),Ll=_(gb(),1),i_=_(r_(),1),fr=class extends Et{constructor(r,e){super(),this.path=r,this.opts=e,e&&e.db?(this.database=e.db,delete e.db):this.database=i_.default}_initDb(){return new Promise((r,e)=>{this.db=this.database(this.path,{...this.opts,valueEncoding:"binary",compression:!1},t=>{if(t)return e(t);r(this.db)})})}async open(){try{this.db?await this.db.open():this.db=await this._initDb()}catch(r){throw Me.dbOpenFailedError(r)}}async put(r,e){try{await this.db.put(r.toString(),e)}catch(t){throw Me.dbWriteFailedError(t)}}async get(r){let e;try{e=await this.db.get(r.toString())}catch(t){throw t.notFound?Me.notFoundError(t):Me.dbWriteFailedError(t)}return e}async has(r){try{await this.db.get(r.toString())}catch(e){if(e.notFound)return!1;throw e}return!0}async delete(r){try{await this.db.del(r.toString())}catch(e){throw Me.dbDeleteFailedError(e)}}close(){return this.db&&this.db.close()}batch(){let r=[];return{put:(e,t)=>{r.push({type:"put",key:e.toString(),value:t})},delete:e=>{r.push({type:"del",key:e.toString()})},commit:()=>this.db.batch(r)}}query(r){let e=this._query({values:!0,prefix:r.prefix});Array.isArray(r.filters)&&(e=r.filters.reduce((o,i)=>(0,co.default)(o,i),e)),Array.isArray(r.orders)&&(e=r.orders.reduce((o,i)=>(0,Ll.default)(o,i),e));let{offset:t,limit:n}=r;if(t){let o=0;e=(0,co.default)(e,()=>o++>=t)}return n&&(e=(0,Nl.default)(e,n)),e}queryKeys(r){let e=(0,n_.default)(this._query({values:!1,prefix:r.prefix}),({key:o})=>o);Array.isArray(r.filters)&&(e=r.filters.reduce((o,i)=>(0,co.default)(o,i),e)),Array.isArray(r.orders)&&(e=r.orders.reduce((o,i)=>(0,Ll.default)(o,i),e));let{offset:t,limit:n}=r;if(t){let o=0;e=(0,co.default)(e,()=>o++>=t)}return n&&(e=(0,Nl.default)(e,n)),e}_query(r){let e={keys:!0,keyAsBuffer:!0,values:r.values};if(r.prefix!=null){let t=r.prefix.toString();e.gte=t,e.lt=t+"\xFF"}return qO(this.db.iterator(e))}};function qO(r){return{[Symbol.asyncIterator](){return{next:()=>new Promise((e,t)=>{r.next((n,o,i)=>{if(n)return t(n);if(o==null)return r.end(a=>{if(a)return t(a);e({done:!0,value:void 0})});e({done:!1,value:{key:new A(o,!1),value:i}})})}),return:()=>new Promise((e,t)=>{r.end(n=>{if(n)return t(n);e({done:!0,value:void 0})})})}}}}u();var Ul=_(On(),1),$l=_(s_(),1);ge();ci();pt();ht();an();var c_=_(dt(),1);u();var jl=_(On(),1),Gr=_(Or(),1),ql=_(Ui(),1),u_=_(Is(),1),a_=(r,e)=>async function*(){yield*(await(0,u_.default)(r)).sort(e)}(),Ia=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(r,e,t){return Promise.reject(new Error(".put is not implemented"))}get(r,e){return Promise.reject(new Error(".get is not implemented"))}has(r,e){return Promise.reject(new Error(".has is not implemented"))}delete(r,e){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(r,e={}){for await(let{key:t,value:n}of r)await this.put(t,n,e),yield{key:t,value:n}}async*getMany(r,e={}){for await(let t of r)yield this.get(t,e)}async*deleteMany(r,e={}){for await(let t of r)await this.delete(t,e),yield t}batch(){let r=[],e=[];return{put(t,n){r.push({key:t,value:n})},delete(t){e.push(t)},commit:async t=>{await(0,jl.default)(this.putMany(r,t)),r=[],await(0,jl.default)(this.deleteMany(e,t)),e=[]}}}async*_all(r,e){throw new Error("._all is not implemented")}async*_allKeys(r,e){throw new Error("._allKeys is not implemented")}query(r,e){let t=this._all(r,e);if(r.prefix!=null&&(t=(0,Gr.default)(t,n=>n.key.toString().startsWith(r.prefix||""))),Array.isArray(r.filters)&&(t=r.filters.reduce((n,o)=>(0,Gr.default)(n,o),t)),Array.isArray(r.orders)&&(t=r.orders.reduce((n,o)=>a_(n,o),t)),r.offset!=null){let n=0;t=(0,Gr.default)(t,()=>n++>=(r.offset||0))}return r.limit!=null&&(t=(0,ql.default)(t,r.limit)),t}queryKeys(r,e){let t=this._allKeys(r,e);if(r.prefix!=null&&(t=(0,Gr.default)(t,n=>n.toString().startsWith(r.prefix||""))),Array.isArray(r.filters)&&(t=r.filters.reduce((n,o)=>(0,Gr.default)(n,o),t)),Array.isArray(r.orders)&&(t=r.orders.reduce((n,o)=>a_(n,o),t)),r.offset!=null){let n=0;t=(0,Gr.default)(t,()=>n++>=r.offset)}return r.limit!=null&&(t=(0,ql.default)(t,r.limit)),t}};function ri(r){let e=S.asCID(r);if(!e)throw(0,c_.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return new A("/"+U.encode(e.multihash.bytes).slice(1).toUpperCase(),!1)}function lr(r){return S.createV1(ui,Ve(U.decode("b"+r.toString().slice(1).toLowerCase())))}function Kl(r){let e=r.substring(0,1);if(e==="/")return Kl(r.substring(1));let t;e.toLowerCase()==="b"?t=i=>U.decode(i.toLowerCase()).subarray(2):e.toLowerCase()==="c"?t=i=>Za.decode(i.toLowerCase()).subarray(2):e==="z"?t=i=>xe.decode(i).subarray(2):e==="Q"?t=i=>xe.decode("z"+i):t=i=>U.decode("b"+i.toLowerCase()).subarray(2);let n;for(let i=1;i<r.length;i++)try{n=t(r.substring(0,i))}catch(a){if(a.message!=="Unexpected end of data")throw a}let o="/C";return n&&(o=`/${U.encode(n).slice(1,-1).toUpperCase()||"C"}`),o}function UO(r){return{...r,prefix:r.prefix?Kl(r.prefix):void 0,filters:r.filters?r.filters.map(e=>t=>e({key:lr(t.key),value:t.value})):void 0,orders:r.orders?r.orders.map(e=>(t,n)=>e({key:lr(t.key),value:t.value},{key:lr(n.key),value:n.value})):void 0}}function $O(r){return{...r,prefix:r.prefix?Kl(r.prefix):void 0,filters:r.filters?r.filters.map(e=>t=>e(lr(t))):void 0,orders:r.orders?r.orders.map(e=>(t,n)=>e(lr(t),lr(n))):void 0}}var Ra=class extends Ia{constructor(r){super(),this.child=r}open(){return this.child.open()}close(){return this.child.close()}async*query(r,e){for await(let{key:t,value:n}of this.child.query(UO(r),e))yield{key:lr(t),value:n}}async*queryKeys(r,e){for await(let t of this.child.queryKeys($O(r),e))yield lr(t)}async get(r,e){return this.child.get(ri(r),e)}async*getMany(r,e){for await(let t of r)yield this.get(t,e)}async put(r,e,t){await this.child.put(ri(r),e,t)}async*putMany(r,e){let t=(0,$l.default)();(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{let n=this.child;await(0,Ul.default)(this.child.putMany(async function*(){for await(let o of r){let i=ri(o.key);await n.has(i,e)||(yield{key:i,value:o.value}),t.push(o)}}())),t.end()}catch(n){t.end(n)}}),yield*t}has(r,e){return this.child.has(ri(r),e)}delete(r,e){return this.child.delete(ri(r),e)}deleteMany(r,e){let t=(0,$l.default)();return(0,Ul.default)(this.child.deleteMany(async function*(){for await(let n of r)yield ri(n),t.push(n);t.end()}(),e)).catch(n=>{t.end(n)}),t}};function cF(r,e,t){let n=t.path||"ipfs";return rb(n,o=>e.getCodec(o),{root:new fr(n,{prefix:"",version:2}),blocks:new Ra(new fr(`${n}/blocks`,{prefix:"",version:2})),datastore:new fr(`${n}/datastore`,{prefix:"",version:2}),keys:new fr(`${n}/keys`,{prefix:"",version:2}),pins:new fr(`${n}/pins`,{prefix:"",version:2})},{autoMigrate:t.autoMigrate,onMigrationProgress:t.onMigrationProgress||r,repoLock:vs})}/*!
* Determine if an object is a Buffer
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*//*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 *//*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 *//*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var timeBrowser=function r(){return Date.now()};const getTime=timeBrowser;class Retimer{constructor(e,t,n){const o=this;this._started=getTime(),this._rescheduled=0,this._scheduled=t,this._args=n,this._triggered=!1,this._timerWrapper=()=>{o._rescheduled>0?(o._scheduled=o._rescheduled-(getTime()-o._started),o._schedule(o._scheduled)):(o._triggered=!0,e.apply(null,o._args))},this._timer=setTimeout(this._timerWrapper,t)}reschedule(e){e||(e=this._scheduled);const t=getTime();t+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=t,this._rescheduled=e)}_schedule(e){this._triggered=!1,this._started=getTime(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}clear(){clearTimeout(this._timer)}}function retimer$1(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let r;if(arguments.length>0){r=new Array(arguments.length-2);for(var e=0;e<r.length;e++)r[e]=arguments[e+2]}return new Retimer(arguments[0],arguments[1],r)}var retimer_1=retimer$1;const{AbortController}=globalThis,retimer=retimer_1;class TimeoutController extends AbortController{constructor(e){super(),this._ms=e,this._timer=retimer(()=>this.abort(),e),Object.setPrototypeOf(this,TimeoutController.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=retimer(()=>this.abort(),this._ms)}}var timeoutAbortController={TimeoutController},anySignal$1={exports:{}};function anySignal(r){const e=new globalThis.AbortController;function t(){e.abort();for(const n of r)!n||!n.removeEventListener||n.removeEventListener("abort",t)}for(const n of r)if(!(!n||!n.addEventListener)){if(n.aborted){t();break}n.addEventListener("abort",t)}return e.signal}anySignal$1.exports=anySignal;var anySignal_2=anySignal$1.exports.anySignal=anySignal;let durationRE=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;parse.nanosecond=parse.ns=1/1e6;parse.\u00B5s=parse.\u03BCs=parse.us=parse.microsecond=1/1e3;parse.millisecond=parse.ms=parse[""]=1;parse.second=parse.sec=parse.s=parse.ms*1e3;parse.minute=parse.min=parse.m=parse.s*60;parse.hour=parse.hr=parse.h=parse.m*60;parse.day=parse.d=parse.h*24;parse.week=parse.wk=parse.w=parse.d*7;parse.month=parse.b=parse.d*(365.25/12);parse.year=parse.yr=parse.y=parse.d*365.25;function parse(r="",e="ms"){var t=null;return r=(r+"").replace(/(\d)[,_](\d)/g,"$1$2"),r.replace(durationRE,function(n,o,i){i=unitRatio(i),i&&(t=(t||0)+parseFloat(o,10)*i)}),t&&t/(unitRatio(e)||1)}function unitRatio(r){return parse[r]||parse[r.toLowerCase().replace(/s$/,"")]}class TimeoutError extends Error{constructor(e="request timed out"){super(e),this.name="TimeoutError",this.code=TimeoutError.code}}TimeoutError.code="ERR_TIMEOUT";function withTimeoutOption(r,e){return(...t)=>{const n=t[e==null?t.length-1:e];if(!n||!n.timeout)return r(...t);const o=typeof n.timeout=="string"?parse(n.timeout):n.timeout,i=new timeoutAbortController.TimeoutController(o);n.signal=anySignal_2([n.signal,i.signal]);const a=r(...t),s=new Promise((f,g)=>{i.signal.addEventListener("abort",()=>{g(new TimeoutError)})}),c=Date.now(),l=()=>{if(i.signal.aborted)throw new TimeoutError;if(Date.now()-c>o)throw i.abort(),new TimeoutError};return a[Symbol.asyncIterator]?async function*(){const f=a[Symbol.asyncIterator]();try{for(;;){const{value:g,done:D}=await Promise.race([f.next(),s]);if(D)break;l(),yield g}}catch(g){throw l(),g}finally{i.clear(),f.return&&f.return()}}():(async()=>{try{const f=await Promise.race([a,s]);return l(),f}catch(f){throw l(),f}finally{i.clear()}})()}}var browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var r=1e3,e=r*60,t=e*60,n=t*24,o=n*7,i=n*365.25;ms=function(f,g){g=g||{};var D=typeof f;if(D==="string"&&f.length>0)return a(f);if(D==="number"&&isFinite(f))return g.long?c(f):s(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function a(f){if(f=String(f),!(f.length>100)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(!!g){var D=parseFloat(g[1]),w=(g[2]||"ms").toLowerCase();switch(w){case"years":case"year":case"yrs":case"yr":case"y":return D*i;case"weeks":case"week":case"w":return D*o;case"days":case"day":case"d":return D*n;case"hours":case"hour":case"hrs":case"hr":case"h":return D*t;case"minutes":case"minute":case"mins":case"min":case"m":return D*e;case"seconds":case"second":case"secs":case"sec":case"s":return D*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return D;default:return}}}}function s(f){var g=Math.abs(f);return g>=n?Math.round(f/n)+"d":g>=t?Math.round(f/t)+"h":g>=e?Math.round(f/e)+"m":g>=r?Math.round(f/r)+"s":f+"ms"}function c(f){var g=Math.abs(f);return g>=n?l(f,g,n,"day"):g>=t?l(f,g,t,"hour"):g>=e?l(f,g,e,"minute"):g>=r?l(f,g,r,"second"):f+" ms"}function l(f,g,D,w){var E=g>=D*1.5;return Math.round(f/D)+" "+w+(E?"s":"")}return ms}function setup(r){t.debug=t,t.default=t,t.coerce=c,t.disable=i,t.enable=o,t.enabled=a,t.humanize=requireMs(),t.destroy=l,Object.keys(r).forEach(f=>{t[f]=r[f]}),t.names=[],t.skips=[],t.formatters={};function e(f){let g=0;for(let D=0;D<f.length;D++)g=(g<<5)-g+f.charCodeAt(D),g|=0;return t.colors[Math.abs(g)%t.colors.length]}t.selectColor=e;function t(f){let g,D=null,w,E;function d(...T){if(!d.enabled)return;const O=d,I=Number(new Date),j=I-(g||I);O.diff=j,O.prev=g,O.curr=I,g=I,T[0]=t.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let q=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(L,J)=>{if(L==="%%")return"%";q++;const X=t.formatters[J];if(typeof X=="function"){const re=T[q];L=X.call(O,re),T.splice(q,1),q--}return L}),t.formatArgs.call(O,T),(O.log||t.log).apply(O,T)}return d.namespace=f,d.useColors=t.useColors(),d.color=t.selectColor(f),d.extend=n,d.destroy=t.destroy,Object.defineProperty(d,"enabled",{enumerable:!0,configurable:!1,get:()=>D!==null?D:(w!==t.namespaces&&(w=t.namespaces,E=t.enabled(f)),E),set:T=>{D=T}}),typeof t.init=="function"&&t.init(d),d}function n(f,g){const D=t(this.namespace+(typeof g>"u"?":":g)+f);return D.log=this.log,D}function o(f){t.save(f),t.namespaces=f,t.names=[],t.skips=[];let g;const D=(typeof f=="string"?f:"").split(/[\s,]+/),w=D.length;for(g=0;g<w;g++)!D[g]||(f=D[g].replace(/\*/g,".*?"),f[0]==="-"?t.skips.push(new RegExp("^"+f.slice(1)+"$")):t.names.push(new RegExp("^"+f+"$")))}function i(){const f=[...t.names.map(s),...t.skips.map(s).map(g=>"-"+g)].join(",");return t.enable(""),f}function a(f){if(f[f.length-1]==="*")return!0;let g,D;for(g=0,D=t.skips.length;g<D;g++)if(t.skips[g].test(f))return!1;for(g=0,D=t.names.length;g<D;g++)if(t.names[g].test(f))return!0;return!1}function s(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack||f.message:f}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var common=setup;(function(r,e){e.formatArgs=n,e.save=o,e.load=i,e.useColors=t,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;c.splice(1,0,l,"color: inherit");let f=0,g=0;c[0].replace(/%[a-zA-Z%]/g,D=>{D!=="%%"&&(f++,D==="%c"&&(g=f))}),c.splice(g,0,l)}e.log=console.debug||console.log||(()=>{});function o(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function i(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function a(){try{return localStorage}catch{}}r.exports=common(e);const{formatters:s}=r.exports;s.j=function(c){try{return JSON.stringify(c)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(browser,browser.exports);const debug=browser.exports,base64=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$1=Object.freeze(Object.defineProperty({__proto__:null,base64,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"}));debug.formatters.b=r=>r==null?"undefined":base58btc$2.baseEncode(r);debug.formatters.t=r=>r==null?"undefined":base32$1.baseEncode(r);debug.formatters.m=r=>r==null?"undefined":base64.baseEncode(r);debug.formatters.p=r=>r==null?"undefined":r.toString();debug.formatters.c=r=>r==null?"undefined":r.toString();debug.formatters.k=r=>r==null?"undefined":r.toString();function logger(r){return Object.assign(debug(r),{error:debug(`${r}:error`),trace:debug(`${r}:trace`)})}const textEncoder$2=new TextEncoder,textDecoder$1=new TextDecoder,name$3="json",code$3=512,encode$5=r=>textEncoder$2.encode(JSON.stringify(r)),decode$4=r=>JSON.parse(textDecoder$1.decode(r)),json=Object.freeze(Object.defineProperty({__proto__:null,name:name$3,code:code$3,encode:encode$5,decode:decode$4},Symbol.toStringTag,{value:"Module"})),walk=async({cid:r,load:e,seen:t})=>{t=t||new Set;const n=r.toString(base58btc$2);if(t.has(n))return;const o=await e(r);if(t.add(n),o!==null)for(const[,i]of o.links())await walk({cid:i,load:e,seen:t})},log$1=logger("ipfs:components:dag:import"),NO_LINKS_CODECS=[code$4,code$3];function createExport({repo:r,preload:e,codecs:t}){async function*n(o,i={}){i.preload!==!1&&e(o);const a=CID$2.asCID(o);if(!a)throw new Error(`Unexpected error converting CID type: ${o}`);log$1(`Exporting ${a} as car`);const{writer:s,out:c}=await CarWriter.create([a]);let l=null;(async()=>{try{const f=makeLoader(r,s,{signal:i.signal,timeout:i.timeout},t);await walk({cid:a,load:f})}catch(f){l=f}finally{s.close()}})();for await(const f of c){if(l)break;yield f}if(l)throw l}return withTimeoutOption(n)}function makeLoader(r,e,t,n){return async o=>{const i=await n.getCodec(o.code);if(!i)throw new Error(`Can't decode links in block with codec 0x${o.code.toString(16)} to form complete DAG`);const a=await r.blocks.get(o,t);return log$1(`Adding block ${o} to car`),await e.put({cid:o,bytes:a}),NO_LINKS_CODECS.includes(o.code)?null:createUnsafe({bytes:a,cid:o,codec:i})}}const require$$0=getAugmentedNamespace(base58),require$$1=getAugmentedNamespace(base32$2),require$$2=getAugmentedNamespace(digest$1),word="[a-fA-F\\d:]",b=r=>r&&r.includeBoundaries?`(?:(?<=\\s|^)(?=${word})|(?<=${word})(?=\\s|$))`:"",v4="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",v6seg="[a-fA-F\\d]{1,4}",v6=`
(?:
(?:${v6seg}:){7}(?:${v6seg}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${v6seg}:){6}(?:${v4}|:${v6seg}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${v6seg}:){5}(?::${v4}|(?::${v6seg}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${v6seg}:){4}(?:(?::${v6seg}){0,1}:${v4}|(?::${v6seg}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${v6seg}:){3}(?:(?::${v6seg}){0,2}:${v4}|(?::${v6seg}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${v6seg}:){2}(?:(?::${v6seg}){0,3}:${v4}|(?::${v6seg}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${v6seg}:){1}(?:(?::${v6seg}){0,4}:${v4}|(?::${v6seg}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${v6seg}){0,5}:${v4}|(?::${v6seg}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),v46Exact=new RegExp(`(?:^${v4}$)|(?:^${v6}$)`),v4exact=new RegExp(`^${v4}$`),v6exact=new RegExp(`^${v6}$`),ip$2=r=>r&&r.exact?v46Exact:new RegExp(`(?:${b(r)}${v4}${b(r)})|(?:${b(r)}${v6}${b(r)})`,"g");ip$2.v4=r=>r&&r.exact?v4exact:new RegExp(`${b(r)}${v4}${b(r)}`,"g");ip$2.v6=r=>r&&r.exact?v6exact:new RegExp(`${b(r)}${v6}${b(r)}`,"g");var ipRegex$1=ip$2;const ipRegex=ipRegex$1,isIp$1=r=>ipRegex({exact:!0}).test(r);isIp$1.v4=r=>ipRegex.v4({exact:!0}).test(r);isIp$1.v6=r=>ipRegex.v6({exact:!0}).test(r);isIp$1.version=r=>isIp$1(r)?isIp$1.v4(r)?4:6:void 0;var isIp_1=isIp$1;const identity$2=from$1({prefix:"\0",name:"identity",encode:r=>toString$3(r),decode:r=>fromString$3(r)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$2},Symbol.toStringTag,{value:"Module"})),base2=rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),base8=rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),base10=baseX({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base36=baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),alphabetBytesToChars=alphabet.reduce((r,e,t)=>(r[t]=e,r),[]),alphabetCharsToBytes=alphabet.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function encode$4(r){return r.reduce((e,t)=>(e+=alphabetBytesToChars[t],e),"")}function decode$3(r){const e=[];for(const t of r){const n=alphabetCharsToBytes[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const base256emoji=from$1({prefix:"\u{1F680}",name:"base256emoji",encode:encode$4,decode:decode$3}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"})),code$2=0,name$2="identity",encode$3=coerce,digest=r=>create$2(code$2,encode$3(r)),identity={code:code$2,name:name$2,encode:encode$3,digest},identity$1=Object.freeze(Object.defineProperty({__proto__:null,identity},Symbol.toStringTag,{value:"Module"})),bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$2,...base36$1,...base58,...base64$1,...base256emoji$1},hashes={...sha2,...identity$1},codecs={raw,json};function allocUnsafe(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function createCodec(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const string=createCodec("utf8","u",r=>{const e=new TextDecoder("utf8");return"u"+e.decode(r)},r=>new TextEncoder().encode(r.substring(1))),ascii=createCodec("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=allocUnsafe(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),BASES={utf8:string,"utf-8":string,hex:bases.base16,latin1:ascii,ascii,binary:ascii,...bases};function toString$1(r,e="utf8"){const t=BASES[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}const toString$2=Object.freeze(Object.defineProperty({__proto__:null,toString:toString$1},Symbol.toStringTag,{value:"Module"})),require$$7$1=getAugmentedNamespace(toString$2),isIp=isIp_1,{toString:uint8ArrayToString$3}=require$$7$1,isIP=isIp,isV4=isIp.v4,isV6=isIp.v6,toBytes=function(r,e,t){t=~~t;let n;if(isV4(r))n=e||new Uint8Array(t+4),r.split(/\./g).map(function(o){n[t++]=parseInt(o,10)&255});else if(isV6(r)){const o=r.split(":",8);let i;for(i=0;i<o.length;i++){const a=isV4(o[i]);let s;a&&(s=toBytes(o[i]),o[i]=uint8ArrayToString$3(s.slice(0,2),"base16")),s&&++i<8&&o.splice(i,0,uint8ArrayToString$3(s.slice(2,4),"base16"))}if(o[0]==="")for(;o.length<8;)o.unshift("0");else if(o[o.length-1]==="")for(;o.length<8;)o.push("0");else if(o.length<8){for(i=0;i<o.length&&o[i]!=="";i++);const a=[i,"1"];for(i=9-o.length;i>0;i--)a.push("0");o.splice.apply(o,a)}for(n=e||new Uint8Array(t+16),i=0;i<o.length;i++){const a=parseInt(o[i],16);n[t++]=a>>8&255,n[t++]=a&255}}if(!n)throw Error("Invalid ip address: "+r);return n},toString=function(r,e,t){e=~~e,t=t||r.length-e;const n=[];let o;const i=new DataView(r.buffer);if(t===4){for(let a=0;a<t;a++)n.push(r[e+a]);o=n.join(".")}else if(t===16){for(let a=0;a<t;a+=2)n.push(i.getUint16(e+a).toString(16));o=n.join(":"),o=o.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),o=o.replace(/:{3,4}/,"::")}return o};var ip$1={isIP,isV4,isV6,toBytes,toString};function Protocols(r){if(typeof r=="number"){if(Protocols.codes[r])return Protocols.codes[r];throw new Error("no protocol with code: "+r)}else if(typeof r=="string"){if(Protocols.names[r])return Protocols.names[r];throw new Error("no protocol with name: "+r)}throw new Error("invalid protocol id type: "+r)}const V=-1;Protocols.lengthPrefixedVarSize=V;Protocols.V=V;Protocols.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,V,"ip6zone"],[53,V,"dns","resolvable"],[54,V,"dns4","resolvable"],[55,V,"dns6","resolvable"],[56,V,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,V,"unix",!1,"path"],[421,V,"ipfs"],[421,V,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,V,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,V,"memory"]];Protocols.names={};Protocols.codes={};Protocols.table.map(r=>{const e=p.apply(null,r);return Protocols.codes[e.code]=e,Protocols.names[e.name]=e,null});Protocols.object=p;function p(r,e,t,n,o){return{code:r,size:e,name:t,resolvable:Boolean(n),path:Boolean(o)}}var protocolsTable=Protocols;const require$$5=getAugmentedNamespace(cid);function fromString$1(r,e="utf8"){const t=BASES[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}const fromString$2=Object.freeze(Object.defineProperty({__proto__:null,fromString:fromString$1},Symbol.toStringTag,{value:"Module"})),require$$8=getAugmentedNamespace(fromString$2);function concat(r,e){e||(e=r.reduce((o,i)=>o+i.length,0));const t=allocUnsafe(e);let n=0;for(const o of r)t.set(o,n),n+=o.length;return t}const concat$1=Object.freeze(Object.defineProperty({__proto__:null,concat},Symbol.toStringTag,{value:"Module"})),require$$3=getAugmentedNamespace(concat$1),ip=ip$1,protocols$2=protocolsTable,{CID:CID$1}=require$$5,{base32}=require$$1,{base58btc:base58btc$1}=require$$0,Digest=require$$2,varint$2=varint$4,{toString:uint8ArrayToString$2}=require$$7$1,{fromString:uint8ArrayFromString}=require$$8,{concat:uint8ArrayConcat$1}=require$$3;var convert$1=Convert;function Convert(r,e){return e instanceof Uint8Array?Convert.toString(r,e):Convert.toBytes(r,e)}Convert.toString=function r(e,t){switch(protocols$2(e).code){case 4:case 41:return bytes2ip(t);case 6:case 273:case 33:case 132:return bytes2port(t).toString();case 53:case 54:case 55:case 56:case 400:case 777:return bytes2str(t);case 421:return bytes2mh(t);case 444:return bytes2onion(t);case 445:return bytes2onion(t);default:return uint8ArrayToString$2(t,"base16")}};Convert.toBytes=function r(e,t){switch(protocols$2(e).code){case 4:return ip2bytes(t);case 41:return ip2bytes(t);case 6:case 273:case 33:case 132:return port2bytes(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 777:return str2bytes(t);case 421:return mh2bytes(t);case 444:return onion2bytes(t);case 445:return onion32bytes(t);default:return uint8ArrayFromString(t,"base16")}};function ip2bytes(r){if(!ip.isIP(r))throw new Error("invalid ip address");return ip.toBytes(r)}function bytes2ip(r){const e=ip.toString(r);if(!e||!ip.isIP(e))throw new Error("invalid ip address");return e}function port2bytes(r){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function bytes2port(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function str2bytes(r){const e=uint8ArrayFromString(r),t=Uint8Array.from(varint$2.encode(e.length));return uint8ArrayConcat$1([t,e],t.length+e.length)}function bytes2str(r){const e=varint$2.decode(r);if(r=r.slice(varint$2.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return uint8ArrayToString$2(r)}function mh2bytes(r){let e;r[0]==="Q"||r[0]==="1"?e=Digest.decode(base58btc$1.decode(`z${r}`)).bytes:e=CID$1.parse(r).multihash.bytes;const t=Uint8Array.from(varint$2.encode(e.length));return uint8ArrayConcat$1([t,e],t.length+e.length)}function bytes2mh(r){const e=varint$2.decode(r),t=r.slice(varint$2.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return uint8ArrayToString$2(t,"base58btc")}function onion2bytes(r){const e=r.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==16)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion address.");const t=base32.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=port2bytes(n);return uint8ArrayConcat$1([t,o],t.length+o.length)}function onion32bytes(r){const e=r.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==56)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion3 address.");const t=base32.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const o=port2bytes(n);return uint8ArrayConcat$1([t,o],t.length+o.length)}function bytes2onion(r){const e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=uint8ArrayToString$2(e,"base32"),o=bytes2port(t);return n+":"+o}const convert=convert$1,protocols$1=protocolsTable,varint$1=varint$4,{concat:uint8ArrayConcat}=require$$3,{toString:uint8ArrayToString$1}=require$$7$1;var codec$1={stringToStringTuples,stringTuplesToString,tuplesToStringTuples,stringTuplesToTuples,bytesToTuples,tuplesToBytes,bytesToString,stringToBytes,fromString,fromBytes,validateBytes,isValidBytes,cleanPath,ParseError,protoFromTuple,sizeForAddr};function stringToStringTuples(r){const e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){const o=t[n],i=protocols$1(o);if(i.size===0){e.push([o]);continue}if(n++,n>=t.length)throw ParseError("invalid address: "+r);if(i.path){e.push([o,cleanPath(t.slice(n).join("/"))]);break}e.push([o,t[n]])}return e}function stringTuplesToString(r){const e=[];return r.map(t=>{const n=protoFromTuple(t);return e.push(n.name),t.length>1&&e.push(t[1]),null}),cleanPath(e.join("/"))}function stringTuplesToTuples(r){return r.map(e=>{Array.isArray(e)||(e=[e]);const t=protoFromTuple(e);return e.length>1?[t.code,convert.toBytes(t.code,e[1])]:[t.code]})}function tuplesToStringTuples(r){return r.map(e=>{const t=protoFromTuple(e);return e[1]?[t.code,convert.toString(t.code,e[1])]:[t.code]})}function tuplesToBytes(r){return fromBytes(uint8ArrayConcat(r.map(e=>{const t=protoFromTuple(e);let n=Uint8Array.from(varint$1.encode(t.code));return e.length>1&&(n=uint8ArrayConcat([n,e[1]])),n})))}function sizeForAddr(r,e){return r.size>0?r.size/8:r.size===0?0:varint$1.decode(e)+varint$1.decode.bytes}function bytesToTuples(r){const e=[];let t=0;for(;t<r.length;){const n=varint$1.decode(r,t),o=varint$1.decode.bytes,i=protocols$1(n),a=sizeForAddr(i,r.slice(t+o));if(a===0){e.push([n]),t+=o;continue}const s=r.slice(t+o,t+o+a);if(t+=a+o,t>r.length)throw ParseError("Invalid address Uint8Array: "+uint8ArrayToString$1(r,"base16"));e.push([n,s])}return e}function bytesToString(r){const e=bytesToTuples(r),t=tuplesToStringTuples(e);return stringTuplesToString(t)}function stringToBytes(r){r=cleanPath(r);const e=stringToStringTuples(r),t=stringTuplesToTuples(e);return tuplesToBytes(t)}function fromString(r){return stringToBytes(r)}function fromBytes(r){const e=validateBytes(r);if(e)throw e;return Uint8Array.from(r)}function validateBytes(r){try{bytesToTuples(r)}catch(e){return e}}function isValidBytes(r){return validateBytes(r)===void 0}function cleanPath(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function ParseError(r){return new Error("Error parsing address: "+r)}function protoFromTuple(r){return protocols$1(r[0])}function assign(r,e){for(const t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function createError(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return assign(r,t)}catch{t.message=r.message,t.stack=r.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(r)),assign(new o,t)}}var errCode$1=createError;function equals(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}const equals$1=Object.freeze(Object.defineProperty({__proto__:null,equals},Symbol.toStringTag,{value:"Module"})),require$$7=getAugmentedNamespace(equals$1),codec=codec$1,protocols=protocolsTable,varint=varint$4,{CID}=require$$5,{base58btc}=require$$0,errCode=errCode$1,inspect=Symbol.for("nodejs.util.inspect.custom"),{toString:uint8ArrayToString}=require$$7$1,{equals:uint8ArrayEquals}=require$$7,resolvers=new Map,symbol=Symbol.for("@multiformats/js-multiaddr/multiaddr");class Multiaddr{constructor(e){if(e==null&&(e=""),Object.defineProperty(this,symbol,{value:!0}),e instanceof Uint8Array)this.bytes=codec.fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=codec.fromString(e)}else if(Multiaddr.isMultiaddr(e))this.bytes=codec.fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return codec.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){const e={},t=this.toString().split("/");return e.family=t[1]==="ip4"?4:6,e.host=t[2],e.transport=t[3],e.port=parseInt(t[4]),e}protos(){return this.protoCodes().map(e=>Object.assign({},protocols(e)))}protoCodes(){const e=[],t=this.bytes;let n=0;for(;n<t.length;){const o=varint.decode(t,n),i=varint.decode.bytes,a=protocols(o);n+=codec.sizeForAddr(a,t.slice(n+i))+i,e.push(o)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return codec.bytesToTuples(this.bytes)}stringTuples(){const e=codec.bytesToTuples(this.bytes);return codec.tuplesToStringTuples(e)}encapsulate(e){return e=new Multiaddr(e),new Multiaddr(this.toString()+e.toString())}decapsulate(e){const t=e.toString(),n=this.toString(),o=n.lastIndexOf(t);if(o<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return new Multiaddr(n.slice(0,o))}decapsulateCode(e){const t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new Multiaddr(codec.tuplesToBytes(t.slice(0,n)));return this}getPeerId(){try{const t=this.stringTuples().filter(n=>n[0]===protocols.names.ipfs.code).pop();if(t&&t[1]){const n=t[1];return n[0]==="Q"||n[0]==="1"?uint8ArrayToString(base58btc.decode(`z${n}`),"base58btc"):uint8ArrayToString(CID.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>!!protocols(t[0]).path)[0][1],e||(e=null)}catch{e=null}return e}equals(e){return uint8ArrayEquals(this.bytes,e.bytes)}async resolve(){const e=this.protos().find(o=>o.resolvable);if(!e)return[this];const t=resolvers.get(e.name);if(!t)throw errCode(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await t(this)).map(o=>new Multiaddr(o))}nodeAddress(){const e=this.protoCodes(),t=this.protoNames(),n=this.toString().split("/").slice(1);if(n.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(e[0]!==4&&e[0]!==41&&e[0]!==54&&e[0]!==55)throw new Error(`no protocol with name: "'${t[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(n[2]!=="tcp"&&n[2]!=="udp")throw new Error(`no protocol with name: "'${t[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:e[0]===41||e[0]===55?6:4,address:n[1],port:parseInt(n[3])}}isThinWaistAddress(e){const t=(e||this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}static fromNodeAddress(e,t){if(!e)throw new Error("requires node address object");if(!t)throw new Error("requires transport protocol");let n;switch(e.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error(`Invalid addr family. Got '${e.family}' instead of 4 or 6`)}return new Multiaddr("/"+[n,e.address,t,e.port].join("/"))}static isName(e){return Multiaddr.isMultiaddr(e)?e.protos().some(t=>t.resolvable):!1}static isMultiaddr(e){return e instanceof Multiaddr||Boolean(e&&e[symbol])}[inspect](){return"<Multiaddr "+uint8ArrayToString(this.bytes,"base16")+" - "+codec.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+uint8ArrayToString(this.bytes,"base16")+" - "+codec.bytesToString(this.bytes)+">"}}Multiaddr.protocols=protocols;Multiaddr.resolvers=resolvers;let nanoid$1=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");const pathSepS="/",pathSepB=new TextEncoder().encode(pathSepS),pathSep=pathSepB[0];class Key{constructor(e,t){if(typeof e=="string")this._buf=fromString$1(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==pathSep)throw new Error("Invalid key")}toString(e="utf8"){return toString$1(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Key(e.join(pathSepS))}static random(){return new Key(nanoid$1().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Key(e):e.uint8Array?new Key(e.uint8Array()):null}clean(){if((!this._buf||this._buf.byteLength===0)&&(this._buf=pathSepB),this._buf[0]!==pathSep){const e=new Uint8Array(this._buf.byteLength+1);e.fill(pathSep,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===pathSep;)this._buf=this._buf.subarray(0,-1)}less(e){const t=this.list(),n=e.list();for(let o=0;o<t.length;o++){if(n.length<o+1)return!1;const i=t[o],a=n[o];if(i<a)return!0;if(i>a)return!1}return t.length<n.length}reverse(){return Key.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(pathSepS).slice(1)}type(){return namespaceType(this.baseNamespace())}name(){return namespaceValue(this.baseNamespace())}instance(e){return new Key(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(pathSepS)||(e+=pathSepS),e+=this.type(),new Key(e)}parent(){const e=this.list();return e.length===1?new Key(pathSepS):new Key(e.slice(0,-1).join(pathSepS))}child(e){return this.toString()===pathSepS?e:e.toString()===pathSepS?this:new Key(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Key.withNamespaces([...this.namespaces(),...flatten(e.map(t=>t.namespaces()))])}}function namespaceType(r){const e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function namespaceValue(r){const e=r.split(":");return e[e.length-1]}function flatten(r){return[].concat(...r)}const IPFS_PREFIX="/ipfs/";function toCidAndPath(r){if(r instanceof Uint8Array)try{r=CID$2.decode(r)}catch(o){throw errCode$1(o,"ERR_INVALID_CID")}let e=CID$2.asCID(r);if(e)return{cid:e,path:void 0};r=r.toString(),r.startsWith(IPFS_PREFIX)&&(r=r.substring(IPFS_PREFIX.length));const t=r.split("/");let n;try{e=CID$2.parse(t.shift()||"")}catch(o){throw errCode$1(o,"ERR_INVALID_CID")}return t.length&&(n=`/${t.join("/")}`),{cid:e,path:n}}const textDecoder=new TextDecoder;function decodeVarint(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");const o=r[e++];if(t+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[t,e]}function decodeBytes(r,e){let t;[t,e]=decodeVarint(r,e);const n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function decodeKey(r,e){let t;return[t,e]=decodeVarint(r,e),[t&7,t>>3,e]}function decodeLink(r){const e={},t=r.length;let n=0;for(;n<t;){let o,i;if([o,i,n]=decodeKey(r,n),i===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=decodeBytes(r,n)}else if(i===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let a;[a,n]=decodeBytes(r,n),e.Name=textDecoder.decode(a)}else if(i===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[e.Tsize,n]=decodeVarint(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${i}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function decodeNode(r){const e=r.length;let t=0,n,o=!1,i;for(;t<e;){let s,c;if([s,c,t]=decodeKey(r,t),s!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${s}`);if(c===1){if(i)throw new Error("protobuf: (PBNode) duplicate Data section");[i,t]=decodeBytes(r,t),n&&(o=!0)}else if(c===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let l;[l,t]=decodeBytes(r,t),n.push(decodeLink(l))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");const a={};return i&&(a.Data=i),a.Links=n||[],a}const textEncoder$1=new TextEncoder,maxInt32=2**32,maxUInt32=2**31;function encodeLink(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=encodeVarint(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){const n=textEncoder$1.encode(r.Name);t-=n.length,e.set(n,t),t=encodeVarint(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=encodeVarint(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function encodeNode(r){const e=sizeNode(r),t=new Uint8Array(e);let n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=encodeVarint(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let o=r.Links.length-1;o>=0;o--){const i=encodeLink(r.Links[o],t.subarray(0,n));n-=i,n=encodeVarint(t,n,i)-1,t[n]=18}return t}function sizeLink(r){let e=0;if(r.Hash){const t=r.Hash.length;e+=1+t+sov(t)}if(typeof r.Name=="string"){const t=textEncoder$1.encode(r.Name).length;e+=1+t+sov(t)}return typeof r.Tsize=="number"&&(e+=1+sov(r.Tsize)),e}function sizeNode(r){let e=0;if(r.Data){const t=r.Data.length;e+=1+t+sov(t)}if(r.Links)for(const t of r.Links){const n=sizeLink(t);e+=1+n+sov(n)}return e}function encodeVarint(r,e,t){e-=sov(t);const n=e;for(;t>=maxUInt32;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function sov(r){return r%2===0&&r++,Math.floor((len64(r)+6)/7)}function len64(r){let e=0;return r>=maxInt32&&(r=Math.floor(r/maxInt32),e=32),r>=1<<16&&(r>>>=16,e+=16),r>=1<<8&&(r>>>=8,e+=8),e+len8tab[r]}const len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder=new TextEncoder;function linkComparator(r,e){if(r===e)return 0;const t=r.Name?textEncoder.encode(r.Name):[],n=e.Name?textEncoder.encode(e.Name):[];let o=t.length,i=n.length;for(let a=0,s=Math.min(o,i);a<s;++a)if(t[a]!==n[a]){o=t[a],i=n[a];break}return o<i?-1:i<o?1:0}function hasOnlyProperties(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function asLink(r){if(typeof r.asCID=="object"){const t=CID$2.asCID(r);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");const e={};if(r.Hash){let t=CID$2.asCID(r.Hash);try{t||(typeof r.Hash=="string"?t=CID$2.parse(r.Hash):r.Hash instanceof Uint8Array&&(t=CID$2.decode(r.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}t&&(e.Hash=t)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof r.Name=="string"&&(e.Name=r.Name),typeof r.Tsize=="number"&&(e.Tsize=r.Tsize),e}function prepare(r){if((r instanceof Uint8Array||typeof r=="string")&&(r={Data:r}),typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");const e={};if(r.Data!==void 0)if(typeof r.Data=="string")e.Data=textEncoder.encode(r.Data);else if(r.Data instanceof Uint8Array)e.Data=r.Data;else throw new TypeError("Invalid DAG-PB form");if(r.Links!==void 0)if(Array.isArray(r.Links))e.Links=r.Links.map(asLink),e.Links.sort(linkComparator);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function validate(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(r,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<r.Links.length;e++){const t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!hasOnlyProperties(t,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!t.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash.asCID!==t.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0&&(typeof t.Tsize!="number"||t.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&linkComparator(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function createNode(r,e=[]){return prepare({Data:r,Links:e})}function createLink(r,e,t){return asLink({Hash:t,Name:r,Tsize:e})}const name$1="dag-pb",code$1=112;function encode$2(r){validate(r);const e={};return r.Links&&(e.Links=r.Links.map(t=>{const n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),encodeNode(e)}function decode$2(r){const e=decodeNode(r),t={};return e.Data&&(t.Data=e.Data),e.Links&&(t.Links=e.Links.map(n=>{const o={};try{o.Hash=CID$2.decode(n.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(o.Name=n.Name),n.Tsize!==void 0&&(o.Tsize=n.Tsize),o})),t}const dagPB=Object.freeze(Object.defineProperty({__proto__:null,name:name$1,code:code$1,encode:encode$2,decode:decode$2,prepare,validate,createNode,createLink},Symbol.toStringTag,{value:"Module"}));new Key("/local/filesroot");const resolvePath=async function(r,e,t,n={}){const{cid:o,path:i}=toCidAndPath(t);i&&(n.path=i);let a=o,s=n.path||"";if(s.startsWith("/")&&(s=s.substring(1)),n.path)try{for await(const{value:c,remainderPath:l}of resolve(o,n.path,e,r,{signal:n.signal})){if(!CID$2.asCID(c))break;s=l,a=c}}catch(c){throw c.message.startsWith("Object has no property")&&(c.message=`no link named "${s.split("/")[0]}" under ${a}`,c.code="ERR_NO_LINK"),c}return{cid:a,remainderPath:s||""}},resolve=async function*(r,e,t,n,o){const i=async l=>{const f=await t.getCodec(l.code),g=await n.blocks.get(l,o);return f.decode(g)},a=e.split("/").filter(Boolean);let s=await i(r),c=r;for(;a.length;){const l=a.shift();if(!l)throw errCode$1(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(r.code===code$1&&Array.isArray(s.Links)){const f=s.Links.find(g=>g.Name===l);if(f){yield{value:f.Hash,remainderPath:a.join("/")},s=await i(f.Hash),c=f.Hash;continue}}if(Object.prototype.hasOwnProperty.call(s,l))s=s[l],yield{value:s,remainderPath:a.join("/")};else throw errCode$1(new Error(`no link named "${l}" under ${c}`),"ERR_NO_LINK");CID$2.asCID(s)&&(c=s,s=await i(s))}yield{value:s,remainderPath:""}};function peekableIterator(r){const[e,t]=r[Symbol.asyncIterator]?[r[Symbol.asyncIterator](),Symbol.asyncIterator]:[r[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:o=>{n.push(o)},next:()=>n.length?{done:!1,value:n.shift()}:e.next(),[t](){return this}}}var itPeekable=peekableIterator;const drain=async r=>{for await(const e of r);};var itDrain=drain;const map=async function*(r,e){for await(const t of r)yield e(t)};var itMap=map;const log=logger("ipfs:components:dag:import");function createImport({repo:r}){async function*e(t,n={}){const o=await r.gcLock.readLock();try{const i={signal:n.signal,timeout:n.timeout},a=itPeekable(t),{value:s,done:c}=await a.peek();if(c)return;s&&a.push(s);let l;s instanceof Uint8Array?l=[a]:l=a;for await(const f of l){const g=await importCar(r,i,f);if(n.pinRoots!==!1)for(const D of g){let w="";try{await r.blocks.has(D)?(log(`Pinning root ${D}`),await r.pins.pinRecursively(D)):w="blockstore: block not found"}catch(E){w=E.message}yield{root:{cid:D,pinErrorMsg:w}}}}}finally{o()}}return withTimeoutOption(e)}async function importCar(r,e,t){const n=await CarBlockIterator.fromIterable(t),o=await n.getRoots();return await itDrain(r.blocks.putMany(itMap(n,({cid:i,bytes:a})=>(log(`Import block ${i}`),{key:i,value:a})),{signal:e.signal})),o}var events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function r(e,t,n){return Function.prototype.apply.call(e,t,n)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(r){console&&console.warn&&console.warn(r)}var NumberIsNaN=Number.isNaN||function r(e){return e!==e};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;events.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(r){if(typeof r!="number"||r<0||NumberIsNaN(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");defaultMaxListeners=r}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function r(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(r){return r._maxListeners===void 0?EventEmitter.defaultMaxListeners:r._maxListeners}EventEmitter.prototype.getMaxListeners=function r(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function r(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o=e==="error",i=this._events;if(i!==void 0)o=o&&i.error===void 0;else if(!o)return!1;if(o){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")ReflectApply(c,this,t);else for(var l=c.length,f=arrayClone(c,l),n=0;n<l;++n)ReflectApply(f[n],this,t);return!0};function _addListener(r,e,t,n){var o,i,a;if(checkListener(t),i=r._events,i===void 0?(i=r._events=Object.create(null),r._eventsCount=0):(i.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),i=r._events),a=i[e]),a===void 0)a=i[e]=t,++r._eventsCount;else if(typeof a=="function"?a=i[e]=n?[t,a]:[a,t]:n?a.unshift(t):a.push(t),o=_getMaxListeners(r),o>0&&a.length>o&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=r,s.type=e,s.count=a.length,ProcessEmitWarning(s)}return r}EventEmitter.prototype.addListener=function r(e,t){return _addListener(this,e,t,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function r(e,t){return _addListener(this,e,t,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},o=onceWrapper.bind(n);return o.listener=t,n.wrapFn=o,o}EventEmitter.prototype.once=function r(e,t){return checkListener(t),this.on(e,_onceWrap(this,e,t)),this};EventEmitter.prototype.prependOnceListener=function r(e,t){return checkListener(t),this.prependListener(e,_onceWrap(this,e,t)),this};EventEmitter.prototype.removeListener=function r(e,t){var n,o,i,a,s;if(checkListener(t),o=this._events,o===void 0)return this;if(n=o[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){s=n[a].listener,i=a;break}if(i<0)return this;i===0?n.shift():spliceOne(n,i),n.length===1&&(o[e]=n[0]),o.removeListener!==void 0&&this.emit("removeListener",e,s||t)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function r(e){var t,n,o;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var i=Object.keys(n),a;for(o=0;o<i.length;++o)a=i[o],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this};function _listeners(r,e,t){var n=r._events;if(n===void 0)return[];var o=n[e];return o===void 0?[]:typeof o=="function"?t?[o.listener||o]:[o]:t?unwrapListeners(o):arrayClone(o,o.length)}EventEmitter.prototype.listeners=function r(e){return _listeners(this,e,!0)};EventEmitter.prototype.rawListeners=function r(e){return _listeners(this,e,!1)};EventEmitter.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):listenerCount.call(r,e)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}EventEmitter.prototype.eventNames=function r(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function spliceOne(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function unwrapListeners(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function once(r,e){return new Promise(function(t,n){function o(a){r.removeListener(e,i),n(a)}function i(){typeof r.removeListener=="function"&&r.removeListener("error",o),t([].slice.call(arguments))}eventTargetAgnosticAddListener(r,e,i,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(r,o,{once:!0})})}function addErrorHandlerIfEventEmitter(r,e,t){typeof r.on=="function"&&eventTargetAgnosticAddListener(r,"error",e,t)}function eventTargetAgnosticAddListener(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function o(i){n.once&&r.removeEventListener(e,o),t(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}events.exports.EventEmitter;class JSONEncoder extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===Type.array&&(t.elements++,t.elements!==1&&e.push([44])),t.type===Type.map&&(t.elements++,t.elements!==1&&(t.elements%2===1?e.push([44]):e.push([58]))))}[Type.uint.major](e,t){this.prefix(e);const n=String(t.value),o=[];for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i);e.push(o)}[Type.negint.major](e,t){this[Type.uint.major](e,t)}[Type.bytes.major](e,t){throw new Error(`${encodeErrPrefix} unsupported type: Uint8Array`)}[Type.string.major](e,t){this.prefix(e);const n=fromString$4(JSON.stringify(t.value));e.push(n.length>32?asU8A(n):n)}[Type.array.major](e,t){this.prefix(e),this.inRecursive.push({type:Type.array,elements:0}),e.push([91])}[Type.map.major](e,t){this.prefix(e),this.inRecursive.push({type:Type.map,elements:0}),e.push([123])}[Type.tag.major](e,t){}[Type.float.major](e,t){if(t.type.name==="break"){const a=this.inRecursive.pop();if(a){if(a.type===Type.array)e.push([93]);else if(a.type===Type.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(t.value===void 0)throw new Error(`${encodeErrPrefix} unsupported type: undefined`);if(this.prefix(e),t.type.name==="true"){e.push([116,114,117,101]);return}else if(t.type.name==="false"){e.push([102,97,108,115,101]);return}else if(t.type.name==="null"){e.push([110,117,108,108]);return}const n=String(t.value),o=[];let i=!1;for(let a=0;a<n.length;a++)o[a]=n.charCodeAt(a),!i&&(o[a]===46||o[a]===101||o[a]===69)&&(i=!0);i||(o.push(46),o.push(48)),e.push(o)}}function mapSorter(r,e){if(Array.isArray(r[0])||Array.isArray(e[0]))throw new Error(`${encodeErrPrefix} complex map keys are not supported`);const t=r[0],n=e[0];if(t.type!==Type.string||n.type!==Type.string)throw new Error(`${encodeErrPrefix} non-string map keys are not supported`);if(t<n)return-1;if(t>n)return 1;throw new Error(`${encodeErrPrefix} unexpected duplicate map keys, this is not supported`)}const defaultEncodeOptions={addBreakTokens:!0,mapSorter};function encode$1(r,e){return e=Object.assign({},defaultEncodeOptions,e),encodeCustom(r,new JSONEncoder,e)}class Tokenizer{constructor(e,t={}){this.pos=0,this.data=e,this.options=t,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this.pos]}expect(e){if(this.data.length-this.pos<e.length)throw new Error(`${decodeErrPrefix} unexpected end of input at position ${this.pos}`);for(let t=0;t<e.length;t++)if(this.data[this.pos++]!==e[t])throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this.pos;let t=!1,n=!1;const o=s=>{for(;!this.done();){const c=this.ch();if(s.includes(c))this.pos++;else break}};if(this.ch()===45&&(t=!0,this.pos++),this.ch()===48)if(this.pos++,this.ch()===46)this.pos++,n=!0;else return new Token(Type.uint,0,this.pos-e);if(o([48,49,50,51,52,53,54,55,56,57]),t&&this.pos===e+1)throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}`);n=!0,this.pos++,o([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this.pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this.pos++,o([48,49,50,51,52,53,54,55,56,57]));const i=String.fromCharCode.apply(null,this.data.subarray(e,this.pos)),a=parseFloat(i);return n?new Token(Type.float,a,this.pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(a)?new Token(a>=0?Type.uint:Type.negint,a,this.pos-e):new Token(a>=0?Type.uint:Type.negint,BigInt(i),this.pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let i=this.pos,a=0;i<this.data.length&&a<65536;i++,a++){const s=this.data[i];if(s===92||s<32||s>=128)break;if(s===34){const c=String.fromCharCode.apply(null,this.data.subarray(this.pos,i));return this.pos=i+1,new Token(Type.string,c,a)}}const e=this.pos,t=[],n=()=>{if(this.pos+4>=this.data.length)throw new Error(`${decodeErrPrefix} unexpected end of unicode escape sequence at position ${this.pos}`);let i=0;for(let a=0;a<4;a++){let s=this.ch();if(s>=48&&s<=57)s-=48;else if(s>=97&&s<=102)s=s-97+10;else if(s>=65&&s<=70)s=s-65+10;else throw new Error(`${decodeErrPrefix} unexpected unicode escape character at position ${this.pos}`);i=i*16+s,this.pos++}return i},o=()=>{const i=this.ch();let a=null,s=i>239?4:i>223?3:i>191?2:1;if(this.pos+s>this.data.length)throw new Error(`${decodeErrPrefix} unexpected unicode sequence at position ${this.pos}`);let c,l,f,g;switch(s){case 1:i<128&&(a=i);break;case 2:c=this.data[this.pos+1],(c&192)===128&&(g=(i&31)<<6|c&63,g>127&&(a=g));break;case 3:c=this.data[this.pos+1],l=this.data[this.pos+2],(c&192)===128&&(l&192)===128&&(g=(i&15)<<12|(c&63)<<6|l&63,g>2047&&(g<55296||g>57343)&&(a=g));break;case 4:c=this.data[this.pos+1],l=this.data[this.pos+2],f=this.data[this.pos+3],(c&192)===128&&(l&192)===128&&(f&192)===128&&(g=(i&15)<<18|(c&63)<<12|(l&63)<<6|f&63,g>65535&&g<1114112&&(a=g))}a===null?(a=65533,s=1):a>65535&&(a-=65536,t.push(a>>>10&1023|55296),a=56320|a&1023),t.push(a),this.pos+=s};for(;!this.done();){const i=this.ch();let a;switch(i){case 92:if(this.pos++,this.done())throw new Error(`${decodeErrPrefix} unexpected string termination at position ${this.pos}`);switch(a=this.ch(),this.pos++,a){case 34:case 39:case 92:case 47:t.push(a);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(n());break;default:throw new Error(`${decodeErrPrefix} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new Token(Type.string,decodeCodePointsArray(t),this.pos-e);default:if(i<32)throw new Error(`${decodeErrPrefix} invalid control character at position ${this.pos}`);i<128?(t.push(i),this.pos++):o()}}throw new Error(`${decodeErrPrefix} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new Token(Type.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new Token(Type.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Token(Type.null,null,4);case 102:return this.expect([102,97,108,115,101]),new Token(Type.false,!1,5);case 116:return this.expect([116,114,117,101]),new Token(Type.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${decodeErrPrefix} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}}function decode$1(r,e){return e=Object.assign({tokenizer:new Tokenizer(r,e)},e),decode$c(r,e)}function cidEncoder(r){if(r.asCID!==r)return null;const e=CID$2.asCID(r);if(!e)return null;const t=e.toString();return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.string,t,t.length),new Token(Type.break,void 0,1)]}function bytesEncoder(r){const e=base64.encode(r).slice(1);return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.map,1/0,1),new Token(Type.string,"bytes",5),new Token(Type.string,e,e.length),new Token(Type.break,void 0,1),new Token(Type.break,void 0,1)]}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={typeEncoders:{Object:cidEncoder,Uint8Array:bytesEncoder,Buffer:bytesEncoder,undefined:undefinedEncoder,number:numberEncoder}};class DagJsonTokenizer extends Tokenizer{constructor(e,t){super(e,t),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===Type.map){const t=this._next();if(t.type===Type.string&&t.value==="/"){const n=this._next();if(n.type===Type.string){if(this._next().type!==Type.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new Token(Type.tag,42,0)}if(n.type===Type.map){const o=this._next();if(o.type===Type.string&&o.value==="bytes"){const i=this._next();if(i.type===Type.string){for(let s=0;s<2;s++)if(this._next().type!==Type.break)throw new Error("Invalid encoded Bytes form");const a=base64.decode(`m${i.value}`);return new Token(Type.bytes,a,i.value.length)}this.tokenBuffer.push(i)}this.tokenBuffer.push(o)}this.tokenBuffer.push(n)}this.tokenBuffer.push(t)}return e}}const decodeOptions={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions.tags[42]=CID$2.parse;const name="dag-json",code=297,encode=r=>encode$1(r,encodeOptions),decode=r=>{const e=Object.assign(decodeOptions,{tokenizer:new DagJsonTokenizer(r,decodeOptions)});return decode$1(r,e)},dagJSON=Object.freeze(Object.defineProperty({__proto__:null,name,code,encode,decode},Symbol.toStringTag,{value:"Module"}));function get_each_context$3(r,e,t){const n=r.slice();return n[3]=e[t][0],n[4]=e[t][1],n}function create_if_block$5(r){let e,t,n,o={ctx:r,current:null,token:null,hasCatch:!1,pending:create_pending_block$1,then:create_then_block$1,catch:create_catch_block$1,value:1,blocks:[,,,]};return handle_promise(t=r[1],o),{c(){e=empty$1(),o.block.c()},l(i){e=empty$1(),o.block.l(i)},m(i,a){insert_hydration(i,e,a),o.block.m(i,o.anchor=a),o.mount=()=>e.parentNode,o.anchor=e,n=!0},p(i,a){r=i,o.ctx=r,a&2&&t!==(t=r[1])&&handle_promise(t,o)||update_await_block_branch(o,r,a)},i(i){n||(transition_in(o.block),n=!0)},o(i){for(let a=0;a<3;a+=1){const s=o.blocks[a];transition_out(s)}n=!1},d(i){i&&detach(e),o.block.d(i),o.token=null,o=null}}}function create_catch_block$1(r){return{c:noop$2,l:noop$2,m:noop$2,p:noop$2,i:noop$2,o:noop$2,d:noop$2}}function create_then_block$1(r){let e,t,n=Object.entries(r[1]),o=[];for(let a=0;a<n.length;a+=1)o[a]=create_each_block$3(get_each_context$3(r,n,a));const i=a=>transition_out(o[a],1,1,()=>{o[a]=null});return{c(){for(let a=0;a<o.length;a+=1)o[a].c();e=empty$1()},l(a){for(let s=0;s<o.length;s+=1)o[s].l(a);e=empty$1()},m(a,s){for(let c=0;c<o.length;c+=1)o[c].m(a,s);insert_hydration(a,e,s),t=!0},p(a,s){if(s&3){n=Object.entries(a[1]);let c;for(c=0;c<n.length;c+=1){const l=get_each_context$3(a,n,c);o[c]?(o[c].p(l,s),transition_in(o[c],1)):(o[c]=create_each_block$3(l),o[c].c(),transition_in(o[c],1),o[c].m(e.parentNode,e))}for(group_outros(),c=n.length;c<o.length;c+=1)i(c);check_outros()}},i(a){if(!t){for(let s=0;s<n.length;s+=1)transition_in(o[s]);t=!0}},o(a){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)transition_out(o[s]);t=!1},d(a){destroy_each(o,a),a&&detach(e)}}}function create_else_block$1(r){let e,t=r[3]+"",n,o,i=r[4]+"",a;return{c(){e=element("div"),n=text(t),o=text(": "),a=text(i),this.h()},l(s){e=claim_element(s,"DIV",{class:!0});var c=children(e);n=claim_text(c,t),o=claim_text(c,": "),a=claim_text(c,i),c.forEach(detach),this.h()},h(){attr(e,"class","bg-slate-100 rounded-lg m-1 p-1 w-fit")},m(s,c){insert_hydration(s,e,c),append_hydration(e,n),append_hydration(e,o),append_hydration(e,a)},p(s,c){c&2&&t!==(t=s[3]+"")&&set_data(n,t),c&2&&i!==(i=s[4]+"")&&set_data(a,i)},i:noop$2,o:noop$2,d(s){s&&detach(e)}}}function create_if_block_1$2(r){let e,t;return e=new ShowNode({props:{get:r[0],node:r[4]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,o){mount_component(e,n,o),t=!0},p(n,o){const i={};o&1&&(i.get=n[0]),o&2&&(i.node=n[4]),e.$set(i)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_each_block$3(r){let e,t,n,o,i;const a=[create_if_block_1$2,create_else_block$1],s=[];function c(l,f){return f&2&&(e=null),e==null&&(e=!!CID$2.asCID(l[4])),e?0:1}return t=c(r,-1),n=s[t]=a[t](r),{c(){n.c(),o=empty$1()},l(l){n.l(l),o=empty$1()},m(l,f){s[t].m(l,f),insert_hydration(l,o,f),i=!0},p(l,f){let g=t;t=c(l,f),t===g?s[t].p(l,f):(group_outros(),transition_out(s[g],1,1,()=>{s[g]=null}),check_outros(),n=s[t],n?n.p(l,f):(n=s[t]=a[t](l),n.c()),transition_in(n,1),n.m(o.parentNode,o))},i(l){i||(transition_in(n),i=!0)},o(l){transition_out(n),i=!1},d(l){s[t].d(l),l&&detach(o)}}}function create_pending_block$1(r){return{c:noop$2,l:noop$2,m:noop$2,p:noop$2,i:noop$2,o:noop$2,d:noop$2}}function create_fragment$7(r){let e,t,n=r[1]&&create_if_block$5(r);return{c(){n&&n.c(),e=empty$1()},l(o){n&&n.l(o),e=empty$1()},m(o,i){n&&n.m(o,i),insert_hydration(o,e,i),t=!0},p(o,[i]){o[1]?n?(n.p(o,i),i&2&&transition_in(n,1)):(n=create_if_block$5(o),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(o){t||(transition_in(n),t=!0)},o(o){transition_out(n),t=!1},d(o){n&&n.d(o),o&&detach(e)}}}function instance$7(r,e,t){let{get:n}=e,{node:o}=e,i;return onMount(async()=>{console.log({node:o}),t(1,i=await n(o))}),r.$$set=a=>{"get"in a&&t(0,n=a.get),"node"in a&&t(2,o=a.node)},[n,i,o]}class ShowNode extends SvelteComponent{constructor(e){super(),init(this,e,instance$7,create_fragment$7,safe_not_equal,{get:0,node:2})}}function create_if_block$4(r){let e,t,n,o={ctx:r,current:null,token:null,hasCatch:!1,pending:create_pending_block,then:create_then_block,catch:create_catch_block,value:1,blocks:[,,,]};return handle_promise(t=r[1],o),{c(){e=empty$1(),o.block.c()},l(i){e=empty$1(),o.block.l(i)},m(i,a){insert_hydration(i,e,a),o.block.m(i,o.anchor=a),o.mount=()=>e.parentNode,o.anchor=e,n=!0},p(i,a){r=i,o.ctx=r,a&2&&t!==(t=r[1])&&handle_promise(t,o)||update_await_block_branch(o,r,a)},i(i){n||(transition_in(o.block),n=!0)},o(i){for(let a=0;a<3;a+=1){const s=o.blocks[a];transition_out(s)}n=!1},d(i){i&&detach(e),o.block.d(i),o.token=null,o=null}}}function create_catch_block(r){return{c:noop$2,l:noop$2,m:noop$2,p:noop$2,i:noop$2,o:noop$2,d:noop$2}}function create_then_block(r){let e,t;return e=new ShowNode({props:{get:r[0],node:r[1]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,o){mount_component(e,n,o),t=!0},p(n,o){const i={};o&1&&(i.get=n[0]),o&2&&(i.node=n[1]),e.$set(i)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block(r){let e;return{c(){e=text("Loading commit")},l(t){e=claim_text(t,"Loading commit")},m(t,n){insert_hydration(t,e,n)},p:noop$2,i:noop$2,o:noop$2,d(t){t&&detach(e)}}}function create_fragment$6(r){let e,t,n=r[1]&&create_if_block$4(r);return{c(){n&&n.c(),e=empty$1()},l(o){n&&n.l(o),e=empty$1()},m(o,i){n&&n.m(o,i),insert_hydration(o,e,i),t=!0},p(o,[i]){o[1]?n?(n.p(o,i),i&2&&transition_in(n,1)):(n=create_if_block$4(o),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(o){t||(transition_in(n),t=!0)},o(o){transition_out(n),t=!1},d(o){n&&n.d(o),o&&detach(e)}}}function instance$6(r,e,t){let{commit:n}=e,o,i;return onMount(async()=>{t(1,{root:o,get:i}=await Transaction.load(n),o,t(0,i)),console.log({root:o,get:i})}),r.$$set=a=>{"commit"in a&&t(2,n=a.commit)},[i,o,n]}class LoadTx extends SvelteComponent{constructor(e){super(),init(this,e,instance$6,create_fragment$6,safe_not_equal,{commit:2})}}function get_each_context$2(r,e,t){const n=r.slice();return n[6]=e[t],n[8]=t,n}function create_else_block(r){let e;return{c(){e=text("No Commits")},l(t){e=claim_text(t,"No Commits")},m(t,n){insert_hydration(t,e,n)},p:noop$2,i:noop$2,o:noop$2,d(t){t&&detach(e)}}}function create_if_block$3(r){let e,t=[],n=new Map,o,i=r[0];const a=s=>s[8];for(let s=0;s<i.length;s+=1){let c=get_each_context$2(r,i,s),l=a(c);n.set(l,t[s]=create_each_block$2(l,c))}return{c(){e=element("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=claim_element(s,"DIV",{class:!0});var c=children(e);for(let l=0;l<t.length;l+=1)t[l].l(c);c.forEach(detach),this.h()},h(){attr(e,"class","flex flex-col-reverse ")},m(s,c){insert_hydration(s,e,c);for(let l=0;l<t.length;l+=1)t[l].m(e,null);o=!0},p(s,c){if(c&1){i=s[0],group_outros();for(let l=0;l<t.length;l+=1)t[l].r();t=update_keyed_each(t,c,a,1,s,i,n,e,fix_and_outro_and_destroy_block,create_each_block$2,null,get_each_context$2);for(let l=0;l<t.length;l+=1)t[l].a();check_outros()}},i(s){if(!o){for(let c=0;c<i.length;c+=1)transition_in(t[c]);o=!0}},o(s){for(let c=0;c<t.length;c+=1)transition_out(t[c]);o=!1},d(s){s&&detach(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function create_each_block$2(r,e){let t,n,o,i,a=noop$2,s;return n=new LoadTx({props:{commit:e[6]}}),{key:r,first:null,c(){t=element("div"),create_component(n.$$.fragment),o=space(),this.h()},l(c){t=claim_element(c,"DIV",{class:!0});var l=children(t);claim_component(n.$$.fragment,l),o=claim_space(l),l.forEach(detach),this.h()},h(){attr(t,"class","m-4 p-2 border-2 border-dashed "),this.first=t},m(c,l){insert_hydration(c,t,l),mount_component(n,t,null),append_hydration(t,o),s=!0},p(c,l){e=c;const f={};l&1&&(f.commit=e[6]),n.$set(f)},r(){i=t.getBoundingClientRect()},f(){fix_position(t),a()},a(){a(),a=create_animation(t,i,flip,{})},i(c){s||(transition_in(n.$$.fragment,c),s=!0)},o(c){transition_out(n.$$.fragment,c),s=!1},d(c){c&&detach(t),destroy_component(n)}}}function create_fragment$5(r){let e,t,n,o,i,a,s,c;function l(E){r[4](E)}let f={};r[1]!==void 0&&(f.tx=r[1]),t=new AddTx({props:f}),binding_callbacks.push(()=>bind(t,"tx",l)),t.$on("commit",r[2]);const g=[create_if_block$3,create_else_block],D=[];function w(E,d){return E[0]&&E[0].length?0:1}return i=w(r),a=D[i]=g[i](r),{c(){e=element("div"),create_component(t.$$.fragment),o=space(),a.c(),s=empty$1(),this.h()},l(E){e=claim_element(E,"DIV",{class:!0});var d=children(e);claim_component(t.$$.fragment,d),d.forEach(detach),o=claim_space(E),a.l(E),s=empty$1(),this.h()},h(){attr(e,"class","m-4 p-4 border-dashed border-2")},m(E,d){insert_hydration(E,e,d),mount_component(t,e,null),insert_hydration(E,o,d),D[i].m(E,d),insert_hydration(E,s,d),c=!0},p(E,[d]){const T={};!n&&d&2&&(n=!0,T.tx=E[1],add_flush_callback(()=>n=!1)),t.$set(T);let O=i;i=w(E),i===O?D[i].p(E,d):(group_outros(),transition_out(D[O],1,1,()=>{D[O]=null}),check_outros(),a=D[i],a?a.p(E,d):(a=D[i]=g[i](E),a.c()),transition_in(a,1),a.m(s.parentNode,s))},i(E){c||(transition_in(t.$$.fragment,E),transition_in(a),c=!0)},o(E){transition_out(t.$$.fragment,E),transition_out(a),c=!1},d(E){E&&detach(e),destroy_component(t),E&&detach(o),D[i].d(E),E&&detach(s)}}}function instance$5(r,e,t){let{commits:n=[]}=e,{connectable:o}=e,i=null,a;setContext("connectable",o),onMount(async()=>{const{createDagRepo:l}=await __vitePreload(()=>import("./dagRepo-24ae306b.js"),["dagRepo-24ae306b.js","index-a6cc9c6d.js","preload-helper-aa6bc0ce.js","index-7ea16a28.js"],import.meta.url);t(1,i=Transaction.create()),a=await l(),console.log({dag:a})});function s(l){const f=l.detail;t(0,n=[...n,f]),t(1,i=Transaction.create())}function c(l){i=l,t(1,i)}return r.$$set=l=>{"commits"in l&&t(0,n=l.commits),"connectable"in l&&t(3,o=l.connectable)},[n,i,s,o,c]}class Board extends SvelteComponent{constructor(e){super(),init(this,e,instance$5,create_fragment$5,safe_not_equal,{commits:0,connectable:3})}}class Pointer{constructor(e){this.id=-1,this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,self.Touch&&e instanceof Touch?this.id=e.identifier:isPointerEvent(e)&&(this.id=e.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const e=this.nativePointer.getCoalescedEvents().map(t=>new Pointer(t));if(e.length>0)return e}return[this]}}const isPointerEvent=r=>"pointerId"in r,isTouchEvent=r=>"changedTouches"in r,noop=()=>{};class PointerTracker{constructor(e,{start:t=()=>!0,move:n=noop,end:o=noop,rawUpdates:i=!1,avoidPointerEvents:a=!1,eventListenerOptions:s={capture:!1,passive:!1,once:!1}}={}){this._element=e,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=c=>{if(isPointerEvent(c)&&c.buttons===0)this._excludeFromButtonsCheck.add(c.pointerId);else if(!(c.buttons&1))return;const l=new Pointer(c);this.currentPointers.some(f=>f.id===l.id)||!this._triggerPointerStart(l,c)||(isPointerEvent(c)?((c.target&&"setPointerCapture"in c.target?c.target:this._element).setPointerCapture(c.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move,this._eventListenerOptions),this._element.addEventListener("pointerup",this._pointerEnd,this._eventListenerOptions),this._element.addEventListener("pointercancel",this._pointerEnd,this._eventListenerOptions)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=c=>{for(const l of Array.from(c.changedTouches))this._triggerPointerStart(new Pointer(l),c)},this._move=c=>{if(!isTouchEvent(c)&&(!isPointerEvent(c)||!this._excludeFromButtonsCheck.has(c.pointerId))&&c.buttons===0){this._pointerEnd(c);return}const l=this.currentPointers.slice(),f=isTouchEvent(c)?Array.from(c.changedTouches).map(D=>new Pointer(D)):[new Pointer(c)],g=[];for(const D of f){const w=this.currentPointers.findIndex(E=>E.id===D.id);w!==-1&&(g.push(D),this.currentPointers[w]=D)}g.length!==0&&this._moveCallback(l,g,c)},this._triggerPointerEnd=(c,l)=>{if(!isTouchEvent(l)&&l.buttons&1)return!1;const f=this.currentPointers.findIndex(D=>D.id===c.id);if(f===-1)return!1;this.currentPointers.splice(f,1),this.startPointers.splice(f,1),this._excludeFromButtonsCheck.delete(c.id);const g=!(l.type==="mouseup"||l.type==="touchend"||l.type==="pointerup");return this._endCallback(c,l,g),!0},this._pointerEnd=c=>{if(!!this._triggerPointerEnd(new Pointer(c),c))if(isPointerEvent(c)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=c=>{for(const l of Array.from(c.changedTouches))this._triggerPointerEnd(new Pointer(l),c)},this._startCallback=t,this._moveCallback=n,this._endCallback=o,this._rawUpdates=i&&"onpointerrawupdate"in window,this._eventListenerOptions=s,self.PointerEvent&&!a?this._element.addEventListener("pointerdown",this._pointerStart,this._eventListenerOptions):(this._element.addEventListener("mousedown",this._pointerStart,this._eventListenerOptions),this._element.addEventListener("touchstart",this._touchStart,this._eventListenerOptions),this._element.addEventListener("touchmove",this._move,this._eventListenerOptions),this._element.addEventListener("touchend",this._touchEnd,this._eventListenerOptions),this._element.addEventListener("touchcancel",this._touchEnd,this._eventListenerOptions))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(e,t){return this._startCallback(e,t)?(this.currentPointers.push(e),this.startPointers.push(e),!0):!1}}let nanoid=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");function fallback_block$2(r){let e;return{c(){e=element("div"),this.h()},l(t){e=claim_element(t,"DIV",{class:!0}),children(e).forEach(detach),this.h()},h(){attr(e,"class","h-16 w-16 p-8 rounded-full shadow-xl opacity-80 select-none border-[2em] border-pink-500/50")},m(t,n){insert_hydration(t,e,n)},p:noop$2,d(t){t&&detach(e)}}}function create_fragment$4(r){let e,t,n;const o=r[9].default,i=create_slot(o,r,r[8],null),a=i||fallback_block$2();return{c(){e=element("div"),a&&a.c(),this.h()},l(s){e=claim_element(s,"DIV",{id:!0,class:!0,style:!0});var c=children(e);a&&a.l(c),c.forEach(detach),this.h()},h(){attr(e,"id",r[1]),attr(e,"class","absolute"),set_style(e,"left",r[5]+"px"),set_style(e,"top",r[4]+"px"),add_render_callback(()=>r[11].call(e))},m(s,c){insert_hydration(s,e,c),a&&a.m(e,null),r[10](e),t=add_resize_listener(e,r[11].bind(e)),n=!0},p(s,[c]){i&&i.p&&(!n||c&256)&&update_slot_base(i,o,s,s[8],n?get_slot_changes(o,s[8],c,null):get_all_dirty_from_scope(s[8]),null),(!n||c&2)&&attr(e,"id",s[1]),(!n||c&32)&&set_style(e,"left",s[5]+"px"),(!n||c&16)&&set_style(e,"top",s[4]+"px")},i(s){n||(transition_in(a,s),n=!0)},o(s){transition_out(a,s),n=!1},d(s){s&&detach(e),a&&a.d(s),r[10](null),t()}}}function instance$4(r,e,t){let n,o,{$$slots:i={},$$scope:a}=e,{marker:s}=e,{id:c}=e,{left:l}=e,{top:f}=e,g,D;function w(d){binding_callbacks[d?"unshift":"push"](()=>{s=d,t(0,s)})}function E(){g=this.offsetWidth,D=this.offsetHeight,t(2,g),t(3,D)}return r.$$set=d=>{"marker"in d&&t(0,s=d.marker),"id"in d&&t(1,c=d.id),"left"in d&&t(6,l=d.left),"top"in d&&t(7,f=d.top),"$$scope"in d&&t(8,a=d.$$scope)},r.$$.update=()=>{r.$$.dirty&68&&t(5,n=l-g/2),r.$$.dirty&136&&t(4,o=f-D/2)},[s,c,g,D,o,n,l,f,a,i,w,E]}class CursorMarker extends SvelteComponent{constructor(e){super(),init(this,e,instance$4,create_fragment$4,safe_not_equal,{marker:0,id:1,left:6,top:7})}}const pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path(){return new Path}Path.prototype=path.prototype={constructor:Path,moveTo:function(r,e){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(r,e){this._+="L"+(this._x1=+r)+","+(this._y1=+e)},quadraticCurveTo:function(r,e,t,n){this._+="Q"+ +r+","+ +e+","+(this._x1=+t)+","+(this._y1=+n)},bezierCurveTo:function(r,e,t,n,o,i){this._+="C"+ +r+","+ +e+","+ +t+","+ +n+","+(this._x1=+o)+","+(this._y1=+i)},arcTo:function(r,e,t,n,o){r=+r,e=+e,t=+t,n=+n,o=+o;var i=this._x1,a=this._y1,s=t-r,c=n-e,l=i-r,f=a-e,g=l*l+f*f;if(o<0)throw new Error("negative radius: "+o);if(this._x1===null)this._+="M"+(this._x1=r)+","+(this._y1=e);else if(g>epsilon)if(!(Math.abs(f*s-c*l)>epsilon)||!o)this._+="L"+(this._x1=r)+","+(this._y1=e);else{var D=t-i,w=n-a,E=s*s+c*c,d=D*D+w*w,T=Math.sqrt(E),O=Math.sqrt(g),I=o*Math.tan((pi-Math.acos((E+g-d)/(2*T*O)))/2),j=I/O,q=I/T;Math.abs(j-1)>epsilon&&(this._+="L"+(r+j*l)+","+(e+j*f)),this._+="A"+o+","+o+",0,0,"+ +(f*D>l*w)+","+(this._x1=r+q*s)+","+(this._y1=e+q*c)}},arc:function(r,e,t,n,o,i){r=+r,e=+e,t=+t,i=!!i;var a=t*Math.cos(n),s=t*Math.sin(n),c=r+a,l=e+s,f=1^i,g=i?n-o:o-n;if(t<0)throw new Error("negative radius: "+t);this._x1===null?this._+="M"+c+","+l:(Math.abs(this._x1-c)>epsilon||Math.abs(this._y1-l)>epsilon)&&(this._+="L"+c+","+l),t&&(g<0&&(g=g%tau+tau),g>tauEpsilon?this._+="A"+t+","+t+",0,1,"+f+","+(r-a)+","+(e-s)+"A"+t+","+t+",0,1,"+f+","+(this._x1=c)+","+(this._y1=l):g>epsilon&&(this._+="A"+t+","+t+",0,"+ +(g>=pi)+","+f+","+(this._x1=r+t*Math.cos(o))+","+(this._y1=e+t*Math.sin(o))))},rect:function(r,e,t,n){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+e)+"h"+ +t+"v"+ +n+"h"+-t+"Z"},toString:function(){return this._}};function constant(r){return function(){return r}}var slice=Array.prototype.slice;function x(r){return r[0]}function y(r){return r[1]}class Bump{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function bumpX(r){return new Bump(r,!0)}function linkSource(r){return r.source}function linkTarget(r){return r.target}function link(r){let e=linkSource,t=linkTarget,n=x,o=y,i=null,a=null;function s(){let c;const l=slice.call(arguments),f=e.apply(this,l),g=t.apply(this,l);if(i==null&&(a=r(c=path())),a.lineStart(),l[0]=f,a.point(+n.apply(this,l),+o.apply(this,l)),l[0]=g,a.point(+n.apply(this,l),+o.apply(this,l)),a.lineEnd(),c)return a=null,c+""||null}return s.source=function(c){return arguments.length?(e=c,s):e},s.target=function(c){return arguments.length?(t=c,s):t},s.x=function(c){return arguments.length?(n=typeof c=="function"?c:constant(+c),s):n},s.y=function(c){return arguments.length?(o=typeof c=="function"?c:constant(+c),s):o},s.context=function(c){return arguments.length?(c==null?i=a=null:a=r(i=c),s):i},s}const Links_svelte_svelte_type_style_lang="";function get_each_context$1(r,e,t){const n=r.slice();return n[17]=e[t],n[19]=t,n}function create_if_block$2(r){let e,t=r[0],n=[];for(let o=0;o<t.length;o+=1)n[o]=create_each_block$1(get_each_context$1(r,t,o));return{c(){e=svg_element("svg");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=claim_svg_element(o,"svg",{style:!0,class:!0});var i=children(e);for(let a=0;a<n.length;a+=1)n[a].l(i);i.forEach(detach),this.h()},h(){set_style(e,"pointer-events","none"),attr(e,"class","svelte-1t43067")},m(o,i){insert_hydration(o,e,i);for(let a=0;a<n.length;a+=1)n[a].m(e,null)},p(o,i){if(i&2047){t=o[0];let a;for(a=0;a<t.length;a+=1){const s=get_each_context$1(o,t,a);n[a]?n[a].p(s,i):(n[a]=create_each_block$1(s),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(o){o&&detach(e),destroy_each(n,o)}}}function create_if_block_1$1(r){var O,I,j,q,H,L;let e,t,n,o,i,a,s,c=((j=(I=(O=r[17])==null?void 0:O.opts)==null?void 0:I.label)!=null&&j.enabled?(L=(H=(q=r[17])==null?void 0:q.opts)==null?void 0:H.label)==null?void 0:L.value:"")+"",l,f,g,D,w,E,d,T;return{c(){e=svg_element("g"),t=svg_element("path"),i=svg_element("text"),a=svg_element("textPath"),s=svg_element("tspan"),l=text(c),f=space(),w=svg_element("textPath"),E=text("\u27A4"),this.h()},l(J){e=claim_svg_element(J,"g",{stroke:!0,"stroke-opacity":!0});var X=children(e);t=claim_svg_element(X,"path",{d:!0,id:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-opacity":!0}),children(t).forEach(detach),i=claim_svg_element(X,"text",{class:!0});var re=children(i);a=claim_svg_element(re,"textPath",{"xlink:href":!0,startOffset:!0});var he=children(a);s=claim_svg_element(he,"tspan",{fill:!0,class:!0});var me=children(s);l=claim_text(me,c),me.forEach(detach),f=claim_space(he),he.forEach(detach),w=claim_svg_element(re,"textPath",{"xlink:href":!0,startOffset:!0,fill:!0,opacity:!0});var _e=children(w);E=claim_text(_e,"\u27A4"),_e.forEach(detach),re.forEach(detach),X.forEach(detach),this.h()},h(){attr(t,"d",n=r[10](r[17])),attr(t,"id",o=r[17].id),attr(t,"stroke-width",r[2]),attr(t,"stroke",r[1]),attr(t,"fill","none"),attr(t,"stroke-linecap","round"),attr(t,"stroke-opacity",r[4]),attr(s,"fill","black"),attr(s,"class","svelte-1t43067"),xlink_attr(a,"xlink:href",g="#"+r[17].id),attr(a,"startOffset",D=r[7]+"%"),xlink_attr(w,"xlink:href",d="#"+r[17].id),attr(w,"startOffset",r[8]),attr(w,"fill",r[3]),attr(w,"opacity",T=r[4]*1.3),attr(i,"class","svelte-1t43067"),attr(e,"stroke",r[6]),attr(e,"stroke-opacity",r[5])},m(J,X){insert_hydration(J,e,X),append_hydration(e,t),append_hydration(e,i),append_hydration(i,a),append_hydration(a,s),append_hydration(s,l),append_hydration(a,f),append_hydration(i,w),append_hydration(w,E)},p(J,X){var re,he,me,_e,Re,Le;X&1&&n!==(n=J[10](J[17]))&&attr(t,"d",n),X&1&&o!==(o=J[17].id)&&attr(t,"id",o),X&4&&attr(t,"stroke-width",J[2]),X&2&&attr(t,"stroke",J[1]),X&16&&attr(t,"stroke-opacity",J[4]),X&1&&c!==(c=((me=(he=(re=J[17])==null?void 0:re.opts)==null?void 0:he.label)!=null&&me.enabled?(Le=(Re=(_e=J[17])==null?void 0:_e.opts)==null?void 0:Re.label)==null?void 0:Le.value:"")+"")&&set_data(l,c),X&1&&g!==(g="#"+J[17].id)&&xlink_attr(a,"xlink:href",g),X&128&&D!==(D=J[7]+"%")&&attr(a,"startOffset",D),X&1&&d!==(d="#"+J[17].id)&&xlink_attr(w,"xlink:href",d),X&256&&attr(w,"startOffset",J[8]),X&8&&attr(w,"fill",J[3]),X&16&&T!==(T=J[4]*1.3)&&attr(w,"opacity",T),X&64&&attr(e,"stroke",J[6]),X&32&&attr(e,"stroke-opacity",J[5])},d(J){J&&detach(e)}}}function create_each_block$1(r){let e,t=r[17]&&r[9]&&create_if_block_1$1(r);return{c(){t&&t.c(),e=empty$1()},l(n){t&&t.l(n),e=empty$1()},m(n,o){t&&t.m(n,o),insert_hydration(n,e,o)},p(n,o){n[17]&&n[9]?t?t.p(n,o):(t=create_if_block_1$1(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){t&&t.d(n),n&&detach(e)}}}function create_fragment$3(r){let e,t=r[9]&&r[0]&&r[0].length>0&&create_if_block$2(r);return{c(){t&&t.c(),e=empty$1()},l(n){t&&t.l(n),e=empty$1()},m(n,o){t&&t.m(n,o),insert_hydration(n,e,o)},p(n,[o]){n[9]&&n[0]&&n[0].length>0?t?t.p(n,o):(t=create_if_block$2(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:noop$2,o:noop$2,d(n){t&&t.d(n),n&&detach(e)}}}function instance$3(r,e,t){let{links:n}=e,{calcOffsetFromCanvas:o}=e,{strokeColor:i="green"}=e,{strokeWidth:a=1}=e,{arrowColor:s="green"}=e,{strokeOpacity:c="0.3"}=e,{groupStrokeOpacity:l="0.1"}=e,{groupStrokeColor:f="white"}=e,{textStartOffset:g=20}=e,{arrowStartOffset:D="40%"}=e;const w=link(bumpX);let E,d,T,O,I;onMount(()=>{t(9,E=!0)});function j(q){let H=document.getElementById(q.source.id),L=document.getElementById(q.target.id);if(!H||!L)return;const{x:J,y:X}=o(H),{x:re,y:he}=o(L);return d=J+H.offsetWidth/2,T=X+H.offsetHeight/2,O=re+L.offsetWidth/2,I=he+L.offsetHeight/2,w({source:[d,T],target:[O,I]})}return r.$$set=q=>{"links"in q&&t(0,n=q.links),"calcOffsetFromCanvas"in q&&t(11,o=q.calcOffsetFromCanvas),"strokeColor"in q&&t(1,i=q.strokeColor),"strokeWidth"in q&&t(2,a=q.strokeWidth),"arrowColor"in q&&t(3,s=q.arrowColor),"strokeOpacity"in q&&t(4,c=q.strokeOpacity),"groupStrokeOpacity"in q&&t(5,l=q.groupStrokeOpacity),"groupStrokeColor"in q&&t(6,f=q.groupStrokeColor),"textStartOffset"in q&&t(7,g=q.textStartOffset),"arrowStartOffset"in q&&t(8,D=q.arrowStartOffset)},[n,i,a,s,c,l,f,g,D,E,j,o]}class Links extends SvelteComponent{constructor(e){super(),init(this,e,instance$3,create_fragment$3,safe_not_equal,{links:0,calcOffsetFromCanvas:11,strokeColor:1,strokeWidth:2,arrowColor:3,strokeOpacity:4,groupStrokeOpacity:5,groupStrokeColor:6,textStartOffset:7,arrowStartOffset:8})}}function create_if_block$1(r){let e;const t=r[7].default,n=create_slot(t,r,r[6],null),o=n||fallback_block$1(r);return{c(){o&&o.c()},l(i){o&&o.l(i)},m(i,a){o&&o.m(i,a),e=!0},p(i,a){n?n.p&&(!e||a&64)&&update_slot_base(n,t,i,i[6],e?get_slot_changes(t,i[6],a,null):get_all_dirty_from_scope(i[6]),null):o&&o.p&&(!e||a&4)&&o.p(i,e?a:-1)},i(i){e||(transition_in(o,i),e=!0)},o(i){transition_out(o,i),e=!1},d(i){o&&o.d(i)}}}function fallback_block$1(r){let e,t;return{c(){e=element("div"),this.h()},l(n){e=claim_element(n,"DIV",{style:!0,class:!0}),children(e).forEach(detach),this.h()},h(){set_style(e,"transform","translate(-50%, -50%)"),attr(e,"class",t="absolute border-["+(r[2]+"em")+"] md:border-["+(r[2]/2+"em")+"] border-yellow-200/40 ring-2 ring-black h-0 w-0 rounded-full")},m(n,o){insert_hydration(n,e,o)},p(n,o){o&4&&t!==(t="absolute border-["+(n[2]+"em")+"] md:border-["+(n[2]/2+"em")+"] border-yellow-200/40 ring-2 ring-black h-0 w-0 rounded-full")&&attr(e,"class",t)},d(n){n&&detach(e)}}}function create_fragment$2(r){let e,t,n,o,i,a,s=r[0]&&create_if_block$1(r);return{c(){e=element("div"),s&&s.c(),this.h()},l(c){e=claim_element(c,"DIV",{id:!0,"data-highlighter":!0,class:!0,style:!0});var l=children(e);s&&s.l(l),l.forEach(detach),this.h()},h(){attr(e,"id",t=r[1].id+"--highlighter"),attr(e,"data-highlighter","true"),attr(e,"class",n="absolute border-["+(r[2]+"em")+"] md:border-["+(r[2]/2+"em")+"] border-transparent rounded-full p-0 m-0"),set_style(e,"top",r[5]+"px"),set_style(e,"left",r[4]+"px")},m(c,l){insert_hydration(c,e,l),s&&s.m(e,null),r[9](e),o=!0,i||(a=[listen(window,"resize",r[8]),listen(e,"mouseover",r[10]),listen(e,"mouseleave",r[11]),listen(e,"focus",r[12]),listen(e,"blur",r[13])],i=!0)},p(c,[l]){c[0]?s?(s.p(c,l),l&1&&transition_in(s,1)):(s=create_if_block$1(c),s.c(),transition_in(s,1),s.m(e,null)):s&&(group_outros(),transition_out(s,1,1,()=>{s=null}),check_outros()),(!o||l&2&&t!==(t=c[1].id+"--highlighter"))&&attr(e,"id",t),(!o||l&4&&n!==(n="absolute border-["+(c[2]+"em")+"] md:border-["+(c[2]/2+"em")+"] border-transparent rounded-full p-0 m-0"))&&attr(e,"class",n),(!o||l&32)&&set_style(e,"top",c[5]+"px"),(!o||l&16)&&set_style(e,"left",c[4]+"px")},i(c){o||(transition_in(s),o=!0)},o(c){transition_out(s),o=!1},d(c){c&&detach(e),s&&s.d(),r[9](null),i=!1,run_all(a)}}}function instance$2(r,e,t){let n,o,{$$slots:i={},$$scope:a}=e,{node:s}=e,{zoneSize:c=2}=e,{highlight:l=!1}=e,f;const g=O=>{t(5,n),t(3,f),t(1,s),t(4,o),t(3,f),t(1,s)};function D(O){binding_callbacks[O?"unshift":"push"](()=>{f=O,t(3,f)})}const w=O=>{t(0,l=!0)},E=O=>{t(0,l=!1)},d=O=>{t(0,l=!0)},T=O=>{t(0,l=!1)};return r.$$set=O=>{"node"in O&&t(1,s=O.node),"zoneSize"in O&&t(2,c=O.zoneSize),"highlight"in O&&t(0,l=O.highlight),"$$scope"in O&&t(6,a=O.$$scope)},r.$$.update=()=>{r.$$.dirty&10&&t(5,n=f?-f.offsetHeight/2+s.offsetHeight/2:0),r.$$.dirty&10&&t(4,o=f?-f.offsetWidth/2+s.offsetWidth/2:0),r.$$.dirty&10&&f&&s.insertAdjacentElement("beforeend",f)},[l,s,c,f,o,n,a,i,g,D,w,E,d,T]}class Highlighter extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$2,safe_not_equal,{node:1,zoneSize:2,highlight:0})}}const generateLinkLabel=(r,e,t=!1)=>{const n=r.find(i=>i.id==e);if(!n||!n.value)return"";if(!t)return n.value+" to";const o=r.find(i=>i.id==t);return o?`${n.value} to ${o.value}`:n.value},{window:window_1}=globals;function get_each_context(r,e,t){const n=r.slice();return n[18]=e[t][0],n[19]=e[t][1].node,n[20]=e[t][1].highlight,n}const get_default_slot_changes=r=>({}),get_default_slot_context=r=>({connectable:r[10]}),get_marker_slot_changes=r=>({}),get_marker_slot_context=r=>({connectable:r[10]});function create_if_block_1(r){let e,t,n;function o(a){r[13](a)}let i={left:r[7],top:r[8],id:MARKER,$$slots:{default:[create_default_slot$1]},$$scope:{ctx:r}};return r[5]!==void 0&&(i.marker=r[5]),e=new CursorMarker({props:i}),binding_callbacks.push(()=>bind(e,"marker",o)),{c(){create_component(e.$$.fragment)},l(a){claim_component(e.$$.fragment,a)},m(a,s){mount_component(e,a,s),n=!0},p(a,s){const c={};s&128&&(c.left=a[7]),s&256&&(c.top=a[8]),s&32768&&(c.$$scope={dirty:s,ctx:a}),!t&&s&32&&(t=!0,c.marker=a[5],add_flush_callback(()=>t=!1)),e.$set(c)},i(a){n||(transition_in(e.$$.fragment,a),n=!0)},o(a){transition_out(e.$$.fragment,a),n=!1},d(a){destroy_component(e,a)}}}function fallback_block(r){let e;return{c(){e=element("div"),this.h()},l(t){e=claim_element(t,"DIV",{class:!0}),children(e).forEach(detach),this.h()},h(){attr(e,"class","h-32 w-32 md:h-16 md:w-16 p-8 rounded-full shadow-xl opacity-80 select-none border-[4em] md:border-[2em] ")},m(t,n){insert_hydration(t,e,n)},p:noop$2,d(t){t&&detach(e)}}}function create_default_slot$1(r){let e;const t=r[11].marker,n=create_slot(t,r,r[15],get_marker_slot_context),o=n||fallback_block();return{c(){o&&o.c()},l(i){o&&o.l(i)},m(i,a){o&&o.m(i,a),e=!0},p(i,a){n&&n.p&&(!e||a&32768)&&update_slot_base(n,t,i,i[15],e?get_slot_changes(t,i[15],a,get_marker_slot_changes):get_all_dirty_from_scope(i[15]),get_marker_slot_context)},i(i){e||(transition_in(o,i),e=!0)},o(i){transition_out(o,i),e=!1},d(i){o&&o.d(i)}}}function create_if_block(r){let e;const t=r[11].default,n=create_slot(t,r,r[15],get_default_slot_context);return{c(){n&&n.c()},l(o){n&&n.l(o)},m(o,i){n&&n.m(o,i),e=!0},p(o,i){n&&n.p&&(!e||i&32768)&&update_slot_base(n,t,o,o[15],e?get_slot_changes(t,o[15],i,get_default_slot_changes):get_all_dirty_from_scope(o[15]),get_default_slot_context)},i(o){e||(transition_in(n,o),e=!0)},o(o){transition_out(n,o),e=!1},d(o){n&&n.d(o)}}}function create_each_block(r){let e,t;return e=new Highlighter({props:{node:r[19],highlight:r[20]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,o){mount_component(e,n,o),t=!0},p(n,o){const i={};o&4&&(i.node=n[19]),o&4&&(i.highlight=n[20]),e.$set(i)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$1(r){var q,H;let e,t,n,o,i,a,s,c,l,f,g=r[4]&&create_if_block_1(r),D=r[3]&&create_if_block(r);const w=[{links:[r[6]]},{calcOffsetFromCanvas:r[9]},(q=r[1])==null?void 0:q.links];let E={};for(let L=0;L<w.length;L+=1)E=assign$1(E,w[L]);o=new Links({props:E});const d=[{links:r[0].links},{calcOffsetFromCanvas:r[9]},(H=r[1])==null?void 0:H.links];let T={};for(let L=0;L<d.length;L+=1)T=assign$1(T,d[L]);a=new Links({props:T});let O=[...Object.entries(r[2])],I=[];for(let L=0;L<O.length;L+=1)I[L]=create_each_block(get_each_context(r,O,L));const j=L=>transition_out(I[L],1,1,()=>{I[L]=null});return{c(){e=element("div"),g&&g.c(),t=space(),D&&D.c(),n=space(),create_component(o.$$.fragment),i=space(),create_component(a.$$.fragment),s=space();for(let L=0;L<I.length;L+=1)I[L].c();this.h()},l(L){e=claim_element(L,"DIV",{class:!0});var J=children(e);g&&g.l(J),t=claim_space(J),D&&D.l(J),n=claim_space(J),claim_component(o.$$.fragment,J),i=claim_space(J),claim_component(a.$$.fragment,J),s=claim_space(J);for(let X=0;X<I.length;X+=1)I[X].l(J);J.forEach(detach),this.h()},h(){attr(e,"class","relative")},m(L,J){insert_hydration(L,e,J),g&&g.m(e,null),append_hydration(e,t),D&&D.m(e,null),append_hydration(e,n),mount_component(o,e,null),append_hydration(e,i),mount_component(a,e,null),append_hydration(e,s);for(let X=0;X<I.length;X+=1)I[X].m(e,null);r[14](e),c=!0,l||(f=listen(window_1,"resize",r[12]),l=!0)},p(L,[J]){var he,me;L[4]?g?(g.p(L,J),J&16&&transition_in(g,1)):(g=create_if_block_1(L),g.c(),transition_in(g,1),g.m(e,t)):g&&(group_outros(),transition_out(g,1,1,()=>{g=null}),check_outros()),L[3]?D?(D.p(L,J),J&8&&transition_in(D,1)):(D=create_if_block(L),D.c(),transition_in(D,1),D.m(e,n)):D&&(group_outros(),transition_out(D,1,1,()=>{D=null}),check_outros());const X=J&578?get_spread_update(w,[J&64&&{links:[L[6]]},J&512&&{calcOffsetFromCanvas:L[9]},J&2&&get_spread_object((he=L[1])==null?void 0:he.links)]):{};o.$set(X);const re=J&515?get_spread_update(d,[J&1&&{links:L[0].links},J&512&&{calcOffsetFromCanvas:L[9]},J&2&&get_spread_object((me=L[1])==null?void 0:me.links)]):{};if(a.$set(re),J&4){O=[...Object.entries(L[2])];let _e;for(_e=0;_e<O.length;_e+=1){const Re=get_each_context(L,O,_e);I[_e]?(I[_e].p(Re,J),transition_in(I[_e],1)):(I[_e]=create_each_block(Re),I[_e].c(),transition_in(I[_e],1),I[_e].m(e,null))}for(group_outros(),_e=O.length;_e<I.length;_e+=1)j(_e);check_outros()}},i(L){if(!c){transition_in(g),transition_in(D),transition_in(o.$$.fragment,L),transition_in(a.$$.fragment,L);for(let J=0;J<O.length;J+=1)transition_in(I[J]);c=!0}},o(L){transition_out(g),transition_out(D),transition_out(o.$$.fragment,L),transition_out(a.$$.fragment,L),I=I.filter(Boolean);for(let J=0;J<I.length;J+=1)transition_out(I[J]);c=!1},d(L){L&&detach(e),g&&g.d(),D&&D.d(),destroy_component(o),destroy_component(a),destroy_each(I,L),r[14](null),l=!1,f()}}}const MARKER="marker";function instance$1(r,e,t){let{$$slots:n={},$$scope:o}=e,{data:i}=e,{opts:a={}}=e;const s=createEventDispatcher();let c={},l,f,g,D=null,w=0,E=0;function d(H,L){L.stopPropagation(),L.preventDefault(),t(7,w=H.pageX-l.offsetLeft),t(8,E=H.pageY-l.offsetTop)}function T(H){if(!H)return;if(H==l)return{x:H.offsetLeft,y:H.offsetTop};let L=H.getBoundingClientRect().top,J=l.getBoundingClientRect().top,X=L-J,re=H.getBoundingClientRect().left,he=l.getBoundingClientRect().left;return{x:re-he,y:X}}function O(H,L){var he,me;H.id||(H.id=nanoid()),H.style.position||(H.style.position="relative");let J=!1,X;t(2,c[H.id]={node:H,highlight:J},c);let re;return L!=null&&L.dataset&&(H.dataset.dataset=JSON.stringify(L.dataset)),(he=L==null?void 0:L.restrictions)!=null&&he.startOnly||(H.dataset.dropzone=!0),(me=L==null?void 0:L.restrictions)!=null&&me.dropOnly||(re=new PointerTracker(H,{start(_e,Re){return re.currentPointers.length===1?!1:(t(4,f=!0),d(_e,Re),!0)},move(_e,Re,Le){var Qe;d(re.currentPointers[0],Le),t(6,D={id:H.id+"-to-",source:{id:H.id},target:{id:MARKER},opts:{label:{enabled:!0,value:generateLinkLabel(i.nodes,H.id)}}}),X&&t(2,c[X.id].highlight=!1,c),X=((Qe=document.elementFromPoint(re.currentPointers[0].clientX,re.currentPointers[0].clientY))==null?void 0:Qe.closest("[data-dropzone]"))||null,X!=null&&X.id&&t(2,c[X.id].highlight=!0,c)},end:(_e,Re,Le)=>{var nt,it;t(5,g.style.display="none",g),t(4,f=!1),c&&X&&X.id&&c[X.id].highlight&&t(2,c[X.id].highlight=!1,c),X=null;let ze=document.elementFromPoint(_e.clientX,_e.clientY).closest("[data-dropzone]");if(t(6,D=null),!ze||!(ze!=null&&ze.id)||!H||!(H!=null&&H.id))return;const lt={id:H.id+"-to-"+ze.id,source:{id:H.id},target:{id:ze.id},opts:{label:{enabled:!0,value:generateLinkLabel(i.nodes,H.id,ze.id)}}};if(console.log({newLink:lt}),t(0,i.links=[...i.links,lt],i),(L==null?void 0:L.dataset)||((nt=ze==null?void 0:ze.dataset)==null?void 0:nt.dataset)){const ft={source:{dataset:(L==null?void 0:L.dataset)||null},target:{dataset:(it=ze==null?void 0:ze.dataset)!=null&&it.dataset?JSON.parse(ze.dataset.dataset):null}};console.log(ft),s("connected",ft)}},avoidPointerEvents:!0,eventListenerOptions:{capture:!0,passive:!1}})),{update(_e){},destroy(){}}}const I=H=>{t(0,i)};function j(H){g=H,t(5,g)}function q(H){binding_callbacks[H?"unshift":"push"](()=>{l=H,t(3,l)})}return r.$$set=H=>{"data"in H&&t(0,i=H.data),"opts"in H&&t(1,a=H.opts),"$$scope"in H&&t(15,o=H.$$scope)},[i,a,c,l,f,g,D,w,E,T,O,n,I,j,q,o]}class Canvas extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{data:0,opts:1})}}function create_default_slot(r){let e,t;return e=new Board({props:{commits:r[1],connectable:r[3]}}),{c(){create_component(e.$$.fragment)},l(n){claim_component(e.$$.fragment,n)},m(n,o){mount_component(e,n,o),t=!0},p(n,o){const i={};o&8&&(i.connectable=n[3]),e.$set(i)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment(r){let e,t,n;function o(a){r[2](a)}let i={$$slots:{default:[create_default_slot,({connectable:a})=>({3:a}),({connectable:a})=>a?8:0]},$$scope:{ctx:r}};return r[0]!==void 0&&(i.data=r[0]),e=new Canvas({props:i}),binding_callbacks.push(()=>bind(e,"data",o)),{c(){create_component(e.$$.fragment)},l(a){claim_component(e.$$.fragment,a)},m(a,s){mount_component(e,a,s),n=!0},p(a,[s]){const c={};s&24&&(c.$$scope={dirty:s,ctx:a}),!t&&s&1&&(t=!0,c.data=a[0],add_flush_callback(()=>t=!1)),e.$set(c)},i(a){n||(transition_in(e.$$.fragment,a),n=!0)},o(a){transition_out(e.$$.fragment,a),n=!1},d(a){destroy_component(e,a)}}}function instance(r,e,t){let n=[],o={nodes:[],links:[]};function i(a){o=a,t(0,o)}return[o,n,i]}class Page extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{})}}export{CID$2 as C,Page as P,resolvePath as a,createImport as b,createExport as c,base64url as d,errCode$1 as e,encode$9 as f,decode$7 as g,cF as h,raw as i,dagCBOR as j,hashes as k,identity as l,codecs as m,dagPB as n,dagJSON as o,code$4 as p,name$4 as q,resolve as r,sha256 as s,toCidAndPath as t,withTimeoutOption as w};
