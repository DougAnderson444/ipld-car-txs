import{S as SvelteComponent,i as init,s as safe_not_equal,q as text,r as claim_text,b as insert_hydration,A as noop,h as detach,o as onMount}from"../../chunks/index-4f5b2732.js";var Nx=Object.create,Us=Object.defineProperty,Px=Object.getOwnPropertyDescriptor,Fx=Object.getOwnPropertyNames,$x=Object.getPrototypeOf,Ux=Object.prototype.hasOwnProperty,U=(e,t)=>()=>(e&&(t=e(e=0)),t),E=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),W=(e,t)=>{for(var r in t)Us(e,r,{get:t[r],enumerable:!0})},Md=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Fx(t))!Ux.call(e,i)&&i!==r&&Us(e,i,{get:()=>t[i],enumerable:!(n=Px(t,i))||n.enumerable});return e},v=(e,t,r)=>(r=e!=null?Nx($x(e)):{},Md(t||!e||!e.__esModule?Us(r,"default",{value:e,enumerable:!0}):r,e)),ke=e=>Md(Us({},"__esModule",{value:!0}),e),qd=E(e=>{a(),e.byteLength=c,e.toByteArray=p,e.fromByteArray=y;var t=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(o=0,u=i.length;o<u;++o)t[o]=i[o],r[i.charCodeAt(o)]=o;var o,u;r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;function s(m){var g=m.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=m.indexOf("=");k===-1&&(k=g);var B=k===g?0:4-k%4;return[k,B]}function c(m){var g=s(m),k=g[0],B=g[1];return(k+B)*3/4-B}function h(m,g,k){return(g+k)*3/4-k}function p(m){var g,k=s(m),B=k[0],C=k[1],V=new n(h(m,B,C)),le=0,_e=C>0?B-4:B,R;for(R=0;R<_e;R+=4)g=r[m.charCodeAt(R)]<<18|r[m.charCodeAt(R+1)]<<12|r[m.charCodeAt(R+2)]<<6|r[m.charCodeAt(R+3)],V[le++]=g>>16&255,V[le++]=g>>8&255,V[le++]=g&255;return C===2&&(g=r[m.charCodeAt(R)]<<2|r[m.charCodeAt(R+1)]>>4,V[le++]=g&255),C===1&&(g=r[m.charCodeAt(R)]<<10|r[m.charCodeAt(R+1)]<<4|r[m.charCodeAt(R+2)]>>2,V[le++]=g>>8&255,V[le++]=g&255),V}function w(m){return t[m>>18&63]+t[m>>12&63]+t[m>>6&63]+t[m&63]}function A(m,g,k){for(var B,C=[],V=g;V<k;V+=3)B=(m[V]<<16&16711680)+(m[V+1]<<8&65280)+(m[V+2]&255),C.push(w(B));return C.join("")}function y(m){for(var g,k=m.length,B=k%3,C=[],V=16383,le=0,_e=k-B;le<_e;le+=V)C.push(A(m,le,le+V>_e?_e:le+V));return B===1?(g=m[k-1],C.push(t[g>>2]+t[g<<4&63]+"==")):B===2&&(g=(m[k-2]<<8)+m[k-1],C.push(t[g>>10]+t[g>>4&63]+t[g<<2&63]+"=")),C.join("")}}),Vd=E(e=>{a(),e.read=function(t,r,n,i,o){var u,s,c=o*8-i-1,h=(1<<c)-1,p=h>>1,w=-7,A=n?o-1:0,y=n?-1:1,m=t[r+A];for(A+=y,u=m&(1<<-w)-1,m>>=-w,w+=c;w>0;u=u*256+t[r+A],A+=y,w-=8);for(s=u&(1<<-w)-1,u>>=-w,w+=i;w>0;s=s*256+t[r+A],A+=y,w-=8);if(u===0)u=1-p;else{if(u===h)return s?NaN:(m?-1:1)*(1/0);s=s+Math.pow(2,i),u=u-p}return(m?-1:1)*s*Math.pow(2,u-i)},e.write=function(t,r,n,i,o,u){var s,c,h,p=u*8-o-1,w=(1<<p)-1,A=w>>1,y=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=i?0:u-1,g=i?1:-1,k=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(c=isNaN(r)?1:0,s=w):(s=Math.floor(Math.log(r)/Math.LN2),r*(h=Math.pow(2,-s))<1&&(s--,h*=2),s+A>=1?r+=y/h:r+=y*Math.pow(2,1-A),r*h>=2&&(s++,h/=2),s+A>=w?(c=0,s=w):s+A>=1?(c=(r*h-1)*Math.pow(2,o),s=s+A):(c=r*Math.pow(2,A-1)*Math.pow(2,o),s=0));o>=8;t[n+m]=c&255,m+=g,c/=256,o-=8);for(s=s<<o|c,p+=o;p>0;t[n+m]=s&255,m+=g,s/=256,p-=8);t[n+m-g]|=k*128}}),ho=E(e=>{a();var t=qd(),r=Vd(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=C,e.INSPECT_MAX_BYTES=50;var i=2147483647;e.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=o(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{let l=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(l,f),l.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function u(l){if(l>i)throw new RangeError('The value "'+l+'" is invalid for option "size"');let f=new Uint8Array(l);return Object.setPrototypeOf(f,s.prototype),f}function s(l,f,O){if(typeof l=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(l)}return c(l,f,O)}s.poolSize=8192;function c(l,f,O){if(typeof l=="string")return A(l,f);if(ArrayBuffer.isView(l))return m(l);if(l==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(vt(l,ArrayBuffer)||l&&vt(l.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(vt(l,SharedArrayBuffer)||l&&vt(l.buffer,SharedArrayBuffer)))return g(l,f,O);if(typeof l=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let ne=l.valueOf&&l.valueOf();if(ne!=null&&ne!==l)return s.from(ne,f,O);let de=k(l);if(de)return de;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof l[Symbol.toPrimitive]=="function")return s.from(l[Symbol.toPrimitive]("string"),f,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}s.from=function(l,f,O){return c(l,f,O)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function h(l){if(typeof l!="number")throw new TypeError('"size" argument must be of type number');if(l<0)throw new RangeError('The value "'+l+'" is invalid for option "size"')}function p(l,f,O){return h(l),l<=0?u(l):f!==void 0?typeof O=="string"?u(l).fill(f,O):u(l).fill(f):u(l)}s.alloc=function(l,f,O){return p(l,f,O)};function w(l){return h(l),u(l<0?0:B(l)|0)}s.allocUnsafe=function(l){return w(l)},s.allocUnsafeSlow=function(l){return w(l)};function A(l,f){if((typeof f!="string"||f==="")&&(f="utf8"),!s.isEncoding(f))throw new TypeError("Unknown encoding: "+f);let O=V(l,f)|0,ne=u(O),de=ne.write(l,f);return de!==O&&(ne=ne.slice(0,de)),ne}function y(l){let f=l.length<0?0:B(l.length)|0,O=u(f);for(let ne=0;ne<f;ne+=1)O[ne]=l[ne]&255;return O}function m(l){if(vt(l,Uint8Array)){let f=new Uint8Array(l);return g(f.buffer,f.byteOffset,f.byteLength)}return y(l)}function g(l,f,O){if(f<0||l.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(l.byteLength<f+(O||0))throw new RangeError('"length" is outside of buffer bounds');let ne;return f===void 0&&O===void 0?ne=new Uint8Array(l):O===void 0?ne=new Uint8Array(l,f):ne=new Uint8Array(l,f,O),Object.setPrototypeOf(ne,s.prototype),ne}function k(l){if(s.isBuffer(l)){let f=B(l.length)|0,O=u(f);return O.length===0||l.copy(O,0,0,f),O}if(l.length!==void 0)return typeof l.length!="number"||Pt(l.length)?u(0):y(l);if(l.type==="Buffer"&&Array.isArray(l.data))return y(l.data)}function B(l){if(l>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return l|0}function C(l){return+l!=l&&(l=0),s.alloc(+l)}s.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==s.prototype},s.compare=function(l,f){if(vt(l,Uint8Array)&&(l=s.from(l,l.offset,l.byteLength)),vt(f,Uint8Array)&&(f=s.from(f,f.offset,f.byteLength)),!s.isBuffer(l)||!s.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===f)return 0;let O=l.length,ne=f.length;for(let de=0,me=Math.min(O,ne);de<me;++de)if(l[de]!==f[de]){O=l[de],ne=f[de];break}return O<ne?-1:ne<O?1:0},s.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(l,f){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return s.alloc(0);let O;if(f===void 0)for(f=0,O=0;O<l.length;++O)f+=l[O].length;let ne=s.allocUnsafe(f),de=0;for(O=0;O<l.length;++O){let me=l[O];if(vt(me,Uint8Array))de+me.length>ne.length?(s.isBuffer(me)||(me=s.from(me)),me.copy(ne,de)):Uint8Array.prototype.set.call(ne,me,de);else if(s.isBuffer(me))me.copy(ne,de);else throw new TypeError('"list" argument must be an Array of Buffers');de+=me.length}return ne};function V(l,f){if(s.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||vt(l,ArrayBuffer))return l.byteLength;if(typeof l!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);let O=l.length,ne=arguments.length>2&&arguments[2]===!0;if(!ne&&O===0)return 0;let de=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return Dt(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O*2;case"hex":return O>>>1;case"base64":return $t(l).length;default:if(de)return ne?-1:Dt(l).length;f=(""+f).toLowerCase(),de=!0}}s.byteLength=V;function le(l,f,O){let ne=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((O===void 0||O>this.length)&&(O=this.length),O<=0)||(O>>>=0,f>>>=0,O<=f))return"";for(l||(l="utf8");;)switch(l){case"hex":return ce(this,f,O);case"utf8":case"utf-8":return pt(this,f,O);case"ascii":return Te(this,f,O);case"latin1":case"binary":return $(this,f,O);case"base64":return Ke(this,f,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,f,O);default:if(ne)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),ne=!0}}s.prototype._isBuffer=!0;function _e(l,f,O){let ne=l[f];l[f]=l[O],l[O]=ne}s.prototype.swap16=function(){let l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<l;f+=2)_e(this,f,f+1);return this},s.prototype.swap32=function(){let l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<l;f+=4)_e(this,f,f+3),_e(this,f+1,f+2);return this},s.prototype.swap64=function(){let l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<l;f+=8)_e(this,f,f+7),_e(this,f+1,f+6),_e(this,f+2,f+5),_e(this,f+3,f+4);return this},s.prototype.toString=function(){let l=this.length;return l===0?"":arguments.length===0?pt(this,0,l):le.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(l){if(!s.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:s.compare(this,l)===0},s.prototype.inspect=function(){let l="",f=e.INSPECT_MAX_BYTES;return l=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(l+=" ... "),"<Buffer "+l+">"},n&&(s.prototype[n]=s.prototype.inspect),s.prototype.compare=function(l,f,O,ne,de){if(vt(l,Uint8Array)&&(l=s.from(l,l.offset,l.byteLength)),!s.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(f===void 0&&(f=0),O===void 0&&(O=l?l.length:0),ne===void 0&&(ne=0),de===void 0&&(de=this.length),f<0||O>l.length||ne<0||de>this.length)throw new RangeError("out of range index");if(ne>=de&&f>=O)return 0;if(ne>=de)return-1;if(f>=O)return 1;if(f>>>=0,O>>>=0,ne>>>=0,de>>>=0,this===l)return 0;let me=de-ne,Oe=O-f,Qe=Math.min(me,Oe),dt=this.slice(ne,de),Ze=l.slice(f,O);for(let Xe=0;Xe<Qe;++Xe)if(dt[Xe]!==Ze[Xe]){me=dt[Xe],Oe=Ze[Xe];break}return me<Oe?-1:Oe<me?1:0};function R(l,f,O,ne,de){if(l.length===0)return-1;if(typeof O=="string"?(ne=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),O=+O,Pt(O)&&(O=de?0:l.length-1),O<0&&(O=l.length+O),O>=l.length){if(de)return-1;O=l.length-1}else if(O<0)if(de)O=0;else return-1;if(typeof f=="string"&&(f=s.from(f,ne)),s.isBuffer(f))return f.length===0?-1:re(l,f,O,ne,de);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?de?Uint8Array.prototype.indexOf.call(l,f,O):Uint8Array.prototype.lastIndexOf.call(l,f,O):re(l,[f],O,ne,de);throw new TypeError("val must be string, number or Buffer")}function re(l,f,O,ne,de){let me=1,Oe=l.length,Qe=f.length;if(ne!==void 0&&(ne=String(ne).toLowerCase(),ne==="ucs2"||ne==="ucs-2"||ne==="utf16le"||ne==="utf-16le")){if(l.length<2||f.length<2)return-1;me=2,Oe/=2,Qe/=2,O/=2}function dt(Xe,ut){return me===1?Xe[ut]:Xe.readUInt16BE(ut*me)}let Ze;if(de){let Xe=-1;for(Ze=O;Ze<Oe;Ze++)if(dt(l,Ze)===dt(f,Xe===-1?0:Ze-Xe)){if(Xe===-1&&(Xe=Ze),Ze-Xe+1===Qe)return Xe*me}else Xe!==-1&&(Ze-=Ze-Xe),Xe=-1}else for(O+Qe>Oe&&(O=Oe-Qe),Ze=O;Ze>=0;Ze--){let Xe=!0;for(let ut=0;ut<Qe;ut++)if(dt(l,Ze+ut)!==dt(f,ut)){Xe=!1;break}if(Xe)return Ze}return-1}s.prototype.includes=function(l,f,O){return this.indexOf(l,f,O)!==-1},s.prototype.indexOf=function(l,f,O){return R(this,l,f,O,!0)},s.prototype.lastIndexOf=function(l,f,O){return R(this,l,f,O,!1)};function P(l,f,O,ne){O=Number(O)||0;let de=l.length-O;ne?(ne=Number(ne),ne>de&&(ne=de)):ne=de;let me=f.length;ne>me/2&&(ne=me/2);let Oe;for(Oe=0;Oe<ne;++Oe){let Qe=parseInt(f.substr(Oe*2,2),16);if(Pt(Qe))return Oe;l[O+Oe]=Qe}return Oe}function ie(l,f,O,ne){return Nt(Dt(f,l.length-O),l,O,ne)}function Se(l,f,O,ne){return Nt(Gt(f),l,O,ne)}function Ne(l,f,O,ne){return Nt($t(f),l,O,ne)}function De(l,f,O,ne){return Nt(Jt(f,l.length-O),l,O,ne)}s.prototype.write=function(l,f,O,ne){if(f===void 0)ne="utf8",O=this.length,f=0;else if(O===void 0&&typeof f=="string")ne=f,O=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(O)?(O=O>>>0,ne===void 0&&(ne="utf8")):(ne=O,O=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let de=this.length-f;if((O===void 0||O>de)&&(O=de),l.length>0&&(O<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");ne||(ne="utf8");let me=!1;for(;;)switch(ne){case"hex":return P(this,l,f,O);case"utf8":case"utf-8":return ie(this,l,f,O);case"ascii":case"latin1":case"binary":return Se(this,l,f,O);case"base64":return Ne(this,l,f,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return De(this,l,f,O);default:if(me)throw new TypeError("Unknown encoding: "+ne);ne=(""+ne).toLowerCase(),me=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ke(l,f,O){return f===0&&O===l.length?t.fromByteArray(l):t.fromByteArray(l.slice(f,O))}function pt(l,f,O){O=Math.min(l.length,O);let ne=[],de=f;for(;de<O;){let me=l[de],Oe=null,Qe=me>239?4:me>223?3:me>191?2:1;if(de+Qe<=O){let dt,Ze,Xe,ut;switch(Qe){case 1:me<128&&(Oe=me);break;case 2:dt=l[de+1],(dt&192)===128&&(ut=(me&31)<<6|dt&63,ut>127&&(Oe=ut));break;case 3:dt=l[de+1],Ze=l[de+2],(dt&192)===128&&(Ze&192)===128&&(ut=(me&15)<<12|(dt&63)<<6|Ze&63,ut>2047&&(ut<55296||ut>57343)&&(Oe=ut));break;case 4:dt=l[de+1],Ze=l[de+2],Xe=l[de+3],(dt&192)===128&&(Ze&192)===128&&(Xe&192)===128&&(ut=(me&15)<<18|(dt&63)<<12|(Ze&63)<<6|Xe&63,ut>65535&&ut<1114112&&(Oe=ut))}}Oe===null?(Oe=65533,Qe=1):Oe>65535&&(Oe-=65536,ne.push(Oe>>>10&1023|55296),Oe=56320|Oe&1023),ne.push(Oe),de+=Qe}return lt(ne)}var gt=4096;function lt(l){let f=l.length;if(f<=gt)return String.fromCharCode.apply(String,l);let O="",ne=0;for(;ne<f;)O+=String.fromCharCode.apply(String,l.slice(ne,ne+=gt));return O}function Te(l,f,O){let ne="";O=Math.min(l.length,O);for(let de=f;de<O;++de)ne+=String.fromCharCode(l[de]&127);return ne}function $(l,f,O){let ne="";O=Math.min(l.length,O);for(let de=f;de<O;++de)ne+=String.fromCharCode(l[de]);return ne}function ce(l,f,O){let ne=l.length;(!f||f<0)&&(f=0),(!O||O<0||O>ne)&&(O=ne);let de="";for(let me=f;me<O;++me)de+=Yt[l[me]];return de}function ae(l,f,O){let ne=l.slice(f,O),de="";for(let me=0;me<ne.length-1;me+=2)de+=String.fromCharCode(ne[me]+ne[me+1]*256);return de}s.prototype.slice=function(l,f){let O=this.length;l=~~l,f=f===void 0?O:~~f,l<0?(l+=O,l<0&&(l=0)):l>O&&(l=O),f<0?(f+=O,f<0&&(f=0)):f>O&&(f=O),f<l&&(f=l);let ne=this.subarray(l,f);return Object.setPrototypeOf(ne,s.prototype),ne};function Ie(l,f,O){if(l%1!==0||l<0)throw new RangeError("offset is not uint");if(l+f>O)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(l,f,O){l=l>>>0,f=f>>>0,O||Ie(l,f,this.length);let ne=this[l],de=1,me=0;for(;++me<f&&(de*=256);)ne+=this[l+me]*de;return ne},s.prototype.readUintBE=s.prototype.readUIntBE=function(l,f,O){l=l>>>0,f=f>>>0,O||Ie(l,f,this.length);let ne=this[l+--f],de=1;for(;f>0&&(de*=256);)ne+=this[l+--f]*de;return ne},s.prototype.readUint8=s.prototype.readUInt8=function(l,f){return l=l>>>0,f||Ie(l,1,this.length),this[l]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(l,f){return l=l>>>0,f||Ie(l,2,this.length),this[l]|this[l+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(l,f){return l=l>>>0,f||Ie(l,2,this.length),this[l]<<8|this[l+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(l,f){return l=l>>>0,f||Ie(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(l,f){return l=l>>>0,f||Ie(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},s.prototype.readBigUInt64LE=At(function(l){l=l>>>0,Ot(l,"offset");let f=this[l],O=this[l+7];(f===void 0||O===void 0)&&Ft(l,this.length-8);let ne=f+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24,de=this[++l]+this[++l]*2**8+this[++l]*2**16+O*2**24;return BigInt(ne)+(BigInt(de)<<BigInt(32))}),s.prototype.readBigUInt64BE=At(function(l){l=l>>>0,Ot(l,"offset");let f=this[l],O=this[l+7];(f===void 0||O===void 0)&&Ft(l,this.length-8);let ne=f*2**24+this[++l]*2**16+this[++l]*2**8+this[++l],de=this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+O;return(BigInt(ne)<<BigInt(32))+BigInt(de)}),s.prototype.readIntLE=function(l,f,O){l=l>>>0,f=f>>>0,O||Ie(l,f,this.length);let ne=this[l],de=1,me=0;for(;++me<f&&(de*=256);)ne+=this[l+me]*de;return de*=128,ne>=de&&(ne-=Math.pow(2,8*f)),ne},s.prototype.readIntBE=function(l,f,O){l=l>>>0,f=f>>>0,O||Ie(l,f,this.length);let ne=f,de=1,me=this[l+--ne];for(;ne>0&&(de*=256);)me+=this[l+--ne]*de;return de*=128,me>=de&&(me-=Math.pow(2,8*f)),me},s.prototype.readInt8=function(l,f){return l=l>>>0,f||Ie(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},s.prototype.readInt16LE=function(l,f){l=l>>>0,f||Ie(l,2,this.length);let O=this[l]|this[l+1]<<8;return O&32768?O|4294901760:O},s.prototype.readInt16BE=function(l,f){l=l>>>0,f||Ie(l,2,this.length);let O=this[l+1]|this[l]<<8;return O&32768?O|4294901760:O},s.prototype.readInt32LE=function(l,f){return l=l>>>0,f||Ie(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},s.prototype.readInt32BE=function(l,f){return l=l>>>0,f||Ie(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},s.prototype.readBigInt64LE=At(function(l){l=l>>>0,Ot(l,"offset");let f=this[l],O=this[l+7];(f===void 0||O===void 0)&&Ft(l,this.length-8);let ne=this[l+4]+this[l+5]*2**8+this[l+6]*2**16+(O<<24);return(BigInt(ne)<<BigInt(32))+BigInt(f+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24)}),s.prototype.readBigInt64BE=At(function(l){l=l>>>0,Ot(l,"offset");let f=this[l],O=this[l+7];(f===void 0||O===void 0)&&Ft(l,this.length-8);let ne=(f<<24)+this[++l]*2**16+this[++l]*2**8+this[++l];return(BigInt(ne)<<BigInt(32))+BigInt(this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+O)}),s.prototype.readFloatLE=function(l,f){return l=l>>>0,f||Ie(l,4,this.length),r.read(this,l,!0,23,4)},s.prototype.readFloatBE=function(l,f){return l=l>>>0,f||Ie(l,4,this.length),r.read(this,l,!1,23,4)},s.prototype.readDoubleLE=function(l,f){return l=l>>>0,f||Ie(l,8,this.length),r.read(this,l,!0,52,8)},s.prototype.readDoubleBE=function(l,f){return l=l>>>0,f||Ie(l,8,this.length),r.read(this,l,!1,52,8)};function Pe(l,f,O,ne,de,me){if(!s.isBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>de||f<me)throw new RangeError('"value" argument is out of bounds');if(O+ne>l.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(l,f,O,ne){if(l=+l,f=f>>>0,O=O>>>0,!ne){let Oe=Math.pow(2,8*O)-1;Pe(this,l,f,O,Oe,0)}let de=1,me=0;for(this[f]=l&255;++me<O&&(de*=256);)this[f+me]=l/de&255;return f+O},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(l,f,O,ne){if(l=+l,f=f>>>0,O=O>>>0,!ne){let Oe=Math.pow(2,8*O)-1;Pe(this,l,f,O,Oe,0)}let de=O-1,me=1;for(this[f+de]=l&255;--de>=0&&(me*=256);)this[f+de]=l/me&255;return f+O},s.prototype.writeUint8=s.prototype.writeUInt8=function(l,f,O){return l=+l,f=f>>>0,O||Pe(this,l,f,1,255,0),this[f]=l&255,f+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(l,f,O){return l=+l,f=f>>>0,O||Pe(this,l,f,2,65535,0),this[f]=l&255,this[f+1]=l>>>8,f+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(l,f,O){return l=+l,f=f>>>0,O||Pe(this,l,f,2,65535,0),this[f]=l>>>8,this[f+1]=l&255,f+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(l,f,O){return l=+l,f=f>>>0,O||Pe(this,l,f,4,4294967295,0),this[f+3]=l>>>24,this[f+2]=l>>>16,this[f+1]=l>>>8,this[f]=l&255,f+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(l,f,O){return l=+l,f=f>>>0,O||Pe(this,l,f,4,4294967295,0),this[f]=l>>>24,this[f+1]=l>>>16,this[f+2]=l>>>8,this[f+3]=l&255,f+4};function Me(l,f,O,ne,de){Bt(f,ne,de,l,O,7);let me=Number(f&BigInt(4294967295));l[O++]=me,me=me>>8,l[O++]=me,me=me>>8,l[O++]=me,me=me>>8,l[O++]=me;let Oe=Number(f>>BigInt(32)&BigInt(4294967295));return l[O++]=Oe,Oe=Oe>>8,l[O++]=Oe,Oe=Oe>>8,l[O++]=Oe,Oe=Oe>>8,l[O++]=Oe,O}function Je(l,f,O,ne,de){Bt(f,ne,de,l,O,7);let me=Number(f&BigInt(4294967295));l[O+7]=me,me=me>>8,l[O+6]=me,me=me>>8,l[O+5]=me,me=me>>8,l[O+4]=me;let Oe=Number(f>>BigInt(32)&BigInt(4294967295));return l[O+3]=Oe,Oe=Oe>>8,l[O+2]=Oe,Oe=Oe>>8,l[O+1]=Oe,Oe=Oe>>8,l[O]=Oe,O+8}s.prototype.writeBigUInt64LE=At(function(l,f=0){return Me(this,l,f,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=At(function(l,f=0){return Je(this,l,f,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(l,f,O,ne){if(l=+l,f=f>>>0,!ne){let Qe=Math.pow(2,8*O-1);Pe(this,l,f,O,Qe-1,-Qe)}let de=0,me=1,Oe=0;for(this[f]=l&255;++de<O&&(me*=256);)l<0&&Oe===0&&this[f+de-1]!==0&&(Oe=1),this[f+de]=(l/me>>0)-Oe&255;return f+O},s.prototype.writeIntBE=function(l,f,O,ne){if(l=+l,f=f>>>0,!ne){let Qe=Math.pow(2,8*O-1);Pe(this,l,f,O,Qe-1,-Qe)}let de=O-1,me=1,Oe=0;for(this[f+de]=l&255;--de>=0&&(me*=256);)l<0&&Oe===0&&this[f+de+1]!==0&&(Oe=1),this[f+de]=(l/me>>0)-Oe&255;return f+O},s.prototype.writeInt8=function(l,f,O){return l=+l,f=f>>>0,O||Pe(this,l,f,1,127,-128),l<0&&(l=255+l+1),this[f]=l&255,f+1},s.prototype.writeInt16LE=function(l,f,O){return l=+l,f=f>>>0,O||Pe(this,l,f,2,32767,-32768),this[f]=l&255,this[f+1]=l>>>8,f+2},s.prototype.writeInt16BE=function(l,f,O){return l=+l,f=f>>>0,O||Pe(this,l,f,2,32767,-32768),this[f]=l>>>8,this[f+1]=l&255,f+2},s.prototype.writeInt32LE=function(l,f,O){return l=+l,f=f>>>0,O||Pe(this,l,f,4,2147483647,-2147483648),this[f]=l&255,this[f+1]=l>>>8,this[f+2]=l>>>16,this[f+3]=l>>>24,f+4},s.prototype.writeInt32BE=function(l,f,O){return l=+l,f=f>>>0,O||Pe(this,l,f,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[f]=l>>>24,this[f+1]=l>>>16,this[f+2]=l>>>8,this[f+3]=l&255,f+4},s.prototype.writeBigInt64LE=At(function(l,f=0){return Me(this,l,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=At(function(l,f=0){return Je(this,l,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function et(l,f,O,ne,de,me){if(O+ne>l.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function Ue(l,f,O,ne,de){return f=+f,O=O>>>0,de||et(l,f,O,4),r.write(l,f,O,ne,23,4),O+4}s.prototype.writeFloatLE=function(l,f,O){return Ue(this,l,f,!0,O)},s.prototype.writeFloatBE=function(l,f,O){return Ue(this,l,f,!1,O)};function tt(l,f,O,ne,de){return f=+f,O=O>>>0,de||et(l,f,O,8),r.write(l,f,O,ne,52,8),O+8}s.prototype.writeDoubleLE=function(l,f,O){return tt(this,l,f,!0,O)},s.prototype.writeDoubleBE=function(l,f,O){return tt(this,l,f,!1,O)},s.prototype.copy=function(l,f,O,ne){if(!s.isBuffer(l))throw new TypeError("argument should be a Buffer");if(O||(O=0),!ne&&ne!==0&&(ne=this.length),f>=l.length&&(f=l.length),f||(f=0),ne>0&&ne<O&&(ne=O),ne===O||l.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(O<0||O>=this.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("sourceEnd out of bounds");ne>this.length&&(ne=this.length),l.length-f<ne-O&&(ne=l.length-f+O);let de=ne-O;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,O,ne):Uint8Array.prototype.set.call(l,this.subarray(O,ne),f),de},s.prototype.fill=function(l,f,O,ne){if(typeof l=="string"){if(typeof f=="string"?(ne=f,f=0,O=this.length):typeof O=="string"&&(ne=O,O=this.length),ne!==void 0&&typeof ne!="string")throw new TypeError("encoding must be a string");if(typeof ne=="string"&&!s.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);if(l.length===1){let me=l.charCodeAt(0);(ne==="utf8"&&me<128||ne==="latin1")&&(l=me)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(f<0||this.length<f||this.length<O)throw new RangeError("Out of range index");if(O<=f)return this;f=f>>>0,O=O===void 0?this.length:O>>>0,l||(l=0);let de;if(typeof l=="number")for(de=f;de<O;++de)this[de]=l;else{let me=s.isBuffer(l)?l:s.from(l,ne),Oe=me.length;if(Oe===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(de=0;de<O-f;++de)this[de+f]=me[de%Oe]}return this};var Ye={};function _t(l,f,O){Ye[l]=class extends O{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${l}]`,this.stack,delete this.name}get code(){return l}set code(ne){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ne,writable:!0})}toString(){return`${this.name} [${l}]: ${this.message}`}}}_t("ERR_BUFFER_OUT_OF_BOUNDS",function(l){return l?`${l} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),_t("ERR_INVALID_ARG_TYPE",function(l,f){return`The "${l}" argument must be of type number. Received type ${typeof f}`},TypeError),_t("ERR_OUT_OF_RANGE",function(l,f,O){let ne=`The value of "${l}" is out of range.`,de=O;return Number.isInteger(O)&&Math.abs(O)>2**32?de=Lt(String(O)):typeof O=="bigint"&&(de=String(O),(O>BigInt(2)**BigInt(32)||O<-(BigInt(2)**BigInt(32)))&&(de=Lt(de)),de+="n"),ne+=` It must be ${f}. Received ${de}`,ne},RangeError);function Lt(l){let f="",O=l.length,ne=l[0]==="-"?1:0;for(;O>=ne+4;O-=3)f=`_${l.slice(O-3,O)}${f}`;return`${l.slice(0,O)}${f}`}function jt(l,f,O){Ot(f,"offset"),(l[f]===void 0||l[f+O]===void 0)&&Ft(f,l.length-(O+1))}function Bt(l,f,O,ne,de,me){if(l>O||l<f){let Oe=typeof f=="bigint"?"n":"",Qe;throw me>3?f===0||f===BigInt(0)?Qe=`>= 0${Oe} and < 2${Oe} ** ${(me+1)*8}${Oe}`:Qe=`>= -(2${Oe} ** ${(me+1)*8-1}${Oe}) and < 2 ** ${(me+1)*8-1}${Oe}`:Qe=`>= ${f}${Oe} and <= ${O}${Oe}`,new Ye.ERR_OUT_OF_RANGE("value",Qe,l)}jt(ne,de,me)}function Ot(l,f){if(typeof l!="number")throw new Ye.ERR_INVALID_ARG_TYPE(f,"number",l)}function Ft(l,f,O){throw Math.floor(l)!==l?(Ot(l,O),new Ye.ERR_OUT_OF_RANGE(O||"offset","an integer",l)):f<0?new Ye.ERR_BUFFER_OUT_OF_BOUNDS:new Ye.ERR_OUT_OF_RANGE(O||"offset",`>= ${O?1:0} and <= ${f}`,l)}var zt=/[^+/0-9A-Za-z-_]/g;function Ht(l){if(l=l.split("=")[0],l=l.trim().replace(zt,""),l.length<2)return"";for(;l.length%4!==0;)l=l+"=";return l}function Dt(l,f){f=f||1/0;let O,ne=l.length,de=null,me=[];for(let Oe=0;Oe<ne;++Oe){if(O=l.charCodeAt(Oe),O>55295&&O<57344){if(!de){if(O>56319){(f-=3)>-1&&me.push(239,191,189);continue}else if(Oe+1===ne){(f-=3)>-1&&me.push(239,191,189);continue}de=O;continue}if(O<56320){(f-=3)>-1&&me.push(239,191,189),de=O;continue}O=(de-55296<<10|O-56320)+65536}else de&&(f-=3)>-1&&me.push(239,191,189);if(de=null,O<128){if((f-=1)<0)break;me.push(O)}else if(O<2048){if((f-=2)<0)break;me.push(O>>6|192,O&63|128)}else if(O<65536){if((f-=3)<0)break;me.push(O>>12|224,O>>6&63|128,O&63|128)}else if(O<1114112){if((f-=4)<0)break;me.push(O>>18|240,O>>12&63|128,O>>6&63|128,O&63|128)}else throw new Error("Invalid code point")}return me}function Gt(l){let f=[];for(let O=0;O<l.length;++O)f.push(l.charCodeAt(O)&255);return f}function Jt(l,f){let O,ne,de,me=[];for(let Oe=0;Oe<l.length&&!((f-=2)<0);++Oe)O=l.charCodeAt(Oe),ne=O>>8,de=O%256,me.push(de),me.push(ne);return me}function $t(l){return t.toByteArray(Ht(l))}function Nt(l,f,O,ne){let de;for(de=0;de<ne&&!(de+O>=f.length||de>=l.length);++de)f[de+O]=l[de];return de}function vt(l,f){return l instanceof f||l!=null&&l.constructor!=null&&l.constructor.name!=null&&l.constructor.name===f.name}function Pt(l){return l!==l}var Yt=function(){let l="0123456789abcdef",f=new Array(256);for(let O=0;O<16;++O){let ne=O*16;for(let de=0;de<16;++de)f[ne+de]=l[O]+l[de]}return f}();function At(l){return typeof BigInt>"u"?Xt:l}function Xt(){throw new Error("BigInt not supported")}}),lp=E((e,t)=>{a();var r=t.exports={},n,i;function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=o}catch{n=o}try{typeof clearTimeout=="function"?i=clearTimeout:i=u}catch{i=u}})();function s(B){if(n===setTimeout)return setTimeout(B,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(B,0);try{return n(B,0)}catch{try{return n.call(null,B,0)}catch{return n.call(this,B,0)}}}function c(B){if(i===clearTimeout)return clearTimeout(B);if((i===u||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(B);try{return i(B)}catch{try{return i.call(null,B)}catch{return i.call(this,B)}}}var h=[],p=!1,w,A=-1;function y(){!p||!w||(p=!1,w.length?h=w.concat(h):A=-1,h.length&&m())}function m(){if(!p){var B=s(y);p=!0;for(var C=h.length;C;){for(w=h,h=[];++A<C;)w&&w[A].run();A=-1,C=h.length}w=null,p=!1,c(B)}}r.nextTick=function(B){var C=new Array(arguments.length-1);if(arguments.length>1)for(var V=1;V<arguments.length;V++)C[V-1]=arguments[V];h.push(new g(B,C)),h.length===1&&!p&&s(m)};function g(B,C){this.fun=B,this.array=C}g.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function k(){}r.on=k,r.addListener=k,r.once=k,r.off=k,r.removeListener=k,r.removeAllListeners=k,r.emit=k,r.prependListener=k,r.prependOnceListener=k,r.listeners=function(B){return[]},r.binding=function(B){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(B){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}),process,global,self,a=U(()=>{ho().Buffer,process=lp(),global=typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{},self=globalThis,globalThis&&globalThis.process&&globalThis.process.env&&(globalThis.process.env.LIBP2P_FORCE_PNET=!1)}),pp=E((e,t)=>{a(),t.exports=u;var r=128,n=127,i=~n,o=Math.pow(2,31);function u(s,c,h){if(Number.MAX_SAFE_INTEGER&&s>Number.MAX_SAFE_INTEGER)throw u.bytes=0,new RangeError("Could not encode varint");c=c||[],h=h||0;for(var p=h;s>=o;)c[h++]=s&255|r,s/=128;for(;s&i;)c[h++]=s&255|r,s>>>=7;return c[h]=s|0,u.bytes=h-p+1,c}}),gp=E((e,t)=>{a(),t.exports=i;var r=128,n=127;function i(o,c){var s=0,c=c||0,h=0,p=c,w,A=o.length;do{if(p>=A||h>49)throw i.bytes=0,new RangeError("Could not decode varint");w=o[p++],s+=h<28?(w&n)<<h:(w&n)*Math.pow(2,h),h+=7}while(w>=r);return i.bytes=p-c,s}}),bp=E((e,t)=>{a();var r=Math.pow(2,7),n=Math.pow(2,14),i=Math.pow(2,21),o=Math.pow(2,28),u=Math.pow(2,35),s=Math.pow(2,42),c=Math.pow(2,49),h=Math.pow(2,56),p=Math.pow(2,63);t.exports=function(w){return w<r?1:w<n?2:w<i?3:w<o?4:w<u?5:w<s?6:w<c?7:w<h?8:w<p?9:10}}),Be=E((e,t)=>{a(),t.exports={encode:pp(),decode:gp(),encodingLength:bp()}});function Dy(e,t,r){t=t||[],r=r||0;for(var n=r;e>=f2;)t[r++]=e&255|_y,e/=128;for(;e&u2;)t[r++]=e&255|_y,e>>>=7;return t[r]=e|0,Dy.bytes=r-n+1,t}function ju(e,n){var r=0,n=n||0,i=0,o=n,u,s=e.length;do{if(o>=s)throw ju.bytes=0,new RangeError("Could not decode varint");u=e[o++],r+=i<28?(u&Sy)<<i:(u&Sy)*Math.pow(2,i),i+=7}while(u>=h2);return ju.bytes=o-n,r}var a2,_y,c2,u2,f2,l2,h2,Sy,d2,p2,y2,m2,g2,w2,b2,E2,x2,v2,_2,S2,vo,Ay=U(()=>{a(),a2=Dy,_y=128,c2=127,u2=~c2,f2=Math.pow(2,31),l2=ju,h2=128,Sy=127,d2=Math.pow(2,7),p2=Math.pow(2,14),y2=Math.pow(2,21),m2=Math.pow(2,28),g2=Math.pow(2,35),w2=Math.pow(2,42),b2=Math.pow(2,49),E2=Math.pow(2,56),x2=Math.pow(2,63),v2=function(e){return e<d2?1:e<p2?2:e<y2?3:e<m2?4:e<g2?5:e<w2?6:e<b2?7:e<E2?8:e<x2?9:10},_2={encode:a2,decode:l2,encodingLength:v2},S2=_2,vo=S2}),_o,yi,mi,ra=U(()=>{a(),Ay(),_o=(e,t=0)=>[vo.decode(e,t),vo.decode.bytes],yi=(e,t,r=0)=>(vo.encode(e,t,r),t),mi=e=>vo.encodingLength(e)}),bn={};W(bn,{coerce:()=>it,empty:()=>Ty,equals:()=>zu,fromHex:()=>A2,fromString:()=>qu,isBinary:()=>T2,toHex:()=>D2,toString:()=>Vu});var Ty,D2,A2,zu,it,T2,qu,Vu,Tr=U(()=>{a(),Ty=new Uint8Array(0),D2=e=>e.reduce((t,r)=>t+r.toString(16).padStart(2,"0"),""),A2=e=>{let t=e.match(/../g);return t?new Uint8Array(t.map(r=>parseInt(r,16))):Ty},zu=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},it=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},T2=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),qu=e=>new TextEncoder().encode(e),Vu=e=>new TextDecoder().decode(e)}),be={};W(be,{Digest:()=>En,create:()=>Cr,decode:()=>G,equals:()=>Ku});var Cr,G,Ku,En,Ee=U(()=>{a(),Tr(),ra(),Cr=(e,t)=>{let r=t.byteLength,n=mi(e),i=n+mi(r),o=new Uint8Array(i+r);return yi(e,o,0),yi(r,o,n),o.set(t,i),new En(e,r,t,o)},G=e=>{let t=it(e),[r,n]=_o(t),[i,o]=_o(t.subarray(n)),u=t.subarray(n+o);if(u.byteLength!==i)throw new Error("Incorrect length");return new En(r,i,u,t)},Ku=(e,t)=>e===t?!0:e.code===t.code&&e.size===t.size&&zu(e.bytes,t.bytes),En=class{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}});function C2(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),u=o.charCodeAt(0);if(r[u]!==255)throw new TypeError(o+" is ambiguous");r[u]=i}var s=e.length,c=e.charAt(0),h=Math.log(s)/Math.log(256),p=Math.log(256)/Math.log(s);function w(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var g=0,k=0,B=0,C=m.length;B!==C&&m[B]===0;)B++,g++;for(var V=(C-B)*p+1>>>0,le=new Uint8Array(V);B!==C;){for(var _e=m[B],R=0,re=V-1;(_e!==0||R<k)&&re!==-1;re--,R++)_e+=256*le[re]>>>0,le[re]=_e%s>>>0,_e=_e/s>>>0;if(_e!==0)throw new Error("Non-zero carry");k=R,B++}for(var P=V-k;P!==V&&le[P]===0;)P++;for(var ie=c.repeat(g);P<V;++P)ie+=e.charAt(le[P]);return ie}function A(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;var g=0;if(m[g]!==" "){for(var k=0,B=0;m[g]===c;)k++,g++;for(var C=(m.length-g)*h+1>>>0,V=new Uint8Array(C);m[g];){var le=r[m.charCodeAt(g)];if(le===255)return;for(var _e=0,R=C-1;(le!==0||_e<B)&&R!==-1;R--,_e++)le+=s*V[R]>>>0,V[R]=le%256>>>0,le=le/256>>>0;if(le!==0)throw new Error("Non-zero carry");B=_e,g++}if(m[g]!==" "){for(var re=C-B;re!==C&&V[re]===0;)re++;for(var P=new Uint8Array(k+(C-re)),ie=k;re!==C;)P[ie++]=V[re++];return P}}}function y(m){var g=A(m);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:w,decodeUnsafe:A,decode:y}}var I2,k2,Cy,Iy=U(()=>{a(),I2=C2,k2=I2,Cy=k2}),Wu,Hu,Gu,ky,Ju,gi,Ir,O2,B2,ee,Et=U(()=>{a(),Iy(),Tr(),Wu=class{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Hu=class{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ky(this,e)}},Gu=class{constructor(e){this.decoders=e}or(e){return ky(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},ky=(e,t)=>new Gu({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),Ju=class{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new Wu(e,t,r),this.decoder=new Hu(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},gi=({name:e,prefix:t,encode:r,decode:n})=>new Ju(e,t,r,n),Ir=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=Cy(r,t);return gi({prefix:e,name:t,encode:n,decode:o=>it(i(o))})},O2=(e,t,r,n)=>{let i={};for(let p=0;p<t.length;++p)i[t[p]]=p;let o=e.length;for(;e[o-1]==="=";)--o;let u=new Uint8Array(o*r/8|0),s=0,c=0,h=0;for(let p=0;p<o;++p){let w=i[e[p]];if(w===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|w,s+=r,s>=8&&(s-=8,u[h++]=255&c>>s)}if(s>=r||255&c<<8-s)throw new SyntaxError("Unexpected end of data");return u},B2=(e,t,r)=>{let n=t[t.length-1]==="=",i=(1<<r)-1,o="",u=0,s=0;for(let c=0;c<e.length;++c)for(s=s<<8|e[c],u+=8;u>r;)u-=r,o+=t[i&s>>u];if(u&&(o+=t[i&s<<r-u]),n)for(;o.length*r&7;)o+="=";return o},ee=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>gi({prefix:t,name:e,encode(i){return B2(i,n,r)},decode(i){return O2(i,n,r,e)}})}),So={};W(So,{base58btc:()=>z,base58flickr:()=>L2});var z,L2,Re=U(()=>{a(),Et(),z=Ir({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),L2=Ir({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})}),na={};W(na,{base32:()=>I,base32hex:()=>P2,base32hexpad:()=>$2,base32hexpadupper:()=>U2,base32hexupper:()=>F2,base32pad:()=>Qu,base32padupper:()=>N2,base32upper:()=>R2,base32z:()=>M2});var I,R2,Qu,N2,P2,F2,$2,U2,M2,xe=U(()=>{a(),Et(),I=ee({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),R2=ee({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Qu=ee({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),N2=ee({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),P2=ee({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),F2=ee({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),$2=ee({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),U2=ee({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),M2=ee({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),Yu={};W(Yu,{CID:()=>x});var x,j2,z2,q2,Do,V2,Oy,By,ia,oa,K2,W2,H2,q=U(()=>{a(),ra(),Ee(),Re(),xe(),Tr(),x=class{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:oa,byteLength:oa,code:ia,version:ia,multihash:ia,bytes:ia,_baseCache:oa,asCID:oa})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==Do)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==V2)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return x.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=Cr(e,t);return x.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Ku(this.multihash,e.multihash)}toString(e){let{bytes:t,version:r,_baseCache:n}=this;switch(r){case 0:return z2(t,n,e||z.encoder);default:return q2(t,n,e||I.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return W2(/^0\.0/,H2),!!(e&&(e[By]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof x)return e;if(e!=null&&e.asCID===e){let{version:t,code:r,multihash:n,bytes:i}=e;return new x(t,r,n,i||Oy(t,r,n.bytes))}else if(e!=null&&e[By]===!0){let{version:t,multihash:r,code:n}=e,i=G(r);return x.create(t,n,i)}else return null}static create(e,t,r){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==Do)throw new Error(`Version 0 CID must use dag-pb (code: ${Do}) block encoding`);return new x(e,t,r,r.bytes)}case 1:{let n=Oy(e,t,r.bytes);return new x(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return x.create(0,Do,e)}static createV1(e,t){return x.create(1,e,t)}static decode(e){let[t,r]=x.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=x.inspectBytes(e),r=t.size-t.multihashSize,n=it(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");let i=n.subarray(t.multihashSize-t.digestSize),o=new En(t.multihashCode,t.digestSize,i,n);return[t.version===0?x.createV0(o):x.createV1(t.codec,o),e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[p,w]=_o(e.subarray(t));return t+=w,p},n=r(),i=Do;if(n===18?(n=0,t=0):n===1&&(i=r()),n!==0&&n!==1)throw new RangeError(`Invalid CID version ${n}`);let o=t,u=r(),s=r(),c=t+s,h=c-o;return{version:n,codec:i,multihashCode:u,digestSize:s,multihashSize:h,size:c}}static parse(e,t){let[r,n]=j2(e,t),i=x.decode(n);return i._baseCache.set(r,e),i}},j2=(e,t)=>{switch(e[0]){case"Q":{let r=t||z;return[z.prefix,r.decode(`${z.prefix}${e}`)]}case z.prefix:{let r=t||z;return[z.prefix,r.decode(e)]}case I.prefix:{let r=t||I;return[I.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},z2=(e,t,r)=>{let{prefix:n}=r;if(n!==z.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(i==null){let o=r.encode(e).slice(1);return t.set(n,o),o}else return i},q2=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(i==null){let o=r.encode(e);return t.set(n,o),o}else return i},Do=112,V2=18,Oy=(e,t,r)=>{let n=mi(e),i=n+mi(t),o=new Uint8Array(i+r.byteLength);return yi(e,o,0),yi(t,o,n),o.set(r,i),o},By=Symbol.for("@ipld/js-cid/CID"),ia={writable:!1,configurable:!1,enumerable:!0},oa={writable:!1,enumerable:!1,configurable:!1},K2="0.0.0-dev",W2=(e,t)=>{if(e.test(K2))console.warn(t);else throw new Error(t)},H2=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`}),sf,of,af=U(()=>{a(),Ee(),sf=({name:e,code:t,encode:r})=>new of(e,t,r),of=class{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Cr(this.code,t):t.then(r=>Cr(this.code,r))}else throw Error("Unknown type, must be binary type")}}}),vn=U(()=>{a(),q(),ra(),Tr(),af(),Ee()}),st={};W(st,{code:()=>ot,decode:()=>g8,encode:()=>m8,name:()=>Qy});var Qy,ot,m8,g8,or=U(()=>{a(),Tr(),Qy="raw",ot=85,m8=e=>it(e),g8=e=>it(e)}),cf={};W(cf,{sha256:()=>Mt,sha512:()=>w8});var Yy,Mt,w8,_i=U(()=>{a(),af(),Yy=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Mt=sf({name:"sha2-256",code:18,encode:Yy("SHA-256")}),w8=sf({name:"sha2-512",code:19,encode:Yy("SHA-512")})}),rm=E((e,t)=>{a();var r=1e3,n=r*60,i=n*60,o=i*24,u=o*7,s=o*365.25;t.exports=function(A,y){y=y||{};var m=typeof A;if(m==="string"&&A.length>0)return c(A);if(m==="number"&&isFinite(A))return y.long?p(A):h(A);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(A))};function c(A){if(A=String(A),!(A.length>100)){var y=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(A);if(y){var m=parseFloat(y[1]),g=(y[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return m*s;case"weeks":case"week":case"w":return m*u;case"days":case"day":case"d":return m*o;case"hours":case"hour":case"hrs":case"hr":case"h":return m*i;case"minutes":case"minute":case"mins":case"min":case"m":return m*n;case"seconds":case"second":case"secs":case"sec":case"s":return m*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function h(A){var y=Math.abs(A);return y>=o?Math.round(A/o)+"d":y>=i?Math.round(A/i)+"h":y>=n?Math.round(A/n)+"m":y>=r?Math.round(A/r)+"s":A+"ms"}function p(A){var y=Math.abs(A);return y>=o?w(A,y,o,"day"):y>=i?w(A,y,i,"hour"):y>=n?w(A,y,n,"minute"):y>=r?w(A,y,r,"second"):A+" ms"}function w(A,y,m,g){var k=y>=m*1.5;return Math.round(A/m)+" "+g+(k?"s":"")}}),im=E((e,t)=>{a();function r(n){o.debug=o,o.default=o,o.coerce=w,o.disable=c,o.enable=s,o.enabled=h,o.humanize=rm(),o.destroy=A,Object.keys(n).forEach(y=>{o[y]=n[y]}),o.names=[],o.skips=[],o.formatters={};function i(y){let m=0;for(let g=0;g<y.length;g++)m=(m<<5)-m+y.charCodeAt(g),m|=0;return o.colors[Math.abs(m)%o.colors.length]}o.selectColor=i;function o(y){let m,g=null,k,B;function C(...V){if(!C.enabled)return;let le=C,_e=Number(new Date),R=_e-(m||_e);le.diff=R,le.prev=m,le.curr=_e,m=_e,V[0]=o.coerce(V[0]),typeof V[0]!="string"&&V.unshift("%O");let re=0;V[0]=V[0].replace(/%([a-zA-Z%])/g,(P,ie)=>{if(P==="%%")return"%";re++;let Se=o.formatters[ie];if(typeof Se=="function"){let Ne=V[re];P=Se.call(le,Ne),V.splice(re,1),re--}return P}),o.formatArgs.call(le,V),(le.log||o.log).apply(le,V)}return C.namespace=y,C.useColors=o.useColors(),C.color=o.selectColor(y),C.extend=u,C.destroy=o.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(k!==o.namespaces&&(k=o.namespaces,B=o.enabled(y)),B),set:V=>{g=V}}),typeof o.init=="function"&&o.init(C),C}function u(y,m){let g=o(this.namespace+(typeof m>"u"?":":m)+y);return g.log=this.log,g}function s(y){o.save(y),o.namespaces=y,o.names=[],o.skips=[];let m,g=(typeof y=="string"?y:"").split(/[\s,]+/),k=g.length;for(m=0;m<k;m++)!g[m]||(y=g[m].replace(/\*/g,".*?"),y[0]==="-"?o.skips.push(new RegExp("^"+y.slice(1)+"$")):o.names.push(new RegExp("^"+y+"$")))}function c(){let y=[...o.names.map(p),...o.skips.map(p).map(m=>"-"+m)].join(",");return o.enable(""),y}function h(y){if(y[y.length-1]==="*")return!0;let m,g;for(m=0,g=o.skips.length;m<g;m++)if(o.skips[m].test(y))return!1;for(m=0,g=o.names.length;m<g;m++)if(o.names[m].test(y))return!0;return!1}function p(y){return y.toString().substring(2,y.toString().length-2).replace(/\.\*\?$/,"*")}function w(y){return y instanceof Error?y.stack||y.message:y}function A(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}t.exports=r}),at=E((e,t)=>{a(),e.formatArgs=n,e.save=i,e.load=o,e.useColors=r,e.storage=u(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let h="color: "+this.color;c.splice(1,0,h,"color: inherit");let p=0,w=0;c[0].replace(/%[a-zA-Z%]/g,A=>{A!=="%%"&&(p++,A==="%c"&&(w=p))}),c.splice(w,0,h)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function o(){let c;try{c=e.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}function u(){try{return localStorage}catch{}}t.exports=im()(e);var{formatters:s}=t.exports;s.j=function(c){try{return JSON.stringify(c)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}}),ve=E((e,t)=>{a();function r(i,o){for(let u in o)Object.defineProperty(i,u,{value:o[u],enumerable:!0,configurable:!0});return i}function n(i,o,u){if(!i||typeof i=="string")throw new TypeError("Please pass an Error to err-code");u||(u={}),typeof o=="object"&&(u=o,o=""),o&&(u.code=o);try{return r(i,u)}catch{u.message=i.message,u.stack=i.stack;let s=function(){};return s.prototype=Object.create(Object.getPrototypeOf(i)),r(new s,u)}}t.exports=n}),hf={};W(hf,{identity:()=>P8});var P8,am=U(()=>{a(),Et(),Tr(),P8=gi({prefix:"\0",name:"identity",encode:e=>Vu(e),decode:e=>qu(e)})}),df={};W(df,{base2:()=>F8});var F8,cm=U(()=>{a(),Et(),F8=ee({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),pf={};W(pf,{base8:()=>$8});var $8,um=U(()=>{a(),Et(),$8=ee({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),yf={};W(yf,{base10:()=>U8});var U8,fm=U(()=>{a(),Et(),U8=Ir({prefix:"9",name:"base10",alphabet:"0123456789"})}),mf={};W(mf,{base16:()=>M8,base16upper:()=>j8});var M8,j8,lm=U(()=>{a(),Et(),M8=ee({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),j8=ee({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})}),gf={};W(gf,{base36:()=>z8,base36upper:()=>q8});var z8,q8,hm=U(()=>{a(),Et(),z8=Ir({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),q8=Ir({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),wf={};W(wf,{base64:()=>Pr,base64pad:()=>V8,base64url:()=>ga,base64urlpad:()=>K8});var Pr,V8,ga,K8,Ti=U(()=>{a(),Et(),Pr=ee({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),V8=ee({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ga=ee({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),K8=ee({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})}),bf={};W(bf,{base256emoji:()=>Q8});function G8(e){return e.reduce((t,r)=>(t+=W8[r],t),"")}function J8(e){let t=[];for(let r of e){let n=H8[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}var dm,W8,H8,Q8,pm=U(()=>{a(),Et(),dm=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),W8=dm.reduce((e,t,r)=>(e[r]=t,e),[]),H8=dm.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]),Q8=gi({prefix:"\u{1F680}",name:"base256emoji",encode:G8,decode:J8})}),Ef={};W(Ef,{identity:()=>Ci});var ym,Y8,mm,X8,Ci,wa=U(()=>{a(),Tr(),Ee(),ym=0,Y8="identity",mm=it,X8=e=>Cr(ym,mm(e)),Ci={code:ym,name:Y8,encode:mm,digest:X8}}),ba={};W(ba,{code:()=>xf,decode:()=>n_,encode:()=>r_,name:()=>t_});var Z8,e_,t_,xf,r_,n_,vf=U(()=>{a(),Z8=new TextEncoder,e_=new TextDecoder,t_="json",xf=512,r_=e=>Z8.encode(JSON.stringify(e)),n_=e=>JSON.parse(e_.decode(e))}),An,gm,wm,ko=U(()=>{a(),am(),cm(),um(),fm(),lm(),xe(),hm(),Re(),Ti(),pm(),_i(),wa(),or(),vf(),vn(),An={...hf,...df,...pf,...yf,...mf,...na,...gf,...So,...wf,...bf},gm={...cf,...Ef},wm={raw:st,json:ba}});function Ea(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}var _f=U(()=>{a()});function Em(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var bm,Sf,i_,xa,Df=U(()=>{a(),ko(),_f(),bm=Em("utf8","u",e=>{let t=new TextDecoder("utf8");return"u"+t.decode(e)},e=>new TextEncoder().encode(e.substring(1))),Sf=Em("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=Ea(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),i_={utf8:bm,"utf-8":bm,hex:An.base16,latin1:Sf,ascii:Sf,binary:Sf,...An},xa=i_}),Oo={};W(Oo,{toString:()=>T});function T(e,t="utf8"){let r=xa[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}var H=U(()=>{a(),Df()}),xm={};W(xm,{fromString:()=>N});function N(e,t="utf8"){let r=xa[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}var we=U(()=>{a(),Df()}),Af=E((e,t)=>{a();var r=async n=>{let i=0;for await(let o of n)i++;return i};t.exports=r}),$m=E((e,t)=>{a(),t.exports=r;function r(n,i){for(var o=new Array(arguments.length-1),u=0,s=2,c=!0;s<arguments.length;)o[u++]=arguments[s++];return new Promise(function(h,p){o[u]=function(w){if(c)if(c=!1,w)p(w);else{for(var A=new Array(arguments.length-1),y=0;y<A.length;)A[y++]=arguments[y];h.apply(null,A)}};try{n.apply(i||null,o)}catch(w){c&&(c=!1,p(w))}})}}),zm=E(e=>{a();var t=e;t.length=function(u){var s=u.length;if(!s)return 0;for(var c=0;--s%4>1&&u.charAt(s)==="=";)++c;return Math.ceil(u.length*3)/4-c};var r=new Array(64),n=new Array(123);for(i=0;i<64;)n[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;var i;t.encode=function(u,s,c){for(var h=null,p=[],w=0,A=0,y;s<c;){var m=u[s++];switch(A){case 0:p[w++]=r[m>>2],y=(m&3)<<4,A=1;break;case 1:p[w++]=r[y|m>>4],y=(m&15)<<2,A=2;break;case 2:p[w++]=r[y|m>>6],p[w++]=r[m&63],A=0;break}w>8191&&((h||(h=[])).push(String.fromCharCode.apply(String,p)),w=0)}return A&&(p[w++]=r[y],p[w++]=61,A===1&&(p[w++]=61)),h?(w&&h.push(String.fromCharCode.apply(String,p.slice(0,w))),h.join("")):String.fromCharCode.apply(String,p.slice(0,w))};var o="invalid encoding";t.decode=function(u,s,c){for(var h=c,p=0,w,A=0;A<u.length;){var y=u.charCodeAt(A++);if(y===61&&p>1)break;if((y=n[y])===void 0)throw Error(o);switch(p){case 0:w=y,p=1;break;case 1:s[c++]=w<<2|(y&48)>>4,w=y,p=2;break;case 2:s[c++]=(w&15)<<4|(y&60)>>2,w=y,p=3;break;case 3:s[c++]=(w&3)<<6|y,p=0;break}}if(p===1)throw Error(o);return c-h},t.test=function(u){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(u)}}),Vm=E((e,t)=>{a(),t.exports=r;function r(){this._listeners={}}r.prototype.on=function(n,i,o){return(this._listeners[n]||(this._listeners[n]=[])).push({fn:i,ctx:o||this}),this},r.prototype.off=function(n,i){if(n===void 0)this._listeners={};else if(i===void 0)this._listeners[n]=[];else for(var o=this._listeners[n],u=0;u<o.length;)o[u].fn===i?o.splice(u,1):++u;return this},r.prototype.emit=function(n){var i=this._listeners[n];if(i){for(var o=[],u=1;u<arguments.length;)o.push(arguments[u++]);for(u=0;u<i.length;)i[u].fn.apply(i[u++].ctx,o)}return this}}),Ym=E((e,t)=>{a(),t.exports=r(r);function r(s){return typeof Float32Array<"u"?function(){var c=new Float32Array([-0]),h=new Uint8Array(c.buffer),p=h[3]===128;function w(g,k,B){c[0]=g,k[B]=h[0],k[B+1]=h[1],k[B+2]=h[2],k[B+3]=h[3]}function A(g,k,B){c[0]=g,k[B]=h[3],k[B+1]=h[2],k[B+2]=h[1],k[B+3]=h[0]}s.writeFloatLE=p?w:A,s.writeFloatBE=p?A:w;function y(g,k){return h[0]=g[k],h[1]=g[k+1],h[2]=g[k+2],h[3]=g[k+3],c[0]}function m(g,k){return h[3]=g[k],h[2]=g[k+1],h[1]=g[k+2],h[0]=g[k+3],c[0]}s.readFloatLE=p?y:m,s.readFloatBE=p?m:y}():function(){function c(p,w,A,y){var m=w<0?1:0;if(m&&(w=-w),w===0)p(1/w>0?0:2147483648,A,y);else if(isNaN(w))p(2143289344,A,y);else if(w>34028234663852886e22)p((m<<31|2139095040)>>>0,A,y);else if(w<11754943508222875e-54)p((m<<31|Math.round(w/1401298464324817e-60))>>>0,A,y);else{var g=Math.floor(Math.log(w)/Math.LN2),k=Math.round(w*Math.pow(2,-g)*8388608)&8388607;p((m<<31|g+127<<23|k)>>>0,A,y)}}s.writeFloatLE=c.bind(null,n),s.writeFloatBE=c.bind(null,i);function h(p,w,A){var y=p(w,A),m=(y>>31)*2+1,g=y>>>23&255,k=y&8388607;return g===255?k?NaN:m*(1/0):g===0?m*1401298464324817e-60*k:m*Math.pow(2,g-150)*(k+8388608)}s.readFloatLE=h.bind(null,o),s.readFloatBE=h.bind(null,u)}(),typeof Float64Array<"u"?function(){var c=new Float64Array([-0]),h=new Uint8Array(c.buffer),p=h[7]===128;function w(g,k,B){c[0]=g,k[B]=h[0],k[B+1]=h[1],k[B+2]=h[2],k[B+3]=h[3],k[B+4]=h[4],k[B+5]=h[5],k[B+6]=h[6],k[B+7]=h[7]}function A(g,k,B){c[0]=g,k[B]=h[7],k[B+1]=h[6],k[B+2]=h[5],k[B+3]=h[4],k[B+4]=h[3],k[B+5]=h[2],k[B+6]=h[1],k[B+7]=h[0]}s.writeDoubleLE=p?w:A,s.writeDoubleBE=p?A:w;function y(g,k){return h[0]=g[k],h[1]=g[k+1],h[2]=g[k+2],h[3]=g[k+3],h[4]=g[k+4],h[5]=g[k+5],h[6]=g[k+6],h[7]=g[k+7],c[0]}function m(g,k){return h[7]=g[k],h[6]=g[k+1],h[5]=g[k+2],h[4]=g[k+3],h[3]=g[k+4],h[2]=g[k+5],h[1]=g[k+6],h[0]=g[k+7],c[0]}s.readDoubleLE=p?y:m,s.readDoubleBE=p?m:y}():function(){function c(p,w,A,y,m,g){var k=y<0?1:0;if(k&&(y=-y),y===0)p(0,m,g+w),p(1/y>0?0:2147483648,m,g+A);else if(isNaN(y))p(0,m,g+w),p(2146959360,m,g+A);else if(y>17976931348623157e292)p(0,m,g+w),p((k<<31|2146435072)>>>0,m,g+A);else{var B;if(y<22250738585072014e-324)B=y/5e-324,p(B>>>0,m,g+w),p((k<<31|B/4294967296)>>>0,m,g+A);else{var C=Math.floor(Math.log(y)/Math.LN2);C===1024&&(C=1023),B=y*Math.pow(2,-C),p(B*4503599627370496>>>0,m,g+w),p((k<<31|C+1023<<20|B*1048576&1048575)>>>0,m,g+A)}}}s.writeDoubleLE=c.bind(null,n,0,4),s.writeDoubleBE=c.bind(null,i,4,0);function h(p,w,A,y,m){var g=p(y,m+w),k=p(y,m+A),B=(k>>31)*2+1,C=k>>>20&2047,V=4294967296*(k&1048575)+g;return C===2047?V?NaN:B*(1/0):C===0?B*5e-324*V:B*Math.pow(2,C-1075)*(V+4503599627370496)}s.readDoubleLE=h.bind(null,o,0,4),s.readDoubleBE=h.bind(null,u,4,0)}(),s}function n(s,c,h){c[h]=s&255,c[h+1]=s>>>8&255,c[h+2]=s>>>16&255,c[h+3]=s>>>24}function i(s,c,h){c[h]=s>>>24,c[h+1]=s>>>16&255,c[h+2]=s>>>8&255,c[h+3]=s&255}function o(s,c){return(s[c]|s[c+1]<<8|s[c+2]<<16|s[c+3]<<24)>>>0}function u(s,c){return(s[c]<<24|s[c+1]<<16|s[c+2]<<8|s[c+3])>>>0}}),Xm=E((exports,module)=>{a(),module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}}),eg=E(e=>{a();var t=e;t.length=function(r){for(var n=0,i=0,o=0;o<r.length;++o)i=r.charCodeAt(o),i<128?n+=1:i<2048?n+=2:(i&64512)===55296&&(r.charCodeAt(o+1)&64512)===56320?(++o,n+=4):n+=3;return n},t.read=function(r,n,i){var o=i-n;if(o<1)return"";for(var u=null,s=[],c=0,h;n<i;)h=r[n++],h<128?s[c++]=h:h>191&&h<224?s[c++]=(h&31)<<6|r[n++]&63:h>239&&h<365?(h=((h&7)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,s[c++]=55296+(h>>10),s[c++]=56320+(h&1023)):s[c++]=(h&15)<<12|(r[n++]&63)<<6|r[n++]&63,c>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,s)),c=0);return u?(c&&u.push(String.fromCharCode.apply(String,s.slice(0,c))),u.join("")):String.fromCharCode.apply(String,s.slice(0,c))},t.write=function(r,n,i){for(var o=i,u,s,c=0;c<r.length;++c)u=r.charCodeAt(c),u<128?n[i++]=u:u<2048?(n[i++]=u>>6|192,n[i++]=u&63|128):(u&64512)===55296&&((s=r.charCodeAt(c+1))&64512)===56320?(u=65536+((u&1023)<<10)+(s&1023),++c,n[i++]=u>>18|240,n[i++]=u>>12&63|128,n[i++]=u>>6&63|128,n[i++]=u&63|128):(n[i++]=u>>12|224,n[i++]=u>>6&63|128,n[i++]=u&63|128);return i-o}}),rg=E((e,t)=>{a(),t.exports=r;function r(n,i,o){var u=o||8192,s=u>>>1,c=null,h=u;return function(p){if(p<1||p>s)return n(p);h+p>u&&(c=n(u),h=0);var w=i.call(c,h,h+=p);return h&7&&(h=(h|7)+1),w}}}),ig=E((e,t)=>{a(),t.exports=n;var r=$r();function n(s,c){this.lo=s>>>0,this.hi=c>>>0}var i=n.zero=new n(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var o=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(s){if(s===0)return i;var c=s<0;c&&(s=-s);var h=s>>>0,p=(s-h)/4294967296>>>0;return c&&(p=~p>>>0,h=~h>>>0,++h>4294967295&&(h=0,++p>4294967295&&(p=0))),new n(h,p)},n.from=function(s){if(typeof s=="number")return n.fromNumber(s);if(r.isString(s))if(r.Long)s=r.Long.fromString(s);else return n.fromNumber(parseInt(s,10));return s.low||s.high?new n(s.low>>>0,s.high>>>0):i},n.prototype.toNumber=function(s){if(!s&&this.hi>>>31){var c=~this.lo+1>>>0,h=~this.hi>>>0;return c||(h=h+1>>>0),-(c+h*4294967296)}return this.lo+this.hi*4294967296},n.prototype.toLong=function(s){return r.Long?new r.Long(this.lo|0,this.hi|0,Boolean(s)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(s)}};var u=String.prototype.charCodeAt;n.fromHash=function(s){return s===o?i:new n((u.call(s,0)|u.call(s,1)<<8|u.call(s,2)<<16|u.call(s,3)<<24)>>>0,(u.call(s,4)|u.call(s,5)<<8|u.call(s,6)<<16|u.call(s,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var s=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^s)>>>0,this.lo=(this.lo<<1^s)>>>0,this},n.prototype.zzDecode=function(){var s=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^s)>>>0,this.hi=(this.hi>>>1^s)>>>0,this},n.prototype.length=function(){var s=this.lo,c=(this.lo>>>28|this.hi<<4)>>>0,h=this.hi>>>24;return h===0?c===0?s<16384?s<128?1:2:s<2097152?3:4:c<16384?c<128?5:6:c<2097152?7:8:h<128?9:10}}),$r=E(e=>{a();var t=e;t.asPromise=$m(),t.base64=zm(),t.EventEmitter=Vm(),t.float=Ym(),t.inquire=Xm(),t.utf8=eg(),t.pool=rg(),t.LongBits=ig(),t.isNode=Boolean(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),t.global=t.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||e,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i},t.isString=function(i){return typeof i=="string"||i instanceof String},t.isObject=function(i){return i&&typeof i=="object"},t.isset=t.isSet=function(i,o){var u=i[o];return u!=null&&i.hasOwnProperty(o)?typeof u!="object"||(Array.isArray(u)?u.length:Object.keys(u).length)>0:!1},t.Buffer=function(){try{var i=t.inquire("buffer").Buffer;return i.prototype.utf8Write?i:null}catch{return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(i){return typeof i=="number"?t.Buffer?t._Buffer_allocUnsafe(i):new t.Array(i):t.Buffer?t._Buffer_from(i):typeof Uint8Array>"u"?i:new Uint8Array(i)},t.Array=typeof Uint8Array<"u"?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(i){return i?t.LongBits.from(i).toHash():t.LongBits.zeroHash},t.longFromHash=function(i,o){var u=t.LongBits.fromHash(i);return t.Long?t.Long.fromBits(u.lo,u.hi,o):u.toNumber(Boolean(o))};function r(i,o,u){for(var s=Object.keys(o),c=0;c<s.length;++c)(i[s[c]]===void 0||!u)&&(i[s[c]]=o[s[c]]);return i}t.merge=r,t.lcFirst=function(i){return i.charAt(0).toLowerCase()+i.substring(1)};function n(i){function o(u,s){if(!(this instanceof o))return new o(u,s);Object.defineProperty(this,"message",{get:function(){return u}}),Error.captureStackTrace?Error.captureStackTrace(this,o):Object.defineProperty(this,"stack",{value:new Error().stack||""}),s&&r(this,s)}return o.prototype=Object.create(Error.prototype,{constructor:{value:o,writable:!0,enumerable:!1,configurable:!0},name:{get(){return i},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),o}t.newError=n,t.ProtocolError=n("ProtocolError"),t.oneOfGetter=function(i){for(var o={},u=0;u<i.length;++u)o[i[u]]=1;return function(){for(var s=Object.keys(this),c=s.length-1;c>-1;--c)if(o[s[c]]===1&&this[s[c]]!==void 0&&this[s[c]]!==null)return s[c]}},t.oneOfSetter=function(i){return function(o){for(var u=0;u<i.length;++u)i[u]!==o&&delete this[i[u]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var i=t.Buffer;if(!i){t._Buffer_from=t._Buffer_allocUnsafe=null;return}t._Buffer_from=i.from!==Uint8Array.from&&i.from||function(o,u){return new i(o,u)},t._Buffer_allocUnsafe=i.allocUnsafe||function(o){return new i(o)}}}),Pf=E((e,t)=>{a(),t.exports=p;var r=$r(),n,i=r.LongBits,o=r.base64,u=r.utf8;function s(C,V,le){this.fn=C,this.len=V,this.next=void 0,this.val=le}function c(){}function h(C){this.head=C.head,this.tail=C.tail,this.len=C.len,this.next=C.states}function p(){this.len=0,this.head=new s(c,0,0),this.tail=this.head,this.states=null}var w=function(){return r.Buffer?function(){return(p.create=function(){return new n})()}:function(){return new p}};p.create=w(),p.alloc=function(C){return new r.Array(C)},r.Array!==Array&&(p.alloc=r.pool(p.alloc,r.Array.prototype.subarray)),p.prototype._push=function(C,V,le){return this.tail=this.tail.next=new s(C,V,le),this.len+=V,this};function A(C,V,le){V[le]=C&255}function y(C,V,le){for(;C>127;)V[le++]=C&127|128,C>>>=7;V[le]=C}function m(C,V){this.len=C,this.next=void 0,this.val=V}m.prototype=Object.create(s.prototype),m.prototype.fn=y,p.prototype.uint32=function(C){return this.len+=(this.tail=this.tail.next=new m((C=C>>>0)<128?1:C<16384?2:C<2097152?3:C<268435456?4:5,C)).len,this},p.prototype.int32=function(C){return C<0?this._push(g,10,i.fromNumber(C)):this.uint32(C)},p.prototype.sint32=function(C){return this.uint32((C<<1^C>>31)>>>0)};function g(C,V,le){for(;C.hi;)V[le++]=C.lo&127|128,C.lo=(C.lo>>>7|C.hi<<25)>>>0,C.hi>>>=7;for(;C.lo>127;)V[le++]=C.lo&127|128,C.lo=C.lo>>>7;V[le++]=C.lo}p.prototype.uint64=function(C){var V=i.from(C);return this._push(g,V.length(),V)},p.prototype.int64=p.prototype.uint64,p.prototype.sint64=function(C){var V=i.from(C).zzEncode();return this._push(g,V.length(),V)},p.prototype.bool=function(C){return this._push(A,1,C?1:0)};function k(C,V,le){V[le]=C&255,V[le+1]=C>>>8&255,V[le+2]=C>>>16&255,V[le+3]=C>>>24}p.prototype.fixed32=function(C){return this._push(k,4,C>>>0)},p.prototype.sfixed32=p.prototype.fixed32,p.prototype.fixed64=function(C){var V=i.from(C);return this._push(k,4,V.lo)._push(k,4,V.hi)},p.prototype.sfixed64=p.prototype.fixed64,p.prototype.float=function(C){return this._push(r.float.writeFloatLE,4,C)},p.prototype.double=function(C){return this._push(r.float.writeDoubleLE,8,C)};var B=r.Array.prototype.set?function(C,V,le){V.set(C,le)}:function(C,V,le){for(var _e=0;_e<C.length;++_e)V[le+_e]=C[_e]};p.prototype.bytes=function(C){var V=C.length>>>0;if(!V)return this._push(A,1,0);if(r.isString(C)){var le=p.alloc(V=o.length(C));o.decode(C,le,0),C=le}return this.uint32(V)._push(B,V,C)},p.prototype.string=function(C){var V=u.length(C);return V?this.uint32(V)._push(u.write,V,C):this._push(A,1,0)},p.prototype.fork=function(){return this.states=new h(this),this.head=this.tail=new s(c,0,0),this.len=0,this},p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(c,0,0),this.len=0),this},p.prototype.ldelim=function(){var C=this.head,V=this.tail,le=this.len;return this.reset().uint32(le),le&&(this.tail.next=C.next,this.tail=V,this.len+=le),this},p.prototype.finish=function(){for(var C=this.head.next,V=this.constructor.alloc(this.len),le=0;C;)C.fn(C.val,V,le),le+=C.len,C=C.next;return V},p._configure=function(C){n=C,p.create=w(),n._configure()}}),dg=E((e,t)=>{a(),t.exports=i;var r=Pf();(i.prototype=Object.create(r.prototype)).constructor=i;var n=$r();function i(){r.call(this)}i._configure=function(){i.alloc=n._Buffer_allocUnsafe,i.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&n.Buffer.prototype.set.name==="set"?function(u,s,c){s.set(u,c)}:function(u,s,c){if(u.copy)u.copy(s,c,0,u.length);else for(var h=0;h<u.length;)s[c++]=u[h++]}},i.prototype.bytes=function(u){n.isString(u)&&(u=n._Buffer_from(u,"base64"));var s=u.length>>>0;return this.uint32(s),s&&this._push(i.writeBytesBuffer,s,u),this};function o(u,s,c){u.length<40?n.utf8.write(u,s,c):s.utf8Write?s.utf8Write(u,c):s.write(u,c)}i.prototype.string=function(u){var s=n.Buffer.byteLength(u);return this.uint32(s),s&&this._push(o,s,u),this},i._configure()}),Uf=E((e,t)=>{a(),t.exports=s;var r=$r(),n,i=r.LongBits,o=r.utf8;function u(y,m){return RangeError("index out of range: "+y.pos+" + "+(m||1)+" > "+y.len)}function s(y){this.buf=y,this.pos=0,this.len=y.length}var c=typeof Uint8Array<"u"?function(y){if(y instanceof Uint8Array||Array.isArray(y))return new s(y);throw Error("illegal buffer")}:function(y){if(Array.isArray(y))return new s(y);throw Error("illegal buffer")},h=function(){return r.Buffer?function(y){return(s.create=function(m){return r.Buffer.isBuffer(m)?new n(m):c(m)})(y)}:c};s.create=h(),s.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,s.prototype.uint32=function(){var y=4294967295;return function(){if(y=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(y=(y|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(y=(y|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(y=(y|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(y=(y|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return y;if((this.pos+=5)>this.len)throw this.pos=this.len,u(this,10);return y}}(),s.prototype.int32=function(){return this.uint32()|0},s.prototype.sint32=function(){var y=this.uint32();return y>>>1^-(y&1)|0};function p(){var y=new i(0,0),m=0;if(this.len-this.pos>4){for(;m<4;++m)if(y.lo=(y.lo|(this.buf[this.pos]&127)<<m*7)>>>0,this.buf[this.pos++]<128)return y;if(y.lo=(y.lo|(this.buf[this.pos]&127)<<28)>>>0,y.hi=(y.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return y;m=0}else{for(;m<3;++m){if(this.pos>=this.len)throw u(this);if(y.lo=(y.lo|(this.buf[this.pos]&127)<<m*7)>>>0,this.buf[this.pos++]<128)return y}return y.lo=(y.lo|(this.buf[this.pos++]&127)<<m*7)>>>0,y}if(this.len-this.pos>4){for(;m<5;++m)if(y.hi=(y.hi|(this.buf[this.pos]&127)<<m*7+3)>>>0,this.buf[this.pos++]<128)return y}else for(;m<5;++m){if(this.pos>=this.len)throw u(this);if(y.hi=(y.hi|(this.buf[this.pos]&127)<<m*7+3)>>>0,this.buf[this.pos++]<128)return y}throw Error("invalid varint encoding")}s.prototype.bool=function(){return this.uint32()!==0};function w(y,m){return(y[m-4]|y[m-3]<<8|y[m-2]<<16|y[m-1]<<24)>>>0}s.prototype.fixed32=function(){if(this.pos+4>this.len)throw u(this,4);return w(this.buf,this.pos+=4)},s.prototype.sfixed32=function(){if(this.pos+4>this.len)throw u(this,4);return w(this.buf,this.pos+=4)|0};function A(){if(this.pos+8>this.len)throw u(this,8);return new i(w(this.buf,this.pos+=4),w(this.buf,this.pos+=4))}s.prototype.float=function(){if(this.pos+4>this.len)throw u(this,4);var y=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,y},s.prototype.double=function(){if(this.pos+8>this.len)throw u(this,4);var y=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,y},s.prototype.bytes=function(){var y=this.uint32(),m=this.pos,g=this.pos+y;if(g>this.len)throw u(this,y);return this.pos+=y,Array.isArray(this.buf)?this.buf.slice(m,g):m===g?new this.buf.constructor(0):this._slice.call(this.buf,m,g)},s.prototype.string=function(){var y=this.bytes();return o.read(y,0,y.length)},s.prototype.skip=function(y){if(typeof y=="number"){if(this.pos+y>this.len)throw u(this,y);this.pos+=y}else do if(this.pos>=this.len)throw u(this);while(this.buf[this.pos++]&128);return this},s.prototype.skipType=function(y){switch(y){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(y=this.uint32()&7)!==4;)this.skipType(y);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+y+" at offset "+this.pos)}return this},s._configure=function(y){n=y,s.create=h(),n._configure();var m=r.Long?"toLong":"toNumber";r.merge(s.prototype,{int64:function(){return p.call(this)[m](!1)},uint64:function(){return p.call(this)[m](!0)},sint64:function(){return p.call(this).zzDecode()[m](!1)},fixed64:function(){return A.call(this)[m](!0)},sfixed64:function(){return A.call(this)[m](!1)}})}}),vg=E((e,t)=>{a(),t.exports=i;var r=Uf();(i.prototype=Object.create(r.prototype)).constructor=i;var n=$r();function i(o){r.call(this,o)}i._configure=function(){n.Buffer&&(i.prototype._slice=n.Buffer.prototype.slice)},i.prototype.string=function(){var o=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+o,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+o,this.len))},i._configure()}),Sg=E((e,t)=>{a(),t.exports=n;var r=$r();(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n;function n(i,o,u){if(typeof i!="function")throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=i,this.requestDelimited=Boolean(o),this.responseDelimited=Boolean(u)}n.prototype.rpcCall=function i(o,u,s,c,h){if(!c)throw TypeError("request must be specified");var p=this;if(!h)return r.asPromise(i,p,o,u,s,c);if(!p.rpcImpl){setTimeout(function(){h(Error("already ended"))},0);return}try{return p.rpcImpl(o,u[p.requestDelimited?"encodeDelimited":"encode"](c).finish(),function(w,A){if(w)return p.emit("error",w,o),h(w);if(A===null){p.end(!0);return}if(!(A instanceof s))try{A=s[p.responseDelimited?"decodeDelimited":"decode"](A)}catch(y){return p.emit("error",y,o),h(y)}return p.emit("data",A,o),h(null,A)})}catch(w){p.emit("error",w,o),setTimeout(function(){h(w)},0);return}},n.prototype.end=function(i){return this.rpcImpl&&(i||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),Ag=E(e=>{a();var t=e;t.Service=Sg()}),Cg=E((e,t)=>{a(),t.exports={}}),Og=E(e=>{a();var t=e;t.build="minimal",t.Writer=Pf(),t.BufferWriter=dg(),t.Reader=Uf(),t.BufferReader=vg(),t.util=$r(),t.rpc=Ag(),t.roots=Cg(),t.configure=r;function r(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}r()}),Mr=E((e,t)=>{a(),t.exports=Og()}),Pg=E((e,t)=>{a(),Object.defineProperty(e,"__esModule",{value:!0}),r.BASE=2166136261;function r(n,i=r.BASE){let o=n.length;for(let u=0;u<o;u++)i^=n.charCodeAt(u),i+=(i<<1)+(i<<4)+(i<<7)+(i<<8)+(i<<24);return i>>>0}e.default=r,t.exports=r}),Vf={};W(Vf,{concat:()=>Y});function Y(e,t){t||(t=e.reduce((i,o)=>i+o.length,0));let r=Ea(t),n=0;for(let i of e)r.set(i,n),n+=i.length;return r}var jr=U(()=>{a(),_f()}),rw=E((e,t)=>{a();var r="[a-fA-F\\d:]",n=w=>w&&w.includeBoundaries?`(?:(?<=\\s|^)(?=${r})|(?<=${r})(?=\\s|$))`:"",i="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",o="[a-fA-F\\d]{1,4}",u=`
(?:
(?:${o}:){7}(?:${o}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${o}:){6}(?:${i}|:${o}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${o}:){5}(?::${i}|(?::${o}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${o}:){4}(?:(?::${o}){0,1}:${i}|(?::${o}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${o}:){3}(?:(?::${o}){0,2}:${i}|(?::${o}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${o}:){2}(?:(?::${o}){0,3}:${i}|(?::${o}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${o}:){1}(?:(?::${o}){0,4}:${i}|(?::${o}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${o}){0,5}:${i}|(?::${o}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp(`(?:^${i}$)|(?:^${u}$)`),c=new RegExp(`^${i}$`),h=new RegExp(`^${u}$`),p=w=>w&&w.exact?s:new RegExp(`(?:${n(w)}${i}${n(w)})|(?:${n(w)}${u}${n(w)})`,"g");p.v4=w=>w&&w.exact?c:new RegExp(`${n(w)}${i}${n(w)}`,"g"),p.v6=w=>w&&w.exact?h:new RegExp(`${n(w)}${u}${n(w)}`,"g"),t.exports=p}),iw=E((e,t)=>{a();var r=rw(),n=i=>r({exact:!0}).test(i);n.v4=i=>r.v4({exact:!0}).test(i),n.v6=i=>r.v6({exact:!0}).test(i),n.version=i=>n(i)?n.v4(i)?4:6:void 0,t.exports=n}),uw=E((e,t)=>{a();var r=iw(),{toString:n}=(H(),ke(Oo)),i=r,o=r.v4,u=r.v6,s=function(h,p,w){w=~~w;let A;if(o(h))A=p||new Uint8Array(w+4),h.split(/\./g).map(function(y){A[w++]=parseInt(y,10)&255});else if(u(h)){let y=h.split(":",8),m;for(m=0;m<y.length;m++){let g=o(y[m]),k;g&&(k=s(y[m]),y[m]=n(k.slice(0,2),"base16")),k&&++m<8&&y.splice(m,0,n(k.slice(2,4),"base16"))}if(y[0]==="")for(;y.length<8;)y.unshift("0");else if(y[y.length-1]==="")for(;y.length<8;)y.push("0");else if(y.length<8){for(m=0;m<y.length&&y[m]!=="";m++);let g=[m,"1"];for(m=9-y.length;m>0;m--)g.push("0");y.splice.apply(y,g)}for(A=p||new Uint8Array(w+16),m=0;m<y.length;m++){let g=parseInt(y[m],16);A[w++]=g>>8&255,A[w++]=g&255}}if(!A)throw Error("Invalid ip address: "+h);return A},c=function(h,p,w){p=~~p,w=w||h.length-p;let A=[],y,m=new DataView(h.buffer);if(w===4){for(let g=0;g<w;g++)A.push(h[p+g]);y=A.join(".")}else if(w===16){for(let g=0;g<w;g+=2)A.push(m.getUint16(p+g).toString(16));y=A.join(":"),y=y.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),y=y.replace(/:{3,4}/,"::")}return y};t.exports={isIP:i,isV4:o,isV6:u,toBytes:s,toString:c}}),Ua=E((e,t)=>{a();function r(o){if(typeof o=="number"){if(r.codes[o])return r.codes[o];throw new Error("no protocol with code: "+o)}else if(typeof o=="string"){if(r.names[o])return r.names[o];throw new Error("no protocol with name: "+o)}throw new Error("invalid protocol id type: "+o)}var n=-1;r.lengthPrefixedVarSize=n,r.V=n,r.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,n,"ip6zone"],[53,n,"dns","resolvable"],[54,n,"dns4","resolvable"],[55,n,"dns6","resolvable"],[56,n,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,n,"unix",!1,"path"],[421,n,"ipfs"],[421,n,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,n,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,n,"memory"]],r.names={},r.codes={},r.table.map(o=>{let u=i.apply(null,o);return r.codes[u.code]=u,r.names[u.name]=u,null}),r.object=i;function i(o,u,s,c,h){return{code:o,size:u,name:s,resolvable:Boolean(c),path:Boolean(h)}}t.exports=r}),bw=E((e,t)=>{a();var r=uw(),n=Ua(),{CID:i}=(q(),ke(Yu)),{base32:o}=(xe(),ke(na)),{base58btc:u}=(Re(),ke(So)),s=(Ee(),ke(be)),c=Be(),{toString:h}=(H(),ke(Oo)),{fromString:p}=(we(),ke(xm)),{concat:w}=(jr(),ke(Vf));t.exports=A;function A(P,ie){return ie instanceof Uint8Array?A.toString(P,ie):A.toBytes(P,ie)}A.toString=function(P,ie){switch(n(P).code){case 4:case 41:return m(ie);case 6:case 273:case 33:case 132:return k(ie).toString();case 53:case 54:case 55:case 56:case 400:case 777:return C(ie);case 421:return le(ie);case 444:return re(ie);case 445:return re(ie);default:return h(ie,"base16")}},A.toBytes=function(P,ie){switch(n(P).code){case 4:return y(ie);case 41:return y(ie);case 6:case 273:case 33:case 132:return g(parseInt(ie,10));case 53:case 54:case 55:case 56:case 400:case 777:return B(ie);case 421:return V(ie);case 444:return _e(ie);case 445:return R(ie);default:return p(ie,"base16")}};function y(P){if(!r.isIP(P))throw new Error("invalid ip address");return r.toBytes(P)}function m(P){let ie=r.toString(P);if(!ie||!r.isIP(ie))throw new Error("invalid ip address");return ie}function g(P){let ie=new ArrayBuffer(2);return new DataView(ie).setUint16(0,P),new Uint8Array(ie)}function k(P){return new DataView(P.buffer).getUint16(P.byteOffset)}function B(P){let ie=p(P),Se=Uint8Array.from(c.encode(ie.length));return w([Se,ie],Se.length+ie.length)}function C(P){let ie=c.decode(P);if(P=P.slice(c.decode.bytes),P.length!==ie)throw new Error("inconsistent lengths");return h(P)}function V(P){let ie;P[0]==="Q"||P[0]==="1"?ie=s.decode(u.decode(`z${P}`)).bytes:ie=i.parse(P).multihash.bytes;let Se=Uint8Array.from(c.encode(ie.length));return w([Se,ie],Se.length+ie.length)}function le(P){let ie=c.decode(P),Se=P.slice(c.decode.bytes);if(Se.length!==ie)throw new Error("inconsistent lengths");return h(Se,"base58btc")}function _e(P){let ie=P.split(":");if(ie.length!==2)throw new Error("failed to parse onion addr: "+ie+" does not contain a port number");if(ie[0].length!==16)throw new Error("failed to parse onion addr: "+ie[0]+" not a Tor onion address.");let Se=o.decode("b"+ie[0]),Ne=parseInt(ie[1],10);if(Ne<1||Ne>65536)throw new Error("Port number is not in range(1, 65536)");let De=g(Ne);return w([Se,De],Se.length+De.length)}function R(P){let ie=P.split(":");if(ie.length!==2)throw new Error("failed to parse onion addr: "+ie+" does not contain a port number");if(ie[0].length!==56)throw new Error("failed to parse onion addr: "+ie[0]+" not a Tor onion3 address.");let Se=o.decode("b"+ie[0]),Ne=parseInt(ie[1],10);if(Ne<1||Ne>65536)throw new Error("Port number is not in range(1, 65536)");let De=g(Ne);return w([Se,De],Se.length+De.length)}function re(P){let ie=P.slice(0,P.length-2),Se=P.slice(P.length-2),Ne=h(ie,"base32"),De=k(Se);return Ne+":"+De}}),Ow=E((e,t)=>{a();var r=bw(),n=Ua(),i=Be(),{concat:o}=(jr(),ke(Vf)),{toString:u}=(H(),ke(Oo));t.exports={stringToStringTuples:s,stringTuplesToString:c,tuplesToStringTuples:p,stringTuplesToTuples:h,bytesToTuples:y,tuplesToBytes:w,bytesToString:m,stringToBytes:g,fromString:k,fromBytes:B,validateBytes:C,isValidBytes:V,cleanPath:le,ParseError:_e,protoFromTuple:R,sizeForAddr:A};function s(re){let P=[],ie=re.split("/").slice(1);if(ie.length===1&&ie[0]==="")return[];for(let Se=0;Se<ie.length;Se++){let Ne=ie[Se],De=n(Ne);if(De.size===0){P.push([Ne]);continue}if(Se++,Se>=ie.length)throw _e("invalid address: "+re);if(De.path){P.push([Ne,le(ie.slice(Se).join("/"))]);break}P.push([Ne,ie[Se]])}return P}function c(re){let P=[];return re.map(ie=>{let Se=R(ie);return P.push(Se.name),ie.length>1&&P.push(ie[1]),null}),le(P.join("/"))}function h(re){return re.map(P=>{Array.isArray(P)||(P=[P]);let ie=R(P);return P.length>1?[ie.code,r.toBytes(ie.code,P[1])]:[ie.code]})}function p(re){return re.map(P=>{let ie=R(P);return P[1]?[ie.code,r.toString(ie.code,P[1])]:[ie.code]})}function w(re){return B(o(re.map(P=>{let ie=R(P),Se=Uint8Array.from(i.encode(ie.code));return P.length>1&&(Se=o([Se,P[1]])),Se})))}function A(re,P){return re.size>0?re.size/8:re.size===0?0:i.decode(P)+i.decode.bytes}function y(re){let P=[],ie=0;for(;ie<re.length;){let Se=i.decode(re,ie),Ne=i.decode.bytes,De=n(Se),Ke=A(De,re.slice(ie+Ne));if(Ke===0){P.push([Se]),ie+=Ne;continue}let pt=re.slice(ie+Ne,ie+Ne+Ke);if(ie+=Ke+Ne,ie>re.length)throw _e("Invalid address Uint8Array: "+u(re,"base16"));P.push([Se,pt])}return P}function m(re){let P=y(re),ie=p(P);return c(ie)}function g(re){re=le(re);let P=s(re),ie=h(P);return w(ie)}function k(re){return g(re)}function B(re){let P=C(re);if(P)throw P;return Uint8Array.from(re)}function C(re){try{y(re)}catch(P){return P}}function V(re){return C(re)===void 0}function le(re){return"/"+re.trim().split("/").filter(P=>P).join("/")}function _e(re){return new Error("Error parsing address: "+re)}function R(re){return n(re[0])}}),Bw={};W(Bw,{equals:()=>Ko});function Ko(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var Va=U(()=>{a()}),Pw=E((e,t)=>{a();var r=Ow(),n=Ua(),i=Be(),{CID:o}=(q(),ke(Yu)),{base58btc:u}=(Re(),ke(So)),s=ve(),c=Symbol.for("nodejs.util.inspect.custom"),{toString:h}=(H(),ke(Oo)),{equals:p}=(Va(),ke(Bw)),w=new Map,A=Symbol.for("@multiformats/js-multiaddr/multiaddr"),y=class{constructor(g){if(g==null&&(g=""),Object.defineProperty(this,A,{value:!0}),g instanceof Uint8Array)this.bytes=r.fromBytes(g);else if(typeof g=="string"){if(g.length>0&&g.charAt(0)!=="/")throw new Error(`multiaddr "${g}" must start with a "/"`);this.bytes=r.fromString(g)}else if(y.isMultiaddr(g))this.bytes=r.fromBytes(g.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return r.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let g={},k=this.toString().split("/");return g.family=k[1]==="ip4"?4:6,g.host=k[2],g.transport=k[3],g.port=parseInt(k[4]),g}protos(){return this.protoCodes().map(g=>Object.assign({},n(g)))}protoCodes(){let g=[],k=this.bytes,B=0;for(;B<k.length;){let C=i.decode(k,B),V=i.decode.bytes,le=n(C);B+=r.sizeForAddr(le,k.slice(B+V))+V,g.push(C)}return g}protoNames(){return this.protos().map(g=>g.name)}tuples(){return r.bytesToTuples(this.bytes)}stringTuples(){let g=r.bytesToTuples(this.bytes);return r.tuplesToStringTuples(g)}encapsulate(g){return g=new y(g),new y(this.toString()+g.toString())}decapsulate(g){let k=g.toString(),B=this.toString(),C=B.lastIndexOf(k);if(C<0)throw new Error("Address "+this+" does not contain subaddress: "+g);return new y(B.slice(0,C))}decapsulateCode(g){let k=this.tuples();for(let B=k.length-1;B>=0;B--)if(k[B][0]===g)return new y(r.tuplesToBytes(k.slice(0,B)));return this}getPeerId(){try{let g=this.stringTuples().filter(k=>k[0]===n.names.ipfs.code).pop();if(g&&g[1]){let k=g[1];return k[0]==="Q"||k[0]==="1"?h(u.decode(`z${k}`),"base58btc"):h(o.parse(k).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let g=null;try{g=this.stringTuples().filter(k=>!!n(k[0]).path)[0][1],g||(g=null)}catch{g=null}return g}equals(g){return p(this.bytes,g.bytes)}async resolve(){let g=this.protos().find(B=>B.resolvable);if(!g)return[this];let k=w.get(g.name);if(!k)throw s(new Error(`no available resolver for ${g.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await k(this)).map(B=>new y(B))}nodeAddress(){let g=this.protoCodes(),k=this.protoNames(),B=this.toString().split("/").slice(1);if(B.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(g[0]!==4&&g[0]!==41&&g[0]!==54&&g[0]!==55)throw new Error(`no protocol with name: "'${k[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(B[2]!=="tcp"&&B[2]!=="udp")throw new Error(`no protocol with name: "'${k[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:g[0]===41||g[0]===55?6:4,address:B[1],port:parseInt(B[3])}}isThinWaistAddress(g){let k=(g||this).protos();return!(k.length!==2||k[0].code!==4&&k[0].code!==41||k[1].code!==6&&k[1].code!==273)}static fromNodeAddress(g,k){if(!g)throw new Error("requires node address object");if(!k)throw new Error("requires transport protocol");let B;switch(g.family){case 4:B="ip4";break;case 6:B="ip6";break;default:throw Error(`Invalid addr family. Got '${g.family}' instead of 4 or 6`)}return new y("/"+[B,g.address,k,g.port].join("/"))}static isName(g){return y.isMultiaddr(g)?g.protos().some(k=>k.resolvable):!1}static isMultiaddr(g){return g instanceof y||Boolean(g&&g[A])}[c](){return"<Multiaddr "+h(this.bytes,"base16")+" - "+r.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+h(this.bytes,"base16")+" - "+r.bytesToString(this.bytes)+">"}};y.protocols=n,y.resolvers=w;function m(g){return new y(g)}t.exports={Multiaddr:y,multiaddr:m,protocols:n,resolvers:w}}),Ww=E((e,t)=>{a(),t.exports=u,t.exports.format=s,t.exports.parse=c;var r=/\B(?=(\d{3})+(?!\d))/g,n=/(?:\.0*|(\.[^0]+)0+)$/,i={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},o=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function u(h,p){return typeof h=="string"?c(h):typeof h=="number"?s(h,p):null}function s(h,p){if(!Number.isFinite(h))return null;var w=Math.abs(h),A=p&&p.thousandsSeparator||"",y=p&&p.unitSeparator||"",m=p&&p.decimalPlaces!==void 0?p.decimalPlaces:2,g=Boolean(p&&p.fixedDecimals),k=p&&p.unit||"";(!k||!i[k.toLowerCase()])&&(w>=i.pb?k="PB":w>=i.tb?k="TB":w>=i.gb?k="GB":w>=i.mb?k="MB":w>=i.kb?k="KB":k="B");var B=h/i[k.toLowerCase()],C=B.toFixed(m);return g||(C=C.replace(n,"$1")),A&&(C=C.split(".").map(function(V,le){return le===0?V.replace(r,A):V}).join(".")),C+y+k}function c(h){if(typeof h=="number"&&!isNaN(h))return h;if(typeof h!="string")return null;var p=o.exec(h),w,A="b";return p?(w=parseFloat(p[1]),A=p[4].toLowerCase()):(w=parseInt(h,10),A="b"),isNaN(w)?null:Math.floor(i[A]*w)}}),Gw=E((e,t)=>{a(),t.exports=r=>{if(Object.prototype.toString.call(r)!=="[object Object]")return!1;let n=Object.getPrototypeOf(r);return n===null||n===Object.prototype}}),eb=E((e,t)=>{a();var r=Gw(),{hasOwnProperty:n}=Object.prototype,{propertyIsEnumerable:i}=Object,o=(g,k,B)=>Object.defineProperty(g,k,{value:B,writable:!0,enumerable:!0,configurable:!0}),u=e,s={concatArrays:!1,ignoreUndefined:!1},c=g=>{let k=[];for(let B in g)n.call(g,B)&&k.push(B);if(Object.getOwnPropertySymbols){let B=Object.getOwnPropertySymbols(g);for(let C of B)i.call(g,C)&&k.push(C)}return k};function h(g){return Array.isArray(g)?p(g):r(g)?w(g):g}function p(g){let k=g.slice(0,0);return c(g).forEach(B=>{o(k,B,h(g[B]))}),k}function w(g){let k=Object.getPrototypeOf(g)===null?Object.create(null):{};return c(g).forEach(B=>{o(k,B,h(g[B]))}),k}var A=(g,k,B,C)=>(B.forEach(V=>{typeof k[V]>"u"&&C.ignoreUndefined||(V in g&&g[V]!==Object.getPrototypeOf(g)?o(g,V,m(g[V],k[V],C)):o(g,V,h(k[V])))}),g),y=(g,k,B)=>{let C=g.slice(0,0),V=0;return[g,k].forEach(le=>{let _e=[];for(let R=0;R<le.length;R++)!n.call(le,R)||(_e.push(String(R)),le===g?o(C,V++,le[R]):o(C,V++,h(le[R])));C=A(C,le,c(le).filter(R=>!_e.includes(R)),B)}),C};function m(g,k,B){return B.concatArrays&&Array.isArray(g)&&Array.isArray(k)?y(g,k,B):!r(k)||!r(g)?h(k):A(g,k,c(k),B)}t.exports=function(...g){let k=m(h(s),this!==u&&this||{},s),B={_:{}};for(let C of g)if(C!==void 0){if(!r(C))throw new TypeError("`"+C+"` is not an Option Object");B=m(B,{_:C},k)}return B._}}),fb=E((e,t)=>{a();var r=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function o(h,p,w){this.fn=h,this.context=p,this.once=w||!1}function u(h,p,w,A,y){if(typeof w!="function")throw new TypeError("The listener must be a function");var m=new o(w,A||h,y),g=n?n+p:p;return h._events[g]?h._events[g].fn?h._events[g]=[h._events[g],m]:h._events[g].push(m):(h._events[g]=m,h._eventsCount++),h}function s(h,p){--h._eventsCount===0?h._events=new i:delete h._events[p]}function c(){this._events=new i,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],p,w;if(this._eventsCount===0)return h;for(w in p=this._events)r.call(p,w)&&h.push(n?w.slice(1):w);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},c.prototype.listeners=function(h){var p=n?n+h:h,w=this._events[p];if(!w)return[];if(w.fn)return[w.fn];for(var A=0,y=w.length,m=new Array(y);A<y;A++)m[A]=w[A].fn;return m},c.prototype.listenerCount=function(h){var p=n?n+h:h,w=this._events[p];return w?w.fn?1:w.length:0},c.prototype.emit=function(h,p,w,A,y,m){var g=n?n+h:h;if(!this._events[g])return!1;var k=this._events[g],B=arguments.length,C,V;if(k.fn){switch(k.once&&this.removeListener(h,k.fn,void 0,!0),B){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,p),!0;case 3:return k.fn.call(k.context,p,w),!0;case 4:return k.fn.call(k.context,p,w,A),!0;case 5:return k.fn.call(k.context,p,w,A,y),!0;case 6:return k.fn.call(k.context,p,w,A,y,m),!0}for(V=1,C=new Array(B-1);V<B;V++)C[V-1]=arguments[V];k.fn.apply(k.context,C)}else{var le=k.length,_e;for(V=0;V<le;V++)switch(k[V].once&&this.removeListener(h,k[V].fn,void 0,!0),B){case 1:k[V].fn.call(k[V].context);break;case 2:k[V].fn.call(k[V].context,p);break;case 3:k[V].fn.call(k[V].context,p,w);break;case 4:k[V].fn.call(k[V].context,p,w,A);break;default:if(!C)for(_e=1,C=new Array(B-1);_e<B;_e++)C[_e-1]=arguments[_e];k[V].fn.apply(k[V].context,C)}}return!0},c.prototype.on=function(h,p,w){return u(this,h,p,w,!1)},c.prototype.once=function(h,p,w){return u(this,h,p,w,!0)},c.prototype.removeListener=function(h,p,w,A){var y=n?n+h:h;if(!this._events[y])return this;if(!p)return s(this,y),this;var m=this._events[y];if(m.fn)m.fn===p&&(!A||m.once)&&(!w||m.context===w)&&s(this,y);else{for(var g=0,k=[],B=m.length;g<B;g++)(m[g].fn!==p||A&&!m[g].once||w&&m[g].context!==w)&&k.push(m[g]);k.length?this._events[y]=k.length===1?k[0]:k:s(this,y)}return this},c.prototype.removeAllListeners=function(h){var p;return h?(p=n?n+h:h,this._events[p]&&s(this,p)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,typeof t<"u"&&(t.exports=c)}),Fn=E((e,t)=>{a();var r=async function*(n,i){for await(let o of n)await i(o)&&(yield o)};t.exports=r}),$n=E((e,t)=>{a();var r=async n=>{for await(let i of n);};t.exports=r}),Ol=E((e,t)=>{a();var r=async n=>{for await(let i of n)return i};t.exports=r}),Vi=E((e,t)=>{a();var r=async function*(n,i){for await(let o of n)yield i(o)};t.exports=r}),Zb=E((e,t)=>{a();async function*r(n,i=1){let o=[];i<1&&(i=1);for await(let u of n)for(o.push(u);o.length>=i;)yield o.slice(0,i),o=o.slice(i);for(;o.length;)yield o.slice(0,i),o=o.slice(i)}t.exports=r}),t0=E((e,t)=>{a();var r=Zb();async function*n(i,o=1){for await(let u of r(i,o)){let s=u.map(c=>c().then(h=>({ok:!0,value:h}),h=>({ok:!1,err:h})));for(let c=0;c<s.length;c++){let h=await s[c];if(h.ok)yield h.value;else throw h.err}}}t.exports=n}),i0=E((e,t)=>{a(),t.exports=class{constructor(r){if(!(r>0)||(r-1&r)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(r),this.mask=r-1,this.top=0,this.btm=0,this.next=null}push(r){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=r,this.top=this.top+1&this.mask,!0)}shift(){let r=this.buffer[this.btm];if(r!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,r}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}}),a0=E((e,t)=>{a();var r=i0();t.exports=class{constructor(n){this.hwm=n||16,this.head=new r(this.hwm),this.tail=this.head}push(n){if(!this.head.push(n)){let i=this.head;this.head=i.next=new r(2*this.head.buffer.length),this.head.push(n)}}shift(){let n=this.tail.shift();if(n===void 0&&this.tail.next){let i=this.tail.next;return this.tail.next=null,this.tail=i,this.tail.shift()}return n}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}}),u0=E((e,t)=>{a();var r=a0();t.exports=n=>{n=n||{};let i;typeof n=="function"?(i=n,n={}):i=n.onEnd;let o=new r,u,s,c,h=()=>{if(!o.isEmpty()){if(n.writev){let C,V=[];for(;!o.isEmpty();){if(C=o.shift(),C.error)throw C.error;V.push(C.value)}return{done:C.done,value:V}}let B=o.shift();if(B.error)throw B.error;return B}return c?{done:!0}:new Promise((B,C)=>{s=V=>(s=null,V.error?C(V.error):n.writev&&!V.done?B({done:V.done,value:[V.value]}):B(V),u)})},p=B=>s?s(B):(o.push(B),u),w=B=>(o=new r,s?s({error:B}):(o.push({error:B}),u)),A=B=>c?u:p({done:!1,value:B}),y=B=>c?u:(c=!0,B?w(B):p({done:!0})),m=()=>(o=new r,y(),{done:!0}),g=B=>(y(B),{done:!0});if(u={[Symbol.asyncIterator](){return this},next:h,return:m,throw:g,push:A,end:y},!i)return u;let k=u;return u={[Symbol.asyncIterator](){return this},next(){return k.next()},throw(B){return k.throw(B),i&&(i(B),i=null),{done:!0}},return(){return k.return(),i&&(i(),i=null),{done:!0}},push:A,end(B){return k.end(B),i&&(i(B),i=null),u}},u}}),hc=E((e,t)=>{a();var r=u0(),n=async function*(...i){let o=r();setTimeout(async()=>{try{await Promise.all(i.map(async u=>{for await(let s of u)o.push(s)})),o.end()}catch(u){o.end(u)}},0),yield*o};t.exports=n}),as=E((e,t)=>{a();var r=async n=>{let i=[];for await(let o of n)i.push(o);return i};t.exports=r}),cs=E((e,t)=>{a();var r=async function*(n,i){let o=0;if(!(i<1)){for await(let u of n)if(yield u,o++,o===i)return}};t.exports=r}),k0=E((e,t)=>{a();var r=as(),n=async function*(i,o){yield*(await r(i)).sort(o)};t.exports=n}),B0=E(e=>{a(),e.supports=function(...t){let r=t.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})}}),kt=E((e,t)=>{a(),t.exports=class extends Error{constructor(r,n){super(r||""),typeof n=="object"&&n!==null&&(n.code&&(this.code=String(n.code)),n.expected&&(this.expected=!0),n.transient&&(this.transient=!0),n.cause&&(this.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}}),th=E((e,t)=>{a();var r=null;t.exports=function(){return r===null&&(r={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),r}}),ih=E(e=>{a();var t=kt(),r=new Set(["buffer","view","utf8"]),n=class{constructor(i){if(this.encode=i.encode||this.encode,this.decode=i.decode||this.decode,this.name=i.name||this.name,this.format=i.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!r.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");i.createViewTranscoder&&(this.createViewTranscoder=i.createViewTranscoder),i.createBufferTranscoder&&(this.createBufferTranscoder=i.createBufferTranscoder),i.createUTF8Transcoder&&(this.createUTF8Transcoder=i.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new t(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new t(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new t(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};e.Encoding=n}),ch=E(e=>{a();var{Buffer:t}=ho()||{},{Encoding:r}=ih(),n=th(),i=class extends r{constructor(s){super({...s,format:"buffer"})}createViewTranscoder(){return new o({encode:this.encode,decode:s=>this.decode(t.from(s.buffer,s.byteOffset,s.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},o=class extends r{constructor(s){super({...s,format:"view"})}createBufferTranscoder(){return new i({encode:s=>{let c=this.encode(s);return t.from(c.buffer,c.byteOffset,c.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},u=class extends r{constructor(s){super({...s,format:"utf8"})}createBufferTranscoder(){return new i({encode:s=>t.from(this.encode(s),"utf8"),decode:s=>this.decode(s.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:s,textDecoder:c}=n();return new o({encode:h=>s.encode(this.encode(h)),decode:h=>this.decode(c.decode(h)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};e.BufferFormat=i,e.ViewFormat=o,e.UTF8Format=u}),U0=E(e=>{a();var{Buffer:t}=ho()||{Buffer:{isBuffer:()=>!1}},{textEncoder:r,textDecoder:n}=th()(),{BufferFormat:i,ViewFormat:o,UTF8Format:u}=ch(),s=c=>c;e.utf8=new u({encode:function(c){return t.isBuffer(c)?c.toString("utf8"):ArrayBuffer.isView(c)?n.decode(c):String(c)},decode:s,name:"utf8",createViewTranscoder(){return new o({encode:function(c){return ArrayBuffer.isView(c)?c:r.encode(c)},decode:function(c){return n.decode(c)},name:`${this.name}+view`})},createBufferTranscoder(){return new i({encode:function(c){return t.isBuffer(c)?c:ArrayBuffer.isView(c)?t.from(c.buffer,c.byteOffset,c.byteLength):t.from(String(c),"utf8")},decode:function(c){return c.toString("utf8")},name:`${this.name}+buffer`})}}),e.json=new u({encode:JSON.stringify,decode:JSON.parse,name:"json"}),e.buffer=new i({encode:function(c){return t.isBuffer(c)?c:ArrayBuffer.isView(c)?t.from(c.buffer,c.byteOffset,c.byteLength):t.from(String(c),"utf8")},decode:s,name:"buffer",createViewTranscoder(){return new o({encode:function(c){return ArrayBuffer.isView(c)?c:t.from(String(c),"utf8")},decode:function(c){return t.from(c.buffer,c.byteOffset,c.byteLength)},name:`${this.name}+view`})}}),e.view=new o({encode:function(c){return ArrayBuffer.isView(c)?c:r.encode(c)},decode:s,name:"view",createBufferTranscoder(){return new i({encode:function(c){return t.isBuffer(c)?c:ArrayBuffer.isView(c)?t.from(c.buffer,c.byteOffset,c.byteLength):t.from(String(c),"utf8")},decode:s,name:`${this.name}+buffer`})}}),e.hex=new i({encode:function(c){return t.isBuffer(c)?c:t.from(String(c),"hex")},decode:function(c){return c.toString("hex")},name:"hex"}),e.base64=new i({encode:function(c){return t.isBuffer(c)?c:t.from(String(c),"base64")},decode:function(c){return c.toString("base64")},name:"base64"})}),z0=E(e=>{a();var t=kt(),r=U0(),{Encoding:n}=ih(),{BufferFormat:i,ViewFormat:o,UTF8Format:u}=ch(),s=Symbol("formats"),c=Symbol("encodings"),h=new Set(["buffer","view","utf8"]),p=class{constructor(k){if(Array.isArray(k)){if(!k.every(B=>h.has(B)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[c]=new Map,this[s]=new Set(k);for(let B in r)try{this.encoding(B)}catch(C){if(C.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw C}}encodings(){return Array.from(new Set(this[c].values()))}encoding(k){let B=this[c].get(k);if(B===void 0){if(typeof k=="string"&&k!==""){if(B=m[k],!B)throw new t(`Encoding '${k}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof k!="object"||k===null)throw new TypeError("First argument 'encoding' must be a string or object");B=w(k)}let{name:C,format:V}=B;if(!this[s].has(V))if(this[s].has("view"))B=B.createViewTranscoder();else if(this[s].has("buffer"))B=B.createBufferTranscoder();else if(this[s].has("utf8"))B=B.createUTF8Transcoder();else throw new t(`Encoding '${C}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let le of[k,C,B.name,B.commonName])this[c].set(le,B)}return B}};e.Transcoder=p;function w(k){if(k instanceof n)return k;let B="type"in k&&typeof k.type=="string"?k.type:void 0,C=k.name||B||`anonymous-${g++}`;switch(A(k)){case"view":return new o({...k,name:C});case"utf8":return new u({...k,name:C});case"buffer":return new i({...k,name:C});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function A(k){return"format"in k&&k.format!==void 0?k.format:"buffer"in k&&typeof k.buffer=="boolean"?k.buffer?"buffer":"utf8":"code"in k&&Number.isInteger(k.code)?"view":"buffer"}var y={binary:r.buffer,"utf-8":r.utf8},m={...r,...y},g=0}),Z0=E((e,t)=>{a();var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(R,re,P){return Function.prototype.apply.call(R,re,P)},i;r&&typeof r.ownKeys=="function"?i=r.ownKeys:Object.getOwnPropertySymbols?i=function(R){return Object.getOwnPropertyNames(R).concat(Object.getOwnPropertySymbols(R))}:i=function(R){return Object.getOwnPropertyNames(R)};function o(R){console&&console.warn&&console.warn(R)}var u=Number.isNaN||function(R){return R!==R};function s(){s.init.call(this)}t.exports=s,t.exports.once=V,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function h(R){if(typeof R!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof R)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(R){if(typeof R!="number"||R<0||u(R))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+R+".");c=R}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(R){if(typeof R!="number"||R<0||u(R))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+R+".");return this._maxListeners=R,this};function p(R){return R._maxListeners===void 0?s.defaultMaxListeners:R._maxListeners}s.prototype.getMaxListeners=function(){return p(this)},s.prototype.emit=function(R){for(var re=[],P=1;P<arguments.length;P++)re.push(arguments[P]);var ie=R==="error",Se=this._events;if(Se!==void 0)ie=ie&&Se.error===void 0;else if(!ie)return!1;if(ie){var Ne;if(re.length>0&&(Ne=re[0]),Ne instanceof Error)throw Ne;var De=new Error("Unhandled error."+(Ne?" ("+Ne.message+")":""));throw De.context=Ne,De}var Ke=Se[R];if(Ke===void 0)return!1;if(typeof Ke=="function")n(Ke,this,re);else for(var pt=Ke.length,gt=k(Ke,pt),P=0;P<pt;++P)n(gt[P],this,re);return!0};function w(R,re,P,ie){var Se,Ne,De;if(h(P),Ne=R._events,Ne===void 0?(Ne=R._events=Object.create(null),R._eventsCount=0):(Ne.newListener!==void 0&&(R.emit("newListener",re,P.listener?P.listener:P),Ne=R._events),De=Ne[re]),De===void 0)De=Ne[re]=P,++R._eventsCount;else if(typeof De=="function"?De=Ne[re]=ie?[P,De]:[De,P]:ie?De.unshift(P):De.push(P),Se=p(R),Se>0&&De.length>Se&&!De.warned){De.warned=!0;var Ke=new Error("Possible EventEmitter memory leak detected. "+De.length+" "+String(re)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ke.name="MaxListenersExceededWarning",Ke.emitter=R,Ke.type=re,Ke.count=De.length,o(Ke)}return R}s.prototype.addListener=function(R,re){return w(this,R,re,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(R,re){return w(this,R,re,!0)};function A(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(R,re,P){var ie={fired:!1,wrapFn:void 0,target:R,type:re,listener:P},Se=A.bind(ie);return Se.listener=P,ie.wrapFn=Se,Se}s.prototype.once=function(R,re){return h(re),this.on(R,y(this,R,re)),this},s.prototype.prependOnceListener=function(R,re){return h(re),this.prependListener(R,y(this,R,re)),this},s.prototype.removeListener=function(R,re){var P,ie,Se,Ne,De;if(h(re),ie=this._events,ie===void 0)return this;if(P=ie[R],P===void 0)return this;if(P===re||P.listener===re)--this._eventsCount===0?this._events=Object.create(null):(delete ie[R],ie.removeListener&&this.emit("removeListener",R,P.listener||re));else if(typeof P!="function"){for(Se=-1,Ne=P.length-1;Ne>=0;Ne--)if(P[Ne]===re||P[Ne].listener===re){De=P[Ne].listener,Se=Ne;break}if(Se<0)return this;Se===0?P.shift():B(P,Se),P.length===1&&(ie[R]=P[0]),ie.removeListener!==void 0&&this.emit("removeListener",R,De||re)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(R){var re,P,ie;if(P=this._events,P===void 0)return this;if(P.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):P[R]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete P[R]),this;if(arguments.length===0){var Se=Object.keys(P),Ne;for(ie=0;ie<Se.length;++ie)Ne=Se[ie],Ne!=="removeListener"&&this.removeAllListeners(Ne);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(re=P[R],typeof re=="function")this.removeListener(R,re);else if(re!==void 0)for(ie=re.length-1;ie>=0;ie--)this.removeListener(R,re[ie]);return this};function m(R,re,P){var ie=R._events;if(ie===void 0)return[];var Se=ie[re];return Se===void 0?[]:typeof Se=="function"?P?[Se.listener||Se]:[Se]:P?C(Se):k(Se,Se.length)}s.prototype.listeners=function(R){return m(this,R,!0)},s.prototype.rawListeners=function(R){return m(this,R,!1)},s.listenerCount=function(R,re){return typeof R.listenerCount=="function"?R.listenerCount(re):g.call(R,re)},s.prototype.listenerCount=g;function g(R){var re=this._events;if(re!==void 0){var P=re[R];if(typeof P=="function")return 1;if(P!==void 0)return P.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function k(R,re){for(var P=new Array(re),ie=0;ie<re;++ie)P[ie]=R[ie];return P}function B(R,re){for(;re+1<R.length;re++)R[re]=R[re+1];R.pop()}function C(R){for(var re=new Array(R.length),P=0;P<re.length;++P)re[P]=R[P].listener||R[P];return re}function V(R,re){return new Promise(function(P,ie){function Se(De){R.removeListener(re,Ne),ie(De)}function Ne(){typeof R.removeListener=="function"&&R.removeListener("error",Se),P([].slice.call(arguments))}_e(R,re,Ne,{once:!0}),re!=="error"&&le(R,Se,{once:!0})})}function le(R,re,P){typeof R.on=="function"&&_e(R,"error",re,P)}function _e(R,re,P,ie){if(typeof R.on=="function")ie.once?R.once(re,P):R.on(re,P);else if(typeof R.addEventListener=="function")R.addEventListener(re,function Se(Ne){ie.once&&R.removeEventListener(re,Se),P(Ne)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof R)}}),tE=E((e,t)=>{a(),t.exports=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r)}),ds=E(e=>{a();var t=tE();e.fromCallback=function(r,n){if(r===void 0){var i=new Promise(function(o,u){r=function(s,c){s?u(s):o(c)}});r[n!==void 0?n:"promise"]=i}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r},e.fromPromise=function(r,n){if(n===void 0)return r;r.then(function(i){t(()=>n(null,i))}).catch(function(i){t(()=>n(i))})}}),Sc=E(e=>{a(),e.getCallback=function(t,r){return typeof t=="function"?t:r},e.getOptions=function(t,r){return typeof t=="object"&&t!==null?t:r!==void 0?r:{}}}),on=E(e=>{a();var{fromCallback:t}=ds(),r=kt(),{getOptions:n,getCallback:i}=Sc(),o=Symbol("promise"),u=Symbol("callback"),s=Symbol("working"),c=Symbol("handleOne"),h=Symbol("handleMany"),p=Symbol("autoClose"),w=Symbol("finishWork"),A=Symbol("returnMany"),y=Symbol("closing"),m=Symbol("handleClose"),g=Symbol("closed"),k=Symbol("closeCallbacks"),B=Symbol("keyEncoding"),C=Symbol("valueEncoding"),V=Symbol("abortOnClose"),le=Symbol("legacy"),_e=Symbol("keys"),R=Symbol("values"),re=Symbol("limit"),P=Symbol("count"),ie=Object.freeze({}),Se=()=>{},Ne=!1,De=class{constructor(Te,$,ce){if(typeof Te!="object"||Te===null){let ae=Te===null?"null":typeof Te;throw new TypeError(`The first argument must be an abstract-level database, received ${ae}`)}if(typeof $!="object"||$===null)throw new TypeError("The second argument must be an options object");this[g]=!1,this[k]=[],this[s]=!1,this[y]=!1,this[p]=!1,this[u]=null,this[c]=this[c].bind(this),this[h]=this[h].bind(this),this[m]=this[m].bind(this),this[B]=$[B],this[C]=$[C],this[le]=ce,this[re]=Number.isInteger($.limit)&&$.limit>=0?$.limit:1/0,this[P]=0,this[V]=!!$.abortOnClose,this.db=Te,this.db.attachResource(this),this.nextTick=Te.nextTick}get count(){return this[P]}get limit(){return this[re]}next(Te){let $;if(Te===void 0)$=new Promise((ce,ae)=>{Te=(Ie,Pe,Me)=>{Ie?ae(Ie):this[le]?Pe===void 0&&Me===void 0?ce():ce([Pe,Me]):ce(Pe)}});else if(typeof Te!="function")throw new TypeError("Callback must be a function");return this[y]?this.nextTick(Te,new r("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[s]?this.nextTick(Te,new r("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[s]=!0,this[u]=Te,this[P]>=this[re]?this.nextTick(this[c],null):this._next(this[c])),$}_next(Te){this.nextTick(Te)}nextv(Te,$,ce){return ce=i($,ce),ce=t(ce,o),$=n($,ie),Number.isInteger(Te)?(this[y]?this.nextTick(ce,new r("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[s]?this.nextTick(ce,new r("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(Te<1&&(Te=1),this[re]<1/0&&(Te=Math.min(Te,this[re]-this[P])),this[s]=!0,this[u]=ce,Te<=0?this.nextTick(this[h],null,[]):this._nextv(Te,$,this[h])),ce[o]):(this.nextTick(ce,new TypeError("The first argument 'size' must be an integer")),ce[o])}_nextv(Te,$,ce){let ae=[],Ie=(Pe,Me,Je)=>{if(Pe)return ce(Pe);if(this[le]?Me===void 0&&Je===void 0:Me===void 0)return ce(null,ae);ae.push(this[le]?[Me,Je]:Me),ae.length===Te?ce(null,ae):this._next(Ie)};this._next(Ie)}all(Te,$){return $=i(Te,$),$=t($,o),Te=n(Te,ie),this[y]?this.nextTick($,new r("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[s]?this.nextTick($,new r("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[s]=!0,this[u]=$,this[p]=!0,this[P]>=this[re]?this.nextTick(this[h],null,[]):this._all(Te,this[h])),$[o]}_all(Te,$){let ce=this[P],ae=[],Ie=()=>{let Me=this[re]<1/0?Math.min(1e3,this[re]-ce):1e3;Me<=0?this.nextTick($,null,ae):this._nextv(Me,ie,Pe)},Pe=(Me,Je)=>{Me?$(Me):Je.length===0?$(null,ae):(ae.push.apply(ae,Je),ce+=Je.length,Ie())};Ie()}[w](){let Te=this[u];return this[V]&&Te===null?Se:(this[s]=!1,this[u]=null,this[y]&&this._close(this[m]),Te)}[A](Te,$,ce){this[p]?this.close(Te.bind(null,$,ce)):Te($,ce)}seek(Te,$){if($=n($,ie),!this[y]){if(this[s])throw new r("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let ce=this.db.keyEncoding($.keyEncoding||this[B]),ae=ce.format;$.keyEncoding!==ae&&($={...$,keyEncoding:ae});let Ie=this.db.prefixKey(ce.encode(Te),ae);this._seek(Ie,$)}}}_seek(Te,$){throw new r("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(Te){return Te=t(Te,o),this[g]?this.nextTick(Te):this[y]?this[k].push(Te):(this[y]=!0,this[k].push(Te),this[s]?this[V]&&this[w]()(new r("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[m])),Te[o]}_close(Te){this.nextTick(Te)}[m](){this[g]=!0,this.db.detachResource(this);let Te=this[k];this[k]=[];for(let $ of Te)$()}async*[Symbol.asyncIterator](){try{let Te;for(;(Te=await this.next())!==void 0;)yield Te}finally{this[g]||await this.close()}}},Ke=class extends De{constructor(Te,$){super(Te,$,!0),this[_e]=$.keys!==!1,this[R]=$.values!==!1}[c](Te,$,ce){let ae=this[w]();if(Te)return ae(Te);try{$=this[_e]&&$!==void 0?this[B].decode($):void 0,ce=this[R]&&ce!==void 0?this[C].decode(ce):void 0}catch(Ie){return ae(new lt("entry",Ie))}$===void 0&&ce===void 0||this[P]++,ae(null,$,ce)}[h](Te,$){let ce=this[w]();if(Te)return this[A](ce,Te);try{for(let ae of $){let Ie=ae[0],Pe=ae[1];ae[0]=this[_e]&&Ie!==void 0?this[B].decode(Ie):void 0,ae[1]=this[R]&&Pe!==void 0?this[C].decode(Pe):void 0}}catch(ae){return this[A](ce,new lt("entries",ae))}this[P]+=$.length,this[A](ce,null,$)}end(Te){return!Ne&&typeof console<"u"&&(Ne=!0,console.warn(new r("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(Te)}},pt=class extends De{constructor(Te,$){super(Te,$,!1)}[c](Te,$){let ce=this[w]();if(Te)return ce(Te);try{$=$!==void 0?this[B].decode($):void 0}catch(ae){return ce(new lt("key",ae))}$!==void 0&&this[P]++,ce(null,$)}[h](Te,$){let ce=this[w]();if(Te)return this[A](ce,Te);try{for(let ae=0;ae<$.length;ae++){let Ie=$[ae];$[ae]=Ie!==void 0?this[B].decode(Ie):void 0}}catch(ae){return this[A](ce,new lt("keys",ae))}this[P]+=$.length,this[A](ce,null,$)}},gt=class extends De{constructor(Te,$){super(Te,$,!1)}[c](Te,$){let ce=this[w]();if(Te)return ce(Te);try{$=$!==void 0?this[C].decode($):void 0}catch(ae){return ce(new lt("value",ae))}$!==void 0&&this[P]++,ce(null,$)}[h](Te,$){let ce=this[w]();if(Te)return this[A](ce,Te);try{for(let ae=0;ae<$.length;ae++){let Ie=$[ae];$[ae]=Ie!==void 0?this[C].decode(Ie):void 0}}catch(ae){return this[A](ce,new lt("values",ae))}this[P]+=$.length,this[A](ce,null,$)}},lt=class extends r{constructor(Te,$){super(`Iterator could not decode ${Te}`,{code:"LEVEL_DECODE_ERROR",cause:$})}};for(let Te of["_ended property","_nexting property","_end method"])Object.defineProperty(Ke.prototype,Te.split(" ")[0],{get(){throw new r(`The ${Te} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new r(`The ${Te} has been removed`,{code:"LEVEL_LEGACY"})}});Ke.keyEncoding=B,Ke.valueEncoding=C,e.AbstractIterator=Ke,e.AbstractKeyIterator=pt,e.AbstractValueIterator=gt}),oE=E(e=>{a();var{AbstractKeyIterator:t,AbstractValueIterator:r}=on(),n=Symbol("iterator"),i=Symbol("callback"),o=Symbol("handleOne"),u=Symbol("handleMany"),s=class extends t{constructor(h,p){super(h,p),this[n]=h.iterator({...p,keys:!0,values:!1}),this[o]=this[o].bind(this),this[u]=this[u].bind(this)}},c=class extends r{constructor(h,p){super(h,p),this[n]=h.iterator({...p,keys:!1,values:!0}),this[o]=this[o].bind(this),this[u]=this[u].bind(this)}};for(let h of[s,c]){let p=h===s,w=p?A=>A[0]:A=>A[1];h.prototype._next=function(A){this[i]=A,this[n].next(this[o])},h.prototype[o]=function(A,y,m){let g=this[i];A?g(A):g(null,p?y:m)},h.prototype._nextv=function(A,y,m){this[i]=m,this[n].nextv(A,y,this[u])},h.prototype._all=function(A,y){this[i]=y,this[n].all(A,this[u])},h.prototype[u]=function(A,y){let m=this[i];A?m(A):m(null,y.map(w))},h.prototype._seek=function(A,y){this[n].seek(A,y)},h.prototype._close=function(A){this[n].close(A)}}e.DefaultKeyIterator=s,e.DefaultValueIterator=c}),sE=E(e=>{a();var{AbstractIterator:t,AbstractKeyIterator:r,AbstractValueIterator:n}=on(),i=kt(),o=Symbol("nut"),u=Symbol("undefer"),s=Symbol("factory"),c=class extends t{constructor(w,A){super(w,A),this[o]=null,this[s]=()=>w.iterator(A),this.db.defer(()=>this[u]())}},h=class extends r{constructor(w,A){super(w,A),this[o]=null,this[s]=()=>w.keys(A),this.db.defer(()=>this[u]())}},p=class extends n{constructor(w,A){super(w,A),this[o]=null,this[s]=()=>w.values(A),this.db.defer(()=>this[u]())}};for(let w of[c,h,p])w.prototype[u]=function(){this.db.status==="open"&&(this[o]=this[s]())},w.prototype._next=function(A){this[o]!==null?this[o].next(A):this.db.status==="opening"?this.db.defer(()=>this._next(A)):this.nextTick(A,new i("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},w.prototype._nextv=function(A,y,m){this[o]!==null?this[o].nextv(A,y,m):this.db.status==="opening"?this.db.defer(()=>this._nextv(A,y,m)):this.nextTick(m,new i("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},w.prototype._all=function(A,y){this[o]!==null?this[o].all(y):this.db.status==="opening"?this.db.defer(()=>this._all(A,y)):this.nextTick(y,new i("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},w.prototype._seek=function(A,y){this[o]!==null?this[o]._seek(A,y):this.db.status==="opening"&&this.db.defer(()=>this._seek(A,y))},w.prototype._close=function(A){this[o]!==null?this[o].close(A):this.db.status==="opening"?this.db.defer(()=>this._close(A)):this.nextTick(A)};e.DeferredIterator=c,e.DeferredKeyIterator=h,e.DeferredValueIterator=p}),Dh=E(e=>{a();var{fromCallback:t}=ds(),r=kt(),{getCallback:n,getOptions:i}=Sc(),o=Symbol("promise"),u=Symbol("status"),s=Symbol("operations"),c=Symbol("finishClose"),h=Symbol("closeCallbacks"),p=class{constructor(w){if(typeof w!="object"||w===null){let A=w===null?"null":typeof w;throw new TypeError(`The first argument must be an abstract-level database, received ${A}`)}this[s]=[],this[h]=[],this[u]="open",this[c]=this[c].bind(this),this.db=w,this.db.attachResource(this),this.nextTick=w.nextTick}get length(){return this[s].length}put(w,A,y){if(this[u]!=="open")throw new r("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let m=this.db._checkKey(w)||this.db._checkValue(A);if(m)throw m;let g=y&&y.sublevel!=null?y.sublevel:this.db,k=y,B=g.keyEncoding(y&&y.keyEncoding),C=g.valueEncoding(y&&y.valueEncoding),V=B.format;y={...y,keyEncoding:V,valueEncoding:C.format},g!==this.db&&(y.sublevel=null);let le=g.prefixKey(B.encode(w),V),_e=C.encode(A);return this._put(le,_e,y),this[s].push({...k,type:"put",key:w,value:A}),this}_put(w,A,y){}del(w,A){if(this[u]!=="open")throw new r("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let y=this.db._checkKey(w);if(y)throw y;let m=A&&A.sublevel!=null?A.sublevel:this.db,g=A,k=m.keyEncoding(A&&A.keyEncoding),B=k.format;return A={...A,keyEncoding:B},m!==this.db&&(A.sublevel=null),this._del(m.prefixKey(k.encode(w),B),A),this[s].push({...g,type:"del",key:w}),this}_del(w,A){}clear(){if(this[u]!=="open")throw new r("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[s]=[],this}_clear(){}write(w,A){return A=n(w,A),A=t(A,o),w=i(w),this[u]!=="open"?this.nextTick(A,new r("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(A):(this[u]="writing",this._write(w,y=>{this[u]="closing",this[h].push(()=>A(y)),y||this.db.emit("batch",this[s]),this._close(this[c])})),A[o]}_write(w,A){}close(w){return w=t(w,o),this[u]==="closing"?this[h].push(w):this[u]==="closed"?this.nextTick(w):(this[h].push(w),this[u]!=="writing"&&(this[u]="closing",this._close(this[c]))),w[o]}_close(w){this.nextTick(w)}[c](){this[u]="closed",this.db.detachResource(this);let w=this[h];this[h]=[];for(let A of w)A()}};e.AbstractChainedBatch=p}),fE=E(e=>{a();var{AbstractChainedBatch:t}=Dh(),r=kt(),n=Symbol("encoded"),i=class extends t{constructor(o){super(o),this[n]=[]}_put(o,u,s){this[n].push({...s,type:"put",key:o,value:u})}_del(o,u){this[n].push({...u,type:"del",key:o})}_clear(){this[n]=[]}_write(o,u){this.db.status==="opening"?this.db.defer(()=>this._write(o,u)):this.db.status==="open"?this[n].length===0?this.nextTick(u):this.db._batch(this[n],o,u):this.nextTick(u,new r("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};e.DefaultChainedBatch=i}),dE=E((e,t)=>{a();var r=kt(),n=Object.prototype.hasOwnProperty,i=new Set(["lt","lte","gt","gte"]);t.exports=function(o,u){let s={};for(let c in o)if(!!n.call(o,c)&&!(c==="keyEncoding"||c==="valueEncoding")){if(c==="start"||c==="end")throw new r(`The legacy range option '${c}' has been removed`,{code:"LEVEL_LEGACY"});if(c==="encoding")throw new r("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});i.has(c)?s[c]=u.encode(o[c]):s[c]=o[c]}return s.reverse=!!s.reverse,s.limit=Number.isInteger(s.limit)&&s.limit>=0?s.limit:-1,s}}),Th=E((e,t)=>{a();var r;t.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):n=>(r||(r=Promise.resolve())).then(n).catch(i=>setTimeout(()=>{throw i},0))}),wE=E((e,t)=>{a();var r=Th();t.exports=function(n,...i){i.length===0?r(n):r(()=>n(...i))}}),bE=E(e=>{a();var{AbstractIterator:t,AbstractKeyIterator:r,AbstractValueIterator:n}=on(),i=Symbol("unfix"),o=Symbol("iterator"),u=Symbol("handleOne"),s=Symbol("handleMany"),c=Symbol("callback"),h=class extends t{constructor(A,y,m,g){super(A,y),this[o]=m,this[i]=g,this[u]=this[u].bind(this),this[s]=this[s].bind(this),this[c]=null}[u](A,y,m){let g=this[c];if(A)return g(A);y!==void 0&&(y=this[i](y)),g(A,y,m)}[s](A,y){let m=this[c];if(A)return m(A);for(let g of y){let k=g[0];k!==void 0&&(g[0]=this[i](k))}m(A,y)}},p=class extends r{constructor(A,y,m,g){super(A,y),this[o]=m,this[i]=g,this[u]=this[u].bind(this),this[s]=this[s].bind(this),this[c]=null}[u](A,y){let m=this[c];if(A)return m(A);y!==void 0&&(y=this[i](y)),m(A,y)}[s](A,y){let m=this[c];if(A)return m(A);for(let g=0;g<y.length;g++){let k=y[g];k!==void 0&&(y[g]=this[i](k))}m(A,y)}},w=class extends n{constructor(A,y,m){super(A,y),this[o]=m}};for(let A of[h,p])A.prototype._next=function(y){this[c]=y,this[o].next(this[u])},A.prototype._nextv=function(y,m,g){this[c]=g,this[o].nextv(y,m,this[s])},A.prototype._all=function(y,m){this[c]=m,this[o].all(y,this[s])};for(let A of[w])A.prototype._next=function(y){this[o].next(y)},A.prototype._nextv=function(y,m,g){this[o].nextv(y,m,g)},A.prototype._all=function(y,m){this[o].all(y,m)};for(let A of[h,p,w])A.prototype._seek=function(y,m){this[o].seek(y,m)},A.prototype._close=function(y){this[o].close(y)};e.AbstractSublevelIterator=h,e.AbstractSublevelKeyIterator=p,e.AbstractSublevelValueIterator=w}),_E=E((e,t)=>{a();var r=kt(),{Buffer:n}=ho()||{},{AbstractSublevelIterator:i,AbstractSublevelKeyIterator:o,AbstractSublevelValueIterator:u}=bE(),s=Symbol("prefix"),c=Symbol("upperBound"),h=Symbol("prefixRange"),p=Symbol("parent"),w=Symbol("unfix"),A=new TextEncoder,y={separator:"!"};t.exports=function({AbstractLevel:V}){class le extends V{static defaults(R){if(typeof R=="string")throw new r("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(R&&R.open)throw new r("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return R==null?y:R.separator?R:{...R,separator:"!"}}constructor(R,re,P){let{separator:ie,manifest:Se,...Ne}=le.defaults(P);re=C(re,ie);let De=ie.charCodeAt(0)+1,Ke=R[p]||R;if(!A.encode(re).every(lt=>lt>De&&lt<127))throw new r(`Prefix must use bytes > ${De} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(m(Ke,Se),Ne);let pt=(R.prefix||"")+ie+re+ie,gt=pt.slice(0,-1)+String.fromCharCode(De);this[p]=Ke,this[s]=new k(pt),this[c]=new k(gt),this[w]=new B,this.nextTick=Ke.nextTick}prefixKey(R,re){if(re==="utf8")return this[s].utf8+R;if(R.byteLength===0)return this[s][re];if(re==="view"){let P=this[s].view,ie=new Uint8Array(P.byteLength+R.byteLength);return ie.set(P,0),ie.set(R,P.byteLength),ie}else{let P=this[s].buffer;return n.concat([P,R],P.byteLength+R.byteLength)}}[h](R,re){R.gte!==void 0?R.gte=this.prefixKey(R.gte,re):R.gt!==void 0?R.gt=this.prefixKey(R.gt,re):R.gte=this[s][re],R.lte!==void 0?R.lte=this.prefixKey(R.lte,re):R.lt!==void 0?R.lt=this.prefixKey(R.lt,re):R.lte=this[c][re]}get prefix(){return this[s].utf8}get db(){return this[p]}_open(R,re){this[p].open({passive:!0},re)}_put(R,re,P,ie){this[p].put(R,re,P,ie)}_get(R,re,P){this[p].get(R,re,P)}_getMany(R,re,P){this[p].getMany(R,re,P)}_del(R,re,P){this[p].del(R,re,P)}_batch(R,re,P){this[p].batch(R,re,P)}_clear(R,re){this[h](R,R.keyEncoding),this[p].clear(R,re)}_iterator(R){this[h](R,R.keyEncoding);let re=this[p].iterator(R),P=this[w].get(this[s].utf8.length,R.keyEncoding);return new i(this,R,re,P)}_keys(R){this[h](R,R.keyEncoding);let re=this[p].keys(R),P=this[w].get(this[s].utf8.length,R.keyEncoding);return new o(this,R,re,P)}_values(R){this[h](R,R.keyEncoding);let re=this[p].values(R);return new u(this,R,re)}}return{AbstractSublevel:le}};var m=function(V,le){return{...V.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...le,encodings:{utf8:g(V,"utf8"),buffer:g(V,"buffer"),view:g(V,"view")}}},g=function(V,le){return V.supports.encodings[le]?V.keyEncoding(le).name===le:!1},k=class{constructor(V){this.utf8=V,this.view=A.encode(V),this.buffer=n?n.from(this.view.buffer,0,this.view.byteLength):{}}},B=class{constructor(){this.cache=new Map}get(V,le){let _e=this.cache.get(le);return _e===void 0&&(le==="view"?_e=function(R,re){return re.subarray(R)}.bind(null,V):_e=function(R,re){return re.slice(R)}.bind(null,V),this.cache.set(le,_e)),_e}},C=function(V,le){let _e=0,R=V.length;for(;_e<R&&V[_e]===le;)_e++;for(;R>_e&&V[R-1]===le;)R--;return V.slice(_e,R)}}),Fh=E(e=>{a();var{supports:t}=B0(),{Transcoder:r}=z0(),{EventEmitter:n}=Z0(),{fromCallback:i}=ds(),o=kt(),{AbstractIterator:u}=on(),{DefaultKeyIterator:s,DefaultValueIterator:c}=oE(),{DeferredIterator:h,DeferredKeyIterator:p,DeferredValueIterator:w}=sE(),{DefaultChainedBatch:A}=fE(),{getCallback:y,getOptions:m}=Sc(),g=dE(),k=Symbol("promise"),B=Symbol("landed"),C=Symbol("resources"),V=Symbol("closeResources"),le=Symbol("operations"),_e=Symbol("undefer"),R=Symbol("deferOpen"),re=Symbol("options"),P=Symbol("status"),ie=Symbol("defaultOptions"),Se=Symbol("transcoder"),Ne=Symbol("keyEncoding"),De=Symbol("valueEncoding"),Ke=()=>{},pt=class extends n{constructor($,ce){if(super(),typeof $!="object"||$===null)throw new TypeError("The first argument 'manifest' must be an object");ce=m(ce);let{keyEncoding:ae,valueEncoding:Ie,passive:Pe,...Me}=ce;this[C]=new Set,this[le]=[],this[R]=!0,this[re]=Me,this[P]="opening",this.supports=t($,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:$.snapshots!==!1,permanence:$.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:$.encodings||{},events:Object.assign({},$.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Se]=new r(Te(this)),this[Ne]=this[Se].encoding(ae||"utf8"),this[De]=this[Se].encoding(Ie||"utf8");for(let Je of this[Se].encodings())this.supports.encodings[Je.commonName]||(this.supports.encodings[Je.commonName]=!0);this[ie]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[Ne].commonName,valueEncoding:this[De].commonName}),key:Object.freeze({keyEncoding:this[Ne].commonName})},this.nextTick(()=>{this[R]&&this.open({passive:!1},Ke)})}get status(){return this[P]}keyEncoding($){return this[Se].encoding($!=null?$:this[Ne])}valueEncoding($){return this[Se].encoding($!=null?$:this[De])}open($,ce){ce=y($,ce),ce=i(ce,k),$={...this[re],...m($)},$.createIfMissing=$.createIfMissing!==!1,$.errorIfExists=!!$.errorIfExists;let ae=Ie=>{this[P]==="closing"||this[P]==="opening"?this.once(B,Ie?()=>ae(Ie):ae):this[P]!=="open"?ce(new o("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:Ie})):ce()};return $.passive?this[P]==="opening"?this.once(B,ae):this.nextTick(ae):this[P]==="closed"||this[R]?(this[R]=!1,this[P]="opening",this.emit("opening"),this._open($,Ie=>{if(Ie){this[P]="closed",this[V](()=>{this.emit(B),ae(Ie)}),this[_e]();return}this[P]="open",this[_e](),this.emit(B),this[P]==="open"&&this.emit("open"),this[P]==="open"&&this.emit("ready"),ae()})):this[P]==="open"?this.nextTick(ae):this.once(B,()=>this.open($,ce)),ce[k]}_open($,ce){this.nextTick(ce)}close($){$=i($,k);let ce=ae=>{this[P]==="opening"||this[P]==="closing"?this.once(B,ae?ce(ae):ce):this[P]!=="closed"?$(new o("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:ae})):$()};if(this[P]==="open"){this[P]="closing",this.emit("closing");let ae=Ie=>{this[P]="open",this[_e](),this.emit(B),ce(Ie)};this[V](()=>{this._close(Ie=>{if(Ie)return ae(Ie);this[P]="closed",this[_e](),this.emit(B),this[P]==="closed"&&this.emit("closed"),ce()})})}else this[P]==="closed"?this.nextTick(ce):this.once(B,()=>this.close($));return $[k]}[V]($){if(this[C].size===0)return this.nextTick($);let ce=this[C].size,ae=!0,Ie=()=>{--ce===0&&(ae?this.nextTick($):$())};for(let Pe of this[C])Pe.close(Ie);ae=!1,this[C].clear()}_close($){this.nextTick($)}get($,ce,ae){if(ae=y(ce,ae),ae=i(ae,k),ce=m(ce,this[ie].entry),this[P]==="opening")return this.defer(()=>this.get($,ce,ae)),ae[k];if(lt(this,ae))return ae[k];let Ie=this._checkKey($);if(Ie)return this.nextTick(ae,Ie),ae[k];let Pe=this.keyEncoding(ce.keyEncoding),Me=this.valueEncoding(ce.valueEncoding),Je=Pe.format,et=Me.format;return(ce.keyEncoding!==Je||ce.valueEncoding!==et)&&(ce=Object.assign({},ce,{keyEncoding:Je,valueEncoding:et})),this._get(this.prefixKey(Pe.encode($),Je),ce,(Ue,tt)=>{if(Ue)return(Ue.code==="LEVEL_NOT_FOUND"||Ue.notFound||/NotFound/i.test(Ue))&&(Ue.code||(Ue.code="LEVEL_NOT_FOUND"),Ue.notFound||(Ue.notFound=!0),Ue.status||(Ue.status=404)),ae(Ue);try{tt=Me.decode(tt)}catch(Ye){return ae(new o("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:Ye}))}ae(null,tt)}),ae[k]}_get($,ce,ae){this.nextTick(ae,new Error("NotFound"))}getMany($,ce,ae){if(ae=y(ce,ae),ae=i(ae,k),ce=m(ce,this[ie].entry),this[P]==="opening")return this.defer(()=>this.getMany($,ce,ae)),ae[k];if(lt(this,ae))return ae[k];if(!Array.isArray($))return this.nextTick(ae,new TypeError("The first argument 'keys' must be an array")),ae[k];if($.length===0)return this.nextTick(ae,null,[]),ae[k];let Ie=this.keyEncoding(ce.keyEncoding),Pe=this.valueEncoding(ce.valueEncoding),Me=Ie.format,Je=Pe.format;(ce.keyEncoding!==Me||ce.valueEncoding!==Je)&&(ce=Object.assign({},ce,{keyEncoding:Me,valueEncoding:Je}));let et=new Array($.length);for(let Ue=0;Ue<$.length;Ue++){let tt=$[Ue],Ye=this._checkKey(tt);if(Ye)return this.nextTick(ae,Ye),ae[k];et[Ue]=this.prefixKey(Ie.encode(tt),Me)}return this._getMany(et,ce,(Ue,tt)=>{if(Ue)return ae(Ue);try{for(let Ye=0;Ye<tt.length;Ye++)tt[Ye]!==void 0&&(tt[Ye]=Pe.decode(tt[Ye]))}catch(Ye){return ae(new o(`Could not decode one or more of ${tt.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:Ye}))}ae(null,tt)}),ae[k]}_getMany($,ce,ae){this.nextTick(ae,null,new Array($.length).fill(void 0))}put($,ce,ae,Ie){if(Ie=y(ae,Ie),Ie=i(Ie,k),ae=m(ae,this[ie].entry),this[P]==="opening")return this.defer(()=>this.put($,ce,ae,Ie)),Ie[k];if(lt(this,Ie))return Ie[k];let Pe=this._checkKey($)||this._checkValue(ce);if(Pe)return this.nextTick(Ie,Pe),Ie[k];let Me=this.keyEncoding(ae.keyEncoding),Je=this.valueEncoding(ae.valueEncoding),et=Me.format,Ue=Je.format;(ae.keyEncoding!==et||ae.valueEncoding!==Ue)&&(ae=Object.assign({},ae,{keyEncoding:et,valueEncoding:Ue}));let tt=this.prefixKey(Me.encode($),et),Ye=Je.encode(ce);return this._put(tt,Ye,ae,_t=>{if(_t)return Ie(_t);this.emit("put",$,ce),Ie()}),Ie[k]}_put($,ce,ae,Ie){this.nextTick(Ie)}del($,ce,ae){if(ae=y(ce,ae),ae=i(ae,k),ce=m(ce,this[ie].key),this[P]==="opening")return this.defer(()=>this.del($,ce,ae)),ae[k];if(lt(this,ae))return ae[k];let Ie=this._checkKey($);if(Ie)return this.nextTick(ae,Ie),ae[k];let Pe=this.keyEncoding(ce.keyEncoding),Me=Pe.format;return ce.keyEncoding!==Me&&(ce=Object.assign({},ce,{keyEncoding:Me})),this._del(this.prefixKey(Pe.encode($),Me),ce,Je=>{if(Je)return ae(Je);this.emit("del",$),ae()}),ae[k]}_del($,ce,ae){this.nextTick(ae)}batch($,ce,ae){if(!arguments.length){if(this[P]==="opening")return new A(this);if(this[P]!=="open")throw new o("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof $=="function"?ae=$:ae=y(ce,ae),ae=i(ae,k),ce=m(ce,this[ie].empty),this[P]==="opening")return this.defer(()=>this.batch($,ce,ae)),ae[k];if(lt(this,ae))return ae[k];if(!Array.isArray($))return this.nextTick(ae,new TypeError("The first argument 'operations' must be an array")),ae[k];if($.length===0)return this.nextTick(ae),ae[k];let Ie=new Array($.length),{keyEncoding:Pe,valueEncoding:Me,...Je}=ce;for(let et=0;et<$.length;et++){if(typeof $[et]!="object"||$[et]===null)return this.nextTick(ae,new TypeError("A batch operation must be an object")),ae[k];let Ue=Object.assign({},$[et]);if(Ue.type!=="put"&&Ue.type!=="del")return this.nextTick(ae,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),ae[k];let tt=this._checkKey(Ue.key);if(tt)return this.nextTick(ae,tt),ae[k];let Ye=Ue.sublevel!=null?Ue.sublevel:this,_t=Ye.keyEncoding(Ue.keyEncoding||Pe),Lt=_t.format;if(Ue.key=Ye.prefixKey(_t.encode(Ue.key),Lt),Ue.keyEncoding=Lt,Ue.type==="put"){let jt=this._checkValue(Ue.value);if(jt)return this.nextTick(ae,jt),ae[k];let Bt=Ye.valueEncoding(Ue.valueEncoding||Me);Ue.value=Bt.encode(Ue.value),Ue.valueEncoding=Bt.format}Ye!==this&&(Ue.sublevel=null),Ie[et]=Ue}return this._batch(Ie,Je,et=>{if(et)return ae(et);this.emit("batch",$),ae()}),ae[k]}_batch($,ce,ae){this.nextTick(ae)}sublevel($,ce){return this._sublevel($,gt.defaults(ce))}_sublevel($,ce){return new gt(this,$,ce)}prefixKey($,ce){return $}clear($,ce){if(ce=y($,ce),ce=i(ce,k),$=m($,this[ie].empty),this[P]==="opening")return this.defer(()=>this.clear($,ce)),ce[k];if(lt(this,ce))return ce[k];let ae=$,Ie=this.keyEncoding($.keyEncoding);return $=g($,Ie),$.keyEncoding=Ie.format,$.limit===0?this.nextTick(ce):this._clear($,Pe=>{if(Pe)return ce(Pe);this.emit("clear",ae),ce()}),ce[k]}_clear($,ce){this.nextTick(ce)}iterator($){let ce=this.keyEncoding($&&$.keyEncoding),ae=this.valueEncoding($&&$.valueEncoding);if($=g($,ce),$.keys=$.keys!==!1,$.values=$.values!==!1,$[u.keyEncoding]=ce,$[u.valueEncoding]=ae,$.keyEncoding=ce.format,$.valueEncoding=ae.format,this[P]==="opening")return new h(this,$);if(this[P]!=="open")throw new o("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator($)}_iterator($){return new u(this,$)}keys($){let ce=this.keyEncoding($&&$.keyEncoding),ae=this.valueEncoding($&&$.valueEncoding);if($=g($,ce),$[u.keyEncoding]=ce,$[u.valueEncoding]=ae,$.keyEncoding=ce.format,$.valueEncoding=ae.format,this[P]==="opening")return new p(this,$);if(this[P]!=="open")throw new o("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys($)}_keys($){return new s(this,$)}values($){let ce=this.keyEncoding($&&$.keyEncoding),ae=this.valueEncoding($&&$.valueEncoding);if($=g($,ce),$[u.keyEncoding]=ce,$[u.valueEncoding]=ae,$.keyEncoding=ce.format,$.valueEncoding=ae.format,this[P]==="opening")return new w(this,$);if(this[P]!=="open")throw new o("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values($)}_values($){return new c(this,$)}defer($){if(typeof $!="function")throw new TypeError("The first argument must be a function");this[le].push($)}[_e](){if(this[le].length===0)return;let $=this[le];this[le]=[];for(let ce of $)ce()}attachResource($){if(typeof $!="object"||$===null||typeof $.close!="function")throw new TypeError("The first argument must be a resource object");this[C].add($)}detachResource($){this[C].delete($)}_chainedBatch(){return new A(this)}_checkKey($){if($==null)return new o("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue($){if($==null)return new o("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};pt.prototype.nextTick=wE();var{AbstractSublevel:gt}=_E()({AbstractLevel:pt});e.AbstractLevel=pt,e.AbstractSublevel=gt;var lt=function($,ce){return $[P]!=="open"?($.nextTick(ce,new o("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},Te=function($){return Object.keys($.supports.encodings).filter(ce=>!!$.supports.encodings[ce])}}),$h=E(e=>{a(),e.AbstractLevel=Fh().AbstractLevel,e.AbstractSublevel=Fh().AbstractSublevel,e.AbstractIterator=on().AbstractIterator,e.AbstractKeyIterator=on().AbstractKeyIterator,e.AbstractValueIterator=on().AbstractValueIterator,e.AbstractChainedBatch=Dh().AbstractChainedBatch}),TE=E((e,t)=>{a(),t.exports=n;var r=Th();function n(i,o,u){if(typeof o!="number")throw new Error("second argument must be a Number");let s,c,h,p,w,A=!0,y;Array.isArray(i)?(s=[],h=c=i.length):(p=Object.keys(i),s={},h=c=p.length);function m(k){function B(){u&&u(k,s),u=null}A?r(B):B()}function g(k,B,C){if(s[k]=C,B&&(w=!0),--h===0||B)m(B);else if(!w&&y<c){let V;p?(V=p[y],y+=1,i[V](function(le,_e){g(V,le,_e)})):(V=y,y+=1,i[V](function(le,_e){g(V,le,_e)}))}}y=o,h?p?p.some(function(k,B){return i[k](function(C,V){g(k,C,V)}),B===o-1}):i.some(function(k,B){return k(function(C,V){g(B,C,V)}),B===o-1}):m(null),A=!1}}),Uh=E((e,t)=>{a(),t.exports=function(r){let n=r.gte!==void 0?r.gte:r.gt!==void 0?r.gt:void 0,i=r.lte!==void 0?r.lte:r.lt!==void 0?r.lt:void 0,o=r.gte===void 0,u=r.lte===void 0;return n!==void 0&&i!==void 0?IDBKeyRange.bound(n,i,o,u):n!==void 0?IDBKeyRange.lowerBound(n,o):i!==void 0?IDBKeyRange.upperBound(i,u):null}}),Mh=E((e,t)=>{a();var r=new TextEncoder;t.exports=function(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):r.encode(n)}}),RE=E(e=>{a();var{AbstractIterator:t}=$h(),r=Uh(),n=Mh(),i=Symbol("cache"),o=Symbol("finished"),u=Symbol("options"),s=Symbol("currentOptions"),c=Symbol("position"),h=Symbol("location"),p=Symbol("first"),w={},A=class extends t{constructor(m,g,k){super(m,k),this[i]=[],this[o]=this.limit===0,this[u]=k,this[s]={...k},this[c]=void 0,this[h]=g,this[p]=!0}_nextv(m,g,k){if(this[p]=!1,this[o])return this.nextTick(k,null,[]);if(this[i].length>0)return m=Math.min(m,this[i].length),this.nextTick(k,null,this[i].splice(0,m));this[c]!==void 0&&(this[u].reverse?(this[s].lt=this[c],this[s].lte=void 0):(this[s].gt=this[c],this[s].gte=void 0));let B;try{B=r(this[s])}catch{return this[o]=!0,this.nextTick(k,null,[])}let C=this.db.db.transaction([this[h]],"readonly"),V=C.objectStore(this[h]),le=[];if(this[u].reverse){let _e=!this[u].values&&V.openKeyCursor?"openKeyCursor":"openCursor";V[_e](B,"prev").onsuccess=R=>{let re=R.target.result;if(re){let{key:P,value:ie}=re;this[c]=P,le.push([this[u].keys&&P!==void 0?n(P):void 0,this[u].values&&ie!==void 0?n(ie):void 0]),le.length<m?re.continue():y(C)}else this[o]=!0}}else{let _e,R,re=()=>{if(_e===void 0||R===void 0)return;let P=Math.max(_e.length,R.length);P===0||m===1/0?this[o]=!0:this[c]=_e[P-1],le.length=P;for(let ie=0;ie<P;ie++){let Se=_e[ie],Ne=R[ie];le[ie]=[this[u].keys&&Se!==void 0?n(Se):void 0,this[u].values&&Ne!==void 0?n(Ne):void 0]}y(C)};this[u].keys||m<1/0?V.getAllKeys(B,m<1/0?m:void 0).onsuccess=P=>{_e=P.target.result,re()}:(_e=[],this.nextTick(re)),this[u].values?V.getAll(B,m<1/0?m:void 0).onsuccess=P=>{R=P.target.result,re()}:(R=[],this.nextTick(re))}C.onabort=()=>{k(C.error||new Error("aborted by user")),k=null},C.oncomplete=()=>{k(null,le),k=null}}_next(m){if(this[i].length>0){let[g,k]=this[i].shift();this.nextTick(m,null,g,k)}else if(this[o])this.nextTick(m);else{let g=Math.min(100,this.limit-this.count);this[p]&&(this[p]=!1,g=1),this._nextv(g,w,(k,B)=>{if(k)return m(k);this[i]=B,this._next(m)})}}_all(m,g){this[p]=!1;let k=this[i].splice(0,this[i].length),B=this.limit-this.count-k.length;if(B<=0)return this.nextTick(g,null,k);this._nextv(B,w,(C,V)=>{if(C)return g(C);k.length>0&&(V=k.concat(V)),g(null,V)})}_seek(m,g){this[p]=!0,this[i]=[],this[o]=!1,this[c]=void 0,this[s]={...this[u]};let k;try{k=r(this[u])}catch{this[o]=!0;return}k!==null&&!k.includes(m)?this[o]=!0:this[u].reverse?this[s].lte=m:this[s].gte=m}};e.Iterator=A;function y(m){typeof m.commit=="function"&&m.commit()}}),PE=E((e,t)=>{a(),t.exports=function(r,n,i,o,u){if(o.limit===0)return r.nextTick(u);let s=r.db.transaction([n],"readwrite"),c=s.objectStore(n),h=0;s.oncomplete=function(){u()},s.onabort=function(){u(s.error||new Error("aborted by user"))};let p=c.openKeyCursor?"openKeyCursor":"openCursor",w=o.reverse?"prev":"next";c[p](i,w).onsuccess=function(A){let y=A.target.result;y&&(c.delete(y.key).onsuccess=function(){(o.limit<=0||++h<o.limit)&&y.continue()})}}}),zE=E(e=>{a();var{AbstractLevel:t}=$h(),r=kt(),n=TE(),{fromCallback:i}=ds(),{Iterator:o}=RE(),u=Mh(),s=PE(),c=Uh(),h="level-js-",p=Symbol("idb"),w=Symbol("namePrefix"),A=Symbol("location"),y=Symbol("version"),m=Symbol("store"),g=Symbol("onComplete"),k=Symbol("promise"),B=class extends t{constructor(C,V,le){if(typeof V=="function"||typeof le=="function")throw new r("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:_e,version:R,...re}=V||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},re),typeof C!="string")throw new Error("constructor requires a location string argument");this[A]=C,this[w]=_e!=null?_e:h,this[y]=parseInt(R||1,10),this[p]=null}get location(){return this[A]}get namePrefix(){return this[w]}get version(){return this[y]}get db(){return this[p]}get type(){return"browser-level"}_open(C,V){let le=indexedDB.open(this[w]+this[A],this[y]);le.onerror=function(){V(le.error||new Error("unknown error"))},le.onsuccess=()=>{this[p]=le.result,V()},le.onupgradeneeded=_e=>{let R=_e.target.result;R.objectStoreNames.contains(this[A])||R.createObjectStore(this[A])}}[m](C){return this[p].transaction([this[A]],C).objectStore(this[A])}[g](C,V){let le=C.transaction;le.onabort=function(){V(le.error||new Error("aborted by user"))},le.oncomplete=function(){V(null,C.result)}}_get(C,V,le){let _e=this[m]("readonly"),R;try{R=_e.get(C)}catch(re){return this.nextTick(le,re)}this[g](R,function(re,P){if(re)return le(re);if(P===void 0)return le(new r("Entry not found",{code:"LEVEL_NOT_FOUND"}));le(null,u(P))})}_getMany(C,V,le){let _e=this[m]("readonly"),R=C.map(re=>P=>{let ie;try{ie=_e.get(re)}catch(Se){return P(Se)}ie.onsuccess=()=>{let Se=ie.result;P(null,Se===void 0?Se:u(Se))},ie.onerror=Se=>{Se.stopPropagation(),P(ie.error)}});n(R,16,le)}_del(C,V,le){let _e=this[m]("readwrite"),R;try{R=_e.delete(C)}catch(re){return this.nextTick(le,re)}this[g](R,le)}_put(C,V,le,_e){let R=this[m]("readwrite"),re;try{re=R.put(V,C)}catch(P){return this.nextTick(_e,P)}this[g](re,_e)}_iterator(C){return new o(this,this[A],C)}_batch(C,V,le){let _e=this[m]("readwrite"),R=_e.transaction,re=0,P;R.onabort=function(){le(P||R.error||new Error("aborted by user"))},R.oncomplete=function(){le()};function ie(){let Se=C[re++],Ne=Se.key,De;try{De=Se.type==="del"?_e.delete(Ne):_e.put(Se.value,Ne)}catch(Ke){P=Ke,R.abort();return}re<C.length?De.onsuccess=ie:typeof R.commit=="function"&&R.commit()}ie()}_clear(C,V){let le,_e;try{le=c(C)}catch{return this.nextTick(V)}if(C.limit>=0)return s(this,this[A],le,C,V);try{let R=this[m]("readwrite");_e=le?R.delete(le):R.clear()}catch(R){return this.nextTick(V,R)}this[g](_e,V)}_close(C){this[p].close(),this.nextTick(C)}};B.destroy=function(C,V,le){typeof V=="function"&&(le=V,V=h),le=i(le,k);let _e=indexedDB.deleteDatabase(V+C);return _e.onsuccess=function(){le()},_e.onerror=function(R){le(R)},le[k]},e.BrowserLevel=B}),VE=E(e=>{a(),e.Level=zE().BrowserLevel}),ZE=E((e,t)=>{a(),t.exports=function(){return Date.now()}}),t1=E((e,t)=>{a();var r=ZE(),n=class{constructor(o,u,s){let c=this;this._started=r(),this._rescheduled=0,this._scheduled=u,this._args=s,this._triggered=!1,this._timerWrapper=()=>{c._rescheduled>0?(c._scheduled=c._rescheduled-(r()-c._started),c._schedule(c._scheduled)):(c._triggered=!0,o.apply(null,c._args))},this._timer=setTimeout(this._timerWrapper,u)}reschedule(o){o||(o=this._scheduled);let u=r();u+o-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(o)):this._triggered?this._schedule(o):(this._started=u,this._rescheduled=o)}_schedule(o){this._triggered=!1,this._started=r(),this._rescheduled=0,this._scheduled=o,this._timer=setTimeout(this._timerWrapper,o)}clear(){clearTimeout(this._timer)}};function i(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let o;if(arguments.length>0){o=new Array(arguments.length-2);for(var u=0;u<o.length;u++)o[u]=arguments[u+2]}return new n(arguments[0],arguments[1],o)}t.exports=i}),i1=E((e,t)=>{a();var{AbortController:r}=globalThis,n=t1(),i=class extends r{constructor(o){super(),this._ms=o,this._timer=n(()=>this.abort(),o),Object.setPrototypeOf(this,i.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=n(()=>this.abort(),this._ms)}};t.exports={TimeoutController:i}}),s1=E((e,t)=>{a();function r(n){let i=new globalThis.AbortController;function o(){i.abort();for(let u of n)!u||!u.removeEventListener||u.removeEventListener("abort",o)}for(let u of n)if(!(!u||!u.addEventListener)){if(u.aborted){o();break}u.addEventListener("abort",o)}return i.signal}t.exports=r,t.exports.anySignal=r}),p1=E((e,t)=>{a();var r=async n=>{let i;for await(let o of n)i=o;return i};t.exports=r}),kd=E((e,t)=>{a();var r=typeof navigator<"u"&&navigator.product==="ReactNative";function n(){return r?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}var i=self.URL,o=n(),u=class{constructor(c="",h=o){this.super=new i(c,h),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(c){this.super.hash=c}set host(c){this.super.host=c}set hostname(c){this.super.hostname=c}set href(c){this.super.href=c}set password(c){this.super.password=c}set pathname(c){this.super.pathname=c}set port(c){this.super.port=c}set protocol(c){this.super.protocol=c}set search(c){this.super.search=c}set username(c){this.super.username=c}static createObjectURL(c){return i.createObjectURL(c)}static revokeObjectURL(c){i.revokeObjectURL(c)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function s(c){if(typeof c=="string")return new i(c).toString();if(!(c instanceof i)){let h=c.username&&c.password?`${c.username}:${c.password}@`:"",p=c.auth?c.auth+"@":"",w=c.port?":"+c.port:"",A=c.protocol?c.protocol+"//":"",y=c.host||"",m=c.hostname||"",g=c.search||(c.query?"?"+c.query:""),k=c.hash||"",B=c.pathname||"",C=c.path||B+g;return`${A}${h||p}${y||m+w}${C}${k}`}}t.exports={URLWithLegacySupport:u,URLSearchParams:self.URLSearchParams,defaultBase:o,format:s}}),tx=E((e,t)=>{a();var{URLWithLegacySupport:r,format:n}=kd();t.exports=(i,o={},u={},s)=>{let c=o.protocol?o.protocol.replace(":",""):"http";c=(u[c]||s||c)+":";let h;try{h=new r(i)}catch{h={}}let p=Object.assign({},o,{protocol:c||h.protocol,host:o.host||h.host});return new r(i,n(p)).toString()}}),nx=E((e,t)=>{a();var{URLWithLegacySupport:r,format:n,URLSearchParams:i,defaultBase:o}=kd(),u=tx();t.exports={URL:r,URLSearchParams:i,format:n,relative:u,defaultBase:o}}),hx=E((e,t)=>{a();function r(n){let[i,o]=n[Symbol.asyncIterator]?[n[Symbol.asyncIterator](),Symbol.asyncIterator]:[n[Symbol.iterator](),Symbol.iterator],u=[];return{peek:()=>i.next(),push:s=>{u.push(s)},next:()=>u.length?{done:!1,value:u.shift()}:i.next(),[o](){return this}}}t.exports=r});a();a();a();var To=v(Be(),1);a();a();a();var Lv=["string","number","bigint","symbol"],Rv=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function xp(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";let t=typeof e;return Lv.includes(t)?t:t==="function"?"Function":Array.isArray(e)?"Array":Nv(e)?"Buffer":Pv(e)||"Object"}function Nv(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function Pv(e){let t=Object.prototype.toString.call(e).slice(8,-1);if(Rv.includes(t))return t}a();var d=class{constructor(e,t,r){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};d.uint=new d(0,"uint",!0);d.negint=new d(1,"negint",!0);d.bytes=new d(2,"bytes",!0);d.string=new d(3,"string",!0);d.array=new d(4,"array",!1);d.map=new d(5,"map",!1);d.tag=new d(6,"tag",!1);d.float=new d(7,"float",!0);d.false=new d(7,"false",!0);d.true=new d(7,"true",!0);d.null=new d(7,"null",!0);d.undefined=new d(7,"undefined",!0);d.break=new d(7,"break",!0);var b=class{constructor(e,t,r){this.type=e,this.value=t,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};a();a();var ui=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Fv=new TextDecoder,$v=new TextEncoder;function Vs(e){return ui&&globalThis.Buffer.isBuffer(e)}function po(e){return e instanceof Uint8Array?Vs(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}var Dp=ui?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):_p(e,t,r):(e,t,r)=>r-t>64?Fv.decode(e.subarray(t,r)):_p(e,t,r),Ks=ui?e=>e.length>64?globalThis.Buffer.from(e):vp(e):e=>e.length>64?$v.encode(e):vp(e),Ut=e=>Uint8Array.from(e),fi=ui?(e,t,r)=>Vs(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),Ap=ui?(e,t)=>(e=e.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),po(globalThis.Buffer.concat(e,t))):(e,t)=>{let r=new Uint8Array(t),n=0;for(let i of e)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},Tp=ui?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function Cp(e,t){if(Vs(e)&&Vs(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function vp(e,t=1/0){let r,n=e.length,i=null,o=[];for(let u=0;u<n;++u){if(r=e.charCodeAt(u),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(u+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return o}function _p(e,t,r){let n=[];for(;t<r;){let i=e[t],o=null,u=i>239?4:i>223?3:i>191?2:1;if(t+u<=r){let s,c,h,p;switch(u){case 1:i<128&&(o=i);break;case 2:s=e[t+1],(s&192)===128&&(p=(i&31)<<6|s&63,p>127&&(o=p));break;case 3:s=e[t+1],c=e[t+2],(s&192)===128&&(c&192)===128&&(p=(i&15)<<12|(s&63)<<6|c&63,p>2047&&(p<55296||p>57343)&&(o=p));break;case 4:s=e[t+1],c=e[t+2],h=e[t+3],(s&192)===128&&(c&192)===128&&(h&192)===128&&(p=(i&15)<<18|(s&63)<<12|(c&63)<<6|h&63,p>65535&&p<1114112&&(o=p))}}o===null?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),t+=u}return ku(n)}var Sp=4096;function ku(e){let t=e.length;if(t<=Sp)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Sp));return r}var Uv=256,yo=class{constructor(e=Uv){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let r=t.length-(this.maxCursor-this.cursor)-1;t.set(e,r)}else{if(t){let r=t.length-(this.maxCursor-this.cursor)-1;r<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,r),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=Tp(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let r=this.chunks[0];e&&this.cursor>r.length/2?(t=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=fi(r,0,this.cursor)}else t=Ap(this.chunks,this.cursor);return e&&this.reset(),t}};a();var S="CBOR decode error:",rr="CBOR encode error:";function nr(e,t,r){if(e.length-t<r)throw new Error(`${S} not enough data for type`)}a();a();var he=[24,256,65536,4294967296,BigInt("18446744073709551616")];function je(e,t,r){nr(e,t,1);let n=e[t];if(r.strict===!0&&n<he[0])throw new Error(`${S} integer encoded in more bytes than necessary (strict decode)`);return n}function ze(e,t,r){nr(e,t,2);let n=e[t]<<8|e[t+1];if(r.strict===!0&&n<he[1])throw new Error(`${S} integer encoded in more bytes than necessary (strict decode)`);return n}function qe(e,t,r){nr(e,t,4);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(r.strict===!0&&n<he[2])throw new Error(`${S} integer encoded in more bytes than necessary (strict decode)`);return n}function Ve(e,t,r){nr(e,t,8);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],i=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(r.strict===!0&&o<he[3])throw new Error(`${S} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(r.allowBigInt===!0)return o;throw new Error(`${S} integers outside of the safe integer range are not supported`)}function Ip(e,t,r,n){return new b(d.uint,je(e,t+1,n),2)}function kp(e,t,r,n){return new b(d.uint,ze(e,t+1,n),3)}function Op(e,t,r,n){return new b(d.uint,qe(e,t+1,n),5)}function Bp(e,t,r,n){return new b(d.uint,Ve(e,t+1,n),9)}function rt(e,t){return ge(e,0,t.value)}function ge(e,t,r){if(r<he[0]){let n=Number(r);e.push([t|n])}else if(r<he[1]){let n=Number(r);e.push([t|24,n])}else if(r<he[2]){let n=Number(r);e.push([t|25,n>>>8,n&255])}else if(r<he[3]){let n=Number(r);e.push([t|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<he[4]){let i=[t|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),u=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=u&255,u=u>>8,i[3]=u&255,u=u>>8,i[2]=u&255,u=u>>8,i[1]=u&255,e.push(i)}else throw new Error(`${S} encountered BigInt larger than allowable range`)}}rt.encodedSize=function(e){return ge.encodedSize(e.value)};ge.encodedSize=function(e){return e<he[0]?1:e<he[1]?2:e<he[2]?3:e<he[3]?5:9};rt.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};a();function Lp(e,t,r,n){return new b(d.negint,-1-je(e,t+1,n),2)}function Rp(e,t,r,n){return new b(d.negint,-1-ze(e,t+1,n),3)}function Np(e,t,r,n){return new b(d.negint,-1-qe(e,t+1,n),5)}var Ou=BigInt(-1),Pp=BigInt(1);function Fp(e,t,r,n){let i=Ve(e,t+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new b(d.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${S} integers outside of the safe integer range are not supported`);return new b(d.negint,Ou-BigInt(i),9)}function Ws(e,t){let r=t.value,n=typeof r=="bigint"?r*Ou-Pp:r*-1-1;ge(e,t.type.majorEncoded,n)}Ws.encodedSize=function(e){let t=e.value,r=typeof t=="bigint"?t*Ou-Pp:t*-1-1;return r<he[0]?1:r<he[1]?2:r<he[2]?3:r<he[3]?5:9};Ws.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};a();function go(e,t,r,n){nr(e,t,r+n);let i=fi(e,t+r,t+r+n);return new b(d.bytes,i,r+n)}function $p(e,t,r,n){return go(e,t,1,r)}function Up(e,t,r,n){return go(e,t,2,je(e,t+1,n))}function Mp(e,t,r,n){return go(e,t,3,ze(e,t+1,n))}function jp(e,t,r,n){return go(e,t,5,qe(e,t+1,n))}function zp(e,t,r,n){let i=Ve(e,t+1,n);if(typeof i=="bigint")throw new Error(`${S} 64-bit integer bytes lengths not supported`);return go(e,t,9,i)}function Hs(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===d.string?Ks(e.value):e.value),e.encodedBytes}function li(e,t){let r=Hs(t);ge(e,t.type.majorEncoded,r.length),e.push(r)}li.encodedSize=function(e){let t=Hs(e);return ge.encodedSize(t.length)+t.length};li.compareTokens=function(e,t){return jv(Hs(e),Hs(t))};function jv(e,t){return e.length<t.length?-1:e.length>t.length?1:Cp(e,t)}a();function wo(e,t,r,n,i){let o=r+n;nr(e,t,o);let u=new b(d.string,Dp(e,t+r,t+o),o);return i.retainStringBytes===!0&&(u.byteValue=fi(e,t+r,t+o)),u}function qp(e,t,r,n){return wo(e,t,1,r,n)}function Vp(e,t,r,n){return wo(e,t,2,je(e,t+1,n),n)}function Kp(e,t,r,n){return wo(e,t,3,ze(e,t+1,n),n)}function Wp(e,t,r,n){return wo(e,t,5,qe(e,t+1,n),n)}function Hp(e,t,r,n){let i=Ve(e,t+1,n);if(typeof i=="bigint")throw new Error(`${S} 64-bit integer string lengths not supported`);return wo(e,t,9,i,n)}var Gp=li;a();function hi(e,t,r,n){return new b(d.array,n,r)}function Jp(e,t,r,n){return hi(e,t,1,r)}function Qp(e,t,r,n){return hi(e,t,2,je(e,t+1,n))}function Yp(e,t,r,n){return hi(e,t,3,ze(e,t+1,n))}function Xp(e,t,r,n){return hi(e,t,5,qe(e,t+1,n))}function Zp(e,t,r,n){let i=Ve(e,t+1,n);if(typeof i=="bigint")throw new Error(`${S} 64-bit integer array lengths not supported`);return hi(e,t,9,i)}function ey(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${S} indefinite length items not allowed`);return hi(e,t,1,1/0)}function Gs(e,t){ge(e,d.array.majorEncoded,t.value)}Gs.compareTokens=rt.compareTokens;Gs.encodedSize=function(e){return ge.encodedSize(e.value)};a();function di(e,t,r,n){return new b(d.map,n,r)}function ty(e,t,r,n){return di(e,t,1,r)}function ry(e,t,r,n){return di(e,t,2,je(e,t+1,n))}function ny(e,t,r,n){return di(e,t,3,ze(e,t+1,n))}function iy(e,t,r,n){return di(e,t,5,qe(e,t+1,n))}function oy(e,t,r,n){let i=Ve(e,t+1,n);if(typeof i=="bigint")throw new Error(`${S} 64-bit integer map lengths not supported`);return di(e,t,9,i)}function sy(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${S} indefinite length items not allowed`);return di(e,t,1,1/0)}function Js(e,t){ge(e,d.map.majorEncoded,t.value)}Js.compareTokens=rt.compareTokens;Js.encodedSize=function(e){return ge.encodedSize(e.value)};a();function ay(e,t,r,n){return new b(d.tag,r,1)}function cy(e,t,r,n){return new b(d.tag,je(e,t+1,n),2)}function uy(e,t,r,n){return new b(d.tag,ze(e,t+1,n),3)}function fy(e,t,r,n){return new b(d.tag,qe(e,t+1,n),5)}function ly(e,t,r,n){return new b(d.tag,Ve(e,t+1,n),9)}function Qs(e,t){ge(e,d.tag.majorEncoded,t.value)}Qs.compareTokens=rt.compareTokens;Qs.encodedSize=function(e){return ge.encodedSize(e.value)};a();var Hv=20,Gv=21,Jv=22,Qv=23;function hy(e,t,r,n){if(n.allowUndefined===!1)throw new Error(`${S} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new b(d.null,null,1):new b(d.undefined,void 0,1)}function dy(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${S} indefinite length items not allowed`);return new b(d.break,void 0,1)}function Bu(e,t,r){if(r){if(r.allowNaN===!1&&Number.isNaN(e))throw new Error(`${S} NaN values are not supported`);if(r.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${S} Infinity values are not supported`)}return new b(d.float,e,t)}function py(e,t,r,n){return Bu(Lu(e,t+1),3,n)}function yy(e,t,r,n){return Bu(Ru(e,t+1),5,n)}function my(e,t,r,n){return Bu(Ey(e,t+1),9,n)}function Ys(e,t,r){let n=t.value;if(n===!1)e.push([d.float.majorEncoded|Hv]);else if(n===!0)e.push([d.float.majorEncoded|Gv]);else if(n===null)e.push([d.float.majorEncoded|Jv]);else if(n===void 0)e.push([d.float.majorEncoded|Qv]);else{let i,o=!1;(!r||r.float64!==!0)&&(wy(n),i=Lu(wt,1),n===i||Number.isNaN(n)?(wt[0]=249,e.push(wt.slice(0,3)),o=!0):(by(n),i=Ru(wt,1),n===i&&(wt[0]=250,e.push(wt.slice(0,5)),o=!0))),o||(Yv(n),i=Ey(wt,1),wt[0]=251,e.push(wt.slice(0,9)))}}Ys.encodedSize=function(e,t){let r=e.value;if(r===!1||r===!0||r===null||r===void 0)return 1;if(!t||t.float64!==!0){wy(r);let n=Lu(wt,1);if(r===n||Number.isNaN(r))return 3;if(by(r),n=Ru(wt,1),r===n)return 5}return 9};var gy=new ArrayBuffer(9),nt=new DataView(gy,1),wt=new Uint8Array(gy,0);function wy(e){if(e===1/0)nt.setUint16(0,31744,!1);else if(e===-1/0)nt.setUint16(0,64512,!1);else if(Number.isNaN(e))nt.setUint16(0,32256,!1);else{nt.setFloat32(0,e);let t=nt.getUint32(0),r=(t&2139095040)>>23,n=t&8388607;if(r===255)nt.setUint16(0,31744,!1);else if(r===0)nt.setUint16(0,(e&2147483648)>>16|n>>13,!1);else{let i=r-127;i<-24?nt.setUint16(0,0):i<-14?nt.setUint16(0,(t&2147483648)>>16|1<<24+i,!1):nt.setUint16(0,(t&2147483648)>>16|i+15<<10|n>>13,!1)}}}function Lu(e,t){if(e.length-t<2)throw new Error(`${S} not enough data for float16`);let r=(e[t]<<8)+e[t+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,i=r&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,r&32768?-o:o}function by(e){nt.setFloat32(0,e,!1)}function Ru(e,t){if(e.length-t<4)throw new Error(`${S} not enough data for float32`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function Yv(e){nt.setFloat64(0,e,!1)}function Ey(e,t){if(e.length-t<8)throw new Error(`${S} not enough data for float64`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}Ys.compareTokens=rt.compareTokens;function F(e,t,r){throw new Error(`${S} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function Xs(e){return()=>{throw new Error(`${S} ${e}`)}}var _=[];for(let e=0;e<=23;e++)_[e]=F;_[24]=Ip;_[25]=kp;_[26]=Op;_[27]=Bp;_[28]=F;_[29]=F;_[30]=F;_[31]=F;for(let e=32;e<=55;e++)_[e]=F;_[56]=Lp;_[57]=Rp;_[58]=Np;_[59]=Fp;_[60]=F;_[61]=F;_[62]=F;_[63]=F;for(let e=64;e<=87;e++)_[e]=$p;_[88]=Up;_[89]=Mp;_[90]=jp;_[91]=zp;_[92]=F;_[93]=F;_[94]=F;_[95]=Xs("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)_[e]=qp;_[120]=Vp;_[121]=Kp;_[122]=Wp;_[123]=Hp;_[124]=F;_[125]=F;_[126]=F;_[127]=Xs("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)_[e]=Jp;_[152]=Qp;_[153]=Yp;_[154]=Xp;_[155]=Zp;_[156]=F;_[157]=F;_[158]=F;_[159]=ey;for(let e=160;e<=183;e++)_[e]=ty;_[184]=ry;_[185]=ny;_[186]=iy;_[187]=oy;_[188]=F;_[189]=F;_[190]=F;_[191]=sy;for(let e=192;e<=215;e++)_[e]=ay;_[216]=cy;_[217]=uy;_[218]=fy;_[219]=ly;_[220]=F;_[221]=F;_[222]=F;_[223]=F;for(let e=224;e<=243;e++)_[e]=Xs("simple values are not supported");_[244]=F;_[245]=F;_[246]=F;_[247]=hy;_[248]=Xs("simple values are not supported");_[249]=py;_[250]=yy;_[251]=my;_[252]=F;_[253]=F;_[254]=F;_[255]=dy;var bt=[];for(let e=0;e<24;e++)bt[e]=new b(d.uint,e,1);for(let e=-1;e>=-24;e--)bt[31-e]=new b(d.negint,e,1);bt[64]=new b(d.bytes,new Uint8Array(0),1);bt[96]=new b(d.string,"",1);bt[128]=new b(d.array,0,1);bt[160]=new b(d.map,0,1);bt[244]=new b(d.false,!1,1);bt[245]=new b(d.true,!0,1);bt[246]=new b(d.null,null,1);function Zs(e){switch(e.type){case d.false:return Ut([244]);case d.true:return Ut([245]);case d.null:return Ut([246]);case d.bytes:return e.value.length?void 0:Ut([64]);case d.string:return e.value===""?Ut([96]):void 0;case d.array:return e.value===0?Ut([128]):void 0;case d.map:return e.value===0?Ut([160]):void 0;case d.uint:return e.value<24?Ut([Number(e.value)]):void 0;case d.negint:if(e.value>=-24)return Ut([31-Number(e.value)])}}var Zv={float64:!1,mapSorter:t2,quickEncodeToken:Zs};function Pu(){let e=[];return e[d.uint.major]=rt,e[d.negint.major]=Ws,e[d.bytes.major]=li,e[d.string.major]=Gp,e[d.array.major]=Gs,e[d.map.major]=Js,e[d.tag.major]=Qs,e[d.float.major]=Ys,e}var xy=Pu(),Nu=new yo,pi=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${rr} object contains circular references`);return new pi(t,e)}},Dr={null:new b(d.null,null),undefined:new b(d.undefined,void 0),true:new b(d.true,!0),false:new b(d.false,!1),emptyArray:new b(d.array,0),emptyMap:new b(d.map,0)},Ar={number(e,t,r,n){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new b(d.float,e):e>=0?new b(d.uint,e):new b(d.negint,e)},bigint(e,t,r,n){return e>=BigInt(0)?new b(d.uint,e):new b(d.negint,e)},Uint8Array(e,t,r,n){return new b(d.bytes,e)},string(e,t,r,n){return new b(d.string,e)},boolean(e,t,r,n){return e?Dr.true:Dr.false},null(e,t,r,n){return Dr.null},undefined(e,t,r,n){return Dr.undefined},ArrayBuffer(e,t,r,n){return new b(d.bytes,new Uint8Array(e))},DataView(e,t,r,n){return new b(d.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,r,n){if(!e.length)return r.addBreakTokens===!0?[Dr.emptyArray,new b(d.break)]:Dr.emptyArray;n=pi.createCheck(n,e);let i=[],o=0;for(let u of e)i[o++]=bo(u,r,n);return r.addBreakTokens?[new b(d.array,e.length),i,new b(d.break)]:[new b(d.array,e.length),i]},Object(e,t,r,n){let i=t!=="Object",o=i?e.keys():Object.keys(e),u=i?e.size:o.length;if(!u)return r.addBreakTokens===!0?[Dr.emptyMap,new b(d.break)]:Dr.emptyMap;n=pi.createCheck(n,e);let s=[],c=0;for(let h of o)s[c++]=[bo(h,r,n),bo(i?e.get(h):e[h],r,n)];return e2(s,r),r.addBreakTokens?[new b(d.map,u),s,new b(d.break)]:[new b(d.map,u),s]}};Ar.Map=Ar.Object;Ar.Buffer=Ar.Uint8Array;for(let e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Ar[`${e}Array`]=Ar.DataView;function bo(e,t={},r){let n=xp(e),i=t&&t.typeEncoders&&t.typeEncoders[n]||Ar[n];if(typeof i=="function"){let u=i(e,n,t,r);if(u!=null)return u}let o=Ar[n];if(!o)throw new Error(`${rr} unsupported type: ${n}`);return o(e,n,t,r)}function e2(e,t){t.mapSorter&&e.sort(t.mapSorter)}function t2(e,t){let r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);let i=r.type.major,o=xy[i].compareTokens(r,n);return o===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function vy(e,t,r,n){if(Array.isArray(t))for(let i of t)vy(e,i,r,n);else r[t.type.major](e,t,n)}function Fu(e,t,r){let n=bo(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){let i=r.quickEncodeToken(n);if(i)return i;let o=t[n.type.major];if(o.encodedSize){let u=o.encodedSize(n,r),s=new yo(u);if(o(s,n,r),s.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return po(s.chunks[0])}}return Nu.reset(),vy(Nu,n,t,r),Nu.toBytes(!0)}function ir(e,t){return t=Object.assign({},Zv,t),Fu(e,xy,t)}a();var r2={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},$u=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=bt[e];if(t===void 0){let r=_[e];if(!r)throw new Error(`${S} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let n=e&31;t=r(this.data,this.pos,n,this.options)}return this.pos+=t.encodedLength,t}},Eo=Symbol.for("DONE"),ea=Symbol.for("BREAK");function n2(e,t,r){let n=[];for(let i=0;i<e.value;i++){let o=xo(t,r);if(o===ea){if(e.value===1/0)break;throw new Error(`${S} got unexpected break to lengthed array`)}if(o===Eo)throw new Error(`${S} found array but not enough entries (got ${i}, expected ${e.value})`);n[i]=o}return n}function i2(e,t,r){let n=r.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let u=0;u<e.value;u++){let s=xo(t,r);if(s===ea){if(e.value===1/0)break;throw new Error(`${S} got unexpected break to lengthed map`)}if(s===Eo)throw new Error(`${S} found map but not enough entries (got ${u} [no key], expected ${e.value})`);if(n!==!0&&typeof s!="string")throw new Error(`${S} non-string keys not supported (got ${typeof s})`);let c=xo(t,r);if(c===Eo)throw new Error(`${S} found map but not enough entries (got ${u} [no value], expected ${e.value})`);n?o.set(s,c):i[s]=c}return n?o:i}function xo(e,t){if(e.done())return Eo;let r=e.next();if(r.type===d.break)return ea;if(r.type.terminal)return r.value;if(r.type===d.array)return n2(r,e,t);if(r.type===d.map)return i2(r,e,t);if(r.type===d.tag){if(t.tags&&typeof t.tags[r.value]=="function"){let n=xo(e,t);return t.tags[r.value](n)}throw new Error(`${S} tag not supported (${r.value})`)}throw new Error("unsupported")}function Le(e,t){if(!(e instanceof Uint8Array))throw new Error(`${S} data to decode must be a Uint8Array`);t=Object.assign({},r2,t);let r=t.tokenizer||new $u(e,t),n=xo(r,t);if(n===Eo)throw new Error(`${S} did not find any content to decode`);if(n===ea)throw new Error(`${S} got unexpected break`);if(!r.done())throw new Error(`${S} too many terminals, data makes no sense`);return n}a();var o2=Pu(),s2={float64:!1,quickEncodeToken:Zs};function Mu(e,t=o2,r=s2){if(Array.isArray(e)){let n=0;for(let i of e)n+=Mu(i,t,r);return n}else{let n=t[e.type.major];if(n.encodedSize===void 0||typeof n.encodedSize!="function")throw new Error(`Encoder for ${e.type.name} does not have an encodedSize()`);return n.encodedSize(e,r)}}var kr={};W(kr,{code:()=>e8,decode:()=>Ao,encode:()=>xn,name:()=>Z2});a();q();var Ly=42;function G2(e){if(e.asCID!==e)return null;let t=x.asCID(e);if(!t)return null;let r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new b(d.tag,Ly),new b(d.bytes,r)]}function J2(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Q2(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var Y2={float64:!0,typeEncoders:{Object:G2,undefined:J2,number:Q2}};function X2(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return x.decode(e.subarray(1))}var Ry={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Ry.tags[Ly]=X2;var Z2="dag-cbor",e8=113,xn=e=>ir(e,Y2),Ao=e=>Le(e,Ry),Zu=class{constructor(e,t){this.bytes=e,this.byteOffset=t,this.roots=[],this.headerSize=t}addRoot(e,t){return t8(this,e,t),this}write(e){return r8(this,e),this}close(e){return n8(this,e)}},t8=(e,t,r={})=>{let{resize:n=!1}=r,{bytes:i,headerSize:o,byteOffset:u,roots:s}=e;e.roots.push(t);let c=Co(e);if(c>o)if(c-o+u<i.byteLength)if(n)Py(e,c);else throw s.pop(),new RangeError(`Header of size ${o} has no capacity for new root ${t}.
  However there is a space in the buffer and you could call addRoot(root, { resize: root }) to resize header to make a space for this root.`);else throw s.pop(),new RangeError(`Buffer has no capacity for a new root ${t}`)},ef=({cid:e,bytes:t})=>{let r=e.bytes.byteLength+t.byteLength;return To.default.encodingLength(r)+r},r8=(e,{cid:t,bytes:r})=>{let n=t.bytes.byteLength+r.byteLength,i=To.default.encode(n);if(e.byteOffset+i.length+n>e.bytes.byteLength)throw new RangeError("Buffer has no capacity for this block");Xu(e,i),Xu(e,t.bytes),Xu(e,r)},n8=(e,t={})=>{let{resize:r=!1}=t,{roots:n,bytes:i,byteOffset:o,headerSize:u}=e,s=xn({version:1,roots:n}),c=To.default.encode(s.length),h=c.length+s.byteLength;if(u-h===0)return Ny(e,c,s),i.subarray(0,o);if(r)return Py(e,h),Ny(e,c,s),i.subarray(0,e.byteOffset);throw new RangeError(`Header size was overestimated.
You can use close({ resize: true }) to resize header`)},Py=(e,t)=>{let{bytes:r,headerSize:n}=e;r.set(r.subarray(n,e.byteOffset),t),e.byteOffset+=t-n,e.headerSize=t},Xu=(e,t)=>{e.bytes.set(t,e.byteOffset),e.byteOffset+=t.length},Ny=({bytes:e},t,r)=>{e.set(t),e.set(r,t.length)},i8=[new b(d.map,2),new b(d.string,"version"),new b(d.uint,1),new b(d.string,"roots")],o8=new b(d.tag,42),s8=e=>{let t=[...i8];t.push(new b(d.array,e.length));for(let n of e)t.push(o8),t.push(new b(d.bytes,{length:n+1}));let r=Mu(t);return To.default.encodingLength(r)+r},Co=({roots:e})=>s8(e.map(t=>t.bytes.byteLength)),Fy=(e,t={})=>{let{roots:r=[],byteOffset:n=0,byteLength:i=e.byteLength,headerSize:o=Co({roots:r})}=t,u=new Uint8Array(e,n,i),s=new Zu(u,o);for(let c of r)s.addRoot(c);return s};a();a();a();var Br=v(Be(),1);q();Ee();a();var Or={Null:e=>e===null,Int:e=>Number.isInteger(e),Float:e=>typeof e=="number"&&Number.isFinite(e),String:e=>typeof e=="string",Bool:e=>typeof e=="boolean",Bytes:e=>e instanceof Uint8Array,Link:e=>!Or.Null(e)&&typeof e=="object"&&e.asCID===e,List:e=>Array.isArray(e),Map:e=>!Or.Null(e)&&typeof e=="object"&&e.asCID!==e&&!Or.List(e)&&!Or.Bytes(e)},wi={Int:Or.Int,"CarHeader > version":e=>wi.Int(e),"CarHeader > roots (anon) > valueType (anon)":Or.Link,"CarHeader > roots (anon)":e=>Or.List(e)&&Array.prototype.every.call(e,wi["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":e=>wi["CarHeader > roots (anon)"](e),CarHeader:e=>{let t=e&&Object.keys(e);return Or.Map(e)&&["version"].every(r=>t.includes(r))&&Object.entries(e).every(([r,n])=>wi["CarHeader > "+r]&&wi["CarHeader > "+r](n))}},$y=wi.CarHeader,tf={SHA2_256:18,LENGTH:32,DAG_PB:112},Uy=16+8+8+8;async function sa(e){let t=await e.upTo(8);if(!t.length)throw new Error("Unexpected end of data");let r=Br.default.decode(t);return e.seek(Br.default.decode.bytes),r}async function c8(e){let t=await e.exactly(Uy),r=new DataView(t.buffer,t.byteOffset,t.byteLength),n=0,i={version:2,characteristics:[r.getBigUint64(n,!0),r.getBigUint64(n+=8,!0)],dataOffset:Number(r.getBigUint64(n+=8,!0)),dataSize:Number(r.getBigUint64(n+=8,!0)),indexOffset:Number(r.getBigUint64(n+=8,!0))};return e.seek(Uy),i}async function aa(e,t){let r=await sa(e);if(r===0)throw new Error("Invalid CAR header (zero length)");let n=await e.exactly(r);e.seek(r);let i=Ao(n);if(!$y(i))throw new Error("Invalid CAR header format");if(i.version!==1&&i.version!==2||t!==void 0&&i.version!==t)throw new Error(`Invalid CAR version: ${i.version}${t!==void 0?` (expected ${t})`:""}`);let o=Array.isArray(i.roots);if(i.version===1&&!o||i.version===2&&o)throw new Error("Invalid CAR header format");if(i.version===1)return i;let u=await c8(e);e.seek(u.dataOffset-e.pos);let s=await aa(e,1);return Object.assign(s,u)}async function u8(e){let t=await e.upTo(8);Br.default.decode(t);let r=Br.default.decode.bytes,n=Br.default.decode(t.subarray(Br.default.decode.bytes)),i=Br.default.decode.bytes,o=r+i+n,u=await e.exactly(o);return e.seek(o),u}async function f8(e){let t=await e.exactly(2);if(t[0]===tf.SHA2_256&&t[1]===tf.LENGTH){let u=await e.exactly(34);e.seek(34);let s=G(u);return x.create(0,tf.DAG_PB,s)}let r=await sa(e);if(r!==1)throw new Error(`Unexpected CID version (${r})`);let n=await sa(e),i=await u8(e),o=G(i);return x.create(r,n,o)}async function My(e){let t=e.pos,r=await sa(e);if(r===0)throw new Error("Invalid CAR section (zero length)");r+=e.pos-t;let n=await f8(e),i=r-Number(e.pos-t);return{cid:n,length:r,blockLength:i}}async function l8(e){let{cid:t,blockLength:r}=await My(e),n=await e.exactly(r);return e.seek(r),{bytes:n,cid:t}}async function h8(e){let t=e.pos,{cid:r,length:n,blockLength:i}=await My(e),o={cid:r,length:n,blockLength:i,offset:t,blockOffset:e.pos};return e.seek(o.blockLength),o}function bi(e){let t=(async()=>{let r=await aa(e);if(r.version===2){let n=e.pos-r.dataOffset;e=p8(e,r.dataSize-n)}return r})();return{header:()=>t,async*blocks(){for(await t;(await e.upTo(8)).length>0;)yield await l8(e)},async*blocksIndex(){for(await t;(await e.upTo(8)).length>0;)yield await h8(e)}}}function Lr(e){let t=0;return{async upTo(r){return e.subarray(t,t+Math.min(r,e.length-t))},async exactly(r){if(r>e.length-t)throw new Error("Unexpected end of data");return e.subarray(t,t+r)},seek(r){t+=r},get pos(){return t}}}function d8(e){let t=0,r=0,n=0,i=new Uint8Array(0),o=async u=>{r=i.length-n;let s=[i.subarray(n)];for(;r<u;){let h=await e();if(h==null)break;r<0?h.length>r&&s.push(h.subarray(-r)):s.push(h),r+=h.length}i=new Uint8Array(s.reduce((h,p)=>h+p.length,0));let c=0;for(let h of s)i.set(h,c),c+=h.length;n=0};return{async upTo(u){return i.length-n<u&&await o(u),i.subarray(n,n+Math.min(i.length-n,u))},async exactly(u){if(i.length-n<u&&await o(u),i.length-n<u)throw new Error("Unexpected end of data");return i.subarray(n,n+u)},seek(u){t+=u,n+=u},get pos(){return t}}}function Ei(e){let t=e[Symbol.asyncIterator]();async function r(){let n=await t.next();return n.done?null:n.value}return d8(r)}function p8(e,t){let r=0;return{async upTo(n){let i=await e.upTo(n);return i.length+r>t&&(i=i.subarray(0,t-r)),i},async exactly(n){let i=await e.exactly(n);if(i.length+r>t)throw new Error("Unexpected end of data");return i},seek(n){r+=n,e.seek(n)},get pos(){return e.pos}}}var xi=class{constructor(e,t){this._header=e,this._blocks=t,this._keys=t.map(r=>r.cid.toString())}get version(){return this._header.version}async getRoots(){return this._header.roots}async has(e){return this._keys.indexOf(e.toString())>-1}async get(e){let t=this._keys.indexOf(e.toString());return t>-1?this._blocks[t]:void 0}async*blocks(){for(let e of this._blocks)yield e}async*cids(){for(let e of this._blocks)yield e.cid}static async fromBytes(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return jy(Lr(e))}static async fromIterable(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return jy(Ei(e))}};async function jy(e){let t=bi(e),r=await t.header(),n=[];for await(let i of t.blocks())n.push(i);return new xi(r,n)}a();a();var ua=class{constructor(e,t,r){this._version=e,this._roots=t,this._iterable=r,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}},Rr=class extends ua{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){let{version:t,roots:r,iterator:n}=await qy(e);return new Rr(t,r,n)}static async fromIterable(e){let{version:t,roots:r,iterator:n}=await Vy(e);return new Rr(t,r,n)}};async function qy(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return Ky(Lr(e))}async function Vy(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return Ky(Ei(e))}async function Ky(e){let t=bi(e),{version:r,roots:n}=await t.header();return{version:r,roots:n,iterator:t.blocks()}}a();q();a();var rf=v(Be(),1);function nf(e){let t=xn({version:1,roots:e}),r=rf.default.encode(t.length),n=new Uint8Array(r.length+t.length);return n.set(r,0),n.set(t,r.length),n}function Wy(e){return{async setRoots(t){let r=nf(t);await e.write(r)},async writeBlock(t){let{cid:r,bytes:n}=t;await e.write(new Uint8Array(rf.default.encode(r.bytes.length+n.length))),await e.write(r.bytes),n.length&&await e.write(n)},async close(){await e.end()}}}a();function fa(){}function Hy(){let e=[],t=null,r=fa,n=!1,i=null,o=fa,u=()=>(t||(t=new Promise(h=>{r=()=>{t=null,r=fa,h()}})),t),s={write(h){e.push(h);let p=u();return o(),p},async end(){n=!0;let h=u();o(),await h}},c={async next(){let h=e.shift();return h?(e.length===0&&r(),{done:!1,value:h}):n?(r(),{done:!0,value:void 0}):(i||(i=new Promise(p=>{o=()=>(i=null,o=fa,p(c.next()))})),i)}};return{writer:s,iterator:c}}var Nr=class{constructor(e,t){this._encoder=t,this._mutex=t.setRoots(e),this._ended=!1}async put(e){if(!(e.bytes instanceof Uint8Array)||!e.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");let t=x.asCID(e.cid);if(!t)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then(()=>this._encoder.writeBlock({cid:t,bytes:e.bytes})),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(e){e=y8(e);let{encoder:t,iterator:r}=Gy(),n=new Nr(e,t),i=new la(r);return{writer:n,out:i}}static createAppender(){let{encoder:e,iterator:t}=Gy();e.setRoots=()=>Promise.resolve();let r=new Nr([],e),n=new la(t);return{writer:r,out:n}}static async updateRootsInBytes(e,t){let r=Lr(e);await aa(r);let n=nf(t);if(Number(r.pos)!==n.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${r.pos} bytes, new header is ${n.length} bytes)`);return e.set(n,0),e}},la=class{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}};function Gy(){let e=Hy(),{writer:t,iterator:r}=e;return{encoder:Wy(t),iterator:r}}function y8(e){if(e===void 0)return[];if(!Array.isArray(e)){let r=x.asCID(e);if(!r)throw new TypeError("roots must be a single CID or an array of CIDs");return[r]}let t=[];for(let r of e){let n=x.asCID(r);if(!n)throw new TypeError("roots must be a single CID or an array of CIDs");t.push(n)}return t}a();vn();Ee();or();_i();a();vn();var ha=({enumerable:e=!0,configurable:t=!1}={})=>({enumerable:e,configurable:t,writable:!1}),uf=function*(e,t){if(e!=null&&!(e instanceof Uint8Array))for(let[r,n]of Object.entries(e)){let i=[...t,r];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(let[o,u]of n.entries()){let s=[...i,o],c=x.asCID(u);c?yield[s.join("/"),c]:typeof u=="object"&&(yield*uf(u,s))}else{let o=x.asCID(n);o?yield[i.join("/"),o]:yield*uf(n,i)}}},ff=function*(e,t){if(e!=null)for(let[r,n]of Object.entries(e)){let i=[...t,r];if(yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!x.asCID(n))if(Array.isArray(n))for(let[o,u]of n.entries()){let s=[...i,o];yield s.join("/"),typeof u=="object"&&!x.asCID(u)&&(yield*ff(u,s))}else yield*ff(n,i)}},b8=(e,t)=>{let r=e;for(let[n,i]of t.entries()){if(r=r[i],r==null)throw new Error(`Object has no property at ${t.slice(0,n+1).map(u=>`[${JSON.stringify(u)}]`).join("")}`);let o=x.asCID(r);if(o)return{value:o,remaining:t.slice(n+1).join("/")}}return{value:r}},da=class{constructor({cid:e,bytes:t,value:r}){if(!e||!t||typeof r>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=r,this.asBlock=this,Object.defineProperties(this,{cid:ha(),bytes:ha(),value:ha(),asBlock:ha()})}links(){return uf(this.value,[])}tree(){return ff(this.value,[])}get(e="/"){return b8(this.value,e.split("/").filter(Boolean))}},lf=async({value:e,codec:t,hasher:r})=>{if(typeof e>"u")throw new Error('Missing required argument "value"');if(!t||!r)throw new Error("Missing required argument: codec or hasher");let n=t.encode(e),i=await r.digest(n),o=x.create(1,t.code,i);return new da({value:e,bytes:n,cid:o})},_n=({bytes:e,cid:t,value:r,codec:n})=>{let i=r!==void 0?r:n&&n.decode(e);if(i===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new da({cid:t,bytes:e,value:i})},Xy=async({bytes:e,cid:t,hasher:r,codec:n})=>{if(!e)throw new Error('Missing required argument "bytes"');if(!r)throw new Error('Missing required argument "hasher"');let i=n.decode(e),o=await r.digest(e);if(!bn.equals(t.multihash.bytes,o.bytes))throw new Error("CID hash does not match bytes");return _n({bytes:e,cid:t,value:i,codec:n})};a();function pa(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(i){i(r)}),(n=e.get("*"))&&n.slice().map(function(i){i(t,r)})}}}var{isBinary:x8}=bn,em=e=>x8(e)?lf({value:e,hasher:Mt,codec:st}):lf({value:e,hasher:Mt,codec:kr}),Zy=({bytes:e,cid:t})=>{let r,n,{code:i}=t,o=t.multihash.code||G(t.multihash).code;if(o===18)r=Mt;else throw new Error("Unsupported hash function: "+o);if(i===113)n=kr;else if(i===85)n=st;else throw new Error("Unsupported codec: "+i);return Xy({bytes:e,cid:t,codec:n,hasher:r})},Sn=class{constructor(){Object.assign(this,pa()),this.blocks=[]}static create(){return new this}static async load(e){let t=await xi.fromBytes(e),[r]=await t.getRoots();return{root:r,get:n=>t.get(n).then(i=>Zy(i)).then(({value:i})=>i)}}async add(e){let t=await em(e);return this.last=t,this.blocks.push(t),this.emit("size",this.size),t.cid}async get(e){let{cid:t,bytes:r,value:n}=await Zy(e);return{cid:t,bytes:r,value:n}}undo(){return this.blocks.pop()}async commit(){let e=this.last.cid,t=0,r=Co({roots:[e]});t+=r;for(let o of this.blocks)t+=ef(o);let n=new Uint8Array(t),i=await Fy(n,{headerSize:r});i.addRoot(e);for(let o of this.blocks)i.write(o);return await i.close(),i.bytes}get size(){if(!(this!=null&&this.last))return 0;let e=this.last.cid,t=0;t+=Co({roots:[e]});for(let r of this.blocks)t+=ef(r);return t}};a();a();a();a();var Io=v8;function v8(e,t,r){if(!e)return r;var n,i;if(Array.isArray(t)&&(n=t.slice(0)),typeof t=="string"&&(n=t.split(".")),typeof t=="symbol"&&(n=[t]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");for(;n.length;)if(i=n.shift(),!e||(e=e[i],e===void 0))return r;return e}var w0=v(at(),1),Mn=v(ve(),1);a();a();a();q();a();a();a();var ct=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");H();we();var sr="/",vm=new TextEncoder().encode(sr),va=vm[0],M=class{constructor(e,t){if(typeof e=="string")this._buf=N(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==va)throw new Error("Invalid key")}toString(e="utf8"){return T(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new M(e.join(sr))}static random(){return new M(ct().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new M(e):typeof e.uint8Array=="function"?new M(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=vm),this._buf[0]!==va){let e=new Uint8Array(this._buf.byteLength+1);e.fill(va,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===va;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;let i=t[n],o=r[n];if(i<o)return!0;if(i>o)return!1}return t.length<r.length}reverse(){return M.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(sr).slice(1)}type(){return o_(this.baseNamespace())}name(){return s_(this.baseNamespace())}instance(e){return new M(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(sr)||(e+=sr),e+=this.type(),new M(e)}parent(){let e=this.list();return e.length===1?new M(sr):new M(e.slice(0,-1).join(sr))}child(e){return this.toString()===sr?e:e.toString()===sr?this:new M(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return M.withNamespaces([...this.namespaces(),...a_(e.map(t=>t.namespaces()))])}};function o_(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function s_(e){let t=e.split(":");return t[t.length-1]}function a_(e){return[].concat(...e)}var Dm=v(at(),1),Am=v(Af(),1);xe();or();Ee();var u_=(0,Dm.default)("ipfs:repo:migrator:migration-8");function Tm(e){return e.child?Tm(e.child):e}function f_(e){try{let t=I.decode(`b${e.toString().toLowerCase().slice(1)}`),r=x.decode(t).multihash.bytes,n=I.encode(r).slice(1).toUpperCase();return new M(`/${n}`,!1)}catch{return e}}function l_(e){try{let t=I.decode(`b${e.toString().toLowerCase().slice(1)}`),r=G(t),n=I.encode(x.createV1(ot,r).bytes).slice(1);return new M(`/${n.toUpperCase()}`,!1)}catch{return e}}async function Sm(e,t,r){let n=e.blocks;await n.open();let i=Tm(n),o=await(0,Am.default)(i.queryKeys({filters:[u=>r(u).toString()!==u.toString()]}));try{let u=0;for await(let s of i.query({})){let c=r(s.key);c.toString()!==s.key.toString()&&(u+=1,u_(`Migrating Block from ${s.key} to ${c}`,await i.has(s.key)),await i.delete(s.key),await i.put(c,s.value),t(u/o*100,`Migrated Block from ${s.key} to ${c}`))}}finally{await n.close()}}var Cm={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(e,t=()=>{})=>Sm(e,t,f_),revert:(e,t=()=>{})=>Sm(e,t,l_)};a();q();a();q();a();var h_=new TextDecoder;function Tf(e,t){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");let i=e[t++];if(r+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[r,t]}function _a(e,t){let r;[r,t]=Tf(e,t);let n=t+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,n),n]}function Im(e,t){let r;return[r,t]=Tf(e,t),[r&7,r>>3,t]}function d_(e){let t={},r=e.length,n=0;for(;n<r;){let i,o;if([i,o,n]=Im(e,n),o===1){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(t.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,n]=_a(e,n)}else if(o===2){if(t.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let u;[u,n]=_a(e,n),t.Name=h_.decode(u)}else if(o===3){if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[t.Tsize,n]=Tf(e,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}function km(e){let t=e.length,r=0,n,i=!1,o;for(;r<t;){let s,c;if([s,c,r]=Im(e,r),s!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${s}`);if(c===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,r]=_a(e,r),n&&(i=!0)}else if(c===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let h;[h,r]=_a(e,r),n.push(d_(h))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(r>t)throw new Error("protobuf: (PBNode) unexpected end of data");let u={};return o&&(u.Data=o),u.Links=n||[],u}a();var Bm=new TextEncoder,Om=2**32,p_=2**31;function y_(e,t){let r=t.length;if(typeof e.Tsize=="number"){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");r=Bo(t,r,e.Tsize)-1,t[r]=24}if(typeof e.Name=="string"){let n=Bm.encode(e.Name);r-=n.length,t.set(n,r),r=Bo(t,r,n.length)-1,t[r]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),r=Bo(t,r,e.Hash.length)-1,t[r]=10),t.length-r}function Lm(e){let t=g_(e),r=new Uint8Array(t),n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),n=Bo(r,n,e.Data.length)-1,r[n]=10),e.Links)for(let i=e.Links.length-1;i>=0;i--){let o=y_(e.Links[i],r.subarray(0,n));n-=o,n=Bo(r,n,o)-1,r[n]=18}return r}function m_(e){let t=0;if(e.Hash){let r=e.Hash.length;t+=1+r+Ii(r)}if(typeof e.Name=="string"){let r=Bm.encode(e.Name).length;t+=1+r+Ii(r)}return typeof e.Tsize=="number"&&(t+=1+Ii(e.Tsize)),t}function g_(e){let t=0;if(e.Data){let r=e.Data.length;t+=1+r+Ii(r)}if(e.Links)for(let r of e.Links){let n=m_(r);t+=1+n+Ii(n)}return t}function Bo(e,t,r){t-=Ii(r);let n=t;for(;r>=p_;)e[t++]=r&127|128,r/=128;for(;r>=128;)e[t++]=r&127|128,r>>>=7;return e[t]=r,n}function Ii(e){return e%2===0&&e++,Math.floor((w_(e)+6)/7)}function w_(e){let t=0;return e>=Om&&(e=Math.floor(e/Om),t=32),e>=1<<16&&(e>>>=16,t+=16),e>=1<<8&&(e>>>=8,t+=8),t+b_[e]}var b_=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];a();q();var E_=["Data","Links"],x_=["Hash","Name","Tsize"],Rm=new TextEncoder;function v_(e,t){if(e===t)return 0;let r=e.Name?Rm.encode(e.Name):[],n=t.Name?Rm.encode(t.Name):[],i=r.length,o=n.length;for(let u=0,s=Math.min(i,o);u<s;++u)if(r[u]!==n[u]){i=r[u],o=n[u];break}return i<o?-1:o<i?1:0}function Nm(e,t){return!Object.keys(e).some(r=>!t.includes(r))}function Pm(e){if(!e||typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");if(!Nm(e,E_))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(e.Data!==void 0&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let t=0;t<e.Links.length;t++){let r=e.Links[t];if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!Nm(r,x_))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0&&(typeof r.Tsize!="number"||r.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t>0&&v_(r,e.Links[t-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}var xt=112;function Lo(e){Pm(e);let t={};return e.Links&&(t.Links=e.Links.map(r=>{let n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),e.Data&&(t.Data=e.Data),Lm(t)}function Ro(e){let t=km(e),r={};return t.Data&&(r.Data=t.Data),t.Links&&(r.Links=t.Links.map(n=>{let i={};try{i.Hash=x.decode(n.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),r}a();q();a();var In=v(Mr(),1),Lg=In.default.Reader,B_=In.default.Writer;In.default.util;var Ia=In.default.roots.default||(In.default.roots.default={}),Rg=Ia.ipfs=(()=>{let e={};return e.pin=function(){let t={};return t.Set=function(){function r(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}return r.prototype.version=0,r.prototype.fanout=0,r.prototype.seed=0,r.encode=function(n,i){return i||(i=B_.create()),n.version!=null&&Object.hasOwnProperty.call(n,"version")&&i.uint32(8).uint32(n.version),n.fanout!=null&&Object.hasOwnProperty.call(n,"fanout")&&i.uint32(16).uint32(n.fanout),n.seed!=null&&Object.hasOwnProperty.call(n,"seed")&&i.uint32(29).fixed32(n.seed),i},r.decode=function(n,i){n instanceof Lg||(n=Lg.create(n));for(var o=i===void 0?n.len:n.pos+i,u=new Ia.ipfs.pin.Set;n.pos<o;){var s=n.uint32();switch(s>>>3){case 1:u.version=n.uint32();break;case 2:u.fanout=n.uint32();break;case 3:u.seed=n.fixed32();break;default:n.skipType(s&7);break}}return u},r.fromObject=function(n){if(n instanceof Ia.ipfs.pin.Set)return n;var i=new Ia.ipfs.pin.Set;return n.version!=null&&(i.version=n.version>>>0),n.fanout!=null&&(i.fanout=n.fanout>>>0),n.seed!=null&&(i.seed=n.seed>>>0),i},r.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(o.version=0,o.fanout=0,o.seed=0),n.version!=null&&n.hasOwnProperty("version")&&(o.version=n.version),n.fanout!=null&&n.hasOwnProperty("fanout")&&(o.fanout=n.fanout),n.seed!=null&&n.hasOwnProperty("seed")&&(o.seed=n.seed),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,In.default.util.toJSONOptions)},r}(),t}(),e})(),Ug=v(Pg(),1),Ba=v(Be(),1);a();xe();q();var $o=new M("/local/pins"),Oa=256,Fg=8192,zf=x.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),kn={direct:"direct",recursive:"recursive"};function qf(e){return new M(`/${I.encode(e.multihash.bytes).toUpperCase().substring(1)}`)}jr();a();function $g(e,t){for(let r=0;r<e.byteLength;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0}H();we();_i();var Kf=Rg.pin.Set;function L_(e){let t=e.Data;if(!t)throw new Error("No data present");let r=Ba.default.decode(t),n=Ba.default.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+r>t.length)throw new Error("Impossibly large set header length");let i=t.slice(n,r+n),o=Kf.toObject(Kf.decode(i),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(o.version!==1)throw new Error(`Unsupported Set version: ${o.version}`);if(o.fanout>e.Links.length)throw new Error("Impossibly large fanout");return{header:o,data:t.slice(r+n)}}function R_(e,t){let r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,e,!0);let n=N(t.toString()),i=Y([r,n],r.byteLength+n.byteLength);return(0,Ug.default)(T(i))}async function*Mg(e,t){let r=L_(t),n=0;for(let i of t.Links){if(n<r.header.fanout){let o=i.Hash;if(!zf.equals(o)){let u=await e.get(o),s=Ro(u);yield*Mg(e,s)}}else yield i.Hash;n++}}async function*Uo(e,t,r){let n=t.Links.find(u=>u.Name===r);if(!n)throw new Error("No link found with name "+r);let i=await e.get(n.Hash),o=Ro(i);yield*Mg(e,o)}function N_(e,t){return r(t,0);async function r(n,i){let o=Kf.encode({version:1,fanout:Oa,seed:i}).finish(),u=Ba.default.encode(o.length),s=Y([u,o]),c=[];for(let p=0;p<Oa;p++)c.push({Name:"",Tsize:1,Hash:zf});if(n.length<=Fg){let p=n.map(A=>({link:{Name:"",Tsize:1,Hash:A.key},data:A.data||new Uint8Array})).sort((A,y)=>$g(A.link.Hash.bytes,y.link.Hash.bytes)),w=c.concat(p.map(A=>A.link));return{Data:Y([s,...p.map(A=>A.data)]),Links:w}}else{let p=n.reduce((A,y)=>{let m=R_(i,y.key)%Oa;return A[m]=m in A?A[m].concat([y]):[y],A},[]),w=0;for(let A of p){let y=await r(A,i+1);await h(y,w),w++}return{Data:s,Links:c}}async function h(p,w){let A=Lo(p),y=await Mt.digest(A),m=x.createV0(y);await e.put(m,A);let g=p.Links.reduce((k,B)=>k+(B.Tsize||0),0)+A.length;c[w]={Name:"",Tsize:g,Hash:m}}}}async function Wf(e,t,r){let n=await N_(e,r.map(c=>({key:c}))),i=Lo(n),o=await Mt.digest(i),u=x.createV0(o);await e.put(u,i);let s=n.Links.reduce((c,h)=>c+h.Tsize,0)+i.length;return{Name:t,Tsize:s,Hash:u}}var La=v(Af(),1);_i();Ee();xe();async function F_(e,t,r,n){if(!await t.has($o))return;let i=await t.get($o),o=x.decode(i),u=await e.get(o),s=Ro(u),c=0,h=await(0,La.default)(Uo(e,s,kn.recursive))+await(0,La.default)(Uo(e,s,kn.direct));for await(let p of Uo(e,s,kn.recursive)){c++;let w={depth:1/0};p.version!==0&&(w.version=p.version),p.code!==xt&&(w.codec=p.code),await r.put(qf(p),ir(w)),n(c/h*100,`Migrated recursive pin ${p}`)}for await(let p of Uo(e,s,kn.direct)){c++;let w={depth:0};p.version!==0&&(w.version=p.version),p.code!==xt&&(w.codec=p.code),await r.put(qf(p),ir(w)),n(c/h*100,`Migrated direct pin ${p}`)}await e.delete(o),await t.delete($o)}async function $_(e,t,r,n){let i=[],o=[],u=0,s=await(0,La.default)(r.queryKeys({}));for await(let{key:A,value:y}of r.query({})){u++;let m=Le(y),g=x.create(m.version||0,m.codec||xt,G(I.decode("b"+A.toString().toLowerCase().split("/").pop())));m.depth===0?(n(u/s*100,`Reverted direct pin ${g}`),o.push(g)):(n(u/s*100,`Reverted recursive pin ${g}`),i.push(g))}n(100,"Updating pin root");let c={Links:[await Wf(e,kn.direct,o),await Wf(e,kn.recursive,i)]},h=Lo(c),p=await Mt.digest(h),w=x.createV0(p);await e.put(w,h),await t.put($o,w.bytes)}async function jg(e,t,r){let n=e.blocks,i=e.datastore,o=e.pins;await n.open(),await i.open(),await o.open();try{await r(n,i,o,t)}finally{await o.close(),await i.close(),await n.close()}}var zg={version:9,description:"Migrates pins to datastore",migrate:(e,t=()=>{})=>jg(e,t,F_),revert:(e,t=()=>{})=>jg(e,t,$_)};a();a();var ft={};W(ft,{abortedError:()=>U_,dbDeleteFailedError:()=>Gf,dbOpenFailedError:()=>Hf,dbWriteFailedError:()=>Jf,notFoundError:()=>qt});a();var Oi=v(ve(),1);function Hf(e){return e=e||new Error("Cannot open database"),(0,Oi.default)(e,"ERR_DB_OPEN_FAILED")}function Gf(e){return e=e||new Error("Delete failed"),(0,Oi.default)(e,"ERR_DB_DELETE_FAILED")}function Jf(e){return e=e||new Error("Write failed"),(0,Oi.default)(e,"ERR_DB_WRITE_FAILED")}function qt(e){return e=e||new Error("Not Found"),(0,Oi.default)(e,"ERR_NOT_FOUND")}function U_(e){return e=e||new Error("Aborted"),(0,Oi.default)(e,"ERR_ABORTED")}var qg=new M("/config"),Mo=new M("/version");function jo(e){let t=e;for(;t.db||t.child;)if(t=t.db||t.child,t.type==="level-js"||t.constructor.name==="Level")return t}async function M_(e,t,r){let n=await t(e);if(n)return n;let i=jo(r);return i?new Promise((o,u)=>{let s=i.store("readonly").get(e.toString());s.transaction.onabort=()=>{u(s.transaction.error)},s.transaction.oncomplete=()=>{o(Boolean(s.result))}}):!1}async function j_(e,t,r,n){if(await r(e))return t(e);let i=jo(n);if(!i)throw qt();return new Promise((o,u)=>{let s=i.store("readonly").get(e.toString());s.transaction.onabort=()=>{u(s.transaction.error)},s.transaction.oncomplete=()=>{if(s.result)return o(s.result);u(qt())}})}function Ra(e){let t=e.get.bind(e),r=e.has.bind(e);return e.get=n=>j_(n,t,r,e),e.has=n=>M_(n,r,e),e}function Qf(e){return{...e,root:Ra(e.root),datastore:Ra(e.datastore),pins:Ra(e.pins),keys:Ra(e.keys)}}we();H();async function z_(e,t,r=()=>{}){let n=jo(t);if(!n){r(`${e} did not need an upgrade`);return}r(`Upgrading ${e}`),await Hg(n,(i,o)=>[{type:"del",key:i},{type:"put",key:N(i),value:o}])}async function q_(e,t,r=()=>{}){let n=jo(t);if(!n){r(`${e} did not need a downgrade`);return}r(`Downgrading ${e}`),await Hg(n,(i,o)=>[{type:"del",key:i},{type:"put",key:T(i),value:o}])}function Kg(e){return e.child?Kg(e.child):e}async function Vg(e,t,r){let n=Object.entries(e).map(([u,s])=>({key:u,backend:Kg(s)})).filter(({key:u,backend:s})=>s.constructor.name==="LevelDatastore").map(({key:u,backend:s})=>({name:u,store:s}));t(0,`Migrating ${n.length} dbs`);let i=0,o=u=>{t(Math.round(i/n.length*100),u)};for(let{name:u,store:s}of n){await s.open();try{await r(u,s,o)}finally{i++,await s.close()}}t(100,`Migrated ${n.length} dbs`)}var Wg={version:10,description:"Migrates datastore-level keys to binary",migrate:(e,t=()=>{})=>Vg(e,t,z_),revert:(e,t=()=>{})=>Vg(e,t,q_)};function Hg(e,t){function r(n,i){let o=e.store("readwrite"),u=o.transaction,s=0,c;u.onabort=()=>i(c||u.error||new Error("aborted by user")),u.oncomplete=()=>i();function h(){let p=n[s++],w=p.key,A;try{A=p.type==="del"?o.delete(w):o.put(p.value,w)}catch(y){c=y,u.abort();return}s<n.length&&(A.onsuccess=h)}h()}return new Promise((n,i)=>{let o=e.iterator(),u=c=>c;o._deserializeKey=o._deserializeValue=u,s();function s(){let c=(h,p,w)=>{if(h||p===void 0){let A=y=>{if(y){i(y);return}n()};o.end(A);return}r(t(p,w),s)};o.next(c)}})}a();var zr=new M("/local/filesroot");async function V_(e,t=()=>{}){if(t(100,"Migrating MFS root to repo datastore"),await e.root.open(),await e.datastore.open(),await e.root.has(zr)){let r=await e.root.get(zr);await e.datastore.put(zr,r),await e.root.delete(zr)}await e.datastore.close(),await e.root.close(),t(100,"Stored MFS root in repo datastore")}async function K_(e,t=()=>{}){if(t(100,"Migrating MFS root to repo root datastore"),await e.root.open(),await e.datastore.open(),await e.datastore.has(zr)){let r=await e.datastore.get(zr);await e.root.put(zr,r),await e.datastore.delete(zr)}await e.datastore.close(),await e.root.close(),t(100,"Stored MFS root in repo root datastore")}var Gg={version:11,description:"Store mfs root in the datastore",migrate:V_,revert:K_};a();var dl=v(Mr(),1);a();var On=v(Mr(),1),Jg=On.default.Reader,W_=On.default.Writer,H_=On.default.util,Na=On.default.roots.default||(On.default.roots.default={}),Yf=Na.Protocols=(()=>{function e(t){if(this.protocols=[],t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.protocols=H_.emptyArray,e.encode=function(t,r){if(r||(r=W_.create()),t.protocols!=null&&t.protocols.length)for(var n=0;n<t.protocols.length;++n)r.uint32(10).string(t.protocols[n]);return r},e.decode=function(t,r){t instanceof Jg||(t=Jg.create(t));for(var n=r===void 0?t.len:t.pos+r,i=new Na.Protocols;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.protocols&&i.protocols.length||(i.protocols=[]),i.protocols.push(t.string());break;default:t.skipType(o&7);break}}return i},e.fromObject=function(t){if(t instanceof Na.Protocols)return t;var r=new Na.Protocols;if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Protocols.protocols: array expected");r.protocols=[];for(var n=0;n<t.protocols.length;++n)r.protocols[n]=String(t.protocols[n])}return r},e.toObject=function(t,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.protocols=[]),t.protocols&&t.protocols.length){n.protocols=[];for(var i=0;i<t.protocols.length;++i)n.protocols[i]=t.protocols[i]}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,On.default.util.toJSONOptions)},e})();a();var ar=v(Mr(),1),Bi=ar.default.Reader,Xf=ar.default.Writer,J=ar.default.util,pe=ar.default.roots.default||(ar.default.roots.default={}),Zf=pe.Addresses=(()=>{function e(t){if(this.addrs=[],t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.addrs=J.emptyArray,e.prototype.certifiedRecord=null,e.encode=function(t,r){if(r||(r=Xf.create()),t.addrs!=null&&t.addrs.length)for(var n=0;n<t.addrs.length;++n)pe.Addresses.Address.encode(t.addrs[n],r.uint32(10).fork()).ldelim();return t.certifiedRecord!=null&&Object.hasOwnProperty.call(t,"certifiedRecord")&&pe.Addresses.CertifiedRecord.encode(t.certifiedRecord,r.uint32(18).fork()).ldelim(),r},e.decode=function(t,r){t instanceof Bi||(t=Bi.create(t));for(var n=r===void 0?t.len:t.pos+r,i=new pe.Addresses;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.addrs&&i.addrs.length||(i.addrs=[]),i.addrs.push(pe.Addresses.Address.decode(t,t.uint32()));break;case 2:i.certifiedRecord=pe.Addresses.CertifiedRecord.decode(t,t.uint32());break;default:t.skipType(o&7);break}}return i},e.fromObject=function(t){if(t instanceof pe.Addresses)return t;var r=new pe.Addresses;if(t.addrs){if(!Array.isArray(t.addrs))throw TypeError(".Addresses.addrs: array expected");r.addrs=[];for(var n=0;n<t.addrs.length;++n){if(typeof t.addrs[n]!="object")throw TypeError(".Addresses.addrs: object expected");r.addrs[n]=pe.Addresses.Address.fromObject(t.addrs[n])}}if(t.certifiedRecord!=null){if(typeof t.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");r.certifiedRecord=pe.Addresses.CertifiedRecord.fromObject(t.certifiedRecord)}return r},e.toObject=function(t,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.addrs=[]),r.defaults&&(n.certifiedRecord=null),t.addrs&&t.addrs.length){n.addrs=[];for(var i=0;i<t.addrs.length;++i)n.addrs[i]=pe.Addresses.Address.toObject(t.addrs[i],r)}return t.certifiedRecord!=null&&t.hasOwnProperty("certifiedRecord")&&(n.certifiedRecord=pe.Addresses.CertifiedRecord.toObject(t.certifiedRecord,r)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,ar.default.util.toJSONOptions)},e.Address=function(){function t(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}t.prototype.multiaddr=J.newBuffer([]),t.prototype.isCertified=null;let r;return Object.defineProperty(t.prototype,"_isCertified",{get:J.oneOfGetter(r=["isCertified"]),set:J.oneOfSetter(r)}),t.encode=function(n,i){return i||(i=Xf.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),n.isCertified!=null&&Object.hasOwnProperty.call(n,"isCertified")&&i.uint32(16).bool(n.isCertified),i},t.decode=function(n,i){n instanceof Bi||(n=Bi.create(n));for(var o=i===void 0?n.len:n.pos+i,u=new pe.Addresses.Address;n.pos<o;){var s=n.uint32();switch(s>>>3){case 1:u.multiaddr=n.bytes();break;case 2:u.isCertified=n.bool();break;default:n.skipType(s&7);break}}return u},t.fromObject=function(n){if(n instanceof pe.Addresses.Address)return n;var i=new pe.Addresses.Address;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?J.base64.decode(n.multiaddr,i.multiaddr=J.newBuffer(J.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),n.isCertified!=null&&(i.isCertified=Boolean(n.isCertified)),i},t.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.multiaddr="":(o.multiaddr=[],i.bytes!==Array&&(o.multiaddr=J.newBuffer(o.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(o.multiaddr=i.bytes===String?J.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),n.isCertified!=null&&n.hasOwnProperty("isCertified")&&(o.isCertified=n.isCertified,i.oneofs&&(o._isCertified="isCertified")),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,ar.default.util.toJSONOptions)},t}(),e.CertifiedRecord=function(){function t(r){if(r)for(var n=Object.keys(r),i=0;i<n.length;++i)r[n[i]]!=null&&(this[n[i]]=r[n[i]])}return t.prototype.seq=J.Long?J.Long.fromBits(0,0,!0):0,t.prototype.raw=J.newBuffer([]),t.encode=function(r,n){return n||(n=Xf.create()),r.seq!=null&&Object.hasOwnProperty.call(r,"seq")&&n.uint32(8).uint64(r.seq),r.raw!=null&&Object.hasOwnProperty.call(r,"raw")&&n.uint32(18).bytes(r.raw),n},t.decode=function(r,n){r instanceof Bi||(r=Bi.create(r));for(var i=n===void 0?r.len:r.pos+n,o=new pe.Addresses.CertifiedRecord;r.pos<i;){var u=r.uint32();switch(u>>>3){case 1:o.seq=r.uint64();break;case 2:o.raw=r.bytes();break;default:r.skipType(u&7);break}}return o},t.fromObject=function(r){if(r instanceof pe.Addresses.CertifiedRecord)return r;var n=new pe.Addresses.CertifiedRecord;return r.seq!=null&&(J.Long?(n.seq=J.Long.fromValue(r.seq)).unsigned=!0:typeof r.seq=="string"?n.seq=parseInt(r.seq,10):typeof r.seq=="number"?n.seq=r.seq:typeof r.seq=="object"&&(n.seq=new J.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0))),r.raw!=null&&(typeof r.raw=="string"?J.base64.decode(r.raw,n.raw=J.newBuffer(J.base64.length(r.raw)),0):r.raw.length&&(n.raw=r.raw)),n},t.toObject=function(r,n){n||(n={});var i={};if(n.defaults){if(J.Long){var o=new J.Long(0,0,!0);i.seq=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.seq=n.longs===String?"0":0;n.bytes===String?i.raw="":(i.raw=[],n.bytes!==Array&&(i.raw=J.newBuffer(i.raw)))}return r.seq!=null&&r.hasOwnProperty("seq")&&(typeof r.seq=="number"?i.seq=n.longs===String?String(r.seq):r.seq:i.seq=n.longs===String?J.Long.prototype.toString.call(r.seq):n.longs===Number?new J.LongBits(r.seq.low>>>0,r.seq.high>>>0).toNumber(!0):r.seq),r.raw!=null&&r.hasOwnProperty("raw")&&(i.raw=n.bytes===String?J.base64.encode(r.raw,0,r.raw.length):n.bytes===Array?Array.prototype.slice.call(r.raw):r.raw),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,ar.default.util.toJSONOptions)},t}(),e})();a();var cr=v(Mr(),1),Li=cr.default.Reader,el=cr.default.Writer,j=cr.default.util,se=cr.default.roots.default||(cr.default.roots.default={}),tl=se.Peer=(()=>{function e(r){if(this.addresses=[],this.protocols=[],this.metadata=[],r)for(var n=Object.keys(r),i=0;i<n.length;++i)r[n[i]]!=null&&(this[n[i]]=r[n[i]])}e.prototype.addresses=j.emptyArray,e.prototype.protocols=j.emptyArray,e.prototype.metadata=j.emptyArray,e.prototype.pubKey=null,e.prototype.peerRecordEnvelope=null;let t;return Object.defineProperty(e.prototype,"_pubKey",{get:j.oneOfGetter(t=["pubKey"]),set:j.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_peerRecordEnvelope",{get:j.oneOfGetter(t=["peerRecordEnvelope"]),set:j.oneOfSetter(t)}),e.encode=function(r,n){if(n||(n=el.create()),r.addresses!=null&&r.addresses.length)for(var i=0;i<r.addresses.length;++i)se.Address.encode(r.addresses[i],n.uint32(10).fork()).ldelim();if(r.protocols!=null&&r.protocols.length)for(var i=0;i<r.protocols.length;++i)n.uint32(18).string(r.protocols[i]);if(r.metadata!=null&&r.metadata.length)for(var i=0;i<r.metadata.length;++i)se.Metadata.encode(r.metadata[i],n.uint32(26).fork()).ldelim();return r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&n.uint32(34).bytes(r.pubKey),r.peerRecordEnvelope!=null&&Object.hasOwnProperty.call(r,"peerRecordEnvelope")&&n.uint32(42).bytes(r.peerRecordEnvelope),n},e.decode=function(r,n){r instanceof Li||(r=Li.create(r));for(var i=n===void 0?r.len:r.pos+n,o=new se.Peer;r.pos<i;){var u=r.uint32();switch(u>>>3){case 1:o.addresses&&o.addresses.length||(o.addresses=[]),o.addresses.push(se.Address.decode(r,r.uint32()));break;case 2:o.protocols&&o.protocols.length||(o.protocols=[]),o.protocols.push(r.string());break;case 3:o.metadata&&o.metadata.length||(o.metadata=[]),o.metadata.push(se.Metadata.decode(r,r.uint32()));break;case 4:o.pubKey=r.bytes();break;case 5:o.peerRecordEnvelope=r.bytes();break;default:r.skipType(u&7);break}}return o},e.fromObject=function(r){if(r instanceof se.Peer)return r;var n=new se.Peer;if(r.addresses){if(!Array.isArray(r.addresses))throw TypeError(".Peer.addresses: array expected");n.addresses=[];for(var i=0;i<r.addresses.length;++i){if(typeof r.addresses[i]!="object")throw TypeError(".Peer.addresses: object expected");n.addresses[i]=se.Address.fromObject(r.addresses[i])}}if(r.protocols){if(!Array.isArray(r.protocols))throw TypeError(".Peer.protocols: array expected");n.protocols=[];for(var i=0;i<r.protocols.length;++i)n.protocols[i]=String(r.protocols[i])}if(r.metadata){if(!Array.isArray(r.metadata))throw TypeError(".Peer.metadata: array expected");n.metadata=[];for(var i=0;i<r.metadata.length;++i){if(typeof r.metadata[i]!="object")throw TypeError(".Peer.metadata: object expected");n.metadata[i]=se.Metadata.fromObject(r.metadata[i])}}return r.pubKey!=null&&(typeof r.pubKey=="string"?j.base64.decode(r.pubKey,n.pubKey=j.newBuffer(j.base64.length(r.pubKey)),0):r.pubKey.length&&(n.pubKey=r.pubKey)),r.peerRecordEnvelope!=null&&(typeof r.peerRecordEnvelope=="string"?j.base64.decode(r.peerRecordEnvelope,n.peerRecordEnvelope=j.newBuffer(j.base64.length(r.peerRecordEnvelope)),0):r.peerRecordEnvelope.length&&(n.peerRecordEnvelope=r.peerRecordEnvelope)),n},e.toObject=function(r,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addresses=[],i.protocols=[],i.metadata=[]),r.addresses&&r.addresses.length){i.addresses=[];for(var o=0;o<r.addresses.length;++o)i.addresses[o]=se.Address.toObject(r.addresses[o],n)}if(r.protocols&&r.protocols.length){i.protocols=[];for(var o=0;o<r.protocols.length;++o)i.protocols[o]=r.protocols[o]}if(r.metadata&&r.metadata.length){i.metadata=[];for(var o=0;o<r.metadata.length;++o)i.metadata[o]=se.Metadata.toObject(r.metadata[o],n)}return r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(i.pubKey=n.bytes===String?j.base64.encode(r.pubKey,0,r.pubKey.length):n.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey,n.oneofs&&(i._pubKey="pubKey")),r.peerRecordEnvelope!=null&&r.hasOwnProperty("peerRecordEnvelope")&&(i.peerRecordEnvelope=n.bytes===String?j.base64.encode(r.peerRecordEnvelope,0,r.peerRecordEnvelope.length):n.bytes===Array?Array.prototype.slice.call(r.peerRecordEnvelope):r.peerRecordEnvelope,n.oneofs&&(i._peerRecordEnvelope="peerRecordEnvelope")),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,cr.default.util.toJSONOptions)},e})();se.Address=(()=>{function e(r){if(r)for(var n=Object.keys(r),i=0;i<n.length;++i)r[n[i]]!=null&&(this[n[i]]=r[n[i]])}e.prototype.multiaddr=j.newBuffer([]),e.prototype.isCertified=null;let t;return Object.defineProperty(e.prototype,"_isCertified",{get:j.oneOfGetter(t=["isCertified"]),set:j.oneOfSetter(t)}),e.encode=function(r,n){return n||(n=el.create()),r.multiaddr!=null&&Object.hasOwnProperty.call(r,"multiaddr")&&n.uint32(10).bytes(r.multiaddr),r.isCertified!=null&&Object.hasOwnProperty.call(r,"isCertified")&&n.uint32(16).bool(r.isCertified),n},e.decode=function(r,n){r instanceof Li||(r=Li.create(r));for(var i=n===void 0?r.len:r.pos+n,o=new se.Address;r.pos<i;){var u=r.uint32();switch(u>>>3){case 1:o.multiaddr=r.bytes();break;case 2:o.isCertified=r.bool();break;default:r.skipType(u&7);break}}return o},e.fromObject=function(r){if(r instanceof se.Address)return r;var n=new se.Address;return r.multiaddr!=null&&(typeof r.multiaddr=="string"?j.base64.decode(r.multiaddr,n.multiaddr=j.newBuffer(j.base64.length(r.multiaddr)),0):r.multiaddr.length&&(n.multiaddr=r.multiaddr)),r.isCertified!=null&&(n.isCertified=Boolean(r.isCertified)),n},e.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.multiaddr="":(i.multiaddr=[],n.bytes!==Array&&(i.multiaddr=j.newBuffer(i.multiaddr)))),r.multiaddr!=null&&r.hasOwnProperty("multiaddr")&&(i.multiaddr=n.bytes===String?j.base64.encode(r.multiaddr,0,r.multiaddr.length):n.bytes===Array?Array.prototype.slice.call(r.multiaddr):r.multiaddr),r.isCertified!=null&&r.hasOwnProperty("isCertified")&&(i.isCertified=r.isCertified,n.oneofs&&(i._isCertified="isCertified")),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,cr.default.util.toJSONOptions)},e})();se.Metadata=(()=>{function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.key="",e.prototype.value=j.newBuffer([]),e.encode=function(t,r){return r||(r=el.create()),t.key!=null&&Object.hasOwnProperty.call(t,"key")&&r.uint32(10).string(t.key),t.value!=null&&Object.hasOwnProperty.call(t,"value")&&r.uint32(18).bytes(t.value),r},e.decode=function(t,r){t instanceof Li||(t=Li.create(t));for(var n=r===void 0?t.len:t.pos+r,i=new se.Metadata;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.key=t.string();break;case 2:i.value=t.bytes();break;default:t.skipType(o&7);break}}return i},e.fromObject=function(t){if(t instanceof se.Metadata)return t;var r=new se.Metadata;return t.key!=null&&(r.key=String(t.key)),t.value!=null&&(typeof t.value=="string"?j.base64.decode(t.value,r.value=j.newBuffer(j.base64.length(t.value)),0):t.value.length&&(r.value=t.value)),r},e.toObject=function(t,r){r||(r={});var n={};return r.defaults&&(n.key="",r.bytes===String?n.value="":(n.value=[],r.bytes!==Array&&(n.value=j.newBuffer(n.value)))),t.key!=null&&t.hasOwnProperty("key")&&(n.key=t.key),t.value!=null&&t.hasOwnProperty("value")&&(n.value=r.bytes===String?j.base64.encode(t.value,0,t.value.length):r.bytes===Array?Array.prototype.slice.call(t.value):t.value),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,cr.default.util.toJSONOptions)},e})();a();var Bn=v(Mr(),1),Qg=Bn.default.Reader,G_=Bn.default.Writer,Q=Bn.default.util,Pa=Bn.default.roots.default||(Bn.default.roots.default={}),Yg=Pa.Envelope=(()=>{function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.publicKey=Q.newBuffer([]),e.prototype.payloadType=Q.newBuffer([]),e.prototype.payload=Q.newBuffer([]),e.prototype.signature=Q.newBuffer([]),e.encode=function(t,r){return r||(r=G_.create()),t.publicKey!=null&&Object.hasOwnProperty.call(t,"publicKey")&&r.uint32(10).bytes(t.publicKey),t.payloadType!=null&&Object.hasOwnProperty.call(t,"payloadType")&&r.uint32(18).bytes(t.payloadType),t.payload!=null&&Object.hasOwnProperty.call(t,"payload")&&r.uint32(26).bytes(t.payload),t.signature!=null&&Object.hasOwnProperty.call(t,"signature")&&r.uint32(42).bytes(t.signature),r},e.decode=function(t,r){t instanceof Qg||(t=Qg.create(t));for(var n=r===void 0?t.len:t.pos+r,i=new Pa.Envelope;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.publicKey=t.bytes();break;case 2:i.payloadType=t.bytes();break;case 3:i.payload=t.bytes();break;case 5:i.signature=t.bytes();break;default:t.skipType(o&7);break}}return i},e.fromObject=function(t){if(t instanceof Pa.Envelope)return t;var r=new Pa.Envelope;return t.publicKey!=null&&(typeof t.publicKey=="string"?Q.base64.decode(t.publicKey,r.publicKey=Q.newBuffer(Q.base64.length(t.publicKey)),0):t.publicKey.length&&(r.publicKey=t.publicKey)),t.payloadType!=null&&(typeof t.payloadType=="string"?Q.base64.decode(t.payloadType,r.payloadType=Q.newBuffer(Q.base64.length(t.payloadType)),0):t.payloadType.length&&(r.payloadType=t.payloadType)),t.payload!=null&&(typeof t.payload=="string"?Q.base64.decode(t.payload,r.payload=Q.newBuffer(Q.base64.length(t.payload)),0):t.payload.length&&(r.payload=t.payload)),t.signature!=null&&(typeof t.signature=="string"?Q.base64.decode(t.signature,r.signature=Q.newBuffer(Q.base64.length(t.signature)),0):t.signature.length&&(r.signature=t.signature)),r},e.toObject=function(t,r){r||(r={});var n={};return r.defaults&&(r.bytes===String?n.publicKey="":(n.publicKey=[],r.bytes!==Array&&(n.publicKey=Q.newBuffer(n.publicKey))),r.bytes===String?n.payloadType="":(n.payloadType=[],r.bytes!==Array&&(n.payloadType=Q.newBuffer(n.payloadType))),r.bytes===String?n.payload="":(n.payload=[],r.bytes!==Array&&(n.payload=Q.newBuffer(n.payload))),r.bytes===String?n.signature="":(n.signature=[],r.bytes!==Array&&(n.signature=Q.newBuffer(n.signature)))),t.publicKey!=null&&t.hasOwnProperty("publicKey")&&(n.publicKey=r.bytes===String?Q.base64.encode(t.publicKey,0,t.publicKey.length):r.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),t.payloadType!=null&&t.hasOwnProperty("payloadType")&&(n.payloadType=r.bytes===String?Q.base64.encode(t.payloadType,0,t.payloadType.length):r.bytes===Array?Array.prototype.slice.call(t.payloadType):t.payloadType),t.payload!=null&&t.hasOwnProperty("payload")&&(n.payload=r.bytes===String?Q.base64.encode(t.payload,0,t.payload.length):r.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),t.signature!=null&&t.hasOwnProperty("signature")&&(n.signature=r.bytes===String?Q.base64.encode(t.signature,0,t.signature.length):r.bytes===Array?Array.prototype.slice.call(t.signature):t.signature),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Bn.default.util.toJSONOptions)},e})();a();var qr=v(Mr(),1),Fa=qr.default.Reader,Xg=qr.default.Writer,te=qr.default.util,St=qr.default.roots.default||(qr.default.roots.default={}),Zg=St.PeerRecord=(()=>{function e(t){if(this.addresses=[],t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.peerId=te.newBuffer([]),e.prototype.seq=te.Long?te.Long.fromBits(0,0,!0):0,e.prototype.addresses=te.emptyArray,e.encode=function(t,r){if(r||(r=Xg.create()),t.peerId!=null&&Object.hasOwnProperty.call(t,"peerId")&&r.uint32(10).bytes(t.peerId),t.seq!=null&&Object.hasOwnProperty.call(t,"seq")&&r.uint32(16).uint64(t.seq),t.addresses!=null&&t.addresses.length)for(var n=0;n<t.addresses.length;++n)St.PeerRecord.AddressInfo.encode(t.addresses[n],r.uint32(26).fork()).ldelim();return r},e.decode=function(t,r){t instanceof Fa||(t=Fa.create(t));for(var n=r===void 0?t.len:t.pos+r,i=new St.PeerRecord;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:i.peerId=t.bytes();break;case 2:i.seq=t.uint64();break;case 3:i.addresses&&i.addresses.length||(i.addresses=[]),i.addresses.push(St.PeerRecord.AddressInfo.decode(t,t.uint32()));break;default:t.skipType(o&7);break}}return i},e.fromObject=function(t){if(t instanceof St.PeerRecord)return t;var r=new St.PeerRecord;if(t.peerId!=null&&(typeof t.peerId=="string"?te.base64.decode(t.peerId,r.peerId=te.newBuffer(te.base64.length(t.peerId)),0):t.peerId.length&&(r.peerId=t.peerId)),t.seq!=null&&(te.Long?(r.seq=te.Long.fromValue(t.seq)).unsigned=!0:typeof t.seq=="string"?r.seq=parseInt(t.seq,10):typeof t.seq=="number"?r.seq=t.seq:typeof t.seq=="object"&&(r.seq=new te.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".PeerRecord.addresses: array expected");r.addresses=[];for(var n=0;n<t.addresses.length;++n){if(typeof t.addresses[n]!="object")throw TypeError(".PeerRecord.addresses: object expected");r.addresses[n]=St.PeerRecord.AddressInfo.fromObject(t.addresses[n])}}return r},e.toObject=function(t,r){r||(r={});var n={};if((r.arrays||r.defaults)&&(n.addresses=[]),r.defaults)if(r.bytes===String?n.peerId="":(n.peerId=[],r.bytes!==Array&&(n.peerId=te.newBuffer(n.peerId))),te.Long){var i=new te.Long(0,0,!0);n.seq=r.longs===String?i.toString():r.longs===Number?i.toNumber():i}else n.seq=r.longs===String?"0":0;if(t.peerId!=null&&t.hasOwnProperty("peerId")&&(n.peerId=r.bytes===String?te.base64.encode(t.peerId,0,t.peerId.length):r.bytes===Array?Array.prototype.slice.call(t.peerId):t.peerId),t.seq!=null&&t.hasOwnProperty("seq")&&(typeof t.seq=="number"?n.seq=r.longs===String?String(t.seq):t.seq:n.seq=r.longs===String?te.Long.prototype.toString.call(t.seq):r.longs===Number?new te.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.addresses&&t.addresses.length){n.addresses=[];for(var o=0;o<t.addresses.length;++o)n.addresses[o]=St.PeerRecord.AddressInfo.toObject(t.addresses[o],r)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,qr.default.util.toJSONOptions)},e.AddressInfo=function(){function t(r){if(r)for(var n=Object.keys(r),i=0;i<n.length;++i)r[n[i]]!=null&&(this[n[i]]=r[n[i]])}return t.prototype.multiaddr=te.newBuffer([]),t.encode=function(r,n){return n||(n=Xg.create()),r.multiaddr!=null&&Object.hasOwnProperty.call(r,"multiaddr")&&n.uint32(10).bytes(r.multiaddr),n},t.decode=function(r,n){r instanceof Fa||(r=Fa.create(r));for(var i=n===void 0?r.len:r.pos+n,o=new St.PeerRecord.AddressInfo;r.pos<i;){var u=r.uint32();switch(u>>>3){case 1:o.multiaddr=r.bytes();break;default:r.skipType(u&7);break}}return o},t.fromObject=function(r){if(r instanceof St.PeerRecord.AddressInfo)return r;var n=new St.PeerRecord.AddressInfo;return r.multiaddr!=null&&(typeof r.multiaddr=="string"?te.base64.decode(r.multiaddr,n.multiaddr=te.newBuffer(te.base64.length(r.multiaddr)),0):r.multiaddr.length&&(n.multiaddr=r.multiaddr)),n},t.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.multiaddr="":(i.multiaddr=[],n.bytes!==Array&&(i.multiaddr=te.newBuffer(i.multiaddr)))),r.multiaddr!=null&&r.hasOwnProperty("multiaddr")&&(i.multiaddr=n.bytes===String?te.base64.encode(r.multiaddr,0,r.multiaddr.length):n.bytes===Array?Array.prototype.slice.call(r.multiaddr):r.multiaddr),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,qr.default.util.toJSONOptions)},t}(),e})(),hl=v(Pw(),1);dl.default.util.Long=void 0;dl.default.configure();async function ES(e,t=()=>{}){t(0,"Storing each peerstore key under a single datastore key"),await e.datastore.open();let r={},n=[];for await(let{key:i,value:o}of e.datastore.query({prefix:"/peers"})){n.push(i);let u=i.toString(),[s,c,h,p,w]=u.split("/");if(c==="peers"&&!!["protos","addrs","metadata","keys"].includes(h)&&!!p)if(r[p]=r[p]||{addresses:[],protocols:[],metadata:[]},h==="protos"){let A=Yf.decode(o);r[p].protocols=A.protocols.sort()}else if(h==="addrs"){let A=Zf.decode(o);r[p].addresses=A.addrs.sort((y,m)=>new hl.Multiaddr(y.multiaddr).toString().localeCompare(new hl.Multiaddr(m.multiaddr).toString())),A.certifiedRecord&&A.certifiedRecord.raw&&(r[p].peerRecordEnvelope=A.certifiedRecord.raw)}else h==="metadata"?r[p].metadata.push({key:w,value:o}):h==="keys"&&(r[p].pubKey=o)}t(33,"Read peer data from store");for(let i of n)await e.datastore.delete(i);t(66,"Removed existing peer data from store");for(let i of Object.keys(r)){let o=r[i];o.metadata=o.metadata.sort((s,c)=>s.key.localeCompare(c.key));let u=tl.encode(o).finish();await e.datastore.put(new M(`/peers/${i}`),u)}await e.datastore.close(),t(100,"Stored each peerstore key under a single datastore key")}async function xS(e,t=()=>{}){t(0,"Storing each peerstore key under a multiple datastore keys"),await e.datastore.open();let r={},n=[];for await(let{key:i,value:o}of e.datastore.query({prefix:"/peers"})){n.push(i);let u=i.toString(),[s,c,h]=u.split("/");r[h]=tl.decode(o)}t(33,"Read peer data from store");for(let i of n)await e.datastore.delete(i);t(66,"Removed existing peer data from store");for(let[i,o]of Object.entries(r)){if(o.protocols&&o.protocols.length>0&&await e.datastore.put(new M(`/peers/protos/${i}`),Yf.encode({protocols:o.protocols}).finish()),o.addresses&&o.addresses.length>0){let u=o.peerRecordEnvelope,s;if(u){let c=Yg.decode(u),h=Zg.decode(c.payload);s={raw:u,seq:h.seq}}await e.datastore.put(new M(`/peers/addrs/${i}`),Zf.encode({addrs:o.addresses,certifiedRecord:s}).finish())}if(o.metadata&&o.metadata.length>0)for(let{key:u,value:s}of o.metadata)await e.datastore.put(new M(`/peers/metadata/${i}/${u}`),s);o.pubKey&&await e.datastore.put(new M(`/peers/keys/${i}`),o.pubKey)}await e.datastore.close(),t(100,"Stored each peerstore key under multiple datastore keys")}var Fw={version:12,description:"Store each peerstore peer under a single datastore key",migrate:ES,revert:xS},Ln={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},Wa=[Object.assign({version:1},Ln),Object.assign({version:2},Ln),Object.assign({version:3},Ln),Object.assign({version:4},Ln),Object.assign({version:5},Ln),Object.assign({version:6},Ln),Object.assign({version:7},Ln),Cm,zg,Wg,Gg,Fw];a();a();var $w=v(at(),1),pl={};W(pl,{InvalidValueError:()=>Ui,MissingRepoOptionsError:()=>Vt,NonReversibleMigrationError:()=>Fi,NotInitializedRepoError:()=>Kr,RequiredParameterError:()=>$i});a();var Fi=class extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=Fi.code,this.message=e}};Fi.code="ERR_NON_REVERSIBLE_MIGRATION";var Kr=class extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=Kr.code,this.message=e}};Kr.code="ERR_NOT_INITIALIZED_REPO";var $i=class extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=$i.code,this.message=e}};$i.code="ERR_REQUIRED_PARAMETER";var Ui=class extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=Ui.code,this.message=e}};Ui.code="ERR_INVALID_VALUE";var Vt=class extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=Vt.code,this.message=e}};Vt.code="ERR_MISSING_REPO_OPTIONS";var yl=(0,$w.default)("ipfs:repo:migrator:repo:init");async function Uw(e){if(!e)throw new Vt("Please pass repo options when trying to open a repo");let t=e.root;try{await t.open();let r=await t.has(Mo),n=await t.has(qg);return!r||!n?(yl(`Version entry present: ${r}`),yl(`Config entry present: ${n}`),!1):!0}catch(r){return yl("While checking if repo is initialized error was thrown: "+r.message),!1}finally{if(t!==void 0)try{await t.close()}catch{}}}we();H();async function ml(e){if(!await Uw(e))throw new Kr("Repo is not initialized!");let t=e.root;await t.open();try{return parseInt(T(await t.get(Mo)))}finally{await t.close()}}async function Wo(e,t){if(!t)throw new Vt("Please pass repo options when trying to open a repo");let r=t.root;await r.open(),await r.put(Mo,N(String(e))),await r.close()}var Mw=v(at(),1),Tt=(0,Mw.default)("ipfs:repo:migrator");function _S(e){return e=e||Wa,!Array.isArray(e)||e.length===0?0:e[e.length-1].version}async function jw(e,t,r,n,{ignoreLock:i=!1,onProgress:o,isDryRun:u=!1,migrations:s}){if(s=s||Wa,!e)throw new ht.RequiredParameterError("Path argument is required!");if(!r)throw new ht.RequiredParameterError("repoOptions argument is required!");if(!n)throw new ht.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(n)||n<=0)throw new ht.InvalidValueError("Version has to be positive integer!");t=Qf(t);let c=await ml(t);if(c===n){Tt("Nothing to migrate.");return}if(c>n)throw new ht.InvalidValueError(`Current repo's version (${c}) is higher then toVersion (${n}), you probably wanted to revert it?`);qw(s,c,n);let h;!u&&!i&&(h=await r.repoLock.lock(e));try{for(let p of s){if(n!==void 0&&p.version>n)break;if(!(p.version<=c)){Tt(`Migrating version ${p.version}`);try{if(!u){let w=()=>{};o&&(w=(A,y)=>o(p.version,A.toFixed(2),y)),await p.migrate(t,w)}}catch(w){let A=p.version-1;throw Tt(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${A}`),await Wo(A,t),new Error(`During migration to version ${p.version} exception was raised: ${w.stack||w.message||w}`)}Tt(`Migrating to version ${p.version} finished`)}}u||await Wo(n||_S(s),t),Tt("Repo successfully migrated",n!==void 0?`to version ${n}!`:"to latest version!")}finally{!u&&!i&&h&&await h.close()}}async function zw(e,t,r,n,{ignoreLock:i=!1,onProgress:o,isDryRun:u=!1,migrations:s}){if(s=s||Wa,!e)throw new ht.RequiredParameterError("Path argument is required!");if(!r)throw new ht.RequiredParameterError("repoOptions argument is required!");if(!n)throw new ht.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(n)||n<=0)throw new ht.InvalidValueError("Version has to be positive integer!");t=Qf(t);let c=await ml(t);if(c===n){Tt("Nothing to revert.");return}if(c<n)throw new ht.InvalidValueError(`Current repo's version (${c}) is lower then toVersion (${n}), you probably wanted to migrate it?`);qw(s,n,c,!0);let h;!u&&!i&&(h=await r.repoLock.lock(e)),Tt(`Reverting from version ${c} to ${n}`);try{let p=s.slice().reverse();for(let w of p){if(w.version<=n)break;if(!(w.version>c)){Tt(`Reverting migration version ${w.version}`);try{if(!u){let A=()=>{};o&&(A=(y,m)=>o(w.version,y.toFixed(2),m)),await w.revert(t,A)}}catch(A){let y=w.version;throw Tt(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${y}`),await Wo(y,t),A.message=`During reversion to version ${w.version} exception was raised: ${A.message}`,A}Tt(`Reverting to version ${w.version} finished`)}}u||await Wo(n,t),Tt(`All migrations successfully reverted to version ${n}!`)}finally{!u&&!i&&h&&await h.close()}}function qw(e,t,r,n=!1){let i=0;for(let o of e){if(o.version>r)break;if(o.version>t){if(n&&!o.revert)throw new ht.NonReversibleMigrationError(`It is not possible to revert to version ${t} because migration version ${o.version} is not reversible. Cancelling reversion.`);i++}}if(i!==r-t)throw new ht.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${t} to ${r}`)}var ht=pl,b0=v(Ww(),1);a();var tb=v(eb(),1),rb=tb.default;a();a();a();H();we();var ur="/",nb=new TextEncoder().encode(ur),Qa=nb[0],K=class{constructor(e,t){if(typeof e=="string")this._buf=N(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Qa)throw new Error("Invalid key")}toString(e="utf8"){return T(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new K(e.join(ur))}static random(){return new K(ct().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new K(e):typeof e.uint8Array=="function"?new K(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=nb),this._buf[0]!==Qa){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Qa,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Qa;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;let i=t[n],o=r[n];if(i<o)return!0;if(i>o)return!1}return t.length<r.length}reverse(){return K.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(ur).slice(1)}type(){return NS(this.baseNamespace())}name(){return PS(this.baseNamespace())}instance(e){return new K(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(ur)||(e+=ur),e+=this.type(),new K(e)}parent(){let e=this.list();return e.length===1?new K(ur):new K(e.slice(0,-1).join(ur))}child(e){return this.toString()===ur?e:e.toString()===ur?this:new K(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return K.withNamespaces([...this.namespaces(),...FS(e.map(t=>t.namespaces()))])}};function NS(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function PS(e){let t=e.split(":");return t[t.length-1]}function FS(e){return[].concat(...e)}var ab=v(at(),1);H();we();a();a();var Rn=class extends Error{constructor(e){super(e),this.name="LockExistsError",this.code=Rn.code}};Rn.code="ERR_LOCK_EXISTS";var We=class extends Error{constructor(e){super(e),this.name="NotFoundError",this.code=We.code}};We.code="ERR_NOT_FOUND";var Nn=class extends Error{constructor(e){super(e),this.name="InvalidRepoVersionError",this.code=Nn.code}};Nn.code="ERR_INVALID_REPO_VERSION";var Ho="ERR_REPO_NOT_INITIALIZED",ib="ERR_REPO_ALREADY_OPEN",ob="ERR_REPO_ALREADY_CLOSED";async function Ya(e,t,r){let n=await t(e);if(n)return n;let i=sb(r);return i?new Promise((o,u)=>{let s=i.store("readonly").get(e.toString());s.transaction.onabort=()=>{u(s.transaction.error)},s.transaction.oncomplete=()=>{o(Boolean(s.result))}}):!1}async function Xa(e,t,r,n){if(await r(e))return t(e);let i=sb(n);if(!i)throw new We;return new Promise((o,u)=>{let s=i.store("readonly").get(e.toString());s.transaction.onabort=()=>{u(s.transaction.error)},s.transaction.oncomplete=()=>{if(s.result)return o(s.result);u(new We)}})}function sb(e){let t=e;for(;t.db||t.child;)if(t=t.db||t.child,t.type==="level-js"||t.constructor.name==="Level")return t}var US=(0,ab.default)("ipfs:repo:version"),wl=new K("version");function cb(e){return{async exists(){return Ya(wl,e.has.bind(e),e)},async get(){let t=await Xa(wl,e.get.bind(e),e.has.bind(e),e);return parseInt(T(t),10)},set(t){return e.put(wl,N(String(t)))},async check(t){let r=await this.get();return US("comparing version: %s and %s",r,t),r===t||r===6&&t===7||t===6&&r===7}}}a();a();var bb=v(fb(),1);a();var Jo=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},El=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},lb=e=>globalThis.DOMException===void 0?new El(e):new DOMException(e),hb=e=>{let t=e.reason===void 0?lb("This operation was aborted."):e.reason;return t instanceof Error?t:lb(t)};function xl(e,t,r,n){let i,o=new Promise((u,s)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t===Number.POSITIVE_INFINITY){u(e);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:c}=n;c.aborted&&s(hb(c)),c.addEventListener("abort",()=>{s(hb(c))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{u(r())}catch(p){s(p)}return}let c=typeof r=="string"?r:`Promise timed out after ${t} milliseconds`,h=r instanceof Error?r:new Jo(c);typeof e.cancel=="function"&&e.cancel(),s(h)},t),(async()=>{try{u(await e)}catch(c){s(c)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return o.clear=()=>{clearTimeout(i),i=void 0},o}a();a();function vl(e,t,r){let n=0,i=e.length;for(;i>0;){let o=Math.trunc(i/2),u=n+o;r(e[u],t)<=0?(n=++u,i-=o+1):i=o}return n}var Pn=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},fr,Qo=class{constructor(){fr.set(this,[])}enqueue(e,t){t={priority:0,...t};let r={priority:t.priority,run:e};if(this.size&&Pn(this,fr,"f")[this.size-1].priority>=t.priority){Pn(this,fr,"f").push(r);return}let n=vl(Pn(this,fr,"f"),r,(i,o)=>o.priority-i.priority);Pn(this,fr,"f").splice(n,0,r)}dequeue(){let e=Pn(this,fr,"f").shift();return e==null?void 0:e.run}filter(e){return Pn(this,fr,"f").filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return Pn(this,fr,"f").length}};fr=new WeakMap;var X=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},D=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},oe,Xo,Zo,Gr,oc,es,ec,Ct,Yo,He,tc,Ge,ts,Hr,rc,db,pb,wb,yb,mb,gb,nc,_l,Sl,sc,ic,zS=new Jo,Dl=class extends Error{},Kt=class extends bb.default{constructor(e){var t,r,n,i;if(super(),oe.add(this),Xo.set(this,void 0),Zo.set(this,void 0),Gr.set(this,0),oc.set(this,void 0),es.set(this,void 0),ec.set(this,0),Ct.set(this,void 0),Yo.set(this,void 0),He.set(this,void 0),tc.set(this,void 0),Ge.set(this,0),ts.set(this,void 0),Hr.set(this,void 0),rc.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Qo,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(r=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(i=(n=e.interval)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""}\` (${typeof e.interval})`);X(this,Xo,e.carryoverConcurrencyCount,"f"),X(this,Zo,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),X(this,oc,e.intervalCap,"f"),X(this,es,e.interval,"f"),X(this,He,new e.queueClass,"f"),X(this,tc,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,X(this,rc,e.throwOnTimeout===!0,"f"),X(this,Hr,e.autoStart===!1,"f")}get concurrency(){return D(this,ts,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);X(this,ts,e,"f"),D(this,oe,"m",sc).call(this)}async add(e,t={}){return new Promise((r,n)=>{let i=async()=>{var o,u,s;X(this,Ge,(u=D(this,Ge,"f"),u++,u),"f"),X(this,Gr,(s=D(this,Gr,"f"),s++,s),"f");try{if(!((o=t.signal)===null||o===void 0)&&o.aborted){n(new Dl("The task was aborted."));return}let c=await(this.timeout===void 0&&t.timeout===void 0?e({signal:t.signal}):xl(Promise.resolve(e({signal:t.signal})),t.timeout===void 0?this.timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?D(this,rc,"f"):t.throwOnTimeout)&&n(zS)}));r(c),this.emit("completed",c)}catch(c){n(c),this.emit("error",c)}D(this,oe,"m",wb).call(this)};D(this,He,"f").enqueue(i,t),D(this,oe,"m",nc).call(this),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async r=>this.add(r,t)))}start(){return D(this,Hr,"f")?(X(this,Hr,!1,"f"),D(this,oe,"m",sc).call(this),this):this}pause(){X(this,Hr,!0,"f")}clear(){X(this,He,new(D(this,tc,"f")),"f")}async onEmpty(){D(this,He,"f").size!==0&&await D(this,oe,"m",ic).call(this,"empty")}async onSizeLessThan(e){D(this,He,"f").size<e||await D(this,oe,"m",ic).call(this,"next",()=>D(this,He,"f").size<e)}async onIdle(){D(this,Ge,"f")===0&&D(this,He,"f").size===0||await D(this,oe,"m",ic).call(this,"idle")}get size(){return D(this,He,"f").size}sizeBy(e){return D(this,He,"f").filter(e).length}get pending(){return D(this,Ge,"f")}get isPaused(){return D(this,Hr,"f")}};Xo=new WeakMap,Zo=new WeakMap,Gr=new WeakMap,oc=new WeakMap,es=new WeakMap,ec=new WeakMap,Ct=new WeakMap,Yo=new WeakMap,He=new WeakMap,tc=new WeakMap,Ge=new WeakMap,ts=new WeakMap,Hr=new WeakMap,rc=new WeakMap,oe=new WeakSet,db=function(){return D(this,Zo,"f")||D(this,Gr,"f")<D(this,oc,"f")},pb=function(){return D(this,Ge,"f")<D(this,ts,"f")},wb=function(){var e;X(this,Ge,(e=D(this,Ge,"f"),e--,e),"f"),D(this,oe,"m",nc).call(this),this.emit("next")},yb=function(){this.emit("empty"),D(this,Ge,"f")===0&&this.emit("idle")},mb=function(){D(this,oe,"m",Sl).call(this),D(this,oe,"m",_l).call(this),X(this,Yo,void 0,"f")},gb=function(){let e=Date.now();if(D(this,Ct,"f")===void 0){let t=D(this,ec,"f")-e;if(t<0)X(this,Gr,D(this,Xo,"f")?D(this,Ge,"f"):0,"f");else return D(this,Yo,"f")===void 0&&X(this,Yo,setTimeout(()=>{D(this,oe,"m",mb).call(this)},t),"f"),!0}return!1},nc=function(){if(D(this,He,"f").size===0)return D(this,Ct,"f")&&clearInterval(D(this,Ct,"f")),X(this,Ct,void 0,"f"),D(this,oe,"m",yb).call(this),!1;if(!D(this,Hr,"f")){let e=!D(this,oe,"a",gb);if(D(this,oe,"a",db)&&D(this,oe,"a",pb)){let t=D(this,He,"f").dequeue();return t?(this.emit("active"),t(),e&&D(this,oe,"m",_l).call(this),!0):!1}}return!1},_l=function(){D(this,Zo,"f")||D(this,Ct,"f")!==void 0||(X(this,Ct,setInterval(()=>{D(this,oe,"m",Sl).call(this)},D(this,es,"f")),"f"),X(this,ec,Date.now()+D(this,es,"f"),"f"))},Sl=function(){D(this,Gr,"f")===0&&D(this,Ge,"f")===0&&D(this,Ct,"f")&&(clearInterval(D(this,Ct,"f")),X(this,Ct,void 0,"f")),X(this,Gr,D(this,Xo,"f")?D(this,Ge,"f"):0,"f"),D(this,oe,"m",sc).call(this)},sc=function(){for(;D(this,oe,"m",nc).call(this););},ic=async function(e,t){return new Promise(r=>{let n=()=>{t&&!t()||(this.off(e,n),r())};this.on(e,n)})};a();var xb=qS;function qS(e,t,r){var n,i;if(Array.isArray(t)&&(n=t.slice(0)),typeof t=="string"&&(n=t.split(".")),typeof t=="symbol"&&(n=[t]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");if(i=n.pop(),!i)return!1;Eb(i);for(var o;o=n.shift();)if(Eb(o),typeof e[o]>"u"&&(e[o]={}),e=e[o],!e||typeof e!="object")return!1;return e[i]=r,!0}function Eb(e){if(e=="__proto__"||e=="constructor"||e=="prototype")throw new Error("setting of prototype values not supported")}var ac=v(ve(),1);H();we();var VS=Kt.default?Kt.default:Kt,Al=new K("config");function vb(e){let t=new VS({concurrency:1}),r={async getAll(o={}){let u=await Xa(Al,e.get.bind(e),e.has.bind(e),e);return JSON.parse(T(u))},async get(o,u={}){if(o==null)throw new We(`Key ${o} does not exist in config`);let s=await this.getAll(u),c=Io(s,o);if(c===void 0)throw new We(`Key ${o} does not exist in config`);return c},set(o,u,s={}){if(typeof o!="string"&&!(o instanceof String))throw(0,ac.default)(new Error("Invalid key type: "+typeof o),"ERR_INVALID_KEY");if(u===void 0||u instanceof Uint8Array)throw(0,ac.default)(new Error("Invalid value type: "+typeof u),"ERR_INVALID_VALUE");return t.add(()=>n({key:o,value:u},s.signal))},replace(o,u={}){if(!o||o instanceof Uint8Array)throw(0,ac.default)(new Error("Invalid value type: "+typeof o),"ERR_INVALID_VALUE");return t.add(()=>n({key:void 0,value:o},u.signal))},async exists(){return Ya(Al,e.has.bind(e),e)}};return r;async function n(o,u){if(u&&u.aborted)return;let s=o.key,c=o.value;if(s){let h=await r.getAll();return typeof h=="object"&&h!==null&&xb(h,s,c),i(h)}return i(c)}function i(o){let u=N(JSON.stringify(o,null,2));return e.put(Al,u)}}a();a();a();a();function rs(e){if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Tl(e,t={}){if(!rs(e)&&!Array.isArray(e))throw new TypeError("Expected a plain object or array");let{deep:r,compare:n}=t,i=[],o=[],u=c=>{let h=i.indexOf(c);if(h!==-1)return o[h];let p=[];return i.push(c),o.push(p),p.push(...c.map(w=>Array.isArray(w)?u(w):rs(w)?s(w):w)),p},s=c=>{let h=i.indexOf(c);if(h!==-1)return o[h];let p={},w=Object.keys(c).sort(n);i.push(c),o.push(p);for(let A of w){let y=c[A],m;r&&Array.isArray(y)?m=u(y):m=r&&rs(y)?s(y):y,Object.defineProperty(p,A,{...Object.getOwnPropertyDescriptor(c,A),value:m})}return p};return Array.isArray(e)?r?u(e):e.slice():s(e)}H();we();var Cl=new K("datastore_spec");function _b(e){return{exists(){return e.has(Cl)},async get(){let t=await e.get(Cl);return JSON.parse(T(t))},async set(t){return e.put(Cl,N(JSON.stringify(Tl(t,{deep:!0}))))}}}a();we();var Il=new K("api");function Sb(e){return{async get(){let t=await e.get(Il);return t&&t.toString()},set(t){return e.put(Il,N(t.toString()))},delete(){return e.delete(Il)}}}a();var Cb=v(Fn(),1);a();a();var cc=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},zi=class{constructor(e={}){var t;this.hwm=(t=e.splitLimit)!=null?t:16,this.head=new cc(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return(e==null?void 0:e.byteLength)!=null?e.byteLength:1}push(e){if((e==null?void 0:e.value)!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let t=this.head;this.head=t.next=new cc(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return(e==null?void 0:e.value)!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function Ab(e={}){return WS(t=>{let r=t.shift();if(r==null)return{done:!0};if(r.error!=null)throw r.error;return{done:r.done===!0,value:r.value}},e)}function WS(e,t){t=t!=null?t:{};let r=t.onEnd,n=new zi,i,o,u,s=async()=>n.isEmpty()?u?{done:!0}:await new Promise((g,k)=>{o=B=>{o=null,n.push(B);try{g(e(n))}catch(C){k(C)}return i}}):e(n),c=g=>o!=null?o(g):(n.push(g),i),h=g=>(n=new zi,o!=null?o({error:g}):(n.push({error:g}),i)),p=g=>{if(u)return i;if((t==null?void 0:t.objectMode)!==!0&&(g==null?void 0:g.byteLength)==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return c({done:!1,value:g})},w=g=>u?i:(u=!0,g!=null?h(g):c({done:!0})),A=()=>(n=new zi,w(),{done:!0}),y=g=>(w(g),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:s,return:A,throw:y,push:p,end:w,get readableLength(){return n.size}},r==null)return i;let m=i;return i={[Symbol.asyncIterator](){return this},next(){return m.next()},throw(g){return m.throw(g),r!=null&&(r(g),r=void 0),{done:!0}},return(){return m.return(),r!=null&&(r(),r=void 0),{done:!0}},push:p,end(g){return m.end(g),r!=null&&(r(g),r=void 0),i},get readableLength(){return m.readableLength}},i}var Ib=v($n(),1);q();var kb=v(ve(),1);wa();function Ob(e){return{open(){return e.open()},close(){return e.close()},query(t,r){return e.query(t,r)},queryKeys(t,r){return e.queryKeys(t,r)},async get(t,r){let n=Jr(t);return n.isIdentity?Promise.resolve(n.digest):e.get(t,r)},async*getMany(t,r){for await(let n of t)yield this.get(n,r)},async put(t,r,n){let{isIdentity:i}=Jr(t);i||await e.put(t,r,n)},async*putMany(t,r){let n=Ab({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{await(0,Ib.default)(e.putMany(async function*(){for await(let{key:i,value:o}of t)Jr(i).isIdentity||(yield{key:i,value:o}),n.push({key:i,value:o})}())),n.end()}catch(i){n.end(i)}}),yield*n},has(t,r){let{isIdentity:n}=Jr(t);return n?Promise.resolve(!0):e.has(t,r)},delete(t,r){let{isIdentity:n}=Jr(t);return n?Promise.resolve():e.delete(t,r)},deleteMany(t,r){return e.deleteMany((0,Cb.default)(t,n=>!Jr(n).isIdentity),r)},batch(){let t=e.batch();return{put(r,n){let{isIdentity:i}=Jr(r);i||t.put(r,n)},delete(r){let{isIdentity:n}=Jr(r);n||t.delete(r)},commit:r=>t.commit(r)}}}}function Jr(e){let t=x.asCID(e);if(t==null)throw(0,kb.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return t.multihash.code!==Ci.code?{isIdentity:!1}:{isIdentity:!0,digest:t.multihash.digest}}a();a();var Bb=v(at(),1),Lb=(0,Bb.default)("ipfs:repo:lock:memory"),Rb="repo.lock",ns={};async function GS(e){let t=e+"/"+Rb;if(Lb("locking %s",t),ns[t]===!0)throw new Rn(`Lock already being held for file: ${t}`);return ns[t]=!0,{async close(){ns[t]&&delete ns[t]}}}async function JS(e){let t=e+"/"+Rb;return Lb(`checking lock: ${t}`),Boolean(ns[t])}var uc={lock:GS,locked:JS},Nb={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:uc};a();var kl={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};a();q();var Ub=v(ve(),1),Mb=v(at(),1),Ll=v(Ol(),1);a();vn();or();var Fb=v(ve(),1);xe();Ee();function is(e){let t=x.asCID(e);if(t==null)throw(0,Fb.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");let r=I.encode(t.multihash.bytes);return new K("/"+r.slice(1).toUpperCase(),!1)}function Bl(e){return G(I.decode(`b${e.toString().toLowerCase().substring(1)}`))}a();var $b=v(at(),1),YS=(0,$b.default)("ipfs:repo:utils:walk-dag");async function*qi(e,t,r,n){try{let i=await t.get(e,n),o=await r(e.code),u=_n({bytes:i,cid:e,codec:o});for(let[,s]of u.links())yield s,yield*qi(s,t,r,n)}catch(i){throw YS("Could not walk DAG for CID",e.toString(),i),i}}a();var Fe={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};a();var os=class extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(let[t,r]of e)this.onEviction(t,r.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){let r=t.get(e);return this._getItemValue(e,r)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(let e of this.oldCache){let[t,r]=e;this.cache.has(t)||this._deleteIfExpired(t,r)===!1&&(yield e)}for(let e of this.cache){let[t,r]=e;this._deleteIfExpired(t,r)===!1&&(yield e)}}get(e){if(this.cache.has(e)){let t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){let t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:r=this.maxAge}={}){let n=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:n}):this._set(e,{value:t,expiry:n})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){let t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");let t=[...this._entriesAscending()],r=t.length-e;r<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(r>0&&this._emitEvictions(t.slice(0,r)),this.oldCache=new Map(t.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache){let[t,r]=e;this._deleteIfExpired(t,r)===!1&&(yield[t,r.value])}for(let e of this.oldCache){let[t,r]=e;this.cache.has(t)||this._deleteIfExpired(t,r)===!1&&(yield[t,r.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){let r=e[t],[n,i]=r;this._deleteIfExpired(n,i)===!1&&(yield[n,i.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){let r=e[t],[n,i]=r;this.cache.has(n)||this._deleteIfExpired(n,i)===!1&&(yield[n,i.value])}}*entriesAscending(){for(let[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(let t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(let[r,n]of this.entriesAscending())e.call(t,n,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}},XS=2048;function ZS(e){let t=`Invalid type '${e}', must be one of {direct, indirect, recursive, all}`;return(0,Ub.default)(new Error(t),"ERR_INVALID_PIN_TYPE")}var fc=class{constructor({pinstore:e,blockstore:t,loadCodec:r}){this.pinstore=e,this.blockstore=t,this.loadCodec=r,this.log=(0,Mb.default)("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(e,t={}){await this.blockstore.get(e,t);let r={depth:0};return e.version!==0&&(r.version=e.version),e.code!==xt&&(r.codec=e.code),t.metadata&&(r.metadata=t.metadata),this.pinstore.put(is(e),ir(r))}unpin(e,t){return this.pinstore.delete(is(e),t)}async pinRecursively(e,t={}){await this.fetchCompleteDag(e,t);let r={depth:1/0};e.version!==0&&(r.version=e.version),e.code!==xt&&(r.codec=e.code),t.metadata&&(r.metadata=t.metadata),await this.pinstore.put(is(e),ir(r))}async*directKeys(e){for await(let t of this.pinstore.query({filters:[r=>Le(r.value).depth===0]})){let r=Le(t.value),n=r.version||0,i=r.codec!=null?r.codec:xt,o=Bl(t.key);yield{cid:x.create(n,i,o),metadata:r.metadata}}}async*recursiveKeys(e){for await(let t of this.pinstore.query({filters:[r=>Le(r.value).depth===1/0]})){let r=Le(t.value),n=r.version||0,i=r.codec!=null?r.codec:xt,o=Bl(t.key);yield{cid:x.create(n,i,o),metadata:r.metadata}}}async*indirectKeys(e){for await(let{cid:t}of this.recursiveKeys())for await(let r of qi(t,this.blockstore,this.loadCodec,e)){let n=[Fe.recursive];(await this.isPinnedWithType(r,n)).pinned||(yield r)}}async isPinnedWithType(e,t,r){Array.isArray(t)||(t=[t]);let n=t.includes(Fe.all),i=t.includes(Fe.direct),o=t.includes(Fe.recursive),u=t.includes(Fe.indirect);if(o||i||n){let h=await(0,Ll.default)(this.pinstore.query({prefix:is(e).toString(),filters:[p=>{if(n)return!0;let w=Le(p.value);return t.includes(w.depth===0?Fe.direct:Fe.recursive)}],limit:1}));if(h){let p=Le(h.value);return{cid:e,pinned:!0,reason:p.depth===0?Fe.direct:Fe.recursive,metadata:p.metadata}}}let s=this;async function*c(h,p){for await(let{cid:w}of p)for await(let A of qi(w,s.blockstore,s.loadCodec))if(A.equals(h)){yield w;return}}if(n||u){let h=await(0,Ll.default)(c(e,this.recursiveKeys()));if(h)return{cid:e,pinned:!0,reason:Fe.indirect,parent:h}}return{cid:e,pinned:!1}}async fetchCompleteDag(e,t={}){var i;let r=new os({maxSize:(i=t.cidCacheMaxSize)!=null?i:XS}),n=async(o,u)=>{if(r.has(o.toString()))return;r.set(o.toString(),!0);let s=await this.blockstore.get(o,u),c=await this.loadCodec(o.code),h=_n({bytes:s,cid:o,codec:c});await Promise.all([...h.links()].map(([,p])=>n(p,u)))};await n(e,t)}static checkPinType(e){if(typeof e!="string"||!Object.keys(Fe).includes(e))throw ZS(e);return!0}};a();var qb=v(Vi(),1),Vb=v(ve(),1);function Kb(e,t){return{open(){return t.open()},close(){return t.close()},query(r,n){return t.query(r,n)},queryKeys(r,n){return t.queryKeys(r,n)},async get(r,n){return t.get(r,n)},async*getMany(r,n){yield*t.getMany(r,n)},async put(r,n,i){await t.put(r,n,i)},async*putMany(r,n){yield*t.putMany(r,n)},has(r,n){return t.has(r,n)},async delete(r,n){return await zb(r,e),t.delete(r,n)},deleteMany(r,n){return t.deleteMany((0,qb.default)(r,async i=>(await zb(i,e),i)),n)},batch(){return t.batch()}}}async function zb(e,t){let{pinned:r,reason:n}=await t.isPinnedWithType(e,Fe.all);if(r)throw(0,Vb.default)(new Error(`pinned: ${n}`),"ERR_BLOCK_PINNED")}a();a();var Rl=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},Nl=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},Wb=e=>globalThis.DOMException===void 0?new Nl(e):new DOMException(e),Hb=e=>{let t=e.reason===void 0?Wb("This operation was aborted."):e.reason;return t instanceof Error?t:Wb(t)};function Pl(e,t){let{milliseconds:r,fallback:n,message:i,customTimers:o={setTimeout,clearTimeout}}=t,u,s=new Promise((c,h)=>{if(typeof r!="number"||Math.sign(r)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(r===Number.POSITIVE_INFINITY){c(e);return}if(t.signal){let{signal:p}=t;p.aborted&&h(Hb(p)),p.addEventListener("abort",()=>{h(Hb(p))})}u=o.setTimeout.call(void 0,()=>{if(n){try{c(n())}catch(A){h(A)}return}let p=typeof i=="string"?i:`Promise timed out after ${r} milliseconds`,w=i instanceof Error?i:new Rl(p);typeof e.cancel=="function"&&e.cancel(),h(w)},r),(async()=>{try{c(await e)}catch(p){h(p)}finally{o.clearTimeout.call(void 0,u)}})()});return s.clear=()=>{o.clearTimeout.call(void 0,u),u=void 0},s}a();a();var Gb=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");a();var Fl="lock:worker:request-read",$l="lock:worker:release-read",Ul="lock:master:grant-read",Ml="lock:worker:request-write",jl="lock:worker:release-write",zl="lock:master:grant-write";a();var Qr={},Ki=e=>{e.addEventListener("message",t=>{Ki.dispatchEvent("message",e,t)}),e.port!=null&&e.port.addEventListener("message",t=>{Ki.dispatchEvent("message",e,t)})};Ki.addEventListener=(e,t)=>{Qr[e]==null&&(Qr[e]=[]),Qr[e].push(t)};Ki.removeEventListener=(e,t)=>{Qr[e]!=null&&(Qr[e]=Qr[e].filter(r=>r===t))};Ki.dispatchEvent=function(e,t,r){Qr[e]!=null&&Qr[e].forEach(n=>n(t,r))};var ql=Ki,Jb=(e,t,r,n,i)=>(o,u)=>{if(u.data.type!==r)return;let s={type:u.data.type,name:u.data.name,identifier:u.data.identifier};e.dispatchEvent(new MessageEvent(t,{data:{name:s.name,handler:async()=>(o.postMessage({type:i,name:s.name,identifier:s.identifier}),await new Promise(c=>{let h=p=>{if(p==null||p.data==null)return;let w={type:p.data.type,name:p.data.name,identifier:p.data.identifier};w.type===n&&w.identifier===s.identifier&&(o.removeEventListener("message",h),c())};o.addEventListener("message",h)}))}}))},Qb=(e,t,r,n)=>async()=>{let i=Gb();return globalThis.postMessage({type:t,identifier:i,name:e}),await new Promise(o=>{let u=s=>{if(s==null||s.data==null)return;let c={type:s.data.type,identifier:s.data.identifier};c.type===r&&c.identifier===i&&(globalThis.removeEventListener("message",u),o(()=>{globalThis.postMessage({type:n,identifier:i,name:e})}))};globalThis.addEventListener("message",u)})},tD={singleProcess:!1},Yb=e=>{if(e=Object.assign({},tD,e),Boolean(globalThis.document)||e.singleProcess){let t=new EventTarget;return ql.addEventListener("message",Jb(t,"requestReadLock",Fl,$l,Ul)),ql.addEventListener("message",Jb(t,"requestWriteLock",Ml,jl,zl)),t}return{isWorker:!0,readLock:t=>Qb(t,Fl,Ul,$l),writeLock:t=>Qb(t,Ml,zl,jl)}},Un={},Yr;async function Vl(e,t){let r,n=new Promise(i=>{r=i});return e.add(async()=>await Pl((async()=>await new Promise(i=>{r(()=>{i()})}))(),{milliseconds:t.timeout})),await n}var rD=(e,t)=>{if(Yr.isWorker===!0)return{readLock:Yr.readLock(e,t),writeLock:Yr.writeLock(e,t)};let r=new Kt({concurrency:1}),n;return{async readLock(){if(n!=null)return await Vl(n,t);n=new Kt({concurrency:t.concurrency,autoStart:!1});let i=n,o=Vl(n,t);return r.add(async()=>(i.start(),await i.onIdle().then(()=>{n===i&&(n=null)}))),await o},async writeLock(){return n=null,await Vl(r,t)}}},nD={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function Kl(e){let t=Object.assign({},nD,e);return Yr==null&&(Yr=Yb(t),Yr.isWorker!==!0&&(Yr.addEventListener("requestReadLock",r=>{Un[r.data.name]!=null&&Un[r.data.name].readLock().then(async n=>await r.data.handler().finally(()=>n()))}),Yr.addEventListener("requestWriteLock",async r=>{Un[r.data.name]!=null&&Un[r.data.name].writeLock().then(async n=>await r.data.handler().finally(()=>n()))}))),Un[t.name]==null&&(Un[t.name]=rD(t.name,t)),Un[t.name]}a();q();var d0=v(at(),1),p0=v(t0(),1);a();a();a();var lc=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},Wi=class{constructor(e={}){var t;this.hwm=(t=e.splitLimit)!=null?t:16,this.head=new lc(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return(e==null?void 0:e.byteLength)!=null?e.byteLength:1}push(e){if((e==null?void 0:e.value)!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let t=this.head;this.head=t.next=new lc(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return(e==null?void 0:e.value)!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function r0(e={}){return aD(t=>{let r=t.shift();if(r==null)return{done:!0};if(r.error!=null)throw r.error;return{done:r.done===!0,value:r.value}},e)}function aD(e,t){t=t!=null?t:{};let r=t.onEnd,n=new Wi,i,o,u,s=async()=>n.isEmpty()?u?{done:!0}:await new Promise((g,k)=>{o=B=>{o=null,n.push(B);try{g(e(n))}catch(C){k(C)}return i}}):e(n),c=g=>o!=null?o(g):(n.push(g),i),h=g=>(n=new Wi,o!=null?o({error:g}):(n.push({error:g}),i)),p=g=>{if(u)return i;if((t==null?void 0:t.objectMode)!==!0&&(g==null?void 0:g.byteLength)==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return c({done:!1,value:g})},w=g=>u?i:(u=!0,g!=null?h(g):c({done:!0})),A=()=>(n=new Wi,w(),{done:!0}),y=g=>(w(g),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:s,return:A,throw:y,push:p,end:w,get readableLength(){return n.size}},r==null)return i;let m=i;return i={[Symbol.asyncIterator](){return this},next(){return m.next()},throw(g){return m.throw(g),r!=null&&(r(g),r=void 0),{done:!0}},return(){return m.return(),r!=null&&(r(),r=void 0),{done:!0}},push:p,end(g){return m.end(g),r!=null&&(r(g),r=void 0),i},get readableLength(){return m.readableLength}},i}var l0=v(hc(),1),fD=(...e)=>{let t;for(;e.length>0;)t=e.shift()(t);return t},h0=e=>e!=null&&(typeof e[Symbol.asyncIterator]=="function"||typeof e[Symbol.iterator]=="function"||typeof e.next=="function"),Hl=e=>e!=null&&typeof e.sink=="function"&&h0(e.source),lD=e=>t=>{let r=e.sink(t);if(r.then!=null){let n=r0({objectMode:!0});return r.then(()=>{n.end()},i=>{n.end(i)}),(0,l0.default)(n,async function*(){yield*e.source,n.end()}())}return e.source};function Gl(e,...t){if(Hl(e)){let n=e;e=()=>n.source}else if(h0(e)){let n=e;e=()=>n}let r=[e,...t];if(r.length>1&&Hl(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)Hl(r[n])&&(r[n]=lD(r[n]));return fD(...r)}var Jl=v(hc(),1),dc=v(Vi(),1),y0=v(Fn(),1);xe();var ss=(0,d0.default)("ipfs:repo:gc"),hD=qt().code,dD=256,pD=new K("/local/filesroot");function m0({gcLock:e,pins:t,blockstore:r,root:n,loadCodec:i}){async function*o(){let u=Date.now();ss("Creating set of marked blocks");let s=await e.writeLock();try{let c=await yD({pins:t,blockstore:r,root:n,loadCodec:i}),h=r.queryKeys({});yield*mD({blockstore:r},c,h),ss(`Complete (${Date.now()-u}ms)`)}finally{s()}}return o}async function yD({pins:e,blockstore:t,loadCodec:r,root:n}){let i=async function*(){let s;try{s=await n.get(pD)}catch(h){if(h.code===hD){ss("No blocks in MFS");return}throw h}let c=x.decode(s);yield c,yield*qi(c,t,r)}(),o=(0,Jl.default)((0,dc.default)(e.recursiveKeys(),({cid:s})=>s),e.indirectKeys(),(0,dc.default)(e.directKeys(),({cid:s})=>s),i),u=new Set;for await(let s of(0,Jl.default)(o,i))u.add(I.encode(s.multihash.bytes));return u}async function*mD({blockstore:e},t,r){let n=0,i=0;yield*Gl((0,p0.default)((0,dc.default)(r,async o=>async function(){n++;try{let u=I.encode(o.multihash.bytes);if(t.has(u))return null;try{await e.delete(o),i++}catch(s){return{err:new Error(`Could not delete block with CID ${o}: ${s.message}`)}}return{cid:o}}catch(u){let s=`Could delete block with CID ${o}`;return ss(s,u),{err:new Error(s+`: ${u.message}`)}}}),dD),o=>(0,y0.default)(o,Boolean)),ss(`Marked set has ${t.size} unique blocks. Blockstore has ${n} blocks. Deleted ${i} blocks.`)}var $e=(0,w0.default)("ipfs:repo"),gD=Number.MAX_SAFE_INTEGER,wD="repoAutoMigrate",Yl=class{constructor(e,t,r,n){if(typeof e!="string")throw new Error("missing repo path");if(typeof t!="function")throw new Error("missing codec loader");this.options=rb(Nb,n),this.closed=!0,this.path=e,this.root=r.root,this.datastore=r.datastore,this.keys=r.keys;let i=r.blocks,o=r.pins;this.pins=new fc({pinstore:o,blockstore:i,loadCodec:t});let u=Kb(this.pins,i);this.blocks=Ob(u),this.version=cb(this.root),this.config=vb(this.root),this.spec=_b(this.root),this.apiAddr=Sb(this.root),this.gcLock=Kl({name:e,singleProcess:this.options.repoOwner!==!1}),this.gc=m0({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:t})}async init(e){$e("initializing at: %s",this.path),await this._openRoot(),await this.config.replace(bD(e)),await this.spec.set(ED(e)),await this.version.set(12)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch{return!1}}async open(){if(!this.closed)throw(0,Mn.default)(new Error("repo is already open"),ib);$e("opening at: %s",this.path);try{if(await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),$e("acquired repo.lock"),!await this.version.check(12))if(await this._isAutoMigrationEnabled())await this._migrate(12,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys});else throw new Nn("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");$e("creating datastore"),await this.datastore.open(),$e("creating blocks"),await this.blocks.open(),$e("creating keystore"),await this.keys.open(),$e("creating pins"),await this.pins.pinstore.open(),this.closed=!1,$e("all opened")}catch(e){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(t){$e("error removing lock",t)}throw e}}async _openRoot(){try{await this.root.open()}catch(e){if(e.message!=="Already open")throw e}}async _openLock(){let e=await this.options.repoLock.lock(this.path);if(typeof e.close!="function")throw(0,Mn.default)(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return e}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){$e("init check");let e;try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(t){throw t.code==="ERR_NOT_FOUND"?(0,Mn.default)(new Error("repo is not initialized yet"),Ho,{path:this.path}):t}if(!e)throw(0,Mn.default)(new Error("repo is not initialized yet"),Ho,{path:this.path})}async close(){if(this.closed)throw(0,Mn.default)(new Error("repo is already closed"),ob);$e("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(e){if(e.code!==Ho&&!e.message.startsWith("ENOENT"))throw e}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map(e=>e&&e.close())),$e("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){let[e,t,r,n,i]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),g0(this.datastore),g0(this.keys)]),o=t.size+n+i;return{repoPath:this.path,storageMax:e,version:r,numObjects:t.count,repoSize:o}}throw(0,Mn.default)(new Error("repo is not initialized yet"),Ho,{path:this.path})}async _isAutoMigrationEnabled(){if(this.options.autoMigrate!==void 0)return this.options.autoMigrate;let e;try{e=await this.config.get(wD)}catch(t){if(t.code===We.code)e=!0;else throw t}return e}async _migrate(e,t){return await this.version.get()>e?($e(`reverting to version ${e}`),zw(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):($e(`migrating to version ${e}`),jw(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{let e=await this.config.get("Datastore.StorageMax");return BigInt((0,b0.default)(e))}catch{return BigInt(gD)}}async _blockStat(){let e=BigInt(0),t=BigInt(0);if(this.blocks)for await(let{key:r,value:n}of this.blocks.query({}))e+=BigInt(1),t+=BigInt(n.byteLength),t+=BigInt(r.bytes.byteLength);return{count:e,size:t}}};async function g0(e){let t=BigInt(0);for await(let r of e.query({}))t+=BigInt(r.value.byteLength),t+=BigInt(r.key.uint8Array().byteLength);return t}function pc(e,t,r,n){return new Yl(e,t,r,n)}function bD(e){return e.Datastore=Object.assign({},kl,Io(e,"datastore")),e}function ED(e){let t={...kl.Spec,...Io(e,"Datastore.Spec")};return{type:t.type,mounts:t.mounts.map(r=>({mountpoint:r.mountpoint,type:r.child.type,path:r.child.path,shardFunc:r.child.shardFunc}))}}a();a();a();H();we();var lr="/",E0=new TextEncoder().encode(lr),yc=E0[0],ye=class{constructor(e,t){if(typeof e=="string")this._buf=N(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==yc)throw new Error("Invalid key")}toString(e="utf8"){return T(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new ye(e.join(lr))}static random(){return new ye(ct().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new ye(e):typeof e.uint8Array=="function"?new ye(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=E0),this._buf[0]!==yc){let e=new Uint8Array(this._buf.byteLength+1);e.fill(yc,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===yc;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;let i=t[n],o=r[n];if(i<o)return!0;if(i>o)return!1}return t.length<r.length}reverse(){return ye.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(lr).slice(1)}type(){return xD(this.baseNamespace())}name(){return vD(this.baseNamespace())}instance(e){return new ye(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(lr)||(e+=lr),e+=this.type(),new ye(e)}parent(){let e=this.list();return e.length===1?new ye(lr):new ye(e.slice(0,-1).join(lr))}child(e){return this.toString()===lr?e:e.toString()===lr?this:new ye(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return ye.withNamespaces([...this.namespaces(),..._D(e.map(t=>t.namespaces()))])}};function xD(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function vD(e){let t=e.split(":");return t[t.length-1]}function _D(e){return[].concat(...e)}a();a();a();H();we();var hr="/",x0=new TextEncoder().encode(hr),mc=x0[0],Z=class{constructor(e,t){if(typeof e=="string")this._buf=N(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==mc)throw new Error("Invalid key")}toString(e="utf8"){return T(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Z(e.join(hr))}static random(){return new Z(ct().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Z(e):typeof e.uint8Array=="function"?new Z(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=x0),this._buf[0]!==mc){let e=new Uint8Array(this._buf.byteLength+1);e.fill(mc,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===mc;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;let i=t[n],o=r[n];if(i<o)return!0;if(i>o)return!1}return t.length<r.length}reverse(){return Z.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(hr).slice(1)}type(){return SD(this.baseNamespace())}name(){return DD(this.baseNamespace())}instance(e){return new Z(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(hr)||(e+=hr),e+=this.type(),new Z(e)}parent(){let e=this.list();return e.length===1?new Z(hr):new Z(e.slice(0,-1).join(hr))}child(e){return this.toString()===hr?e:e.toString()===hr?this:new Z(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Z.withNamespaces([...this.namespaces(),...AD(e.map(t=>t.namespaces()))])}};function SD(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function DD(e){let t=e.split(":");return t[t.length-1]}function AD(e){return[].concat(...e)}a();var v0="SHARDING",_0="_README";a();a();var D0=v(as(),1),gc=(e,t)=>async function*(){yield*(await(0,D0.default)(e)).sort(t)}(),Xl=v($n(),1),jn=v(Fn(),1),Zl=v(cs(),1),It=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,r){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:r,value:n}of e)await this.put(r,n,t),yield{key:r,value:n}}async*getMany(e,t={}){for await(let r of e)yield this.get(r,t)}async*deleteMany(e,t={}){for await(let r of e)await this.delete(r,t),yield r}batch(){let e=[],t=[];return{put(r,n){e.push({key:r,value:n})},delete(r){t.push(r)},commit:async r=>{await(0,Xl.default)(this.putMany(e,r)),e=[],await(0,Xl.default)(this.deleteMany(t,r)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let r=this._all(e,t);if(e.prefix!=null&&(r=(0,jn.default)(r,n=>n.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(r=e.filters.reduce((n,i)=>(0,jn.default)(n,i),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((n,i)=>gc(n,i),r)),e.offset!=null){let n=0;r=(0,jn.default)(r,()=>n++>=e.offset)}return e.limit!=null&&(r=(0,Zl.default)(r,e.limit)),r}queryKeys(e,t){let r=this._allKeys(e,t);if(e.prefix!=null&&(r=(0,jn.default)(r,n=>n.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(r=e.filters.reduce((n,i)=>(0,jn.default)(n,i),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((n,i)=>gc(n,i),r)),e.offset!=null){let n=0;r=(0,jn.default)(r,()=>n++>=e.offset)}return e.limit!=null&&(r=(0,Zl.default)(r,e.limit)),r}};a();var Xr=class extends It{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,t){this.data[e.toString()]=t}async get(e){if(!await this.has(e))throw qt();return this.data[e.toString()]}async has(e){return this.data[e.toString()]!==void 0}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map(([e,t])=>({key:new Z(e),value:t}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>new Z(e))}};a();v(Vi(),1);a();a();new Z(v0);new Z(_0);a();v(Fn(),1);v(cs(),1);v(hc(),1);a();a();var Wt=v(at(),1);Re();xe();Ti();Wt.default.formatters.b=e=>e==null?"undefined":z.baseEncode(e);Wt.default.formatters.t=e=>e==null?"undefined":I.baseEncode(e);Wt.default.formatters.m=e=>e==null?"undefined":Pr.baseEncode(e);Wt.default.formatters.p=e=>e==null?"undefined":e.toString();Wt.default.formatters.c=e=>e==null?"undefined":e.toString();Wt.default.formatters.k=e=>e==null?"undefined":e.toString();function C0(e){return Object.assign((0,Wt.default)(e),{error:(0,Wt.default)(`${e}:error`),trace:(0,Wt.default)(`${e}:trace`)})}a();a();v($n(),1);C0("datastore:core:tiered");a();var Is=v(Fn(),1),KE=v(Vi(),1),Kh=v(cs(),1),Wh=v(k0(),1),WE=v(VE(),1),un=class extends It{constructor(e,t={}){super(),this.db=typeof e=="string"?new WE.Level(e,{...t,keyEncoding:"utf8",valueEncoding:"view"}):e,this.opts={createIfMissing:!0,compression:!1,...t}}async open(){try{await this.db.open(this.opts)}catch(e){throw ft.dbOpenFailedError(e)}}async put(e,t){try{await this.db.put(e.toString(),t)}catch(r){throw ft.dbWriteFailedError(r)}}async get(e){let t;try{t=await this.db.get(e.toString())}catch(r){throw r.notFound?ft.notFoundError(r):ft.dbWriteFailedError(r)}return t}async has(e){try{await this.db.get(e.toString())}catch(t){if(t.notFound)return!1;throw t}return!0}async delete(e){try{await this.db.del(e.toString())}catch(t){throw ft.dbDeleteFailedError(t)}}close(){return this.db&&this.db.close()}batch(){let e=[];return{put:(t,r)=>{e.push({type:"put",key:t.toString(),value:r})},delete:t=>{e.push({type:"del",key:t.toString()})},commit:()=>this.db.batch(e)}}query(e){let t=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(t=e.filters.reduce((i,o)=>(0,Is.default)(i,o),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((i,o)=>(0,Wh.default)(i,o),t));let{offset:r,limit:n}=e;if(r){let i=0;t=(0,Is.default)(t,()=>i++>=r)}return n&&(t=(0,Kh.default)(t,n)),t}queryKeys(e){let t=(0,KE.default)(this._query({values:!1,prefix:e.prefix}),({key:i})=>i);Array.isArray(e.filters)&&(t=e.filters.reduce((i,o)=>(0,Is.default)(i,o),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((i,o)=>(0,Wh.default)(i,o),t));let{offset:r,limit:n}=e;if(r){let i=0;t=(0,Is.default)(t,()=>i++>=r)}return n&&(t=(0,Kh.default)(t,n)),t}_query(e){let t={keys:!0,keyEncoding:"buffer",values:e.values};if(e.prefix!=null){let n=e.prefix.toString();t.gte=n,t.lt=n+"\xFF"}let r=this.db.iterator(t);if(r[Symbol.asyncIterator])return q3(r);if(r.next!=null&&r.end!=null)return V3(r);throw new Error("Level returned incompatible iterator")}};async function*q3(e){for await(let[t,r]of e)yield{key:new ye(t,!1),value:r};await e.close()}function V3(e){return{[Symbol.asyncIterator](){return{next:()=>new Promise((t,r)=>{e.next((n,i,o)=>{if(n)return r(n);if(i==null)return e.end(u=>{if(u)return r(u);t({done:!0,value:void 0})});t({done:!1,value:{key:new ye(i,!1),value:o}})})}),return:()=>new Promise((t,r)=>{e.end(n=>{if(n)return r(n);t({done:!0,value:void 0})})})}}}}a();var Qh=v($n(),1);a();a();var Kc=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},io=class{constructor(e={}){var t;this.hwm=(t=e.splitLimit)!=null?t:16,this.head=new Kc(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return(e==null?void 0:e.byteLength)!=null?e.byteLength:1}push(e){if((e==null?void 0:e.value)!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let t=this.head;this.head=t.next=new Kc(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return(e==null?void 0:e.value)!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function Hh(e={}){return K3(t=>{let r=t.shift();if(r==null)return{done:!0};if(r.error!=null)throw r.error;return{done:r.done===!0,value:r.value}},e)}function K3(e,t){t=t!=null?t:{};let r=t.onEnd,n=new io,i,o,u,s=async()=>n.isEmpty()?u?{done:!0}:await new Promise((g,k)=>{o=B=>{o=null,n.push(B);try{g(e(n))}catch(C){k(C)}return i}}):e(n),c=g=>o!=null?o(g):(n.push(g),i),h=g=>(n=new io,o!=null?o({error:g}):(n.push({error:g}),i)),p=g=>{if(u)return i;if((t==null?void 0:t.objectMode)!==!0&&(g==null?void 0:g.byteLength)==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return c({done:!1,value:g})},w=g=>u?i:(u=!0,g!=null?h(g):c({done:!0})),A=()=>(n=new io,w(),{done:!0}),y=g=>(w(g),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:s,return:A,throw:y,push:p,end:w,get readableLength(){return n.size}},r==null)return i;let m=i;return i={[Symbol.asyncIterator](){return this},next(){return m.next()},throw(g){return m.throw(g),r!=null&&(r(g),r=void 0),{done:!0}},return(){return m.return(),r!=null&&(r(),r=void 0),{done:!0}},push:p,end(g){return m.end(g),r!=null&&(r(g),r=void 0),i},get readableLength(){return m.readableLength}},i}a();H();we();var Er="/",HE=new TextEncoder().encode(Er),Wc=HE[0],Ae=class{constructor(e,t){if(typeof e=="string")this._buf=N(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Wc)throw new Error("Invalid key")}toString(e="utf8"){return T(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Ae(e.join(Er))}static random(){return new Ae(ct().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Ae(e):typeof e.uint8Array=="function"?new Ae(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=HE),this._buf[0]!==Wc){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Wc,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Wc;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;let i=t[n],o=r[n];if(i<o)return!0;if(i>o)return!1}return t.length<r.length}reverse(){return Ae.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Er).slice(1)}type(){return W3(this.baseNamespace())}name(){return H3(this.baseNamespace())}instance(e){return new Ae(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Er)||(e+=Er),e+=this.type(),new Ae(e)}parent(){let e=this.list();return e.length===1?new Ae(Er):new Ae(e.slice(0,-1).join(Er))}child(e){return this.toString()===Er?e:e.toString()===Er?this:new Ae(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Ae.withNamespaces([...this.namespaces(),...G3(e.map(t=>t.namespaces()))])}};function W3(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function H3(e){let t=e.split(":");return t[t.length-1]}function G3(e){return[].concat(...e)}q();or();Ee();xe();Re();var QE=v(ve(),1);a();var Gh=v($n(),1),ri=v(Fn(),1),Jh=v(cs(),1),JE=v(as(),1),GE=(e,t)=>async function*(){yield*(await(0,JE.default)(e)).sort(t)}(),oo=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,r){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:r,value:n}of e)await this.put(r,n,t),yield{key:r,value:n}}async*getMany(e,t={}){for await(let r of e)yield this.get(r,t)}async*deleteMany(e,t={}){for await(let r of e)await this.delete(r,t),yield r}batch(){let e=[],t=[];return{put(r,n){e.push({key:r,value:n})},delete(r){t.push(r)},commit:async r=>{await(0,Gh.default)(this.putMany(e,r)),e=[],await(0,Gh.default)(this.deleteMany(t,r)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let r=this._all(e,t);if(e.prefix!=null&&(r=(0,ri.default)(r,n=>n.key.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(r=e.filters.reduce((n,i)=>(0,ri.default)(n,i),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((n,i)=>GE(n,i),r)),e.offset!=null){let n=0;r=(0,ri.default)(r,()=>n++>=(e.offset||0))}return e.limit!=null&&(r=(0,Jh.default)(r,e.limit)),r}queryKeys(e,t){let r=this._allKeys(e,t);if(e.prefix!=null&&(r=(0,ri.default)(r,n=>n.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(r=e.filters.reduce((n,i)=>(0,ri.default)(n,i),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((n,i)=>GE(n,i),r)),e.offset!=null){let n=0;r=(0,ri.default)(r,()=>n++>=e.offset)}return e.limit!=null&&(r=(0,Jh.default)(r,e.limit)),r}};function so(e){let t=x.asCID(e);if(!t)throw(0,QE.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return new Ae("/"+I.encode(t.multihash.bytes).slice(1).toUpperCase(),!1)}function fn(e){return x.createV1(ot,G(I.decode("b"+e.toString().slice(1).toLowerCase())))}function Yh(e){let t=e.substring(0,1);if(t==="/")return Yh(e.substring(1));let r;t.toLowerCase()==="b"?r=o=>I.decode(o.toLowerCase()).subarray(2):t.toLowerCase()==="c"?r=o=>Qu.decode(o.toLowerCase()).subarray(2):t==="z"?r=o=>z.decode(o).subarray(2):t==="Q"?r=o=>z.decode("z"+o):r=o=>I.decode("b"+o.toLowerCase()).subarray(2);let n;for(let o=1;o<e.length;o++)try{n=r(e.substring(0,o))}catch(u){if(u.message!=="Unexpected end of data")throw u}let i="/C";return n&&(i=`/${I.encode(n).slice(1,-1).toUpperCase()||"C"}`),i}function J3(e){return{...e,prefix:e.prefix?Yh(e.prefix):void 0,filters:e.filters?e.filters.map(t=>r=>t({key:fn(r.key),value:r.value})):void 0,orders:e.orders?e.orders.map(t=>(r,n)=>t({key:fn(r.key),value:r.value},{key:fn(n.key),value:n.value})):void 0}}function Q3(e){return{...e,prefix:e.prefix?Yh(e.prefix):void 0,filters:e.filters?e.filters.map(t=>r=>t(fn(r))):void 0,orders:e.orders?e.orders.map(t=>(r,n)=>t(fn(r),fn(n))):void 0}}var Hc=class extends oo{constructor(e){super(),this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,t){for await(let{key:r,value:n}of this.child.query(J3(e),t))yield{key:fn(r),value:n}}async*queryKeys(e,t){for await(let r of this.child.queryKeys(Q3(e),t))yield fn(r)}async get(e,t){return this.child.get(so(e),t)}async*getMany(e,t){for await(let r of e)yield this.get(r,t)}async put(e,t,r){await this.child.put(so(e),t,r)}async*putMany(e,t){let r=Hh({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{let n=this.child;await(0,Qh.default)(this.child.putMany(async function*(){for await(let i of e){let o=so(i.key);await n.has(o,t)||(yield{key:o,value:i.value}),r.push(i)}}())),r.end()}catch(n){r.end(n)}}),yield*r}has(e,t){return this.child.has(so(e),t)}delete(e,t){return this.child.delete(so(e),t)}deleteMany(e,t){let r=Hh({objectMode:!0});return(0,Qh.default)(this.child.deleteMany(async function*(){for await(let n of e)yield so(n),r.push(n);r.end()}(),t)).catch(n=>{r.end(n)}),r}};function YE(e,t,r){let n=r.path||"ipfs";return pc(n,i=>t.getCodec(i),{root:new un(n,{prefix:"",version:2}),blocks:new Hc(new un(`${n}/blocks`,{prefix:"",version:2})),datastore:new un(`${n}/datastore`,{prefix:"",version:2}),keys:new un(`${n}/keys`,{prefix:"",version:2}),pins:new un(`${n}/pins`,{prefix:"",version:2})},{autoMigrate:r.autoMigrate,onMigrationProgress:r.onMigrationProgress||e,repoLock:uc})}a();a();q();a();var u1=v(i1(),1),f1=v(s1(),1);a();var Z3=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;L.nanosecond=L.ns=1/1e6;L.\u00B5s=L.\u03BCs=L.us=L.microsecond=1/1e3;L.millisecond=L.ms=L[""]=1;L.second=L.sec=L.s=L.ms*1e3;L.minute=L.min=L.m=L.s*60;L.hour=L.hr=L.h=L.m*60;L.day=L.d=L.h*24;L.week=L.wk=L.w=L.d*7;L.month=L.b=L.d*(365.25/12);L.year=L.yr=L.y=L.d*365.25;function L(e="",t="ms"){var r=null;return e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2"),e.replace(Z3,function(n,i,o){o=a1(o),o&&(r=(r||0)+parseFloat(i,10)*o)}),r&&r/(a1(t)||1)}function a1(e){return L[e]||L[e.toLowerCase().replace(/s$/,"")]}var c1=L;a();var xr=class extends Error{constructor(e="request timed out"){super(e),this.name="TimeoutError",this.code=xr.code}};xr.code="ERR_TIMEOUT";function yt(e,t){return(...r)=>{let n=r[t!=null?t:r.length-1];if(!n||!n.timeout)return e(...r);let i=typeof n.timeout=="string"?c1(n.timeout):n.timeout,o=new u1.TimeoutController(i);n.signal=(0,f1.anySignal)([n.signal,o.signal]);let u=e(...r),s=new Promise((p,w)=>{o.signal.addEventListener("abort",()=>{w(new xr)})}),c=Date.now(),h=()=>{if(o.signal.aborted)throw new xr;if(Date.now()-c>i)throw o.abort(),new xr};return u[Symbol.asyncIterator]?async function*(){let p=u[Symbol.asyncIterator]();try{for(;;){let{value:w,done:A}=await Promise.race([p.next(),s]);if(A)break;h(),yield w}}catch(w){throw h(),w}finally{o.clear(),p.return&&p.return()}}():(async()=>{try{let p=await Promise.race([u,s]);return h(),p}catch(p){throw h(),p}finally{o.clear()}})()}}a();var Qt=v(at(),1);Re();xe();Ti();Qt.default.formatters.b=e=>e==null?"undefined":z.baseEncode(e);Qt.default.formatters.t=e=>e==null?"undefined":I.baseEncode(e);Qt.default.formatters.m=e=>e==null?"undefined":Pr.baseEncode(e);Qt.default.formatters.p=e=>e==null?"undefined":e.toString();Qt.default.formatters.c=e=>e==null?"undefined":e.toString();Qt.default.formatters.k=e=>e==null?"undefined":e.toString();function Jc(e){return Object.assign((0,Qt.default)(e),{error:(0,Qt.default)(`${e}:error`),trace:(0,Qt.default)(`${e}:trace`)})}or();vf();a();Re();var ed=async({cid:e,load:t,seen:r})=>{r=r||new Set;let n=e.toString(z);if(r.has(n))return;let i=await t(e);if(r.add(n),i!==null)for(let[,o]of i.links())await ed({cid:o,load:t,seen:r})},l1=Jc("ipfs:components:dag:import"),eA=[ot,xf];function h1({repo:e,preload:t,codecs:r}){async function*n(i,o={}){o.preload!==!1&&t(i);let u=x.asCID(i);if(!u)throw new Error(`Unexpected error converting CID type: ${i}`);l1(`Exporting ${u} as car`);let{writer:s,out:c}=await Nr.create([u]),h=null;(async()=>{try{let p=tA(e,s,{signal:o.signal,timeout:o.timeout},r);await ed({cid:u,load:p})}catch(p){h=p}finally{s.close()}})();for await(let p of c){if(h)break;yield p}if(h)throw h}return yt(n)}function tA(e,t,r,n){return async i=>{let o=await n.getCodec(i.code);if(!o)throw new Error(`Can't decode links in block with codec 0x${i.code.toString(16)} to form complete DAG`);let u=await e.blocks.get(i,r);return l1(`Adding block ${i} to car`),await t.put({cid:i,bytes:u}),eA.includes(i.code)?null:_n({bytes:u,cid:i,codec:o})}}a();var ax=v(Ol(),1),cx=v(p1(),1);a();a();Re();xe();Ee();a();a();a();a();a();a();a();a();a();a();a();H();a();var Os={},ad={},fA=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];fA.forEach(e=>{let t=lA(...e);ad[t.code]=t,Os[t.name]=t});function lA(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(i)}}function ue(e){if(typeof e=="number"){if(ad[e]!=null)return ad[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(Os[e]!=null)return Os[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}q();xe();Re();ko();Ee();v(Be(),1);H();we();jr();var cd=Object.values(An).map(e=>e.decoder);(function(){let e=cd[0].or(cd[1]);return cd.slice(2).forEach(t=>e=e.or(t)),e})();v(Be(),1);jr();H();v(Be(),1);q();Re();v(ve(),1);H();Va();ue("dns").code,ue("dns4").code,ue("dns6").code,ue("dnsaddr").code;ue("p2p").code,ue("ipfs").code;a();a();a();a();a();H();a();var Bs={},gd={},RA=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];RA.forEach(e=>{let t=NA(...e);gd[t.code]=t,Bs[t.name]=t});function NA(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(i)}}function fe(e){if(typeof e=="number"){if(gd[e]!=null)return gd[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(Bs[e]!=null)return Bs[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}q();xe();Re();ko();Ee();v(Be(),1);H();we();jr();var wd=Object.values(An).map(e=>e.decoder);(function(){let e=wd[0].or(wd[1]);return wd.slice(2).forEach(t=>e=e.or(t)),e})();v(Be(),1);jr();H();v(Be(),1);q();Re();v(ve(),1);H();Va();fe("dns").code,fe("dns4").code,fe("dns6").code,fe("dnsaddr").code;fe("p2p").code,fe("ipfs").code;q();v(nx(),1);H();q();a();H();we();var _r="/",ix=new TextEncoder().encode(_r),cu=ix[0],Ce=class{constructor(e,t){if(typeof e=="string")this._buf=N(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==cu)throw new Error("Invalid key")}toString(e="utf8"){return T(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Ce(e.join(_r))}static random(){return new Ce(ct().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Ce(e):typeof e.uint8Array=="function"?new Ce(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=ix),this._buf[0]!==cu){let e=new Uint8Array(this._buf.byteLength+1);e.fill(cu,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===cu;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;let i=t[n],o=r[n];if(i<o)return!0;if(i>o)return!1}return t.length<r.length}reverse(){return Ce.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(_r).slice(1)}type(){return ET(this.baseNamespace())}name(){return xT(this.baseNamespace())}instance(e){return new Ce(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(_r)||(e+=_r),e+=this.type(),new Ce(e)}parent(){let e=this.list();return e.length===1?new Ce(_r):new Ce(e.slice(0,-1).join(_r))}child(e){return this.toString()===_r?e:e.toString()===_r?this:new Ce(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Ce.withNamespaces([...this.namespaces(),...vT(e.map(t=>t.namespaces()))])}};function ET(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function xT(e){let t=e.split(":");return t[t.length-1]}function vT(e){return[].concat(...e)}var Bd=v(ve(),1);a();q();var Od=v(ve(),1),ox="/ipfs/";function uu(e){if(e instanceof Uint8Array)try{e=x.decode(e)}catch(i){throw(0,Od.default)(i,"ERR_INVALID_CID")}let t=x.asCID(e);if(t)return{cid:t,path:void 0};e=e.toString(),e.startsWith(ox)&&(e=e.substring(ox.length));let r=e.split("/"),n;try{t=x.parse(r.shift()||"")}catch(i){throw(0,Od.default)(i,"ERR_INVALID_CID")}return r.length&&(n=`/${r.join("/")}`),{cid:t,path:n}}new Ce("/local/filesroot");var sx=async function(e,t,r,n={}){let{cid:i,path:o}=uu(r);o&&(n.path=o);let u=i,s=n.path||"";if(s.startsWith("/")&&(s=s.substring(1)),n.path)try{for await(let{value:c,remainderPath:h}of fu(i,n.path,t,e,{signal:n.signal})){if(!x.asCID(c))break;s=h,u=c}}catch(c){throw c.message.startsWith("Object has no property")&&(c.message=`no link named "${s.split("/")[0]}" under ${u}`,c.code="ERR_NO_LINK"),c}return{cid:u,remainderPath:s||""}},fu=async function*(e,t,r,n,i){let o=async h=>{let p=await r.getCodec(h.code),w=await n.blocks.get(h,i);return p.decode(w)},u=t.split("/").filter(Boolean),s=await o(e),c=e;for(;u.length;){let h=u.shift();if(!h)throw(0,Bd.default)(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(e.code===xt&&Array.isArray(s.Links)){let p=s.Links.find(w=>w.Name===h);if(p){yield{value:p.Hash,remainderPath:u.join("/")},s=await o(p.Hash),c=p.Hash;continue}}if(Object.prototype.hasOwnProperty.call(s,h))s=s[h],yield{value:s,remainderPath:u.join("/")};else throw(0,Bd.default)(new Error(`no link named "${h}" under ${c}`),"ERR_NO_LINK");x.asCID(s)&&(c=s,s=await o(s))}yield{value:s,remainderPath:""}},ux=v(ve(),1);function fx({codecs:e,repo:t,preload:r}){return yt(async function(n,i={}){if(i.preload!==!1&&r(n),i.path){let s=i.localResolve?await(0,ax.default)(fu(n,i.path,e,t,i)):await(0,cx.default)(fu(n,i.path,e,t,i));if(!s)throw(0,ux.default)(new Error("Not found"),"ERR_NOT_FOUND");return s}let o=await e.getCodec(n.code),u=await t.blocks.get(n,i);return{value:o.decode(u),remainderPath:""}})}a();var dx=v(hx(),1),px=v($n(),1),yx=v(Vi(),1),mx=Jc("ipfs:components:dag:import");function gx({repo:e}){async function*t(r,n={}){let i=await e.gcLock.readLock();try{let o={signal:n.signal,timeout:n.timeout},u=(0,dx.default)(r),{value:s,done:c}=await u.peek();if(c)return;s&&u.push(s);let h;s instanceof Uint8Array?h=[u]:h=u;for await(let p of h){let w=await ST(e,o,p);if(n.pinRoots!==!1)for(let A of w){let y="";try{await e.blocks.has(A)?(mx(`Pinning root ${A}`),await e.pins.pinRecursively(A)):y="blockstore: block not found"}catch(m){y=m.message}yield{root:{cid:A,pinErrorMsg:y}}}}}finally{i()}}return yt(t)}async function ST(e,t,r){let n=await Rr.fromIterable(r),i=await n.getRoots();return await(0,px.default)(e.blocks.putMany((0,yx.default)(n,({cid:o,bytes:u})=>(mx(`Import block ${o}`),{key:o,value:u})),{signal:t.signal})),i}a();q();function wx({repo:e,codecs:t,hashers:r,preload:n}){async function i(o,u={}){let s=u.pin?await e.gcLock.readLock():null;try{let c=await t.getCodec(u.storeCodec||"dag-cbor");if(!c)throw new Error(`Unknown storeCodec ${u.storeCodec}, please configure additional BlockCodecs for this IPFS instance`);if(u.inputCodec){if(!(o instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");let m=await t.getCodec(u.inputCodec);if(!m)throw new Error(`Unknown inputCodec ${u.inputCodec}, please configure additional BlockCodecs for this IPFS instance`);o=m.decode(o)}let h=u.version!=null?u.version:1,p=await r.getHasher(u.hashAlg||"sha2-256");if(!p)throw new Error(`Unknown hash algorithm ${u.hashAlg}, please configure additional MultihashHashers for this IPFS instance`);let w=c.encode(o),A=await p.digest(w),y=x.create(h,c.code,A);return await e.blocks.put(y,w,{signal:u.signal}),u.pin&&await e.pins.pinRecursively(y),u.preload!==!1&&n(y),y}finally{s&&s()}}return yt(i)}a();function bx({repo:e,codecs:t,preload:r}){async function n(i,o={}){let{cid:u}=uu(i);return o.preload!==!1&&r(u),sx(e,t,i,o)}return yt(n)}var lu=class{constructor({repo:e,codecs:t,hashers:r,preload:n}){this.export=h1({repo:e,preload:n,codecs:t}),this.get=fx({codecs:t,repo:e,preload:n}),this.import=gx({repo:e}),this.resolve=bx({repo:e,codecs:t,preload:n}),this.put=wx({repo:e,codecs:t,hashers:r,preload:n})}};or();_i();wa();ko();var $d={};W($d,{code:()=>LT,decode:()=>NT,encode:()=>RT,name:()=>BT});a();vn();Ti();a();a();var Ld=class extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){let t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===d.array&&(t.elements++,t.elements!==1&&e.push([44])),t.type===d.map&&(t.elements++,t.elements!==1&&(t.elements%2===1?e.push([44]):e.push([58]))))}[d.uint.major](e,t){this.prefix(e);let r=String(t.value),n=[];for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);e.push(n)}[d.negint.major](e,t){this[d.uint.major](e,t)}[d.bytes.major](e,t){throw new Error(`${rr} unsupported type: Uint8Array`)}[d.string.major](e,t){this.prefix(e);let r=Ks(JSON.stringify(t.value));e.push(r.length>32?po(r):r)}[d.array.major](e,t){this.prefix(e),this.inRecursive.push({type:d.array,elements:0}),e.push([91])}[d.map.major](e,t){this.prefix(e),this.inRecursive.push({type:d.map,elements:0}),e.push([123])}[d.tag.major](e,t){}[d.float.major](e,t){if(t.type.name==="break"){let o=this.inRecursive.pop();if(o){if(o.type===d.array)e.push([93]);else if(o.type===d.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(t.value===void 0)throw new Error(`${rr} unsupported type: undefined`);if(this.prefix(e),t.type.name==="true"){e.push([116,114,117,101]);return}else if(t.type.name==="false"){e.push([102,97,108,115,101]);return}else if(t.type.name==="null"){e.push([110,117,108,108]);return}let r=String(t.value),n=[],i=!1;for(let o=0;o<r.length;o++)n[o]=r.charCodeAt(o),!i&&(n[o]===46||n[o]===101||n[o]===69)&&(i=!0);i||(n.push(46),n.push(48)),e.push(n)}};function DT(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error(`${rr} complex map keys are not supported`);let r=e[0],n=t[0];if(r.type!==d.string||n.type!==d.string)throw new Error(`${rr} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${rr} unexpected duplicate map keys, this is not supported`)}var AT={addBreakTokens:!0,mapSorter:DT};function Rd(e,t){return t=Object.assign({},AT,t),Fu(e,new Ld,t)}a();var fo=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this.pos]}expect(e){if(this.data.length-this.pos<e.length)throw new Error(`${S} unexpected end of input at position ${this.pos}`);for(let t=0;t<e.length;t++)if(this.data[this.pos++]!==e[t])throw new Error(`${S} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){let e=this.pos,t=!1,r=!1,n=u=>{for(;!this.done();){let s=this.ch();if(u.includes(s))this.pos++;else break}};if(this.ch()===45&&(t=!0,this.pos++),this.ch()===48)if(this.pos++,this.ch()===46)this.pos++,r=!0;else return new b(d.uint,0,this.pos-e);if(n([48,49,50,51,52,53,54,55,56,57]),t&&this.pos===e+1)throw new Error(`${S} unexpected token at position ${this.pos}`);if(!this.done()&&this.ch()===46){if(r)throw new Error(`${S} unexpected token at position ${this.pos}`);r=!0,this.pos++,n([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(r=!0,this.pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this.pos++,n([48,49,50,51,52,53,54,55,56,57]));let i=String.fromCharCode.apply(null,this.data.subarray(e,this.pos)),o=parseFloat(i);return r?new b(d.float,o,this.pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(o)?new b(o>=0?d.uint:d.negint,o,this.pos-e):new b(o>=0?d.uint:d.negint,BigInt(i),this.pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${S} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let i=this.pos,o=0;i<this.data.length&&o<65536;i++,o++){let u=this.data[i];if(u===92||u<32||u>=128)break;if(u===34){let s=String.fromCharCode.apply(null,this.data.subarray(this.pos,i));return this.pos=i+1,new b(d.string,s,o)}}let e=this.pos,t=[],r=()=>{if(this.pos+4>=this.data.length)throw new Error(`${S} unexpected end of unicode escape sequence at position ${this.pos}`);let i=0;for(let o=0;o<4;o++){let u=this.ch();if(u>=48&&u<=57)u-=48;else if(u>=97&&u<=102)u=u-97+10;else if(u>=65&&u<=70)u=u-65+10;else throw new Error(`${S} unexpected unicode escape character at position ${this.pos}`);i=i*16+u,this.pos++}return i},n=()=>{let i=this.ch(),o=null,u=i>239?4:i>223?3:i>191?2:1;if(this.pos+u>this.data.length)throw new Error(`${S} unexpected unicode sequence at position ${this.pos}`);let s,c,h,p;switch(u){case 1:i<128&&(o=i);break;case 2:s=this.data[this.pos+1],(s&192)===128&&(p=(i&31)<<6|s&63,p>127&&(o=p));break;case 3:s=this.data[this.pos+1],c=this.data[this.pos+2],(s&192)===128&&(c&192)===128&&(p=(i&15)<<12|(s&63)<<6|c&63,p>2047&&(p<55296||p>57343)&&(o=p));break;case 4:s=this.data[this.pos+1],c=this.data[this.pos+2],h=this.data[this.pos+3],(s&192)===128&&(c&192)===128&&(h&192)===128&&(p=(i&15)<<18|(s&63)<<12|(c&63)<<6|h&63,p>65535&&p<1114112&&(o=p))}o===null?(o=65533,u=1):o>65535&&(o-=65536,t.push(o>>>10&1023|55296),o=56320|o&1023),t.push(o),this.pos+=u};for(;!this.done();){let i=this.ch(),o;switch(i){case 92:if(this.pos++,this.done())throw new Error(`${S} unexpected string termination at position ${this.pos}`);switch(o=this.ch(),this.pos++,o){case 34:case 39:case 92:case 47:t.push(o);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(r());break;default:throw new Error(`${S} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new b(d.string,ku(t),this.pos-e);default:if(i<32)throw new Error(`${S} invalid control character at position ${this.pos}`);i<128?(t.push(i),this.pos++):n()}}throw new Error(`${S} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new b(d.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new b(d.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new b(d.null,null,4);case 102:return this.expect([102,97,108,115,101]),new b(d.false,!1,5);case 116:return this.expect([116,114,117,101]),new b(d.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${S} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this.pos++,this.skipWhitespace(),new b(d.break,void 0,1);if(this.ch()!==44)throw new Error(`${S} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this.pos++,this.skipWhitespace(),new b(d.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new b(d.break,void 0,1);if(this.ch()!==44)throw new Error(`${S} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this.pos++,this.skipWhitespace(),new b(d.break,void 0,1);let e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${S} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${S} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}};function Nd(e,t){return t=Object.assign({tokenizer:new fo(e,t)},t),Le(e,t)}function CT(e){if(e.asCID!==e)return null;let t=x.asCID(e);if(!t)return null;let r=t.toString();return[new b(d.map,1/0,1),new b(d.string,"/",1),new b(d.string,r,r.length),new b(d.break,void 0,1)]}function Ex(e){let t=Pr.encode(e).slice(1);return[new b(d.map,1/0,1),new b(d.string,"/",1),new b(d.map,1/0,1),new b(d.string,"bytes",5),new b(d.string,t,t.length),new b(d.break,void 0,1),new b(d.break,void 0,1)]}function IT(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function kT(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var OT={typeEncoders:{Object:CT,Uint8Array:Ex,Buffer:Ex,undefined:IT,number:kT}},Pd=class extends fo{constructor(e,t){super(e,t),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){let e=this._next();if(e.type===d.map){let t=this._next();if(t.type===d.string&&t.value==="/"){let r=this._next();if(r.type===d.string){if(this._next().type!==d.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(r),new b(d.tag,42,0)}if(r.type===d.map){let n=this._next();if(n.type===d.string&&n.value==="bytes"){let i=this._next();if(i.type===d.string){for(let u=0;u<2;u++)if(this._next().type!==d.break)throw new Error("Invalid encoded Bytes form");let o=Pr.decode(`m${i.value}`);return new b(d.bytes,o,i.value.length)}this.tokenBuffer.push(i)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}this.tokenBuffer.push(t)}return e}},Fd={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Fd.tags[42]=x.parse;var BT="dag-json",LT=297,RT=e=>Rd(e,OT),NT=e=>{let t=Object.assign(Fd,{tokenizer:new Pd(e,Fd)});return Nd(e,t)},Ud={};W(Ud,{code:()=>qT,decode:()=>HT,encode:()=>WT,name:()=>zT,toGeneral:()=>Ix});a();a();a();Ti();function Rt(e){return ga.encode(e).slice(1)}function mt(e){return ga.decode(`u${e}`)}q();function xx(e){let[t,r,n]=e;return{payload:r,signatures:[{protected:t,signature:n}],link:x.decode(mt(r))}}function PT(e){let t={signature:mt(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=mt(e.protected)),t}function vx(e){let t=mt(e.payload);try{x.decode(t)}catch{throw new Error("Not a valid DagJWS")}return{payload:t,signatures:e.signatures.map(PT)}}function FT(e){let t={signature:Rt(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Rt(e.protected)),t}function _x(e){let t={payload:Rt(e.payload),signatures:e.signatures.map(FT)};return t.link=x.decode(new Uint8Array(e.payload)),t}a();function Sx(e){let[t,r,n,i,o]=e,u={ciphertext:i,iv:n,protected:t,tag:o};return r&&(u.recipients=[{encrypted_key:r}]),u}function UT(e){let t={};return e.encrypted_key&&(t.encrypted_key=mt(e.encrypted_key)),e.header&&(t.header=e.header),t}function Dx(e){let t={ciphertext:mt(e.ciphertext),protected:mt(e.protected),iv:mt(e.iv),tag:mt(e.tag)};return e.aad&&(t.aad=mt(e.aad)),e.recipients&&(t.recipients=e.recipients.map(UT)),e.unprotected&&(t.unprotected=e.unprotected),t}function MT(e){let t={};return e.encrypted_key&&(t.encrypted_key=Rt(e.encrypted_key)),e.header&&(t.header=e.header),t}function Ax(e){let t={ciphertext:Rt(e.ciphertext),protected:Rt(e.protected),iv:Rt(e.iv),tag:Rt(e.tag)};return e.aad&&(t.aad=Rt(e.aad)),e.recipients&&(t.recipients=e.recipients.map(MT)),e.unprotected&&(t.unprotected=e.unprotected),t}var zT="dag-jose",qT=133;function Tx(e){return"payload"in e&&typeof e.payload=="string"&&"signatures"in e&&Array.isArray(e.signatures)}function VT(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function KT(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function Cx(e){return"ciphertext"in e&&typeof e.ciphertext=="string"&&"iv"in e&&typeof e.iv=="string"&&"protected"in e&&typeof e.protected=="string"&&"tag"in e&&typeof e.tag=="string"}function Ix(e){if(typeof e=="string"){let t=e.split(".");if(t.length===3)return xx(t);if(t.length===5)return Sx(t);throw new Error("Not a valid JOSE string")}if(Tx(e)||Cx(e))return e;throw new Error("Not a valid unencoded JOSE object")}function WT(e){typeof e=="string"&&(e=Ix(e));let t;if(Tx(e))t=vx(e);else if(Cx(e))t=Dx(e);else throw new Error("Not a valid JOSE object");return new Uint8Array(xn(t))}function HT(e){let t;try{t=Ao(e)}catch{throw new Error("Not a valid DAG-JOSE object")}if(VT(t))return _x(t);if(KT(t))return Ax(t);throw new Error("Not a valid DAG-JOSE object")}a();var GT=e=>Promise.reject(new Error(`No codec found for "${e}"`)),hu=class{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||GT;for(let t of e.codecs)this.addCodec(t)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){let t=typeof e=="string"?this._codecsByName:this._codecsByCode;if(t[e])return t[e];let r=await this._loadCodec(e);return t[e]==null&&this.addCodec(r),r}listCodecs(){return Object.values(this._codecsByName)}};a();var JT=e=>Promise.reject(new Error(`No hasher found for "${e}"`)),du=class{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||JT;for(let t of e.hashers)this.addHasher(t)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){let t=typeof e=="string"?this._hashersByName:this._hashersByCode;if(t[e])return t[e];let r=await this._loadHasher(e);return t[e]==null&&this.addHasher(r),r}listHashers(){return Object.values(this._hashersByName)}};a();async function*kx(e){let t=0;for(;t<e.length;)yield e[t++]}var Lx=v(as(),1);vn();a();xe();or();q();Ee();a();var Ox=v(ve(),1);function Bx(e){return e=e||new Error("Not Found"),(0,Ox.default)(e,"ERR_NOT_FOUND")}var pu=class extends oo{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,t){this.data[I.encode(e.multihash.bytes)]=t}async get(e){if(!await this.has(e))throw Bx();return this.data[I.encode(e.multihash.bytes)]}async has(e){return this.data[I.encode(e.multihash.bytes)]!==void 0}async delete(e){delete this.data[I.encode(e.multihash.bytes)]}async*_all(){yield*Object.entries(this.data).map(([e,t])=>({key:x.createV1(ot,G(I.decode(e))),value:t}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>x.createV1(ot,G(I.decode(e))))}},yu=class extends lu{constructor({repo:e,codecs:t,options:r}){let n=Object.values(gm);(r.ipld&&r.ipld.hashers?r.ipld.hashers:[]).forEach(o=>n.push(o));let i=new du({hashers:n,loadHasher:r.ipld&&r.ipld.loadHasher});super({repo:e,codecs:t,hashers:i,preload:o=>{}}),Object.assign(this,pa()),this.repo=e,this.rootCID,this.tx={pending:Sn.create(),checkSize:async o=>{let u=Sn.create();return await u.add(o),u.size},getExistingTx:async()=>{let o={};try{let u=this.tx.pending.last;if(!u)return;o=(await this.tx.pending.get(u)).value}catch{return o}return o},addData:async o=>await this.tx.pending.add(o),addTag:async(o,u)=>await this.tx.add(o,u),add:async(o,u)=>{if(!u)return;u=Object.fromEntries(Object.entries(u).map(([y,m])=>m===void 0?[y,null]:[y,m]));let s=!1,c=await this.tx.getExistingTx()||null;if(c&&c[o])s=c[o]?c[o]:!1;else if(this.rootCID)try{let y=(await this.get(this.rootCID)).value;s=y[o]?y[o]:!1}catch{}let h=await this.tx.pending.add(u),p=c&&Object.keys(c).length!==0?Object.fromEntries(Object.entries(c).filter(([y,m])=>m.hasOwnProperty("obj")&&m.hasOwnProperty("prev"))):null,w=p&&Object.keys(p).length!==0?Object.assign({},p,{[o]:{obj:h,prev:s}}):{[o]:{obj:h,prev:s}},A=await this.tx.pending.add(w);return this.emit("added",A),A},commit:async()=>{let o=await this.tx.getExistingTx(),u={};try{this.rootCID&&(u=(await this.get(this.rootCID)).value);let c=Object.assign({},u,Object.fromEntries(Object.entries(o).filter(([h,p])=>p.hasOwnProperty("obj")&&p.hasOwnProperty("prev"))));this.rootCID=await this.tx.pending.add(c)}catch(c){this.rootCID&&console.log("thats odd",{error:c})}let s=await this.tx.pending.commit();return await this.importBuffer(s),this.tx.pending=Sn.create(),s}}}async latest(e){return(await this.get(this.rootCID,{path:`/${e}/obj`})).value}async importBuffers(e){let t;for(let r of e)t=await this.importBuffer(r);return t}async importBuffer(e){return Rx(this,e)}};async function Rx(e,t){let r=await kx([t]),[{root:n}]=await(0,Lx.default)(e.import(r));return n.cid}async function YT(e={}){let t={name:Ci.name,code:Ci.code,encode:c=>c,decode:c=>c},r=Object.values(wm);[kr,$d,Ud,t].concat(e.ipld&&e.ipld.codecs||[]).forEach(c=>r.push(c));let n=new hu({codecs:r,loadCodec:e.ipld&&e.ipld.loadCodec}),i=e.path||"ipfs",o;e!=null&&e.persist?o=YE(console.log,n,{path:i,autoMigrate:!0}):o=pc(i,c=>n.getCodec(c),{blocks:new pu,datastore:new Xr,root:new Xr,keys:new Xr,pins:new Xr},e);let u={};try{await o.init(u),await o.open()}catch(c){throw c}let s=await o.config.getAll();return new yu({repo:o,codecs:n,options:{...e,repoConfig:s}})}/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*//*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 *//*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *//*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */function create_fragment(e){let t,r;return{c(){t=text("CarTX: "),r=text(e[0])},l(n){t=claim_text(n,"CarTX: "),r=claim_text(n,e[0])},m(n,i){insert_hydration(n,t,i),insert_hydration(n,r,i)},p:noop,i:noop,o:noop,d(n){n&&detach(t),n&&detach(r)}}}function instance(e){let t;return onMount(async()=>{let r;globalThis.dag?r=globalThis.dag:(r=await YT(),globalThis.dag=r);let n="Mobile",i="Landline";await r.tx.pending.add({random:"data"}),await r.tx.add(n,{number:"555-1234"});const o=await r.tx.commit(),u=Object.keys((await r.get(r.rootCID)).value);console.log("tags",u),await r.tx.add(n,{number:"212-555-1234"}),await r.tx.add(i,{number:"555-555-1234"});const s=await r.tx.commit();await r.tx.add(n,{number:"567-555-1234"});const c=await r.tx.commit();let h=(await r.get(r.rootCID,{path:`/${n}/obj/number`})).value;console.log({currentNumber:h});let p=(await r.get(r.rootCID,{path:`/${n}/prev/obj/number`})).value;console.log({prevNumber:p});let w=(await r.get(r.rootCID,{path:`/${n}/prev/prev/obj/number`})).value;console.log({prevPrevNumber:w});let A;globalThis.rebuiltDag?A=globalThis.rebuiltDag:(A=await YT({path:"rebuiltDag"}),globalThis.rebuiltDag=A),await A.importBuffers([o,s,c]);let y=(await A.get(r.rootCID,{path:`/${n}/obj/number`})).value;console.log({rebuiltCurrent:y})}),[t]}class Page extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{})}}export{Page as default};
