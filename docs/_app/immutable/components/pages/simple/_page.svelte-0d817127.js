import{S as x,i as D,s as C,q as s,r as n,b as u,A as i,h as b,o as T}from"../../../chunks/index-4be5796e.js";import"../../../chunks/index-af5622be.js";import{c as g}from"../../../chunks/dagRepo-1c685644.js";function $(r){let e,t;return{c(){e=s("CarTX: "),t=s(r[0])},l(a){e=n(a,"CarTX: "),t=n(a,r[0])},m(a,l){u(a,e,l),u(a,t,l)},p:i,i,o:i,d(a){a&&b(e),a&&b(t)}}}function j(r){let e;return T(async()=>{let t;globalThis.dag?t=globalThis.dag:(t=await g(),globalThis.dag=t);let a="Mobile",l="Landline";await t.tx.pending.add({random:"data"}),await t.tx.add(a,{number:"555-1234"});const m=await t.tx.commit(),c=Object.keys((await t.get(t.rootCID)).value);console.log("tags",c),await t.tx.add(a,{number:"212-555-1234"}),await t.tx.add(l,{number:"555-555-1234"});const d=await t.tx.commit();await t.tx.add(a,{number:"567-555-1234"});const f=await t.tx.commit();let p=(await t.get(t.rootCID,{path:`/${a}/obj/number`})).value;console.log({currentNumber:p});let w=(await t.get(t.rootCID,{path:`/${a}/prev/obj/number`})).value;console.log({prevNumber:w});let h=(await t.get(t.rootCID,{path:`/${a}/prev/prev/obj/number`})).value;console.log({prevPrevNumber:h});let o;globalThis.rebuiltDag?o=globalThis.rebuiltDag:(o=await g({path:"rebuiltDag"}),globalThis.rebuiltDag=o),await o.importBuffers([m,d,f]);let v=(await o.get(t.rootCID,{path:`/${a}/obj/number`})).value;console.log({rebuiltCurrent:v})}),[e]}class k extends x{constructor(e){super(),D(this,e,j,$,C,{})}}export{k as default};
