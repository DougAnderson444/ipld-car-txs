import{S as h,i as w,s as D,q as s,r as n,b as u,A as i,h as b,o as x}from"../../../chunks/index-4be5796e.js";import"../../../chunks/index-0a678716.js";import{c as g}from"../../../chunks/dagRepo-db5f9830.js";function T(l){let a,t;return{c(){a=s("CarTX: "),t=s(l[0])},l(e){a=n(e,"CarTX: "),t=n(e,l[0])},m(e,o){u(e,a,o),u(e,t,o)},p:i,i,o:i,d(e){e&&b(a),e&&b(t)}}}function C(l){let a;return x(async()=>{let t;globalThis.dag?t=globalThis.dag:(t=await g(),globalThis.dag=t);let e="Mobile",o="Landline";await t.tx.add(e,{number:"555-1234"});const m=await t.tx.commit();await t.tx.add(e,{number:"212-555-1234"}),await t.tx.add(o,{number:"555-555-1234"});const c=await t.tx.commit();let f=(await t.get(t.rootCID,{path:`/${e}/current/number`})).value;console.log({currentNumber:f});let p=(await t.get(t.rootCID,{path:`/${e}/prev/number`})).value;console.log({prevNumber:p});let r;globalThis.rebuiltDag?r=globalThis.rebuiltDag:(r=await g({path:"rebuiltDag"}),globalThis.rebuiltDag=r),await r.importBuffers([m,c]);let d=(await r.get(t.rootCID,{path:`/${e}/current/number`})).value;console.log({rebuiltCurrent:d})}),[a]}class y extends h{constructor(a){super(),w(this,a,C,T,D,{})}}export{y as default};
