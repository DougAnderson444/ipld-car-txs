import{H as ye,S as $,i as x,s as Z,e as B,b as L,f as m,g as Y,t as b,d as U,h as _,I as De,J as we,o as he,B as re,k as M,a as X,l as z,m as V,c as W,n as k,F as D,K as Dt,C as se,D as oe,E as fe,q as j,r as F,u as ne,L as _e,v as q,w as J,x as K,y as Q,M as de,N as te,A as N,O as be,P as It,Q as Le,R as Nt,T as ve,U as Xt,V as Wt,W as Yt,G as Ut,X as Ht,Y as qt,Z as Jt,_ as Kt,$ as Qt,a0 as Zt,p as le,a1 as Gt,a2 as pe,a3 as ae,a4 as ce,a5 as ke,a6 as Me,a7 as ze,a8 as $t,a9 as Vt,aa as Bt}from"../../chunks/index-4be5796e.js";import{_ as xt}from"../../chunks/preload-helper-aa6bc0ce.js";import{C as At,T as en}from"../../chunks/index-0a678716.js";import{w as tn}from"../../chunks/index-ffd7719c.js";function Mt(i){const e=i-1;return e*e*e+1}function nn(i,{from:e,to:n},t={}){const l=getComputedStyle(i),o=l.transform==="none"?"":l.transform,[r,f]=l.transformOrigin.split(" ").map(parseFloat),s=e.left+e.width*r/n.width-(n.left+r),a=e.top+e.height*f/n.height-(n.top+f),{delay:c=0,duration:u=w=>Math.sqrt(w)*120,easing:g=Mt}=t;return{delay:c,duration:ye(u)?u(Math.sqrt(s*s+a*a)):u,easing:g,css:(w,P)=>{const S=P*s,I=P*a,E=w+P*e.width/n.width,d=w+P*e.height/n.height;return`transform: ${o} translate(${S}px, ${I}px) scale(${E}, ${d});`}}}const ln=i=>({}),je=i=>({}),rn=i=>({}),Fe=i=>({}),sn=i=>({}),Re=i=>({});function Xe(i){let e,n,t,l,o,r,f,s,a,c;const u=i[6].key,g=re(u,i,i[5],Re),w=g||on(i),P=i[6].current,S=re(P,i,i[5],Fe),I=S||fn();let E=i[1]&&We(i);return{c(){e=M("div"),w&&w.c(),n=X(),t=M("div"),I&&I.c(),o=X(),E&&E.c(),this.h()},l(d){e=z(d,"DIV",{id:!0,class:!0});var O=V(e);w&&w.l(O),n=W(O),t=z(O,"DIV",{class:!0,id:!0});var T=V(t);I&&I.l(T),T.forEach(_),o=W(O),E&&E.l(O),O.forEach(_),this.h()},h(){k(t,"class","m-1 p-1 bg-blue-600/80 rounded-lg"),k(t,"id",l=i[2].toString()+"/current"),k(e,"id",r=i[2].toString()),k(e,"class","m-1 p-2 bg-blue-400 text-white rounded-lg w-fit")},m(d,O){L(d,e,O),w&&w.m(e,null),D(e,n),D(e,t),I&&I.m(t,null),D(e,o),E&&E.m(e,null),s=!0,a||(c=Dt(f=i[3].call(null,e,{dataset:{cid:i[2].toString()}})),a=!0)},p(d,O){g?g.p&&(!s||O&32)&&se(g,u,d,d[5],s?fe(u,d[5],O,sn):oe(d[5]),Re):w&&w.p&&(!s||O&1)&&w.p(d,s?O:-1),S&&S.p&&(!s||O&32)&&se(S,P,d,d[5],s?fe(P,d[5],O,rn):oe(d[5]),Fe),(!s||O&4&&l!==(l=d[2].toString()+"/current"))&&k(t,"id",l),d[1]?E?(E.p(d,O),O&2&&m(E,1)):(E=We(d),E.c(),m(E,1),E.m(e,null)):E&&(Y(),b(E,1,1,()=>{E=null}),U()),(!s||O&4&&r!==(r=d[2].toString()))&&k(e,"id",r),f&&ye(f.update)&&O&4&&f.update.call(null,{dataset:{cid:d[2].toString()}})},i(d){s||(m(w,d),m(I,d),m(E),s=!0)},o(d){b(w,d),b(I,d),b(E),s=!1},d(d){d&&_(e),w&&w.d(d),I&&I.d(d),E&&E.d(),a=!1,c()}}}function on(i){let e;return{c(){e=j(i[0])},l(n){e=F(n,i[0])},m(n,t){L(n,e,t)},p(n,t){t&1&&ne(e,n[0])},d(n){n&&_(e)}}}function fn(i){let e;return{c(){e=j("Current")},l(n){e=F(n,"Current")},m(n,t){L(n,e,t)},d(n){n&&_(e)}}}function We(i){let e,n,t;const l=i[6].prev,o=re(l,i,i[5],je),r=o||an();return{c(){e=M("div"),r&&r.c(),this.h()},l(f){e=z(f,"DIV",{class:!0,id:!0});var s=V(e);r&&r.l(s),s.forEach(_),this.h()},h(){k(e,"class","m-1 p-1 bg-slate-400/50 rounded-lg"),k(e,"id",n=i[2].toString()+"/prev")},m(f,s){L(f,e,s),r&&r.m(e,null),t=!0},p(f,s){o&&o.p&&(!t||s&32)&&se(o,l,f,f[5],t?fe(l,f[5],s,ln):oe(f[5]),je),(!t||s&4&&n!==(n=f[2].toString()+"/prev"))&&k(e,"id",n)},i(f){t||(m(r,f),t=!0)},o(f){b(r,f),t=!1},d(f){f&&_(e),r&&r.d(f)}}}function an(i){let e;return{c(){e=j("Prev")},l(n){e=F(n,"Prev")},m(n,t){L(n,e,t)},d(n){n&&_(e)}}}function cn(i){let e,n,t=i[0]&&Xe(i);return{c(){t&&t.c(),e=B()},l(l){t&&t.l(l),e=B()},m(l,o){t&&t.m(l,o),L(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=Xe(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(Y(),b(t,1,1,()=>{t=null}),U())},i(l){n||(m(t),n=!0)},o(l){b(t),n=!1},d(l){t&&t.d(l),l&&_(e)}}}function un(i,e,n){let{$$slots:t={},$$scope:l}=e,{key:o}=e,{current:r}=e,{prev:f}=e,{cid:s}=e;const a=De("connectable"),c=we();return he(async()=>{r&&c("createLink",{source:{dataset:{cid:`${s.toString()}/current`}},target:{dataset:{cid:r.toString()}}}),f&&c("createLink",{source:{dataset:{cid:`${s.toString()}/prev`}},target:{dataset:{cid:f.toString()}}})}),i.$$set=u=>{"key"in u&&n(0,o=u.key),"current"in u&&n(4,r=u.current),"prev"in u&&n(1,f=u.prev),"cid"in u&&n(2,s=u.cid),"$$scope"in u&&n(5,l=u.$$scope)},[o,f,s,a,r,l,t]}class zt extends ${constructor(e){super(),x(this,e,un,cn,Z,{key:0,current:4,prev:1,cid:2})}}function Ye(i,e,n){const t=i.slice();return t[8]=e[n][0],t[9]=e[n][1].current,t[10]=e[n][1].prev,t}function Ue(i){let e,n,t,l,o,r;return{c(){e=M("div"),n=j(i[1]),this.h()},l(f){e=z(f,"DIV",{id:!0,class:!0});var s=V(e);n=F(s,i[1]),s.forEach(_),this.h()},h(){k(e,"id",t=i[0].toString()),k(e,"class","mr-1 p-2 border-emerald-50 bg-green-800 text-white rounded-lg w-fit h-fit")},m(f,s){L(f,e,s),D(e,n),o||(r=Dt(l=i[3].call(null,e,{dataset:{cid:i[0].toString()}})),o=!0)},p(f,s){s&2&&ne(n,f[1]),s&1&&t!==(t=f[0].toString())&&k(e,"id",t),l&&ye(l.update)&&s&1&&l.update.call(null,{dataset:{cid:f[0].toString()}})},d(f){f&&_(e),o=!1,r()}}}function He(i){let e,n,t=i[2],l=[];for(let r=0;r<t.length;r+=1)l[r]=qe(Ye(i,t,r));const o=r=>b(l[r],1,1,()=>{l[r]=null});return{c(){e=M("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=z(r,"DIV",{class:!0});var f=V(e);for(let s=0;s<l.length;s+=1)l[s].l(f);f.forEach(_),this.h()},h(){k(e,"class","flex flex-col")},m(r,f){L(r,e,f);for(let s=0;s<l.length;s+=1)l[s].m(e,null);n=!0},p(r,f){if(f&5){t=r[2];let s;for(s=0;s<t.length;s+=1){const a=Ye(r,t,s);l[s]?(l[s].p(a,f),m(l[s],1)):(l[s]=qe(a),l[s].c(),m(l[s],1),l[s].m(e,null))}for(Y(),s=t.length;s<l.length;s+=1)o(s);U()}},i(r){if(!n){for(let f=0;f<t.length;f+=1)m(l[f]);n=!0}},o(r){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)b(l[f]);n=!1},d(r){r&&_(e),_e(l,r)}}}function qe(i){let e,n;return e=new zt({props:{cid:i[0],key:i[8],current:i[9],prev:i[10]}}),e.$on("createLink",i[5]),{c(){q(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,l){K(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.cid=t[0]),l&4&&(o.key=t[8]),l&4&&(o.current=t[9]),l&4&&(o.prev=t[10]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function hn(i){let e,n,t,l=i[1]&&Ue(i),o=i[2]&&He(i);return{c(){l&&l.c(),e=X(),o&&o.c(),n=B()},l(r){l&&l.l(r),e=W(r),o&&o.l(r),n=B()},m(r,f){l&&l.m(r,f),L(r,e,f),o&&o.m(r,f),L(r,n,f),t=!0},p(r,[f]){r[1]?l?l.p(r,f):(l=Ue(r),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),r[2]?o?(o.p(r,f),f&4&&m(o,1)):(o=He(r),o.c(),m(o,1),o.m(n.parentNode,n)):o&&(Y(),b(o,1,1,()=>{o=null}),U())},i(r){t||(m(o),t=!0)},o(r){b(o),t=!1},d(r){l&&l.d(r),r&&_(e),o&&o.d(r),r&&_(n)}}}function _n(i,e,n){let{block:t}=e;const l=De("connectable");we();let o,r,f,s;he(async()=>{console.log({block:t}),n(0,{cid:o,value:r}=t,o),r!=null&&r.value?n(1,f=r.value):n(2,s=Object.entries(r))});function a(c){de.call(this,i,c)}return i.$$set=c=>{"block"in c&&n(4,t=c.block)},[o,f,s,l,t,a]}class dn extends ${constructor(e){super(),x(this,e,_n,hn,Z,{block:4})}}function Je(i,e,n){const t=i.slice();return t[3]=e[n],t[5]=n,t}function Ke(i){let e,n,t=[...i[0]].reverse(),l=[];for(let r=0;r<t.length;r+=1)l[r]=Qe(Je(i,t,r));const o=r=>b(l[r],1,1,()=>{l[r]=null});return{c(){e=M("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=z(r,"DIV",{class:!0});var f=V(e);for(let s=0;s<l.length;s+=1)l[s].l(f);f.forEach(_),this.h()},h(){k(e,"class","flex flex-row")},m(r,f){L(r,e,f);for(let s=0;s<l.length;s+=1)l[s].m(e,null);n=!0},p(r,f){if(f&1){t=[...r[0]].reverse();let s;for(s=0;s<t.length;s+=1){const a=Je(r,t,s);l[s]?(l[s].p(a,f),m(l[s],1)):(l[s]=Qe(a),l[s].c(),m(l[s],1),l[s].m(e,null))}for(Y(),s=t.length;s<l.length;s+=1)o(s);U()}},i(r){if(!n){for(let f=0;f<t.length;f+=1)m(l[f]);n=!0}},o(r){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)b(l[f]);n=!1},d(r){r&&_(e),_e(l,r)}}}function Qe(i){let e,n,t,l,o,r,f;return o=new dn({props:{block:i[3]}}),o.$on("createLink",i[1]),{c(){e=M("div"),n=j("Block #"),t=j(i[5]),l=X(),q(o.$$.fragment),r=X(),this.h()},l(s){e=z(s,"DIV",{class:!0});var a=V(e);n=F(a,"Block #"),t=F(a,i[5]),l=W(a),J(o.$$.fragment,a),r=W(a),a.forEach(_),this.h()},h(){k(e,"class","bg-slate-200/50 rounded-lg shadow m-2 p-2 border-dashed")},m(s,a){L(s,e,a),D(e,n),D(e,t),D(e,l),K(o,e,null),D(e,r),f=!0},p(s,a){const c={};a&1&&(c.block=s[3]),o.$set(c)},i(s){f||(m(o.$$.fragment,s),f=!0)},o(s){b(o.$$.fragment,s),f=!1},d(s){s&&_(e),Q(o)}}}function mn(i){var l;let e,n,t=((l=i[0])==null?void 0:l.length)>0&&Ke(i);return{c(){t&&t.c(),e=B()},l(o){t&&t.l(o),e=B()},m(o,r){t&&t.m(o,r),L(o,e,r),n=!0},p(o,[r]){var f;((f=o[0])==null?void 0:f.length)>0?t?(t.p(o,r),r&1&&m(t,1)):(t=Ke(o),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(Y(),b(t,1,1,()=>{t=null}),U())},i(o){n||(m(t),n=!0)},o(o){b(t),n=!1},d(o){t&&t.d(o),o&&_(e)}}}function gn(i,e,n){let{blocks:t}=e;De("connectable");function l(o){de.call(this,i,o)}return i.$$set=o=>{"blocks"in o&&n(0,t=o.blocks)},[t,l]}class pn extends ${constructor(e){super(),x(this,e,gn,mn,Z,{blocks:0})}}function kn(i){let e,n,t,l,o;return{c(){e=M("div"),n=M("button"),t=j("Commit Tx"),this.h()},l(r){e=z(r,"DIV",{class:!0});var f=V(e);n=z(f,"BUTTON",{class:!0});var s=V(n);t=F(s,"Commit Tx"),s.forEach(_),f.forEach(_),this.h()},h(){k(n,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-lg justify-end"),k(e,"class","flex flex-row-reverse m-1 p-1 justify-items-end")},m(r,f){L(r,e,f),D(e,n),D(n,t),l||(o=te(n,"click",i[0]),l=!0)},p:N,i:N,o:N,d(r){r&&_(e),l=!1,o()}}}function bn(i,e,n){const t=we();let{tx:l}=e;async function o(r){const f=await l.commit();t("commit",f)}return i.$$set=r=>{"tx"in r&&n(1,l=r.tx)},[o,l]}class vn extends ${constructor(e){super(),x(this,e,bn,kn,Z,{tx:1})}}function Ze(i,e,n){const t=i.slice();return t[5]=e[n][0],t[6]=e[n][1],t}function Ge(i){let e,n,t,l={ctx:i,current:null,token:null,hasCatch:!1,pending:On,then:En,catch:wn,value:1,blocks:[,,,]};return be(n=i[1],l),{c(){e=B(),l.block.c()},l(o){e=B(),l.block.l(o)},m(o,r){L(o,e,r),l.block.m(o,l.anchor=r),l.mount=()=>e.parentNode,l.anchor=e,t=!0},p(o,r){i=o,l.ctx=i,r&2&&n!==(n=i[1])&&be(n,l)||It(l,i,r)},i(o){t||(m(l.block),t=!0)},o(o){for(let r=0;r<3;r+=1){const f=l.blocks[r];b(f)}t=!1},d(o){o&&_(e),l.block.d(o),l.token=null,l=null}}}function wn(i){return{c:N,l:N,m:N,p:N,i:N,o:N,d:N}}function En(i){let e,n,t=Object.entries(i[1]),l=[];for(let r=0;r<t.length;r+=1)l[r]=$e(Ze(i,t,r));const o=r=>b(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=B()},l(r){for(let f=0;f<l.length;f+=1)l[f].l(r);e=B()},m(r,f){for(let s=0;s<l.length;s+=1)l[s].m(r,f);L(r,e,f),n=!0},p(r,f){if(f&11){t=Object.entries(r[1]);let s;for(s=0;s<t.length;s+=1){const a=Ze(r,t,s);l[s]?(l[s].p(a,f),m(l[s],1)):(l[s]=$e(a),l[s].c(),m(l[s],1),l[s].m(e.parentNode,e))}for(Y(),s=t.length;s<l.length;s+=1)o(s);U()}},i(r){if(!n){for(let f=0;f<t.length;f+=1)m(l[f]);n=!0}},o(r){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)b(l[f]);n=!1},d(r){_e(l,r),r&&_(e)}}}function Cn(i){let e,n,t=i[6]+"",l,o;const r=i[4].default,f=re(r,i,i[3],null);return{c(){f&&f.c(),e=X(),n=M("div"),l=j(t),this.h()},l(s){f&&f.l(s),e=W(s),n=z(s,"DIV",{class:!0});var a=V(n);l=F(a,t),a.forEach(_),this.h()},h(){k(n,"class","bg-slate-100 rounded-lg m-1 p-1 w-fit")},m(s,a){f&&f.m(s,a),L(s,e,a),L(s,n,a),D(n,l),o=!0},p(s,a){f&&f.p&&(!o||a&8)&&se(f,r,s,s[3],o?fe(r,s[3],a,null):oe(s[3]),null),(!o||a&2)&&t!==(t=s[6]+"")&&ne(l,t)},i(s){o||(m(f,s),o=!0)},o(s){b(f,s),o=!1},d(s){f&&f.d(s),s&&_(e),s&&_(n)}}}function Ln(i){let e,n;return e=new Ie({props:{get:i[0],node:i[6].current}}),{c(){q(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,l){K(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.get=t[0]),l&2&&(o.node=t[6].current),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function $e(i){let e,n,t,l,o;const r=[Ln,Cn],f=[];function s(a,c){return c&2&&(e=null),e==null&&(e=!!(a[6].current&&At.asCID(a[6].current))),e?0:1}return n=s(i,-1),t=f[n]=r[n](i),{c(){t.c(),l=B()},l(a){t.l(a),l=B()},m(a,c){f[n].m(a,c),L(a,l,c),o=!0},p(a,c){let u=n;n=s(a,c),n===u?f[n].p(a,c):(Y(),b(f[u],1,1,()=>{f[u]=null}),U(),t=f[n],t?t.p(a,c):(t=f[n]=r[n](a),t.c()),m(t,1),t.m(l.parentNode,l))},i(a){o||(m(t),o=!0)},o(a){b(t),o=!1},d(a){f[n].d(a),a&&_(l)}}}function On(i){return{c:N,l:N,m:N,p:N,i:N,o:N,d:N}}function Sn(i){let e,n,t=i[1]&&Ge(i);return{c(){t&&t.c(),e=B()},l(l){t&&t.l(l),e=B()},m(l,o){t&&t.m(l,o),L(l,e,o),n=!0},p(l,[o]){l[1]?t?(t.p(l,o),o&2&&m(t,1)):(t=Ge(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(Y(),b(t,1,1,()=>{t=null}),U())},i(l){n||(m(t),n=!0)},o(l){b(t),n=!1},d(l){t&&t.d(l),l&&_(e)}}}function Pn(i,e,n){let{$$slots:t={},$$scope:l}=e,{get:o}=e,{node:r}=e,f;return he(async()=>{n(1,f=await o(r)),console.log({data:f})}),i.$$set=s=>{"get"in s&&n(0,o=s.get),"node"in s&&n(2,r=s.node),"$$scope"in s&&n(3,l=s.$$scope)},[o,f,r,l,t]}class Ie extends ${constructor(e){super(),x(this,e,Pn,Sn,Z,{get:0,node:2})}}function xe(i,e,n){const t=i.slice();return t[6]=e[n][0],t[7]=e[n][1].current,t[8]=e[n][1].prev,t}function et(i){let e,n,t,l={ctx:i,current:null,token:null,hasCatch:!1,pending:An,then:yn,catch:Tn,value:2,blocks:[,,,]};return be(n=i[2],l),{c(){e=B(),l.block.c()},l(o){e=B(),l.block.l(o)},m(o,r){L(o,e,r),l.block.m(o,l.anchor=r),l.mount=()=>e.parentNode,l.anchor=e,t=!0},p(o,r){i=o,l.ctx=i,r&4&&n!==(n=i[2])&&be(n,l)||It(l,i,r)},i(o){t||(m(l.block),t=!0)},o(o){for(let r=0;r<3;r+=1){const f=l.blocks[r];b(f)}t=!1},d(o){o&&_(e),l.block.d(o),l.token=null,l=null}}}function Tn(i){return{c:N,l:N,m:N,p:N,i:N,o:N,d:N}}function yn(i){let e,n,t=Object.entries(i[2]),l=[];for(let r=0;r<t.length;r+=1)l[r]=lt(xe(i,t,r));const o=r=>b(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=B()},l(r){for(let f=0;f<l.length;f+=1)l[f].l(r);e=B()},m(r,f){for(let s=0;s<l.length;s+=1)l[s].m(r,f);L(r,e,f),n=!0},p(r,f){if(f&7){t=Object.entries(r[2]);let s;for(s=0;s<t.length;s+=1){const a=xe(r,t,s);l[s]?(l[s].p(a,f),m(l[s],1)):(l[s]=lt(a),l[s].c(),m(l[s],1),l[s].m(e.parentNode,e))}for(Y(),s=t.length;s<l.length;s+=1)o(s);U()}},i(r){if(!n){for(let f=0;f<t.length;f+=1)m(l[f]);n=!0}},o(r){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)b(l[f]);n=!1},d(r){_e(l,r),r&&_(e)}}}function Dn(i){let e=i[6]+"",n;return{c(){n=j(e)},l(t){n=F(t,e)},m(t,l){L(t,n,l)},p(t,l){l&4&&e!==(e=t[6]+"")&&ne(n,e)},d(t){t&&_(n)}}}function tt(i){let e,n;return e=new Ie({props:{get:i[1],node:i[7],$$slots:{default:[In]},$$scope:{ctx:i}}}),e.$on("createLink",i[5]),{c(){q(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,l){K(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.get=t[1]),l&4&&(o.node=t[7]),l&2048&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function In(i){let e;return{c(){e=j("Current")},l(n){e=F(n,"Current")},m(n,t){L(n,e,t)},d(n){n&&_(e)}}}function Nn(i){let e,n,t=i[7]&&tt(i);return{c(){t&&t.c(),e=B()},l(l){t&&t.l(l),e=B()},m(l,o){t&&t.m(l,o),L(l,e,o),n=!0},p(l,o){l[7]?t?(t.p(l,o),o&4&&m(t,1)):(t=tt(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(Y(),b(t,1,1,()=>{t=null}),U())},i(l){n||(m(t),n=!0)},o(l){b(t),n=!1},d(l){t&&t.d(l),l&&_(e)}}}function nt(i){let e,n;return e=new Ie({props:{get:i[1],node:i[8],$$slots:{default:[Vn]},$$scope:{ctx:i}}}),e.$on("createLink",i[4]),{c(){q(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,l){K(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.get=t[1]),l&4&&(o.node=t[8]),l&2048&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Vn(i){let e;return{c(){e=j("Prev")},l(n){e=F(n,"Prev")},m(n,t){L(n,e,t)},d(n){n&&_(e)}}}function Bn(i){let e,n,t=i[8]&&nt(i);return{c(){t&&t.c(),e=B()},l(l){t&&t.l(l),e=B()},m(l,o){t&&t.m(l,o),L(l,e,o),n=!0},p(l,o){l[8]?t?(t.p(l,o),o&4&&m(t,1)):(t=nt(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(Y(),b(t,1,1,()=>{t=null}),U())},i(l){n||(m(t),n=!0)},o(l){b(t),n=!1},d(l){t&&t.d(l),l&&_(e)}}}function lt(i){let e,n=i[6]+"",t,l,o,r,f,s;return r=new zt({props:{key:i[6],current:i[7],prev:i[8],cid:i[0],$$slots:{prev:[Bn],current:[Nn],key:[Dn]},$$scope:{ctx:i}}}),{c(){e=M("div"),t=j(n),l=j(":"),o=X(),q(r.$$.fragment),f=X()},l(a){e=z(a,"DIV",{});var c=V(e);t=F(c,n),l=F(c,":"),c.forEach(_),o=W(a),J(r.$$.fragment,a),f=W(a)},m(a,c){L(a,e,c),D(e,t),D(e,l),L(a,o,c),K(r,a,c),L(a,f,c),s=!0},p(a,c){(!s||c&4)&&n!==(n=a[6]+"")&&ne(t,n);const u={};c&4&&(u.key=a[6]),c&4&&(u.current=a[7]),c&4&&(u.prev=a[8]),c&1&&(u.cid=a[0]),c&2054&&(u.$$scope={dirty:c,ctx:a}),r.$set(u)},i(a){s||(m(r.$$.fragment,a),s=!0)},o(a){b(r.$$.fragment,a),s=!1},d(a){a&&_(e),a&&_(o),Q(r,a),a&&_(f)}}}function An(i){return{c:N,l:N,m:N,p:N,i:N,o:N,d:N}}function Mn(i){let e,n,t=i[2]&&et(i);return{c(){t&&t.c(),e=B()},l(l){t&&t.l(l),e=B()},m(l,o){t&&t.m(l,o),L(l,e,o),n=!0},p(l,[o]){l[2]?t?(t.p(l,o),o&4&&m(t,1)):(t=et(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(Y(),b(t,1,1,()=>{t=null}),U())},i(l){n||(m(t),n=!0)},o(l){b(t),n=!1},d(l){t&&t.d(l),l&&_(e)}}}function zn(i,e,n){let{commit:t}=e,l,o,r;he(async()=>{n(0,{root:l,get:o}=await en.load(t),l,n(1,o)),n(2,r=await o(l)),console.log({rootNode:r})});function f(a){de.call(this,i,a)}function s(a){de.call(this,i,a)}return i.$$set=a=>{"commit"in a&&n(3,t=a.commit)},[l,o,r,t,f,s]}class jn extends ${constructor(e){super(),x(this,e,zn,Mn,Z,{commit:3})}}function Fn(i){let e,n,t,l,o,r,f,s,a,c,u,g,w,P,S,I,E;return{c(){e=M("div"),n=M("div"),t=M("div"),l=M("span"),o=j(i[0]),r=X(),f=j(":"),s=X(),a=M("div"),c=M("span"),u=j(i[1]),g=X(),w=M("div"),P=M("button"),S=j("Add"),this.h()},l(d){e=z(d,"DIV",{class:!0});var O=V(e);n=z(O,"DIV",{class:!0});var T=V(n);t=z(T,"DIV",{class:!0});var C=V(t);l=z(C,"SPAN",{class:!0,contenteditable:!0});var p=V(l);o=F(p,i[0]),r=W(p),p.forEach(_),f=F(C,":"),C.forEach(_),s=W(T),a=z(T,"DIV",{class:!0});var v=V(a);c=z(v,"SPAN",{class:!0,contenteditable:!0});var h=V(c);u=F(h,i[1]),h.forEach(_),v.forEach(_),g=W(T),w=z(T,"DIV",{class:!0});var y=V(w);P=z(y,"BUTTON",{class:!0});var R=V(P);S=F(R,"Add"),R.forEach(_),y.forEach(_),T.forEach(_),O.forEach(_),this.h()},h(){k(l,"class","p-1 bg-white rounded-md border border-gray-400 w-full min-w-[50px]"),k(l,"contenteditable","true"),i[0]===void 0&&Le(()=>i[4].call(l)),k(t,"class","flex-1 flex flex-row m-1 p-1 items-center"),k(c,"class","p-1 bg-white rounded-md border border-gray-400 w-full min-w-[50px]"),k(c,"contenteditable","true"),i[1]===void 0&&Le(()=>i[5].call(c)),k(a,"class","flex-1 flex flex-row m-1 p-1 items-center"),k(P,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-lg justify-end"),k(w,"class","flex flex-row-reverse m-1 p-1 justify-items-end"),k(n,"class","flex flex-row text-sm bg-slate-100 shadow shadow-blue-200 my-4 p-1 rounded-lg w-fit"),k(e,"class","flex flex-row relative")},m(d,O){L(d,e,O),D(e,n),D(n,t),D(t,l),D(l,o),D(l,r),i[0]!==void 0&&(l.textContent=i[0]),D(t,f),D(n,s),D(n,a),D(a,c),D(c,u),i[1]!==void 0&&(c.textContent=i[1]),D(n,g),D(n,w),D(w,P),D(P,S),I||(E=[te(l,"keydown",it),te(l,"input",i[4]),te(c,"keydown",it),te(c,"input",i[5]),te(P,"click",i[2])],I=!0)},p(d,[O]){O&1&&ne(o,d[0]),O&1&&d[0]!==l.textContent&&(l.textContent=d[0]),O&2&&ne(u,d[1]),O&2&&d[1]!==c.textContent&&(c.textContent=d[1])},i:N,o:N,d(d){d&&_(e),I=!1,Nt(E)}}}function it(i){i.key==="Enter"&&(i.preventDefault(),i.stopPropagation(),i.target.blur())}function Rn(i,e,n){let{dag:t}=e,{key:l="Name"}=e,{value:o="Doug"}=e;he(async()=>{if(o){const a=At.asCID(o);a&&await t.get(a)}});async function r(a){t&&l&&o&&await t.tx.add({key:l,value:o})}function f(){l=this.textContent,n(0,l)}function s(){o=this.textContent,n(1,o)}return i.$$set=a=>{"dag"in a&&n(3,t=a.dag),"key"in a&&n(0,l=a.key),"value"in a&&n(1,o=a.value)},[l,o,r,t,f,s]}class jt extends ${constructor(e){super(),x(this,e,Rn,Fn,Z,{dag:3,key:0,value:1})}}function rt(i){return Object.prototype.toString.call(i)==="[object Date]"}function Oe(i,e){if(i===e||i!==i)return()=>i;const n=typeof i;if(n!==typeof e||Array.isArray(i)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(i)){const t=e.map((l,o)=>Oe(i[o],l));return l=>t.map(o=>o(l))}if(n==="object"){if(!i||!e)throw new Error("Object cannot be null");if(rt(i)&&rt(e)){i=i.getTime(),e=e.getTime();const o=e-i;return r=>new Date(i+r*o)}const t=Object.keys(e),l={};return t.forEach(o=>{l[o]=Oe(i[o],e[o])}),o=>{const r={};return t.forEach(f=>{r[f]=l[f](o)}),r}}if(n==="number"){const t=e-i;return l=>i+l*t}throw new Error(`Cannot interpolate ${n} values`)}function Xn(i,e={}){const n=tn(i);let t,l=i;function o(r,f){if(i==null)return n.set(i=r),Promise.resolve();l=r;let s=t,a=!1,{delay:c=0,duration:u=400,easing:g=Yt,interpolate:w=Oe}=ve(ve({},e),f);if(u===0)return s&&(s.abort(),s=null),n.set(i=l),Promise.resolve();const P=Xt()+c;let S;return t=Wt(I=>{if(I<P)return!0;a||(S=w(i,r),typeof u=="function"&&(u=u(i,r)),a=!0),s&&(s.abort(),s=null);const E=I-P;return E>u?(n.set(i=r),!1):(n.set(i=S(g(E/u))),!0)}),t.promise}return{set:o,update:(r,f)=>o(r(l,i),f),subscribe:n.subscribe}}function st(i){let e,n=i[0],t,l,o=ot(i),r=i[1]&&ft(i);return{c(){e=M("div"),o.c(),t=X(),r&&r.c(),this.h()},l(f){e=z(f,"DIV",{class:!0});var s=V(e);o.l(s),t=W(s),r&&r.l(s),s.forEach(_),this.h()},h(){k(e,"class","flex flex-row")},m(f,s){L(f,e,s),o.m(e,null),D(e,t),r&&r.m(e,null),l=!0},p(f,s){s&1&&Z(n,n=f[0])?(Y(),b(o,1,1,N),U(),o=ot(f),o.c(),m(o,1),o.m(e,t)):o.p(f,s),f[1]?r?r.p(f,s):(r=ft(f),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(f){l||(m(o),l=!0)},o(f){b(o),l=!1},d(f){f&&_(e),o.d(f),r&&r.d()}}}function ot(i){let e,n;return e=new pn({props:{blocks:[...i[0].blocks]}}),e.$on("createLink",i[3]),{c(){q(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,l){K(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.blocks=[...t[0].blocks]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function ft(i){let e,n=i[1].toFixed(0)+"",t,l,o;return{c(){e=j("Total Transaction Size: "),t=j(n),l=j(" bytes"),o=M("br")},l(r){e=F(r,"Total Transaction Size: "),t=F(r,n),l=F(r," bytes"),o=z(r,"BR",{})},m(r,f){L(r,e,f),L(r,t,f),L(r,l,f),L(r,o,f)},p(r,f){f&2&&n!==(n=r[1].toFixed(0)+"")&&ne(t,n)},d(r){r&&_(e),r&&_(t),r&&_(l),r&&_(o)}}}function Wn(i){let e,n,t=i[0]&&st(i);return{c(){t&&t.c(),e=B()},l(l){t&&t.l(l),e=B()},m(l,o){t&&t.m(l,o),L(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=st(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(Y(),b(t,1,1,()=>{t=null}),U())},i(l){n||(m(t),n=!0)},o(l){b(t),n=!1},d(l){t&&t.d(l),l&&_(e)}}}function Yn(i,e,n){let t,{pending:l}=e;const o=Xn(1,{duration:400,easing:Mt});Ut(i,o,f=>n(1,t=f)),l.on("size",f=>Ht(o,t=l.size,t));function r(f){de.call(this,i,f)}return i.$$set=f=>{"pending"in f&&n(0,l=f.pending)},i.$$.update=()=>{i.$$.dirty&1&&l&&console.log({pending:l})},[l,t,o,r]}class Un extends ${constructor(e){super(),x(this,e,Yn,Wn,Z,{pending:0})}}function at(i,e,n){const t=i.slice();return t[8]=e[n],t[10]=n,t}function ct(i,e,n){const t=i.slice();return t[11]=e[n][0],t[12]=e[n][1].current,t[13]=e[n][1].prev,t}function ut(i){let e,n,t=Object.entries(i[2]),l=[];for(let r=0;r<t.length;r+=1)l[r]=ht(ct(i,t,r));const o=r=>b(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=B()},l(r){for(let f=0;f<l.length;f+=1)l[f].l(r);e=B()},m(r,f){for(let s=0;s<l.length;s+=1)l[s].m(r,f);L(r,e,f),n=!0},p(r,f){if(f&6){t=Object.entries(r[2]);let s;for(s=0;s<t.length;s+=1){const a=ct(r,t,s);l[s]?(l[s].p(a,f),m(l[s],1)):(l[s]=ht(a),l[s].c(),m(l[s],1),l[s].m(e.parentNode,e))}for(Y(),s=t.length;s<l.length;s+=1)o(s);U()}},i(r){if(!n){for(let f=0;f<t.length;f+=1)m(l[f]);n=!0}},o(r){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)b(l[f]);n=!1},d(r){_e(l,r),r&&_(e)}}}function ht(i){let e=i[11]+"",n,t,l=i[12]+"",o,r,f,s;return f=new jt({props:{tag:i[11],value:i[12],dag:i[1]}}),{c(){n=j(e),t=j(": "),o=j(l),r=X(),q(f.$$.fragment)},l(a){n=F(a,e),t=F(a,": "),o=F(a,l),r=W(a),J(f.$$.fragment,a)},m(a,c){L(a,n,c),L(a,t,c),L(a,o,c),L(a,r,c),K(f,a,c),s=!0},p(a,c){(!s||c&4)&&e!==(e=a[11]+"")&&ne(n,e),(!s||c&4)&&l!==(l=a[12]+"")&&ne(o,l);const u={};c&4&&(u.tag=a[11]),c&4&&(u.value=a[12]),c&2&&(u.dag=a[1]),f.$set(u)},i(a){s||(m(f.$$.fragment,a),s=!0)},o(a){b(f.$$.fragment,a),s=!1},d(a){a&&_(n),a&&_(t),a&&_(o),a&&_(r),Q(f,a)}}}function _t(i){let e,n;return e=new Un({props:{pending:i[3]}}),e.$on("createLink",i[7]),{c(){q(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,l){K(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.pending=t[3]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Hn(i){let e;return{c(){e=j("No Commits")},l(n){e=F(n,"No Commits")},m(n,t){L(n,e,t)},p:N,i:N,o:N,d(n){n&&_(e)}}}function qn(i){let e,n=[],t=new Map,l,o=i[0];const r=f=>f[10];for(let f=0;f<o.length;f+=1){let s=at(i,o,f),a=r(s);t.set(a,n[f]=dt(a,s))}return{c(){e=M("div");for(let f=0;f<n.length;f+=1)n[f].c();this.h()},l(f){e=z(f,"DIV",{class:!0});var s=V(e);for(let a=0;a<n.length;a+=1)n[a].l(s);s.forEach(_),this.h()},h(){k(e,"class","flex flex-col-reverse ")},m(f,s){L(f,e,s);for(let a=0;a<n.length;a+=1)n[a].m(e,null);l=!0},p(f,s){if(s&1){o=f[0],Y();for(let a=0;a<n.length;a+=1)n[a].r();n=Jt(n,s,r,1,f,o,t,e,Zt,dt,null,at);for(let a=0;a<n.length;a+=1)n[a].a();U()}},i(f){if(!l){for(let s=0;s<o.length;s+=1)m(n[s]);l=!0}},o(f){for(let s=0;s<n.length;s+=1)b(n[s]);l=!1},d(f){f&&_(e);for(let s=0;s<n.length;s+=1)n[s].d()}}}function dt(i,e){let n,t,l=e[10]+"",o,r,f,s,a=N,c;return r=new jn({props:{commit:e[8]}}),{key:i,first:null,c(){n=M("div"),t=j("Commit #"),o=j(l),q(r.$$.fragment),f=X(),this.h()},l(u){n=z(u,"DIV",{class:!0});var g=V(n);t=F(g,"Commit #"),o=F(g,l),J(r.$$.fragment,g),f=W(g),g.forEach(_),this.h()},h(){k(n,"class","m-4 p-2 border-2 border-dashed "),this.first=n},m(u,g){L(u,n,g),D(n,t),D(n,o),K(r,n,null),D(n,f),c=!0},p(u,g){e=u,(!c||g&1)&&l!==(l=e[10]+"")&&ne(o,l);const w={};g&1&&(w.commit=e[8]),r.$set(w)},r(){s=n.getBoundingClientRect()},f(){Kt(n),a()},a(){a(),a=Qt(n,s,nn,{})},i(u){c||(m(r.$$.fragment,u),c=!0)},o(u){b(r.$$.fragment,u),c=!1},d(u){u&&_(n),Q(r)}}}function Jn(i){var v;let e,n,t,l,o,r,f,s,a,c,u,g,w,P,S,I,E,d=i[2]&&ut(i);s=new jt({props:{dag:i[1]}});let O=i[3]&&_t(i);g=new vn({props:{tx:(v=i[1])==null?void 0:v.tx}}),g.$on("commit",i[4]);const T=[qn,Hn],C=[];function p(h,y){return h[0]&&h[0].length?0:1}return P=p(i),S=C[P]=T[P](i),{c(){e=M("div"),n=j("List Tags"),t=X(),d&&d.c(),l=X(),o=M("div"),r=j("Add Tag"),f=X(),q(s.$$.fragment),a=X(),c=M("div"),O&&O.c(),u=X(),q(g.$$.fragment),w=X(),S.c(),I=B(),this.h()},l(h){e=z(h,"DIV",{class:!0});var y=V(e);n=F(y,"List Tags"),y.forEach(_),t=W(h),d&&d.l(h),l=W(h),o=z(h,"DIV",{class:!0});var R=V(o);r=F(R,"Add Tag"),R.forEach(_),f=W(h),J(s.$$.fragment,h),a=W(h),c=z(h,"DIV",{class:!0});var H=V(c);O&&O.l(H),u=W(H),J(g.$$.fragment,H),H.forEach(_),w=W(h),S.l(h),I=B(),this.h()},h(){k(e,"class","m-4 text-lg font-bold"),k(o,"class","m-4 text-lg font-bold"),k(c,"class","m-4 p-4 border-dashed border-2")},m(h,y){L(h,e,y),D(e,n),L(h,t,y),d&&d.m(h,y),L(h,l,y),L(h,o,y),D(o,r),L(h,f,y),K(s,h,y),L(h,a,y),L(h,c,y),O&&O.m(c,null),D(c,u),K(g,c,null),L(h,w,y),C[P].m(h,y),L(h,I,y),E=!0},p(h,[y]){var ee;h[2]?d?(d.p(h,y),y&4&&m(d,1)):(d=ut(h),d.c(),m(d,1),d.m(l.parentNode,l)):d&&(Y(),b(d,1,1,()=>{d=null}),U());const R={};y&2&&(R.dag=h[1]),s.$set(R),h[3]?O?(O.p(h,y),y&8&&m(O,1)):(O=_t(h),O.c(),m(O,1),O.m(c,u)):O&&(Y(),b(O,1,1,()=>{O=null}),U());const H={};y&2&&(H.tx=(ee=h[1])==null?void 0:ee.tx),g.$set(H);let A=P;P=p(h),P===A?C[P].p(h,y):(Y(),b(C[A],1,1,()=>{C[A]=null}),U(),S=C[P],S?S.p(h,y):(S=C[P]=T[P](h),S.c()),m(S,1),S.m(I.parentNode,I))},i(h){E||(m(d),m(s.$$.fragment,h),m(O),m(g.$$.fragment,h),m(S),E=!0)},o(h){b(d),b(s.$$.fragment,h),b(O),b(g.$$.fragment,h),b(S),E=!1},d(h){h&&_(e),h&&_(t),d&&d.d(h),h&&_(l),h&&_(o),h&&_(f),Q(s,h),h&&_(a),h&&_(c),O&&O.d(),Q(g),h&&_(w),C[P].d(h),h&&_(I)}}}function Kn(i,e,n){let{commits:t=[]}=e,{connectable:l}=e,o,r,f,s;qt("connectable",l),he(async()=>{const{createDagRepo:u}=await xt(()=>import("../../chunks/index-0ea80c56.js"),["..\\..\\chunks\\index-0ea80c56.js","..\\..\\chunks\\dagRepo-9c69aabb.js","..\\..\\chunks\\index-4be5796e.js","..\\..\\chunks\\index-0a678716.js"],import.meta.url);globalThis.dag?n(1,o=globalThis.dag):(n(1,o=await u()),globalThis.dag=o),o.on("added",g=>{n(3,s=o.tx.pending)}),o.on("rootCID",g=>n(6,r=o.rootCID))});async function a(u){const g=u.detail;n(0,t=[...t,g])}function c(u){de.call(this,i,u)}return i.$$set=u=>{"commits"in u&&n(0,t=u.commits),"connectable"in u&&n(5,l=u.connectable)},i.$$.update=()=>{i.$$.dirty&66&&r&&o.get(r).then(u=>n(2,f=u))},[t,o,f,s,a,l,r,c]}class Qn extends ${constructor(e){super(),x(this,e,Kn,Jn,Z,{commits:0,connectable:5})}}class ie{constructor(e){this.id=-1,this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,self.Touch&&e instanceof Touch?this.id=e.identifier:ge(e)&&(this.id=e.pointerId)}getCoalesced(){if("getCoalescedEvents"in this.nativePointer){const e=this.nativePointer.getCoalescedEvents().map(n=>new ie(n));if(e.length>0)return e}return[this]}}const ge=i=>"pointerId"in i,Ce=i=>"changedTouches"in i,mt=()=>{};class Zn{constructor(e,{start:n=()=>!0,move:t=mt,end:l=mt,rawUpdates:o=!1,avoidPointerEvents:r=!1,eventListenerOptions:f={capture:!1,passive:!1,once:!1}}={}){this._element=e,this.startPointers=[],this.currentPointers=[],this._excludeFromButtonsCheck=new Set,this._pointerStart=s=>{if(ge(s)&&s.buttons===0)this._excludeFromButtonsCheck.add(s.pointerId);else if(!(s.buttons&1))return;const a=new ie(s);this.currentPointers.some(c=>c.id===a.id)||!this._triggerPointerStart(a,s)||(ge(s)?((s.target&&"setPointerCapture"in s.target?s.target:this._element).setPointerCapture(s.pointerId),this._element.addEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move,this._eventListenerOptions),this._element.addEventListener("pointerup",this._pointerEnd,this._eventListenerOptions),this._element.addEventListener("pointercancel",this._pointerEnd,this._eventListenerOptions)):(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd)))},this._touchStart=s=>{for(const a of Array.from(s.changedTouches))this._triggerPointerStart(new ie(a),s)},this._move=s=>{if(!Ce(s)&&(!ge(s)||!this._excludeFromButtonsCheck.has(s.pointerId))&&s.buttons===0){this._pointerEnd(s);return}const a=this.currentPointers.slice(),c=Ce(s)?Array.from(s.changedTouches).map(g=>new ie(g)):[new ie(s)],u=[];for(const g of c){const w=this.currentPointers.findIndex(P=>P.id===g.id);w!==-1&&(u.push(g),this.currentPointers[w]=g)}u.length!==0&&this._moveCallback(a,u,s)},this._triggerPointerEnd=(s,a)=>{if(!Ce(a)&&a.buttons&1)return!1;const c=this.currentPointers.findIndex(g=>g.id===s.id);if(c===-1)return!1;this.currentPointers.splice(c,1),this.startPointers.splice(c,1),this._excludeFromButtonsCheck.delete(s.id);const u=!(a.type==="mouseup"||a.type==="touchend"||a.type==="pointerup");return this._endCallback(s,a,u),!0},this._pointerEnd=s=>{if(!!this._triggerPointerEnd(new ie(s),s))if(ge(s)){if(this.currentPointers.length)return;this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd)}else window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)},this._touchEnd=s=>{for(const a of Array.from(s.changedTouches))this._triggerPointerEnd(new ie(a),s)},this._startCallback=n,this._moveCallback=t,this._endCallback=l,this._rawUpdates=o&&"onpointerrawupdate"in window,this._eventListenerOptions=f,self.PointerEvent&&!r?this._element.addEventListener("pointerdown",this._pointerStart,this._eventListenerOptions):(this._element.addEventListener("mousedown",this._pointerStart,this._eventListenerOptions),this._element.addEventListener("touchstart",this._touchStart,this._eventListenerOptions),this._element.addEventListener("touchmove",this._move,this._eventListenerOptions),this._element.addEventListener("touchend",this._touchEnd,this._eventListenerOptions),this._element.addEventListener("touchcancel",this._touchEnd,this._eventListenerOptions))}stop(){this._element.removeEventListener("pointerdown",this._pointerStart),this._element.removeEventListener("mousedown",this._pointerStart),this._element.removeEventListener("touchstart",this._touchStart),this._element.removeEventListener("touchmove",this._move),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),this._element.removeEventListener(this._rawUpdates?"pointerrawupdate":"pointermove",this._move),this._element.removeEventListener("pointerup",this._pointerEnd),this._element.removeEventListener("pointercancel",this._pointerEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(e,n){return this._startCallback(e,n)?(this.currentPointers.push(e),this.startPointers.push(e),!0):!1}}let Gn=(i=21)=>crypto.getRandomValues(new Uint8Array(i)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function $n(i){let e;return{c(){e=M("div"),this.h()},l(n){e=z(n,"DIV",{class:!0}),V(e).forEach(_),this.h()},h(){k(e,"class","h-16 w-16 p-8 rounded-full shadow-xl opacity-80 select-none border-[2em] border-pink-500/50")},m(n,t){L(n,e,t)},p:N,d(n){n&&_(e)}}}function xn(i){let e,n,t;const l=i[9].default,o=re(l,i,i[8],null),r=o||$n();return{c(){e=M("div"),r&&r.c(),this.h()},l(f){e=z(f,"DIV",{id:!0,class:!0,style:!0});var s=V(e);r&&r.l(s),s.forEach(_),this.h()},h(){k(e,"id",i[1]),k(e,"class","absolute"),le(e,"left",i[5]+"px"),le(e,"top",i[4]+"px"),Le(()=>i[11].call(e))},m(f,s){L(f,e,s),r&&r.m(e,null),i[10](e),n=Gt(e,i[11].bind(e)),t=!0},p(f,[s]){o&&o.p&&(!t||s&256)&&se(o,l,f,f[8],t?fe(l,f[8],s,null):oe(f[8]),null),(!t||s&2)&&k(e,"id",f[1]),(!t||s&32)&&le(e,"left",f[5]+"px"),(!t||s&16)&&le(e,"top",f[4]+"px")},i(f){t||(m(r,f),t=!0)},o(f){b(r,f),t=!1},d(f){f&&_(e),r&&r.d(f),i[10](null),n()}}}function el(i,e,n){let t,l,{$$slots:o={},$$scope:r}=e,{marker:f}=e,{id:s}=e,{left:a}=e,{top:c}=e,u,g;function w(S){pe[S?"unshift":"push"](()=>{f=S,n(0,f)})}function P(){u=this.offsetWidth,g=this.offsetHeight,n(2,u),n(3,g)}return i.$$set=S=>{"marker"in S&&n(0,f=S.marker),"id"in S&&n(1,s=S.id),"left"in S&&n(6,a=S.left),"top"in S&&n(7,c=S.top),"$$scope"in S&&n(8,r=S.$$scope)},i.$$.update=()=>{i.$$.dirty&68&&n(5,t=a-u/2),i.$$.dirty&136&&n(4,l=c-g/2)},[f,s,u,g,l,t,a,c,r,o,w,P]}class tl extends ${constructor(e){super(),x(this,e,el,xn,Z,{marker:0,id:1,left:6,top:7})}}const Se=Math.PI,Pe=2*Se,ue=1e-6,nl=Pe-ue;function Te(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ft(){return new Te}Te.prototype=Ft.prototype={constructor:Te,moveTo:function(i,e){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(i,e){this._+="L"+(this._x1=+i)+","+(this._y1=+e)},quadraticCurveTo:function(i,e,n,t){this._+="Q"+ +i+","+ +e+","+(this._x1=+n)+","+(this._y1=+t)},bezierCurveTo:function(i,e,n,t,l,o){this._+="C"+ +i+","+ +e+","+ +n+","+ +t+","+(this._x1=+l)+","+(this._y1=+o)},arcTo:function(i,e,n,t,l){i=+i,e=+e,n=+n,t=+t,l=+l;var o=this._x1,r=this._y1,f=n-i,s=t-e,a=o-i,c=r-e,u=a*a+c*c;if(l<0)throw new Error("negative radius: "+l);if(this._x1===null)this._+="M"+(this._x1=i)+","+(this._y1=e);else if(u>ue)if(!(Math.abs(c*f-s*a)>ue)||!l)this._+="L"+(this._x1=i)+","+(this._y1=e);else{var g=n-o,w=t-r,P=f*f+s*s,S=g*g+w*w,I=Math.sqrt(P),E=Math.sqrt(u),d=l*Math.tan((Se-Math.acos((P+u-S)/(2*I*E)))/2),O=d/E,T=d/I;Math.abs(O-1)>ue&&(this._+="L"+(i+O*a)+","+(e+O*c)),this._+="A"+l+","+l+",0,0,"+ +(c*g>a*w)+","+(this._x1=i+T*f)+","+(this._y1=e+T*s)}},arc:function(i,e,n,t,l,o){i=+i,e=+e,n=+n,o=!!o;var r=n*Math.cos(t),f=n*Math.sin(t),s=i+r,a=e+f,c=1^o,u=o?t-l:l-t;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+s+","+a:(Math.abs(this._x1-s)>ue||Math.abs(this._y1-a)>ue)&&(this._+="L"+s+","+a),n&&(u<0&&(u=u%Pe+Pe),u>nl?this._+="A"+n+","+n+",0,1,"+c+","+(i-r)+","+(e-f)+"A"+n+","+n+",0,1,"+c+","+(this._x1=s)+","+(this._y1=a):u>ue&&(this._+="A"+n+","+n+",0,"+ +(u>=Se)+","+c+","+(this._x1=i+n*Math.cos(l))+","+(this._y1=e+n*Math.sin(l))))},rect:function(i,e,n,t){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +t+"h"+-n+"Z"},toString:function(){return this._}};function gt(i){return function(){return i}}var ll=Array.prototype.slice;function il(i){return i[0]}function rl(i){return i[1]}class sl{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function ol(i){return new sl(i,!0)}function fl(i){return i.source}function al(i){return i.target}function cl(i){let e=fl,n=al,t=il,l=rl,o=null,r=null;function f(){let s;const a=ll.call(arguments),c=e.apply(this,a),u=n.apply(this,a);if(o==null&&(r=i(s=Ft())),r.lineStart(),a[0]=c,r.point(+t.apply(this,a),+l.apply(this,a)),a[0]=u,r.point(+t.apply(this,a),+l.apply(this,a)),r.lineEnd(),s)return r=null,s+""||null}return f.source=function(s){return arguments.length?(e=s,f):e},f.target=function(s){return arguments.length?(n=s,f):n},f.x=function(s){return arguments.length?(t=typeof s=="function"?s:gt(+s),f):t},f.y=function(s){return arguments.length?(l=typeof s=="function"?s:gt(+s),f):l},f.context=function(s){return arguments.length?(s==null?o=r=null:r=i(o=s),f):o},f}function pt(i,e,n){const t=i.slice();return t[17]=e[n],t[19]=n,t}function kt(i){let e,n=i[0],t=[];for(let l=0;l<n.length;l+=1)t[l]=vt(pt(i,n,l));return{c(){e=ae("svg");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=ce(l,"svg",{style:!0,class:!0});var o=V(e);for(let r=0;r<t.length;r+=1)t[r].l(o);o.forEach(_),this.h()},h(){le(e,"pointer-events","none"),k(e,"class","svelte-1t43067")},m(l,o){L(l,e,o);for(let r=0;r<t.length;r+=1)t[r].m(e,null)},p(l,o){if(o&2047){n=l[0];let r;for(r=0;r<n.length;r+=1){const f=pt(l,n,r);t[r]?t[r].p(f,o):(t[r]=vt(f),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=n.length}},d(l){l&&_(e),_e(t,l)}}}function bt(i){var E,d,O,T,C,p;let e,n,t,l,o,r,f,s=((O=(d=(E=i[17])==null?void 0:E.opts)==null?void 0:d.label)!=null&&O.enabled?(p=(C=(T=i[17])==null?void 0:T.opts)==null?void 0:C.label)==null?void 0:p.value:"")+"",a,c,u,g,w,P,S,I;return{c(){e=ae("g"),n=ae("path"),o=ae("text"),r=ae("textPath"),f=ae("tspan"),a=j(s),c=X(),w=ae("textPath"),P=j("\u27A4"),this.h()},l(v){e=ce(v,"g",{stroke:!0,"stroke-opacity":!0});var h=V(e);n=ce(h,"path",{d:!0,id:!0,"stroke-width":!0,stroke:!0,fill:!0,"stroke-linecap":!0,"stroke-opacity":!0}),V(n).forEach(_),o=ce(h,"text",{class:!0});var y=V(o);r=ce(y,"textPath",{"xlink:href":!0,startOffset:!0});var R=V(r);f=ce(R,"tspan",{fill:!0,class:!0});var H=V(f);a=F(H,s),H.forEach(_),c=W(R),R.forEach(_),w=ce(y,"textPath",{"xlink:href":!0,startOffset:!0,fill:!0,opacity:!0});var A=V(w);P=F(A,"\u27A4"),A.forEach(_),y.forEach(_),h.forEach(_),this.h()},h(){k(n,"d",t=i[10](i[17])),k(n,"id",l=i[17].id),k(n,"stroke-width",i[2]),k(n,"stroke",i[1]),k(n,"fill","none"),k(n,"stroke-linecap","round"),k(n,"stroke-opacity",i[4]),k(f,"fill","black"),k(f,"class","svelte-1t43067"),ke(r,"xlink:href",u="#"+i[17].id),k(r,"startOffset",g=i[7]+"%"),ke(w,"xlink:href",S="#"+i[17].id),k(w,"startOffset",i[8]),k(w,"fill",i[3]),k(w,"opacity",I=i[4]*1.3),k(o,"class","svelte-1t43067"),k(e,"stroke",i[6]),k(e,"stroke-opacity",i[5])},m(v,h){L(v,e,h),D(e,n),D(e,o),D(o,r),D(r,f),D(f,a),D(r,c),D(o,w),D(w,P)},p(v,h){var y,R,H,A,ee,me;h&1&&t!==(t=v[10](v[17]))&&k(n,"d",t),h&1&&l!==(l=v[17].id)&&k(n,"id",l),h&4&&k(n,"stroke-width",v[2]),h&2&&k(n,"stroke",v[1]),h&16&&k(n,"stroke-opacity",v[4]),h&1&&s!==(s=((H=(R=(y=v[17])==null?void 0:y.opts)==null?void 0:R.label)!=null&&H.enabled?(me=(ee=(A=v[17])==null?void 0:A.opts)==null?void 0:ee.label)==null?void 0:me.value:"")+"")&&ne(a,s),h&1&&u!==(u="#"+v[17].id)&&ke(r,"xlink:href",u),h&128&&g!==(g=v[7]+"%")&&k(r,"startOffset",g),h&1&&S!==(S="#"+v[17].id)&&ke(w,"xlink:href",S),h&256&&k(w,"startOffset",v[8]),h&8&&k(w,"fill",v[3]),h&16&&I!==(I=v[4]*1.3)&&k(w,"opacity",I),h&64&&k(e,"stroke",v[6]),h&32&&k(e,"stroke-opacity",v[5])},d(v){v&&_(e)}}}function vt(i){let e,n=i[17]&&i[9]&&bt(i);return{c(){n&&n.c(),e=B()},l(t){n&&n.l(t),e=B()},m(t,l){n&&n.m(t,l),L(t,e,l)},p(t,l){t[17]&&t[9]?n?n.p(t,l):(n=bt(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&_(e)}}}function ul(i){let e,n=i[9]&&i[0]&&i[0].length>0&&kt(i);return{c(){n&&n.c(),e=B()},l(t){n&&n.l(t),e=B()},m(t,l){n&&n.m(t,l),L(t,e,l)},p(t,[l]){t[9]&&t[0]&&t[0].length>0?n?n.p(t,l):(n=kt(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:N,o:N,d(t){n&&n.d(t),t&&_(e)}}}function hl(i,e,n){let{links:t}=e,{calcOffsetFromCanvas:l}=e,{strokeColor:o="green"}=e,{strokeWidth:r=1}=e,{arrowColor:f="green"}=e,{strokeOpacity:s="0.3"}=e,{groupStrokeOpacity:a="0.1"}=e,{groupStrokeColor:c="white"}=e,{textStartOffset:u=20}=e,{arrowStartOffset:g="40%"}=e;const w=cl(ol);let P,S,I,E,d;he(()=>{n(9,P=!0)});function O(T){let C=document.getElementById(T.source.id),p=document.getElementById(T.target.id);if(!C||!p)return;const{x:v,y:h}=l(C),{x:y,y:R}=l(p);return S=v+C.offsetWidth/2,I=h+C.offsetHeight/2,E=y+p.offsetWidth/2,d=R+p.offsetHeight/2,w({source:[S,I],target:[E,d]})}return i.$$set=T=>{"links"in T&&n(0,t=T.links),"calcOffsetFromCanvas"in T&&n(11,l=T.calcOffsetFromCanvas),"strokeColor"in T&&n(1,o=T.strokeColor),"strokeWidth"in T&&n(2,r=T.strokeWidth),"arrowColor"in T&&n(3,f=T.arrowColor),"strokeOpacity"in T&&n(4,s=T.strokeOpacity),"groupStrokeOpacity"in T&&n(5,a=T.groupStrokeOpacity),"groupStrokeColor"in T&&n(6,c=T.groupStrokeColor),"textStartOffset"in T&&n(7,u=T.textStartOffset),"arrowStartOffset"in T&&n(8,g=T.arrowStartOffset)},[t,o,r,f,s,a,c,u,g,P,O,l]}class wt extends ${constructor(e){super(),x(this,e,hl,ul,Z,{links:0,calcOffsetFromCanvas:11,strokeColor:1,strokeWidth:2,arrowColor:3,strokeOpacity:4,groupStrokeOpacity:5,groupStrokeColor:6,textStartOffset:7,arrowStartOffset:8})}}function Et(i){let e;const n=i[7].default,t=re(n,i,i[6],null),l=t||_l(i);return{c(){l&&l.c()},l(o){l&&l.l(o)},m(o,r){l&&l.m(o,r),e=!0},p(o,r){t?t.p&&(!e||r&64)&&se(t,n,o,o[6],e?fe(n,o[6],r,null):oe(o[6]),null):l&&l.p&&(!e||r&4)&&l.p(o,e?r:-1)},i(o){e||(m(l,o),e=!0)},o(o){b(l,o),e=!1},d(o){l&&l.d(o)}}}function _l(i){let e,n;return{c(){e=M("div"),this.h()},l(t){e=z(t,"DIV",{style:!0,class:!0}),V(e).forEach(_),this.h()},h(){le(e,"transform","translate(-50%, -50%)"),k(e,"class",n="absolute border-["+(i[2]+"em")+"] md:border-["+(i[2]/2+"em")+"] border-yellow-200/40 ring-2 ring-black h-0 w-0 rounded-full")},m(t,l){L(t,e,l)},p(t,l){l&4&&n!==(n="absolute border-["+(t[2]+"em")+"] md:border-["+(t[2]/2+"em")+"] border-yellow-200/40 ring-2 ring-black h-0 w-0 rounded-full")&&k(e,"class",n)},d(t){t&&_(e)}}}function dl(i){let e,n,t,l,o,r,f=i[0]&&Et(i);return{c(){e=M("div"),f&&f.c(),this.h()},l(s){e=z(s,"DIV",{id:!0,"data-highlighter":!0,class:!0,style:!0});var a=V(e);f&&f.l(a),a.forEach(_),this.h()},h(){k(e,"id",n=i[1].id+"--highlighter"),k(e,"data-highlighter","true"),k(e,"class",t="absolute border-["+(i[2]+"em")+"] md:border-["+(i[2]/2+"em")+"] border-transparent rounded-full p-0 m-0"),le(e,"top",i[5]+"px"),le(e,"left",i[4]+"px")},m(s,a){L(s,e,a),f&&f.m(e,null),i[9](e),l=!0,o||(r=[te(window,"resize",i[8]),te(e,"mouseover",i[10]),te(e,"mouseleave",i[11]),te(e,"focus",i[12]),te(e,"blur",i[13])],o=!0)},p(s,[a]){s[0]?f?(f.p(s,a),a&1&&m(f,1)):(f=Et(s),f.c(),m(f,1),f.m(e,null)):f&&(Y(),b(f,1,1,()=>{f=null}),U()),(!l||a&2&&n!==(n=s[1].id+"--highlighter"))&&k(e,"id",n),(!l||a&4&&t!==(t="absolute border-["+(s[2]+"em")+"] md:border-["+(s[2]/2+"em")+"] border-transparent rounded-full p-0 m-0"))&&k(e,"class",t),(!l||a&32)&&le(e,"top",s[5]+"px"),(!l||a&16)&&le(e,"left",s[4]+"px")},i(s){l||(m(f),l=!0)},o(s){b(f),l=!1},d(s){s&&_(e),f&&f.d(),i[9](null),o=!1,Nt(r)}}}function ml(i,e,n){let t,l,{$$slots:o={},$$scope:r}=e,{node:f}=e,{zoneSize:s=2}=e,{highlight:a=!1}=e,c;const u=E=>{n(5,t),n(3,c),n(1,f),n(4,l),n(3,c),n(1,f)};function g(E){pe[E?"unshift":"push"](()=>{c=E,n(3,c)})}const w=E=>{n(0,a=!0)},P=E=>{n(0,a=!1)},S=E=>{n(0,a=!0)},I=E=>{n(0,a=!1)};return i.$$set=E=>{"node"in E&&n(1,f=E.node),"zoneSize"in E&&n(2,s=E.zoneSize),"highlight"in E&&n(0,a=E.highlight),"$$scope"in E&&n(6,r=E.$$scope)},i.$$.update=()=>{i.$$.dirty&10&&n(5,t=c?-c.offsetHeight/2+f.offsetHeight/2:0),i.$$.dirty&10&&n(4,l=c?-c.offsetWidth/2+f.offsetWidth/2:0),i.$$.dirty&10&&c&&f.insertAdjacentElement("beforeend",c)},[a,f,s,c,l,t,r,o,u,g,w,P,S,I]}class gl extends ${constructor(e){super(),x(this,e,ml,dl,Z,{node:1,zoneSize:2,highlight:0})}}const Ct=(i,e,n=!1)=>{const t=i.find(o=>o.id==e);if(!t||!t.value)return"";if(!n)return t.value+" to";const l=i.find(o=>o.id==n);return l?`${t.value} to ${l.value}`:t.value},{window:pl}=$t;function Lt(i,e,n){const t=i.slice();return t[18]=e[n][0],t[19]=e[n][1].node,t[20]=e[n][1].highlight,t}const kl=i=>({}),Ot=i=>({connectable:i[10]}),bl=i=>({}),St=i=>({connectable:i[10]});function Pt(i){let e,n,t;function l(r){i[13](r)}let o={left:i[7],top:i[8],id:Rt,$$slots:{default:[wl]},$$scope:{ctx:i}};return i[5]!==void 0&&(o.marker=i[5]),e=new tl({props:o}),pe.push(()=>Vt(e,"marker",l)),{c(){q(e.$$.fragment)},l(r){J(e.$$.fragment,r)},m(r,f){K(e,r,f),t=!0},p(r,f){const s={};f&128&&(s.left=r[7]),f&256&&(s.top=r[8]),f&32768&&(s.$$scope={dirty:f,ctx:r}),!n&&f&32&&(n=!0,s.marker=r[5],Bt(()=>n=!1)),e.$set(s)},i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){Q(e,r)}}}function vl(i){let e;return{c(){e=M("div"),this.h()},l(n){e=z(n,"DIV",{class:!0}),V(e).forEach(_),this.h()},h(){k(e,"class","h-32 w-32 md:h-16 md:w-16 p-8 rounded-full shadow-xl opacity-80 select-none border-[4em] md:border-[2em] ")},m(n,t){L(n,e,t)},p:N,d(n){n&&_(e)}}}function wl(i){let e;const n=i[11].marker,t=re(n,i,i[15],St),l=t||vl();return{c(){l&&l.c()},l(o){l&&l.l(o)},m(o,r){l&&l.m(o,r),e=!0},p(o,r){t&&t.p&&(!e||r&32768)&&se(t,n,o,o[15],e?fe(n,o[15],r,bl):oe(o[15]),St)},i(o){e||(m(l,o),e=!0)},o(o){b(l,o),e=!1},d(o){l&&l.d(o)}}}function Tt(i){let e;const n=i[11].default,t=re(n,i,i[15],Ot);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&32768)&&se(t,n,l,l[15],e?fe(n,l[15],o,kl):oe(l[15]),Ot)},i(l){e||(m(t,l),e=!0)},o(l){b(t,l),e=!1},d(l){t&&t.d(l)}}}function yt(i){let e,n;return e=new gl({props:{node:i[19],highlight:i[20]}}),{c(){q(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,l){K(e,t,l),n=!0},p(t,l){const o={};l&4&&(o.node=t[19]),l&4&&(o.highlight=t[20]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function El(i){var T,C;let e,n,t,l,o,r,f,s,a,c,u=i[4]&&Pt(i),g=i[3]&&Tt(i);const w=[{links:[i[6]]},{calcOffsetFromCanvas:i[9]},(T=i[1])==null?void 0:T.links];let P={};for(let p=0;p<w.length;p+=1)P=ve(P,w[p]);l=new wt({props:P});const S=[{links:i[0].links},{calcOffsetFromCanvas:i[9]},(C=i[1])==null?void 0:C.links];let I={};for(let p=0;p<S.length;p+=1)I=ve(I,S[p]);r=new wt({props:I});let E=[...Object.entries(i[2])],d=[];for(let p=0;p<E.length;p+=1)d[p]=yt(Lt(i,E,p));const O=p=>b(d[p],1,1,()=>{d[p]=null});return{c(){e=M("div"),u&&u.c(),n=X(),g&&g.c(),t=X(),q(l.$$.fragment),o=X(),q(r.$$.fragment),f=X();for(let p=0;p<d.length;p+=1)d[p].c();this.h()},l(p){e=z(p,"DIV",{class:!0});var v=V(e);u&&u.l(v),n=W(v),g&&g.l(v),t=W(v),J(l.$$.fragment,v),o=W(v),J(r.$$.fragment,v),f=W(v);for(let h=0;h<d.length;h+=1)d[h].l(v);v.forEach(_),this.h()},h(){k(e,"class","relative")},m(p,v){L(p,e,v),u&&u.m(e,null),D(e,n),g&&g.m(e,null),D(e,t),K(l,e,null),D(e,o),K(r,e,null),D(e,f);for(let h=0;h<d.length;h+=1)d[h].m(e,null);i[14](e),s=!0,a||(c=te(pl,"resize",i[12]),a=!0)},p(p,[v]){var R,H;p[4]?u?(u.p(p,v),v&16&&m(u,1)):(u=Pt(p),u.c(),m(u,1),u.m(e,n)):u&&(Y(),b(u,1,1,()=>{u=null}),U()),p[3]?g?(g.p(p,v),v&8&&m(g,1)):(g=Tt(p),g.c(),m(g,1),g.m(e,t)):g&&(Y(),b(g,1,1,()=>{g=null}),U());const h=v&578?Me(w,[v&64&&{links:[p[6]]},v&512&&{calcOffsetFromCanvas:p[9]},v&2&&ze((R=p[1])==null?void 0:R.links)]):{};l.$set(h);const y=v&515?Me(S,[v&1&&{links:p[0].links},v&512&&{calcOffsetFromCanvas:p[9]},v&2&&ze((H=p[1])==null?void 0:H.links)]):{};if(r.$set(y),v&4){E=[...Object.entries(p[2])];let A;for(A=0;A<E.length;A+=1){const ee=Lt(p,E,A);d[A]?(d[A].p(ee,v),m(d[A],1)):(d[A]=yt(ee),d[A].c(),m(d[A],1),d[A].m(e,null))}for(Y(),A=E.length;A<d.length;A+=1)O(A);U()}},i(p){if(!s){m(u),m(g),m(l.$$.fragment,p),m(r.$$.fragment,p);for(let v=0;v<E.length;v+=1)m(d[v]);s=!0}},o(p){b(u),b(g),b(l.$$.fragment,p),b(r.$$.fragment,p),d=d.filter(Boolean);for(let v=0;v<d.length;v+=1)b(d[v]);s=!1},d(p){p&&_(e),u&&u.d(),g&&g.d(),Q(l),Q(r),_e(d,p),i[14](null),a=!1,c()}}}const Rt="marker";function Cl(i,e,n){let{$$slots:t={},$$scope:l}=e,{data:o}=e,{opts:r={}}=e;const f=we();let s={},a,c,u,g=null,w=0,P=0;function S(C,p){p.stopPropagation(),p.preventDefault(),n(7,w=C.pageX-a.offsetLeft),n(8,P=C.pageY-a.offsetTop)}function I(C){if(!C)return;if(C==a)return{x:C.offsetLeft,y:C.offsetTop};let p=C.getBoundingClientRect().top,v=a.getBoundingClientRect().top,h=p-v,y=C.getBoundingClientRect().left,R=a.getBoundingClientRect().left;return{x:y-R,y:h}}function E(C,p){var R,H;C.id||(C.id=Gn()),C.style.position||(C.style.position="relative");let v=!1,h;n(2,s[C.id]={node:C,highlight:v},s);let y;return p!=null&&p.dataset&&(C.dataset.dataset=JSON.stringify(p.dataset)),(R=p==null?void 0:p.restrictions)!=null&&R.startOnly||(C.dataset.dropzone=!0),(H=p==null?void 0:p.restrictions)!=null&&H.dropOnly||(y=new Zn(C,{start(A,ee){return y.currentPointers.length===1?!1:(n(4,c=!0),S(A,ee),!0)},move(A,ee,me){var Ee;S(y.currentPointers[0],me),n(6,g={id:C.id+"-to-",source:{id:C.id},target:{id:Rt},opts:{label:{enabled:!0,value:Ct(o.nodes,C.id)}}}),h&&n(2,s[h.id].highlight=!1,s),h=((Ee=document.elementFromPoint(y.currentPointers[0].clientX,y.currentPointers[0].clientY))==null?void 0:Ee.closest("[data-dropzone]"))||null,h!=null&&h.id&&n(2,s[h.id].highlight=!0,s)},end:(A,ee,me)=>{var Ve,Be;n(5,u.style.display="none",u),n(4,c=!1),s&&h&&h.id&&s[h.id].highlight&&n(2,s[h.id].highlight=!1,s),h=null;let G=document.elementFromPoint(A.clientX,A.clientY).closest("[data-dropzone]");if(n(6,g=null),!G||!(G!=null&&G.id)||!C||!(C!=null&&C.id))return;const Ne={id:C.id+"-to-"+G.id,source:{id:C.id},target:{id:G.id},opts:{label:{enabled:!0,value:Ct(o.nodes,C.id,G.id)}}};if(console.log({newLink:Ne}),n(0,o.links=[...o.links,Ne],o),(p==null?void 0:p.dataset)||((Ve=G==null?void 0:G.dataset)==null?void 0:Ve.dataset)){const Ae={source:{dataset:(p==null?void 0:p.dataset)||null},target:{dataset:(Be=G==null?void 0:G.dataset)!=null&&Be.dataset?JSON.parse(G.dataset.dataset):null}};console.log(Ae),f("connected",Ae)}},avoidPointerEvents:!0,eventListenerOptions:{capture:!0,passive:!1}})),{update(A){},destroy(){}}}const d=C=>{n(0,o)};function O(C){u=C,n(5,u)}function T(C){pe[C?"unshift":"push"](()=>{a=C,n(3,a)})}return i.$$set=C=>{"data"in C&&n(0,o=C.data),"opts"in C&&n(1,r=C.opts),"$$scope"in C&&n(15,l=C.$$scope)},[o,r,s,a,c,u,g,w,P,I,E,t,d,O,T,l]}class Ll extends ${constructor(e){super(),x(this,e,Cl,El,Z,{data:0,opts:1})}}function Ol(i){let e,n;return e=new Qn({props:{commits:i[1],connectable:i[4]}}),e.$on("createLink",i[2]),{c(){q(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,l){K(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.connectable=t[4]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){b(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Sl(i){let e,n,t;function l(r){i[3](r)}let o={$$slots:{default:[Ol,({connectable:r})=>({4:r}),({connectable:r})=>r?16:0]},$$scope:{ctx:i}};return i[0]!==void 0&&(o.data=i[0]),e=new Ll({props:o}),pe.push(()=>Vt(e,"data",l)),{c(){q(e.$$.fragment)},l(r){J(e.$$.fragment,r)},m(r,f){K(e,r,f),t=!0},p(r,[f]){const s={};f&48&&(s.$$scope={dirty:f,ctx:r}),!n&&f&1&&(n=!0,s.data=r[0],Bt(()=>n=!1)),e.$set(s)},i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){Q(e,r)}}}function Pl(i,e,n){let t=[],l={nodes:[],links:[]};function o(f){console.log({detail:f.detail});const s={source:{id:f.detail.source.dataset.cid},target:{id:f.detail.target.dataset.cid}};n(0,l.links=[...l.links,s],l)}function r(f){l=f,n(0,l)}return i.$$.update=()=>{i.$$.dirty&1&&l&&console.log({data:l})},[l,t,o,r]}class Nl extends ${constructor(e){super(),x(this,e,Pl,Sl,Z,{})}}export{Nl as default};
