var Nx=Object.create;var Us=Object.defineProperty;var Px=Object.getOwnPropertyDescriptor;var Fx=Object.getOwnPropertyNames;var $x=Object.getPrototypeOf,Ux=Object.prototype.hasOwnProperty;var U=(r,e)=>()=>(r&&(e=r(r=0)),e);var E=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),W=(r,e)=>{for(var t in e)Us(r,t,{get:e[t],enumerable:!0})},Md=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Fx(e))!Ux.call(r,i)&&i!==t&&Us(r,i,{get:()=>e[i],enumerable:!(n=Px(e,i))||n.enumerable});return r};var v=(r,e,t)=>(t=r!=null?Nx($x(r)):{},Md(e||!r||!r.__esModule?Us(t,"default",{value:r,enumerable:!0}):t,r)),ke=r=>Md(Us({},"__esModule",{value:!0}),r);var qd=E(Ms=>{"use strict";a();Ms.byteLength=jx;Ms.toByteArray=qx;Ms.fromByteArray=Wx;var Nt=[],tt=[],Mx=typeof Uint8Array<"u"?Uint8Array:Array,mu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(yn=0,jd=mu.length;yn<jd;++yn)Nt[yn]=mu[yn],tt[mu.charCodeAt(yn)]=yn;var yn,jd;tt["-".charCodeAt(0)]=62;tt["_".charCodeAt(0)]=63;function zd(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function jx(r){var e=zd(r),t=e[0],n=e[1];return(t+n)*3/4-n}function zx(r,e,t){return(e+t)*3/4-t}function qx(r){var e,t=zd(r),n=t[0],i=t[1],o=new Mx(zx(r,n,i)),s=0,c=i>0?n-4:n,u;for(u=0;u<c;u+=4)e=tt[r.charCodeAt(u)]<<18|tt[r.charCodeAt(u+1)]<<12|tt[r.charCodeAt(u+2)]<<6|tt[r.charCodeAt(u+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=tt[r.charCodeAt(u)]<<2|tt[r.charCodeAt(u+1)]>>4,o[s++]=e&255),i===1&&(e=tt[r.charCodeAt(u)]<<10|tt[r.charCodeAt(u+1)]<<4|tt[r.charCodeAt(u+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function Vx(r){return Nt[r>>18&63]+Nt[r>>12&63]+Nt[r>>6&63]+Nt[r&63]}function Kx(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(Vx(n));return i.join("")}function Wx(r){for(var e,t=r.length,n=t%3,i=[],o=16383,s=0,c=t-n;s<c;s+=o)i.push(Kx(r,s,s+o>c?c:s+o));return n===1?(e=r[t-1],i.push(Nt[e>>2]+Nt[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(Nt[e>>10]+Nt[e>>4&63]+Nt[e<<2&63]+"=")),i.join("")}});var Vd=E(gu=>{a();gu.read=function(r,e,t,n,i){var o,s,c=i*8-n-1,u=(1<<c)-1,f=u>>1,l=-7,h=t?i-1:0,p=t?-1:1,w=r[e+h];for(h+=p,o=w&(1<<-l)-1,w>>=-l,l+=c;l>0;o=o*256+r[e+h],h+=p,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=s*256+r[e+h],h+=p,l-=8);if(o===0)o=1-f;else{if(o===u)return s?NaN:(w?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-f}return(w?-1:1)*s*Math.pow(2,o-n)};gu.write=function(r,e,t,n,i,o){var s,c,u,f=o*8-i-1,l=(1<<f)-1,h=l>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=n?0:o-1,g=n?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+h>=1?e+=p/u:e+=p*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=l?(c=0,s=l):s+h>=1?(c=(e*u-1)*Math.pow(2,i),s=s+h):(c=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+w]=c&255,w+=g,c/=256,i-=8);for(s=s<<i|c,f+=i;f>0;r[t+w]=s&255,w+=g,s/=256,f-=8);r[t+w-g]|=y*128}});var ho=E(ai=>{"use strict";a();var wu=qd(),oi=Vd(),Kd=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;ai.Buffer=m;ai.SlowBuffer=Xx;ai.INSPECT_MAX_BYTES=50;var js=2147483647;ai.kMaxLength=js;m.TYPED_ARRAY_SUPPORT=Hx();!m.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Hx(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(!!m.isBuffer(this))return this.buffer}});Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(!!m.isBuffer(this))return this.byteOffset}});function Zt(r){if(r>js)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,m.prototype),e}function m(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return vu(r)}return Jd(r,e,t)}m.poolSize=8192;function Jd(r,e,t){if(typeof r=="string")return Jx(r,e);if(ArrayBuffer.isView(r))return Qx(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(Pt(r,ArrayBuffer)||r&&Pt(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Pt(r,SharedArrayBuffer)||r&&Pt(r.buffer,SharedArrayBuffer)))return Eu(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return m.from(n,e,t);let i=Yx(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return m.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}m.from=function(r,e,t){return Jd(r,e,t)};Object.setPrototypeOf(m.prototype,Uint8Array.prototype);Object.setPrototypeOf(m,Uint8Array);function Qd(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Gx(r,e,t){return Qd(r),r<=0?Zt(r):e!==void 0?typeof t=="string"?Zt(r).fill(e,t):Zt(r).fill(e):Zt(r)}m.alloc=function(r,e,t){return Gx(r,e,t)};function vu(r){return Qd(r),Zt(r<0?0:_u(r)|0)}m.allocUnsafe=function(r){return vu(r)};m.allocUnsafeSlow=function(r){return vu(r)};function Jx(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!m.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=Yd(r,e)|0,n=Zt(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function bu(r){let e=r.length<0?0:_u(r.length)|0,t=Zt(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function Qx(r){if(Pt(r,Uint8Array)){let e=new Uint8Array(r);return Eu(e.buffer,e.byteOffset,e.byteLength)}return bu(r)}function Eu(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,m.prototype),n}function Yx(r){if(m.isBuffer(r)){let e=_u(r.length)|0,t=Zt(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||Du(r.length)?Zt(0):bu(r);if(r.type==="Buffer"&&Array.isArray(r.data))return bu(r.data)}function _u(r){if(r>=js)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+js.toString(16)+" bytes");return r|0}function Xx(r){return+r!=r&&(r=0),m.alloc(+r)}m.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==m.prototype};m.compare=function(e,t){if(Pt(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),Pt(t,Uint8Array)&&(t=m.from(t,t.offset,t.byteLength)),!m.isBuffer(e)||!m.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};m.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};m.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return m.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=m.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let s=e[n];if(Pt(s,Uint8Array))o+s.length>i.length?(m.isBuffer(s)||(s=m.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(m.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function Yd(r,e){if(m.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||Pt(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return xu(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return sp(r).length;default:if(i)return n?-1:xu(r).length;e=(""+e).toLowerCase(),i=!0}}m.byteLength=Yd;function Zx(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return uv(this,e,t);case"utf8":case"utf-8":return Zd(this,e,t);case"ascii":return av(this,e,t);case"latin1":case"binary":return cv(this,e,t);case"base64":return ov(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fv(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}m.prototype._isBuffer=!0;function mn(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}m.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)mn(this,t,t+1);return this};m.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)mn(this,t,t+3),mn(this,t+1,t+2);return this};m.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)mn(this,t,t+7),mn(this,t+1,t+6),mn(this,t+2,t+5),mn(this,t+3,t+4);return this};m.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Zd(this,0,e):Zx.apply(this,arguments)};m.prototype.toLocaleString=m.prototype.toString;m.prototype.equals=function(e){if(!m.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:m.compare(this,e)===0};m.prototype.inspect=function(){let e="",t=ai.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};Kd&&(m.prototype[Kd]=m.prototype.inspect);m.prototype.compare=function(e,t,n,i,o){if(Pt(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),!m.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,c=n-t,u=Math.min(s,c),f=this.slice(i,o),l=e.slice(t,n);for(let h=0;h<u;++h)if(f[h]!==l[h]){s=f[h],c=l[h];break}return s<c?-1:c<s?1:0};function Xd(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Du(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=m.from(e,n)),m.isBuffer(e))return e.length===0?-1:Wd(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):Wd(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function Wd(r,e,t,n,i){let o=1,s=r.length,c=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,c/=2,t/=2}function u(l,h){return o===1?l[h]:l.readUInt16BE(h*o)}let f;if(i){let l=-1;for(f=t;f<s;f++)if(u(r,f)===u(e,l===-1?0:f-l)){if(l===-1&&(l=f),f-l+1===c)return l*o}else l!==-1&&(f-=f-l),l=-1}else for(t+c>s&&(t=s-c),f=t;f>=0;f--){let l=!0;for(let h=0;h<c;h++)if(u(r,f+h)!==u(e,h)){l=!1;break}if(l)return f}return-1}m.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};m.prototype.indexOf=function(e,t,n){return Xd(this,e,t,n,!0)};m.prototype.lastIndexOf=function(e,t,n){return Xd(this,e,t,n,!1)};function ev(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let c=parseInt(e.substr(s*2,2),16);if(Du(c))return s;r[t+s]=c}return s}function tv(r,e,t,n){return zs(xu(e,r.length-t),r,t,n)}function rv(r,e,t,n){return zs(pv(e),r,t,n)}function nv(r,e,t,n){return zs(sp(e),r,t,n)}function iv(r,e,t,n){return zs(yv(e,r.length-t),r,t,n)}m.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return ev(this,e,t,n);case"utf8":case"utf-8":return tv(this,e,t,n);case"ascii":case"latin1":case"binary":return rv(this,e,t,n);case"base64":return nv(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return iv(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ov(r,e,t){return e===0&&t===r.length?wu.fromByteArray(r):wu.fromByteArray(r.slice(e,t))}function Zd(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],s=null,c=o>239?4:o>223?3:o>191?2:1;if(i+c<=t){let u,f,l,h;switch(c){case 1:o<128&&(s=o);break;case 2:u=r[i+1],(u&192)===128&&(h=(o&31)<<6|u&63,h>127&&(s=h));break;case 3:u=r[i+1],f=r[i+2],(u&192)===128&&(f&192)===128&&(h=(o&15)<<12|(u&63)<<6|f&63,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:u=r[i+1],f=r[i+2],l=r[i+3],(u&192)===128&&(f&192)===128&&(l&192)===128&&(h=(o&15)<<18|(u&63)<<12|(f&63)<<6|l&63,h>65535&&h<1114112&&(s=h))}}s===null?(s=65533,c=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=c}return sv(n)}var Hd=4096;function sv(r){let e=r.length;if(e<=Hd)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=Hd));return t}function av(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function cv(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function uv(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=mv[r[o]];return i}function fv(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}m.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,m.prototype),i};function le(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}m.prototype.readUintLE=m.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||le(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return i};m.prototype.readUintBE=m.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||le(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};m.prototype.readUint8=m.prototype.readUInt8=function(e,t){return e=e>>>0,t||le(e,1,this.length),this[e]};m.prototype.readUint16LE=m.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||le(e,2,this.length),this[e]|this[e+1]<<8};m.prototype.readUint16BE=m.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||le(e,2,this.length),this[e]<<8|this[e+1]};m.prototype.readUint32LE=m.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||le(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};m.prototype.readUint32BE=m.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||le(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};m.prototype.readBigUInt64LE=Sr(function(e){e=e>>>0,si(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&lo(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});m.prototype.readBigUInt64BE=Sr(function(e){e=e>>>0,si(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&lo(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});m.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||le(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};m.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||le(e,t,this.length);let i=t,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};m.prototype.readInt8=function(e,t){return e=e>>>0,t||le(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};m.prototype.readInt16LE=function(e,t){e=e>>>0,t||le(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};m.prototype.readInt16BE=function(e,t){e=e>>>0,t||le(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};m.prototype.readInt32LE=function(e,t){return e=e>>>0,t||le(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};m.prototype.readInt32BE=function(e,t){return e=e>>>0,t||le(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};m.prototype.readBigInt64LE=Sr(function(e){e=e>>>0,si(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&lo(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});m.prototype.readBigInt64BE=Sr(function(e){e=e>>>0,si(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&lo(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});m.prototype.readFloatLE=function(e,t){return e=e>>>0,t||le(e,4,this.length),oi.read(this,e,!0,23,4)};m.prototype.readFloatBE=function(e,t){return e=e>>>0,t||le(e,4,this.length),oi.read(this,e,!1,23,4)};m.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||le(e,8,this.length),oi.read(this,e,!0,52,8)};m.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||le(e,8,this.length),oi.read(this,e,!1,52,8)};function Oe(r,e,t,n,i,o){if(!m.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}m.prototype.writeUintLE=m.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;Oe(this,e,t,n,c,0)}let o=1,s=0;for(this[t]=e&255;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n};m.prototype.writeUintBE=m.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;Oe(this,e,t,n,c,0)}let o=n-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n};m.prototype.writeUint8=m.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||Oe(this,e,t,1,255,0),this[t]=e&255,t+1};m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Oe(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Oe(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Oe(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Oe(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function ep(r,e,t,n,i){op(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,t}function tp(r,e,t,n,i){op(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=s,s=s>>8,r[t+2]=s,s=s>>8,r[t+1]=s,s=s>>8,r[t]=s,t+8}m.prototype.writeBigUInt64LE=Sr(function(e,t=0){return ep(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});m.prototype.writeBigUInt64BE=Sr(function(e,t=0){return tp(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});m.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let u=Math.pow(2,8*n-1);Oe(this,e,t,n,u-1,-u)}let o=0,s=1,c=0;for(this[t]=e&255;++o<n&&(s*=256);)e<0&&c===0&&this[t+o-1]!==0&&(c=1),this[t+o]=(e/s>>0)-c&255;return t+n};m.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let u=Math.pow(2,8*n-1);Oe(this,e,t,n,u-1,-u)}let o=n-1,s=1,c=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&c===0&&this[t+o+1]!==0&&(c=1),this[t+o]=(e/s>>0)-c&255;return t+n};m.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||Oe(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};m.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Oe(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};m.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Oe(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};m.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Oe(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};m.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Oe(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};m.prototype.writeBigInt64LE=Sr(function(e,t=0){return ep(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});m.prototype.writeBigInt64BE=Sr(function(e,t=0){return tp(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function rp(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function np(r,e,t,n,i){return e=+e,t=t>>>0,i||rp(r,e,t,4,34028234663852886e22,-34028234663852886e22),oi.write(r,e,t,n,23,4),t+4}m.prototype.writeFloatLE=function(e,t,n){return np(this,e,t,!0,n)};m.prototype.writeFloatBE=function(e,t,n){return np(this,e,t,!1,n)};function ip(r,e,t,n,i){return e=+e,t=t>>>0,i||rp(r,e,t,8,17976931348623157e292,-17976931348623157e292),oi.write(r,e,t,n,52,8),t+8}m.prototype.writeDoubleLE=function(e,t,n){return ip(this,e,t,!0,n)};m.prototype.writeDoubleBE=function(e,t,n){return ip(this,e,t,!1,n)};m.prototype.copy=function(e,t,n,i){if(!m.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};m.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!m.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let s=m.isBuffer(e)?e:m.from(e,i),c=s.length;if(c===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%c]}return this};var ii={};function Su(r,e,t){ii[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}Su("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Su("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);Su("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=Gd(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=Gd(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function Gd(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function lv(r,e,t){si(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&lo(e,r.length-(t+1))}function op(r,e,t,n,i,o){if(r>t||r<e){let s=typeof e=="bigint"?"n":"",c;throw o>3?e===0||e===BigInt(0)?c=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:c=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:c=`>= ${e}${s} and <= ${t}${s}`,new ii.ERR_OUT_OF_RANGE("value",c,r)}lv(n,i,o)}function si(r,e){if(typeof r!="number")throw new ii.ERR_INVALID_ARG_TYPE(e,"number",r)}function lo(r,e,t){throw Math.floor(r)!==r?(si(r,t),new ii.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new ii.ERR_BUFFER_OUT_OF_BOUNDS:new ii.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var hv=/[^+/0-9A-Za-z-_]/g;function dv(r){if(r=r.split("=")[0],r=r.trim().replace(hv,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function xu(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function pv(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function yv(r,e){let t,n,i,o=[];for(let s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function sp(r){return wu.toByteArray(dv(r))}function zs(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function Pt(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function Du(r){return r!==r}var mv=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function Sr(r){return typeof BigInt>"u"?gv:r}function gv(){throw new Error("BigInt not supported")}});var lp=E((sC,fp)=>{a();var ne=fp.exports={},Ft,$t;function Au(){throw new Error("setTimeout has not been defined")}function Tu(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Ft=setTimeout:Ft=Au}catch{Ft=Au}try{typeof clearTimeout=="function"?$t=clearTimeout:$t=Tu}catch{$t=Tu}})();function ap(r){if(Ft===setTimeout)return setTimeout(r,0);if((Ft===Au||!Ft)&&setTimeout)return Ft=setTimeout,setTimeout(r,0);try{return Ft(r,0)}catch{try{return Ft.call(null,r,0)}catch{return Ft.call(this,r,0)}}}function wv(r){if($t===clearTimeout)return clearTimeout(r);if(($t===Tu||!$t)&&clearTimeout)return $t=clearTimeout,clearTimeout(r);try{return $t(r)}catch{try{return $t.call(null,r)}catch{return $t.call(this,r)}}}var er=[],ci=!1,gn,qs=-1;function bv(){!ci||!gn||(ci=!1,gn.length?er=gn.concat(er):qs=-1,er.length&&cp())}function cp(){if(!ci){var r=ap(bv);ci=!0;for(var e=er.length;e;){for(gn=er,er=[];++qs<e;)gn&&gn[qs].run();qs=-1,e=er.length}gn=null,ci=!1,wv(r)}}ne.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];er.push(new up(r,e)),er.length===1&&!ci&&ap(cp)};function up(r,e){this.fun=r,this.array=e}up.prototype.run=function(){this.fun.apply(null,this.array)};ne.title="browser";ne.browser=!0;ne.env={};ne.argv=[];ne.version="";ne.versions={};function tr(){}ne.on=tr;ne.addListener=tr;ne.once=tr;ne.off=tr;ne.removeListener=tr;ne.removeAllListeners=tr;ne.emit=tr;ne.prependListener=tr;ne.prependOnceListener=tr;ne.listeners=function(r){return[]};ne.binding=function(r){throw new Error("process.binding is not supported")};ne.cwd=function(){return"/"};ne.chdir=function(r){throw new Error("process.chdir is not supported")};ne.umask=function(){return 0}});var Buffer,process,global,self,a=U(()=>{"use strict";Buffer=ho().Buffer,process=lp(),global=typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{},self=globalThis;globalThis&&globalThis.process&&globalThis.process.env&&(globalThis.process.env.LIBP2P_FORCE_PNET=!1)});var pp=E((uC,dp)=>{a();dp.exports=Cu;var hp=128,Ev=127,xv=~Ev,vv=Math.pow(2,31);function Cu(r,e,t){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw Cu.bytes=0,new RangeError("Could not encode varint");e=e||[],t=t||0;for(var n=t;r>=vv;)e[t++]=r&255|hp,r/=128;for(;r&xv;)e[t++]=r&255|hp,r>>>=7;return e[t]=r|0,Cu.bytes=t-n+1,e}});var gp=E((lC,mp)=>{a();mp.exports=Iu;var _v=128,yp=127;function Iu(r,n){var t=0,n=n||0,i=0,o=n,s,c=r.length;do{if(o>=c||i>49)throw Iu.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(s&yp)<<i:(s&yp)*Math.pow(2,i),i+=7}while(s>=_v);return Iu.bytes=o-n,t}});var bp=E((dC,wp)=>{a();var Sv=Math.pow(2,7),Dv=Math.pow(2,14),Av=Math.pow(2,21),Tv=Math.pow(2,28),Cv=Math.pow(2,35),Iv=Math.pow(2,42),kv=Math.pow(2,49),Ov=Math.pow(2,56),Bv=Math.pow(2,63);wp.exports=function(r){return r<Sv?1:r<Dv?2:r<Av?3:r<Tv?4:r<Cv?5:r<Iv?6:r<kv?7:r<Ov?8:r<Bv?9:10}});var Be=E((yC,Ep)=>{a();Ep.exports={encode:pp(),decode:gp(),encodingLength:bp()}});function Dy(r,e,t){e=e||[],t=t||0;for(var n=t;r>=f2;)e[t++]=r&255|_y,r/=128;for(;r&u2;)e[t++]=r&255|_y,r>>>=7;return e[t]=r|0,Dy.bytes=t-n+1,e}function ju(r,n){var t=0,n=n||0,i=0,o=n,s,c=r.length;do{if(o>=c)throw ju.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(s&Sy)<<i:(s&Sy)*Math.pow(2,i),i+=7}while(s>=h2);return ju.bytes=o-n,t}var a2,_y,c2,u2,f2,l2,h2,Sy,d2,p2,y2,m2,g2,w2,b2,E2,x2,v2,_2,S2,vo,Ay=U(()=>{a();a2=Dy,_y=128,c2=127,u2=~c2,f2=Math.pow(2,31);l2=ju,h2=128,Sy=127;d2=Math.pow(2,7),p2=Math.pow(2,14),y2=Math.pow(2,21),m2=Math.pow(2,28),g2=Math.pow(2,35),w2=Math.pow(2,42),b2=Math.pow(2,49),E2=Math.pow(2,56),x2=Math.pow(2,63),v2=function(r){return r<d2?1:r<p2?2:r<y2?3:r<m2?4:r<g2?5:r<w2?6:r<b2?7:r<E2?8:r<x2?9:10},_2={encode:a2,decode:l2,encodingLength:v2},S2=_2,vo=S2});var _o,yi,mi,ra=U(()=>{a();Ay();_o=(r,e=0)=>[vo.decode(r,e),vo.decode.bytes],yi=(r,e,t=0)=>(vo.encode(r,e,t),e),mi=r=>vo.encodingLength(r)});var bn={};W(bn,{coerce:()=>it,empty:()=>Ty,equals:()=>zu,fromHex:()=>A2,fromString:()=>qu,isBinary:()=>T2,toHex:()=>D2,toString:()=>Vu});var Ty,D2,A2,zu,it,T2,qu,Vu,Tr=U(()=>{a();Ty=new Uint8Array(0),D2=r=>r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),A2=r=>{let e=r.match(/../g);return e?new Uint8Array(e.map(t=>parseInt(t,16))):Ty},zu=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},it=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},T2=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),qu=r=>new TextEncoder().encode(r),Vu=r=>new TextDecoder().decode(r)});var be={};W(be,{Digest:()=>En,create:()=>Cr,decode:()=>G,equals:()=>Ku});var Cr,G,Ku,En,Ee=U(()=>{a();Tr();ra();Cr=(r,e)=>{let t=e.byteLength,n=mi(r),i=n+mi(t),o=new Uint8Array(i+t);return yi(r,o,0),yi(t,o,n),o.set(e,i),new En(r,t,e,o)},G=r=>{let e=it(r),[t,n]=_o(e),[i,o]=_o(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new En(t,i,s,e)},Ku=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&zu(r.bytes,e.bytes),En=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}}});function C2(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=i}var c=r.length,u=r.charAt(0),f=Math.log(c)/Math.log(256),l=Math.log(256)/Math.log(c);function h(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var y=0,k=0,$=0,re=g.length;$!==re&&g[$]===0;)$++,y++;for(var Xe=(re-$)*l+1>>>0,me=new Uint8Array(Xe);$!==re;){for(var gt=g[$],Ze=0,Me=Xe-1;(gt!==0||Ze<k)&&Me!==-1;Me--,Ze++)gt+=256*me[Me]>>>0,me[Me]=gt%c>>>0,gt=gt/c>>>0;if(gt!==0)throw new Error("Non-zero carry");k=Ze,$++}for(var et=Xe-k;et!==Xe&&me[et]===0;)et++;for(var ni=u.repeat(y);et<Xe;++et)ni+=r.charAt(me[et]);return ni}function p(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var y=0;if(g[y]!==" "){for(var k=0,$=0;g[y]===u;)k++,y++;for(var re=(g.length-y)*f+1>>>0,Xe=new Uint8Array(re);g[y];){var me=t[g.charCodeAt(y)];if(me===255)return;for(var gt=0,Ze=re-1;(me!==0||gt<$)&&Ze!==-1;Ze--,gt++)me+=c*Xe[Ze]>>>0,Xe[Ze]=me%256>>>0,me=me/256>>>0;if(me!==0)throw new Error("Non-zero carry");$=gt,y++}if(g[y]!==" "){for(var Me=re-$;Me!==re&&Xe[Me]===0;)Me++;for(var et=new Uint8Array(k+(re-Me)),ni=k;Me!==re;)et[ni++]=Xe[Me++];return et}}}function w(g){var y=p(g);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:p,decode:w}}var I2,k2,Cy,Iy=U(()=>{a();I2=C2,k2=I2,Cy=k2});var Wu,Hu,Gu,ky,Ju,gi,Ir,O2,B2,ee,Et=U(()=>{a();Iy();Tr();Wu=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Hu=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ky(this,e)}},Gu=class{constructor(e){this.decoders=e}or(e){return ky(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},ky=(r,e)=>new Gu({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),Ju=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Wu(e,t,n),this.decoder=new Hu(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},gi=({name:r,prefix:e,encode:t,decode:n})=>new Ju(r,e,t,n),Ir=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=Cy(t,e);return gi({prefix:r,name:e,encode:n,decode:o=>it(i(o))})},O2=(r,e,t,n)=>{let i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let o=r.length;for(;r[o-1]==="=";)--o;let s=new Uint8Array(o*t/8|0),c=0,u=0,f=0;for(let l=0;l<o;++l){let h=i[r[l]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<t|h,c+=t,c>=8&&(c-=8,s[f++]=255&u>>c)}if(c>=t||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return s},B2=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",s=0,c=0;for(let u=0;u<r.length;++u)for(c=c<<8|r[u],s+=8;s>t;)s-=t,o+=e[i&c>>s];if(s&&(o+=e[i&c<<t-s]),n)for(;o.length*t&7;)o+="=";return o},ee=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>gi({prefix:e,name:r,encode(i){return B2(i,n,t)},decode(i){return O2(i,n,t,r)}})});var So={};W(So,{base58btc:()=>z,base58flickr:()=>L2});var z,L2,Re=U(()=>{a();Et();z=Ir({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),L2=Ir({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var na={};W(na,{base32:()=>I,base32hex:()=>P2,base32hexpad:()=>$2,base32hexpadupper:()=>U2,base32hexupper:()=>F2,base32pad:()=>Qu,base32padupper:()=>N2,base32upper:()=>R2,base32z:()=>M2});var I,R2,Qu,N2,P2,F2,$2,U2,M2,xe=U(()=>{a();Et();I=ee({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),R2=ee({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Qu=ee({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),N2=ee({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),P2=ee({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),F2=ee({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),$2=ee({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),U2=ee({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),M2=ee({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var Yu={};W(Yu,{CID:()=>x});var x,j2,z2,q2,Do,V2,Oy,By,ia,oa,K2,W2,H2,q=U(()=>{a();ra();Ee();Re();xe();Tr();x=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:oa,byteLength:oa,code:ia,version:ia,multihash:ia,bytes:ia,_baseCache:oa,asCID:oa})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==Do)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==V2)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return x.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=Cr(e,t);return x.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Ku(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:i}=this;switch(n){case 0:return z2(t,i,e||z.encoder);default:return q2(t,i,e||I.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return W2(/^0\.0/,H2),!!(e&&(e[By]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof x)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:i,bytes:o}=e;return new x(t,n,i,o||Oy(t,n,i.bytes))}else if(e!=null&&e[By]===!0){let{version:t,multihash:n,code:i}=e,o=G(n);return x.create(t,i,o)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==Do)throw new Error(`Version 0 CID must use dag-pb (code: ${Do}) block encoding`);return new x(e,t,n,n.bytes)}case 1:{let i=Oy(e,t,n.bytes);return new x(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return x.create(0,Do,e)}static createV1(e,t){return x.create(1,e,t)}static decode(e){let[t,n]=x.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=x.inspectBytes(e),n=t.size-t.multihashSize,i=it(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),s=new En(t.multihashCode,t.digestSize,o,i);return[t.version===0?x.createV0(s):x.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[h,p]=_o(e.subarray(t));return t+=p,h},i=n(),o=Do;if(i===18?(i=0,t=0):i===1&&(o=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=t,c=n(),u=n(),f=t+u,l=f-s;return{version:i,codec:o,multihashCode:c,digestSize:u,multihashSize:l,size:f}}static parse(e,t){let[n,i]=j2(e,t),o=x.decode(i);return o._baseCache.set(n,e),o}},j2=(r,e)=>{switch(r[0]){case"Q":{let t=e||z;return[z.prefix,t.decode(`${z.prefix}${r}`)]}case z.prefix:{let t=e||z;return[z.prefix,t.decode(r)]}case I.prefix:{let t=e||I;return[I.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},z2=(r,e,t)=>{let{prefix:n}=t;if(n!==z.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i},q2=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i},Do=112,V2=18,Oy=(r,e,t)=>{let n=mi(r),i=n+mi(e),o=new Uint8Array(i+t.byteLength);return yi(r,o,0),yi(e,o,n),o.set(t,i),o},By=Symbol.for("@ipld/js-cid/CID"),ia={writable:!1,configurable:!1,enumerable:!0},oa={writable:!1,enumerable:!1,configurable:!1},K2="0.0.0-dev",W2=(r,e)=>{if(r.test(K2))console.warn(e);else throw new Error(e)},H2=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var sf,of,af=U(()=>{a();Ee();sf=({name:r,code:e,encode:t})=>new of(r,e,t),of=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Cr(this.code,t):t.then(n=>Cr(this.code,n))}else throw Error("Unknown type, must be binary type")}}});var vn=U(()=>{a();q();ra();Tr();af();Ee()});var st={};W(st,{code:()=>ot,decode:()=>g8,encode:()=>m8,name:()=>Qy});var Qy,ot,m8,g8,or=U(()=>{a();Tr();Qy="raw",ot=85,m8=r=>it(r),g8=r=>it(r)});var cf={};W(cf,{sha256:()=>Mt,sha512:()=>w8});var Yy,Mt,w8,_i=U(()=>{a();af();Yy=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),Mt=sf({name:"sha2-256",code:18,encode:Yy("SHA-256")}),w8=sf({name:"sha2-512",code:19,encode:Yy("SHA-512")})});var rm=E((l4,tm)=>{a();var Si=1e3,Di=Si*60,Ai=Di*60,Dn=Ai*24,_8=Dn*7,S8=Dn*365.25;tm.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return D8(r);if(t==="number"&&isFinite(r))return e.long?T8(r):A8(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function D8(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*S8;case"weeks":case"week":case"w":return t*_8;case"days":case"day":case"d":return t*Dn;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Ai;case"minutes":case"minute":case"mins":case"min":case"m":return t*Di;case"seconds":case"second":case"secs":case"sec":case"s":return t*Si;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function A8(r){var e=Math.abs(r);return e>=Dn?Math.round(r/Dn)+"d":e>=Ai?Math.round(r/Ai)+"h":e>=Di?Math.round(r/Di)+"m":e>=Si?Math.round(r/Si)+"s":r+"ms"}function T8(r){var e=Math.abs(r);return e>=Dn?ya(r,e,Dn,"day"):e>=Ai?ya(r,e,Ai,"hour"):e>=Di?ya(r,e,Di,"minute"):e>=Si?ya(r,e,Si,"second"):r+" ms"}function ya(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var im=E((d4,nm)=>{a();function C8(r){t.debug=t,t.default=t,t.coerce=u,t.disable=o,t.enable=i,t.enabled=s,t.humanize=rm(),t.destroy=f,Object.keys(r).forEach(l=>{t[l]=r[l]}),t.names=[],t.skips=[],t.formatters={};function e(l){let h=0;for(let p=0;p<l.length;p++)h=(h<<5)-h+l.charCodeAt(p),h|=0;return t.colors[Math.abs(h)%t.colors.length]}t.selectColor=e;function t(l){let h,p=null,w,g;function y(...k){if(!y.enabled)return;let $=y,re=Number(new Date),Xe=re-(h||re);$.diff=Xe,$.prev=h,$.curr=re,h=re,k[0]=t.coerce(k[0]),typeof k[0]!="string"&&k.unshift("%O");let me=0;k[0]=k[0].replace(/%([a-zA-Z%])/g,(Ze,Me)=>{if(Ze==="%%")return"%";me++;let et=t.formatters[Me];if(typeof et=="function"){let ni=k[me];Ze=et.call($,ni),k.splice(me,1),me--}return Ze}),t.formatArgs.call($,k),($.log||t.log).apply($,k)}return y.namespace=l,y.useColors=t.useColors(),y.color=t.selectColor(l),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(w!==t.namespaces&&(w=t.namespaces,g=t.enabled(l)),g),set:k=>{p=k}}),typeof t.init=="function"&&t.init(y),y}function n(l,h){let p=t(this.namespace+(typeof h>"u"?":":h)+l);return p.log=this.log,p}function i(l){t.save(l),t.namespaces=l,t.names=[],t.skips=[];let h,p=(typeof l=="string"?l:"").split(/[\s,]+/),w=p.length;for(h=0;h<w;h++)!p[h]||(l=p[h].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.slice(1)+"$")):t.names.push(new RegExp("^"+l+"$")))}function o(){let l=[...t.names.map(c),...t.skips.map(c).map(h=>"-"+h)].join(",");return t.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let h,p;for(h=0,p=t.skips.length;h<p;h++)if(t.skips[h].test(l))return!1;for(h=0,p=t.names.length;h<p;h++)if(t.names[h].test(l))return!0;return!1}function c(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function u(l){return l instanceof Error?l.stack||l.message:l}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}nm.exports=C8});var at=E((Ke,ma)=>{a();Ke.formatArgs=k8;Ke.save=O8;Ke.load=B8;Ke.useColors=I8;Ke.storage=L8();Ke.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ke.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function I8(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function k8(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+ma.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}Ke.log=console.debug||console.log||(()=>{});function O8(r){try{r?Ke.storage.setItem("debug",r):Ke.storage.removeItem("debug")}catch{}}function B8(){let r;try{r=Ke.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function L8(){try{return localStorage}catch{}}ma.exports=im()(Ke);var{formatters:R8}=ma.exports;R8.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var ve=E((m4,sm)=>{"use strict";a();function om(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function N8(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return om(r,t)}catch{t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),om(new i,t)}}sm.exports=N8});var hf={};W(hf,{identity:()=>P8});var P8,am=U(()=>{a();Et();Tr();P8=gi({prefix:"\0",name:"identity",encode:r=>Vu(r),decode:r=>qu(r)})});var df={};W(df,{base2:()=>F8});var F8,cm=U(()=>{a();Et();F8=ee({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var pf={};W(pf,{base8:()=>$8});var $8,um=U(()=>{a();Et();$8=ee({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var yf={};W(yf,{base10:()=>U8});var U8,fm=U(()=>{a();Et();U8=Ir({prefix:"9",name:"base10",alphabet:"0123456789"})});var mf={};W(mf,{base16:()=>M8,base16upper:()=>j8});var M8,j8,lm=U(()=>{a();Et();M8=ee({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),j8=ee({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var gf={};W(gf,{base36:()=>z8,base36upper:()=>q8});var z8,q8,hm=U(()=>{a();Et();z8=Ir({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),q8=Ir({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var wf={};W(wf,{base64:()=>Pr,base64pad:()=>V8,base64url:()=>ga,base64urlpad:()=>K8});var Pr,V8,ga,K8,Ti=U(()=>{a();Et();Pr=ee({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),V8=ee({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ga=ee({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),K8=ee({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var bf={};W(bf,{base256emoji:()=>Q8});function G8(r){return r.reduce((e,t)=>(e+=W8[t],e),"")}function J8(r){let e=[];for(let t of r){let n=H8[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var dm,W8,H8,Q8,pm=U(()=>{a();Et();dm=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),W8=dm.reduce((r,e,t)=>(r[t]=e,r),[]),H8=dm.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);Q8=gi({prefix:"\u{1F680}",name:"base256emoji",encode:G8,decode:J8})});var Ef={};W(Ef,{identity:()=>Ci});var ym,Y8,mm,X8,Ci,wa=U(()=>{a();Tr();Ee();ym=0,Y8="identity",mm=it,X8=r=>Cr(ym,mm(r)),Ci={code:ym,name:Y8,encode:mm,digest:X8}});var ba={};W(ba,{code:()=>xf,decode:()=>n_,encode:()=>r_,name:()=>t_});var Z8,e_,t_,xf,r_,n_,vf=U(()=>{a();Z8=new TextEncoder,e_=new TextDecoder,t_="json",xf=512,r_=r=>Z8.encode(JSON.stringify(r)),n_=r=>JSON.parse(e_.decode(r))});var An,gm,wm,ko=U(()=>{a();am();cm();um();fm();lm();xe();hm();Re();Ti();pm();_i();wa();or();vf();vn();An={...hf,...df,...pf,...yf,...mf,...na,...gf,...So,...wf,...bf},gm={...cf,...Ef},wm={raw:st,json:ba}});function Ea(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}var _f=U(()=>{a()});function Em(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var bm,Sf,i_,xa,Df=U(()=>{a();ko();_f();bm=Em("utf8","u",r=>{let e=new TextDecoder("utf8");return"u"+e.decode(r)},r=>new TextEncoder().encode(r.substring(1))),Sf=Em("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=Ea(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),i_={utf8:bm,"utf-8":bm,hex:An.base16,latin1:Sf,ascii:Sf,binary:Sf,...An},xa=i_});var Oo={};W(Oo,{toString:()=>T});function T(r,e="utf8"){let t=xa[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var H=U(()=>{a();Df()});var xm={};W(xm,{fromString:()=>N});function N(r,e="utf8"){let t=xa[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}var we=U(()=>{a();Df()});var Af=E((ck,_m)=>{"use strict";a();var c_=async r=>{let e=0;for await(let t of r)e++;return e};_m.exports=c_});var $m=E((kk,Fm)=>{"use strict";a();Fm.exports=__;function __(r,e){for(var t=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)t[n++]=arguments[i++];return new Promise(function(c,u){t[n]=function(l){if(o)if(o=!1,l)u(l);else{for(var h=new Array(arguments.length-1),p=0;p<h.length;)h[p++]=arguments[p];c.apply(null,h)}};try{r.apply(e||null,t)}catch(f){o&&(o=!1,u(f))}})}});var zm=E(jm=>{"use strict";a();var Da=jm;Da.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&e.charAt(t)==="=";)++n;return Math.ceil(e.length*3)/4-n};var ki=new Array(64),Mm=new Array(123);for(vt=0;vt<64;)Mm[ki[vt]=vt<26?vt+65:vt<52?vt+71:vt<62?vt-4:vt-59|43]=vt++;var vt;Da.encode=function(e,t,n){for(var i=null,o=[],s=0,c=0,u;t<n;){var f=e[t++];switch(c){case 0:o[s++]=ki[f>>2],u=(f&3)<<4,c=1;break;case 1:o[s++]=ki[u|f>>4],u=(f&15)<<2,c=2;break;case 2:o[s++]=ki[u|f>>6],o[s++]=ki[f&63],c=0;break}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0)}return c&&(o[s++]=ki[u],o[s++]=61,c===1&&(o[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var Um="invalid encoding";Da.decode=function(e,t,n){for(var i=n,o=0,s,c=0;c<e.length;){var u=e.charCodeAt(c++);if(u===61&&o>1)break;if((u=Mm[u])===void 0)throw Error(Um);switch(o){case 0:s=u,o=1;break;case 1:t[n++]=s<<2|(u&48)>>4,s=u,o=2;break;case 2:t[n++]=(s&15)<<4|(u&60)>>2,s=u,o=3;break;case 3:t[n++]=(s&3)<<6|u,o=0;break}}if(o===1)throw Error(Um);return n-i};Da.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var Vm=E((Rk,qm)=>{"use strict";a();qm.exports=Aa;function Aa(){this._listeners={}}Aa.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this};Aa.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this};Aa.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}});var Ym=E((Pk,Qm)=>{"use strict";a();Qm.exports=Km(Km);function Km(r){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),n=t[3]===128;function i(u,f,l){e[0]=u,f[l]=t[0],f[l+1]=t[1],f[l+2]=t[2],f[l+3]=t[3]}function o(u,f,l){e[0]=u,f[l]=t[3],f[l+1]=t[2],f[l+2]=t[1],f[l+3]=t[0]}r.writeFloatLE=n?i:o,r.writeFloatBE=n?o:i;function s(u,f){return t[0]=u[f],t[1]=u[f+1],t[2]=u[f+2],t[3]=u[f+3],e[0]}function c(u,f){return t[3]=u[f],t[2]=u[f+1],t[1]=u[f+2],t[0]=u[f+3],e[0]}r.readFloatLE=n?s:c,r.readFloatBE=n?c:s}():function(){function e(n,i,o,s){var c=i<0?1:0;if(c&&(i=-i),i===0)n(1/i>0?0:2147483648,o,s);else if(isNaN(i))n(2143289344,o,s);else if(i>34028234663852886e22)n((c<<31|2139095040)>>>0,o,s);else if(i<11754943508222875e-54)n((c<<31|Math.round(i/1401298464324817e-60))>>>0,o,s);else{var u=Math.floor(Math.log(i)/Math.LN2),f=Math.round(i*Math.pow(2,-u)*8388608)&8388607;n((c<<31|u+127<<23|f)>>>0,o,s)}}r.writeFloatLE=e.bind(null,Wm),r.writeFloatBE=e.bind(null,Hm);function t(n,i,o){var s=n(i,o),c=(s>>31)*2+1,u=s>>>23&255,f=s&8388607;return u===255?f?NaN:c*(1/0):u===0?c*1401298464324817e-60*f:c*Math.pow(2,u-150)*(f+8388608)}r.readFloatLE=t.bind(null,Gm),r.readFloatBE=t.bind(null,Jm)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),n=t[7]===128;function i(u,f,l){e[0]=u,f[l]=t[0],f[l+1]=t[1],f[l+2]=t[2],f[l+3]=t[3],f[l+4]=t[4],f[l+5]=t[5],f[l+6]=t[6],f[l+7]=t[7]}function o(u,f,l){e[0]=u,f[l]=t[7],f[l+1]=t[6],f[l+2]=t[5],f[l+3]=t[4],f[l+4]=t[3],f[l+5]=t[2],f[l+6]=t[1],f[l+7]=t[0]}r.writeDoubleLE=n?i:o,r.writeDoubleBE=n?o:i;function s(u,f){return t[0]=u[f],t[1]=u[f+1],t[2]=u[f+2],t[3]=u[f+3],t[4]=u[f+4],t[5]=u[f+5],t[6]=u[f+6],t[7]=u[f+7],e[0]}function c(u,f){return t[7]=u[f],t[6]=u[f+1],t[5]=u[f+2],t[4]=u[f+3],t[3]=u[f+4],t[2]=u[f+5],t[1]=u[f+6],t[0]=u[f+7],e[0]}r.readDoubleLE=n?s:c,r.readDoubleBE=n?c:s}():function(){function e(n,i,o,s,c,u){var f=s<0?1:0;if(f&&(s=-s),s===0)n(0,c,u+i),n(1/s>0?0:2147483648,c,u+o);else if(isNaN(s))n(0,c,u+i),n(2146959360,c,u+o);else if(s>17976931348623157e292)n(0,c,u+i),n((f<<31|2146435072)>>>0,c,u+o);else{var l;if(s<22250738585072014e-324)l=s/5e-324,n(l>>>0,c,u+i),n((f<<31|l/4294967296)>>>0,c,u+o);else{var h=Math.floor(Math.log(s)/Math.LN2);h===1024&&(h=1023),l=s*Math.pow(2,-h),n(l*4503599627370496>>>0,c,u+i),n((f<<31|h+1023<<20|l*1048576&1048575)>>>0,c,u+o)}}}r.writeDoubleLE=e.bind(null,Wm,0,4),r.writeDoubleBE=e.bind(null,Hm,4,0);function t(n,i,o,s,c){var u=n(s,c+i),f=n(s,c+o),l=(f>>31)*2+1,h=f>>>20&2047,p=4294967296*(f&1048575)+u;return h===2047?p?NaN:l*(1/0):h===0?l*5e-324*p:l*Math.pow(2,h-1075)*(p+4503599627370496)}r.readDoubleLE=t.bind(null,Gm,0,4),r.readDoubleBE=t.bind(null,Jm,4,0)}(),r}function Wm(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function Hm(r,e,t){e[t]=r>>>24,e[t+1]=r>>>16&255,e[t+2]=r>>>8&255,e[t+3]=r&255}function Gm(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0}function Jm(r,e){return(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}});var Xm=E((exports,module)=>{"use strict";a();module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}});var eg=E(Zm=>{"use strict";a();var Cf=Zm;Cf.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?t+=1:n<2048?t+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,t+=4):t+=3;return t};Cf.read=function(e,t,n){var i=n-t;if(i<1)return"";for(var o=null,s=[],c=0,u;t<n;)u=e[t++],u<128?s[c++]=u:u>191&&u<224?s[c++]=(u&31)<<6|e[t++]&63:u>239&&u<365?(u=((u&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,s[c++]=55296+(u>>10),s[c++]=56320+(u&1023)):s[c++]=(u&15)<<12|(e[t++]&63)<<6|e[t++]&63,c>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),c=0);return o?(c&&o.push(String.fromCharCode.apply(String,s.slice(0,c))),o.join("")):String.fromCharCode.apply(String,s.slice(0,c))};Cf.write=function(e,t,n){for(var i=n,o,s,c=0;c<e.length;++c)o=e.charCodeAt(c),o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&((s=e.charCodeAt(c+1))&64512)===56320?(o=65536+((o&1023)<<10)+(s&1023),++c,t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128);return n-i}});var rg=E((jk,tg)=>{"use strict";a();tg.exports=S_;function S_(r,e,t){var n=t||8192,i=n>>>1,o=null,s=n;return function(u){if(u<1||u>i)return r(u);s+u>n&&(o=r(n),s=0);var f=e.call(o,s,s+=u);return s&7&&(s=(s|7)+1),f}}});var ig=E((qk,ng)=>{"use strict";a();ng.exports=de;var No=$r();function de(r,e){this.lo=r>>>0,this.hi=e>>>0}var Tn=de.zero=new de(0,0);Tn.toNumber=function(){return 0};Tn.zzEncode=Tn.zzDecode=function(){return this};Tn.length=function(){return 1};var D_=de.zeroHash="\0\0\0\0\0\0\0\0";de.fromNumber=function(e){if(e===0)return Tn;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new de(n,i)};de.from=function(e){if(typeof e=="number")return de.fromNumber(e);if(No.isString(e))if(No.Long)e=No.Long.fromString(e);else return de.fromNumber(parseInt(e,10));return e.low||e.high?new de(e.low>>>0,e.high>>>0):Tn};de.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296};de.prototype.toLong=function(e){return No.Long?new No.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var Fr=String.prototype.charCodeAt;de.fromHash=function(e){return e===D_?Tn:new de((Fr.call(e,0)|Fr.call(e,1)<<8|Fr.call(e,2)<<16|Fr.call(e,3)<<24)>>>0,(Fr.call(e,4)|Fr.call(e,5)<<8|Fr.call(e,6)<<16|Fr.call(e,7)<<24)>>>0)};de.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};de.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};de.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};de.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}});var $r=E(If=>{"use strict";a();var A=If;A.asPromise=$m();A.base64=zm();A.EventEmitter=Vm();A.float=Ym();A.inquire=Xm();A.utf8=eg();A.pool=rg();A.LongBits=ig();A.isNode=Boolean(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);A.global=A.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||If;A.emptyArray=Object.freeze?Object.freeze([]):[];A.emptyObject=Object.freeze?Object.freeze({}):{};A.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};A.isString=function(e){return typeof e=="string"||e instanceof String};A.isObject=function(e){return e&&typeof e=="object"};A.isset=A.isSet=function(e,t){var n=e[t];return n!=null&&e.hasOwnProperty(t)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};A.Buffer=function(){try{var r=A.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch{return null}}();A._Buffer_from=null;A._Buffer_allocUnsafe=null;A.newBuffer=function(e){return typeof e=="number"?A.Buffer?A._Buffer_allocUnsafe(e):new A.Array(e):A.Buffer?A._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};A.Array=typeof Uint8Array<"u"?Uint8Array:Array;A.Long=A.global.dcodeIO&&A.global.dcodeIO.Long||A.global.Long||A.inquire("long");A.key2Re=/^true|false|0|1$/;A.key32Re=/^-?(?:0|[1-9][0-9]*)$/;A.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;A.longToHash=function(e){return e?A.LongBits.from(e).toHash():A.LongBits.zeroHash};A.longFromHash=function(e,t){var n=A.LongBits.fromHash(e);return A.Long?A.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))};function og(r,e,t){for(var n=Object.keys(e),i=0;i<n.length;++i)(r[n[i]]===void 0||!t)&&(r[n[i]]=e[n[i]]);return r}A.merge=og;A.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function sg(r){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&og(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get(){return r},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}A.newError=sg;A.ProtocolError=sg("ProtocolError");A.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var i=Object.keys(this),o=i.length-1;o>-1;--o)if(t[i[o]]===1&&this[i[o]]!==void 0&&this[i[o]]!==null)return i[o]}};A.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}};A.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};A._configure=function(){var r=A.Buffer;if(!r){A._Buffer_from=A._Buffer_allocUnsafe=null;return}A._Buffer_from=r.from!==Uint8Array.from&&r.from||function(t,n){return new r(t,n)},A._Buffer_allocUnsafe=r.allocUnsafe||function(t){return new r(t)}}});var Pf=E((Hk,fg)=>{"use strict";a();fg.exports=P;var ut=$r(),kf,Ta=ut.LongBits,ag=ut.base64,cg=ut.utf8;function Po(r,e,t){this.fn=r,this.len=e,this.next=void 0,this.val=t}function Bf(){}function A_(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function P(){this.len=0,this.head=new Po(Bf,0,0),this.tail=this.head,this.states=null}var ug=function(){return ut.Buffer?function(){return(P.create=function(){return new kf})()}:function(){return new P}};P.create=ug();P.alloc=function(e){return new ut.Array(e)};ut.Array!==Array&&(P.alloc=ut.pool(P.alloc,ut.Array.prototype.subarray));P.prototype._push=function(e,t,n){return this.tail=this.tail.next=new Po(e,t,n),this.len+=t,this};function Lf(r,e,t){e[t]=r&255}function T_(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}function Rf(r,e){this.len=r,this.next=void 0,this.val=e}Rf.prototype=Object.create(Po.prototype);Rf.prototype.fn=T_;P.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new Rf((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};P.prototype.int32=function(e){return e<0?this._push(Nf,10,Ta.fromNumber(e)):this.uint32(e)};P.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function Nf(r,e,t){for(;r.hi;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}P.prototype.uint64=function(e){var t=Ta.from(e);return this._push(Nf,t.length(),t)};P.prototype.int64=P.prototype.uint64;P.prototype.sint64=function(e){var t=Ta.from(e).zzEncode();return this._push(Nf,t.length(),t)};P.prototype.bool=function(e){return this._push(Lf,1,e?1:0)};function Of(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}P.prototype.fixed32=function(e){return this._push(Of,4,e>>>0)};P.prototype.sfixed32=P.prototype.fixed32;P.prototype.fixed64=function(e){var t=Ta.from(e);return this._push(Of,4,t.lo)._push(Of,4,t.hi)};P.prototype.sfixed64=P.prototype.fixed64;P.prototype.float=function(e){return this._push(ut.float.writeFloatLE,4,e)};P.prototype.double=function(e){return this._push(ut.float.writeDoubleLE,8,e)};var C_=ut.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};P.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(Lf,1,0);if(ut.isString(e)){var n=P.alloc(t=ag.length(e));ag.decode(e,n,0),e=n}return this.uint32(t)._push(C_,t,e)};P.prototype.string=function(e){var t=cg.length(e);return t?this.uint32(t)._push(cg.write,t,e):this._push(Lf,1,0)};P.prototype.fork=function(){return this.states=new A_(this),this.head=this.tail=new Po(Bf,0,0),this.len=0,this};P.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Po(Bf,0,0),this.len=0),this};P.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this};P.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t};P._configure=function(r){kf=r,P.create=ug(),kf._configure()}});var dg=E((Jk,hg)=>{"use strict";a();hg.exports=jt;var lg=Pf();(jt.prototype=Object.create(lg.prototype)).constructor=jt;var Ur=$r();function jt(){lg.call(this)}jt._configure=function(){jt.alloc=Ur._Buffer_allocUnsafe,jt.writeBytesBuffer=Ur.Buffer&&Ur.Buffer.prototype instanceof Uint8Array&&Ur.Buffer.prototype.set.name==="set"?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}};jt.prototype.bytes=function(e){Ur.isString(e)&&(e=Ur._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(jt.writeBytesBuffer,t,e),this};function I_(r,e,t){r.length<40?Ur.utf8.write(r,e,t):e.utf8Write?e.utf8Write(r,t):e.write(r,t)}jt.prototype.string=function(e){var t=Ur.Buffer.byteLength(e);return this.uint32(t),t&&this._push(I_,t,e),this};jt._configure()});var Uf=E((Yk,wg)=>{"use strict";a();wg.exports=ie;var zt=$r(),$f,mg=zt.LongBits,k_=zt.utf8;function _t(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function ie(r){this.buf=r,this.pos=0,this.len=r.length}var pg=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new ie(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new ie(e);throw Error("illegal buffer")},gg=function(){return zt.Buffer?function(t){return(ie.create=function(i){return zt.Buffer.isBuffer(i)?new $f(i):pg(i)})(t)}:pg};ie.create=gg();ie.prototype._slice=zt.Array.prototype.subarray||zt.Array.prototype.slice;ie.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,_t(this,10);return e}}();ie.prototype.int32=function(){return this.uint32()|0};ie.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Ff(){var r=new mg(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw _t(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw _t(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}ie.prototype.bool=function(){return this.uint32()!==0};function Ca(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}ie.prototype.fixed32=function(){if(this.pos+4>this.len)throw _t(this,4);return Ca(this.buf,this.pos+=4)};ie.prototype.sfixed32=function(){if(this.pos+4>this.len)throw _t(this,4);return Ca(this.buf,this.pos+=4)|0};function yg(){if(this.pos+8>this.len)throw _t(this,8);return new mg(Ca(this.buf,this.pos+=4),Ca(this.buf,this.pos+=4))}ie.prototype.float=function(){if(this.pos+4>this.len)throw _t(this,4);var e=zt.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};ie.prototype.double=function(){if(this.pos+8>this.len)throw _t(this,4);var e=zt.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};ie.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw _t(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};ie.prototype.string=function(){var e=this.bytes();return k_.read(e,0,e.length)};ie.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw _t(this,e);this.pos+=e}else do if(this.pos>=this.len)throw _t(this);while(this.buf[this.pos++]&128);return this};ie.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};ie._configure=function(r){$f=r,ie.create=gg(),$f._configure();var e=zt.Long?"toLong":"toNumber";zt.merge(ie.prototype,{int64:function(){return Ff.call(this)[e](!1)},uint64:function(){return Ff.call(this)[e](!0)},sint64:function(){return Ff.call(this).zzDecode()[e](!1)},fixed64:function(){return yg.call(this)[e](!0)},sfixed64:function(){return yg.call(this)[e](!1)}})}});var vg=E((Zk,xg)=>{"use strict";a();xg.exports=Cn;var Eg=Uf();(Cn.prototype=Object.create(Eg.prototype)).constructor=Cn;var bg=$r();function Cn(r){Eg.call(this,r)}Cn._configure=function(){bg.Buffer&&(Cn.prototype._slice=bg.Buffer.prototype.slice)};Cn.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};Cn._configure()});var Sg=E((tO,_g)=>{"use strict";a();_g.exports=Fo;var Mf=$r();(Fo.prototype=Object.create(Mf.EventEmitter.prototype)).constructor=Fo;function Fo(r,e,t){if(typeof r!="function")throw TypeError("rpcImpl must be a function");Mf.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(t)}Fo.prototype.rpcCall=function r(e,t,n,i,o){if(!i)throw TypeError("request must be specified");var s=this;if(!o)return Mf.asPromise(r,s,e,t,n,i);if(!s.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return s.rpcImpl(e,t[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(u,f){if(u)return s.emit("error",u,e),o(u);if(f===null){s.end(!0);return}if(!(f instanceof n))try{f=n[s.responseDelimited?"decodeDelimited":"decode"](f)}catch(l){return s.emit("error",l,e),o(l)}return s.emit("data",f,e),o(null,f)})}catch(c){s.emit("error",c,e),setTimeout(function(){o(c)},0);return}};Fo.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Ag=E(Dg=>{"use strict";a();var O_=Dg;O_.Service=Sg()});var Cg=E((oO,Tg)=>{"use strict";a();Tg.exports={}});var Og=E(kg=>{"use strict";a();var Ne=kg;Ne.build="minimal";Ne.Writer=Pf();Ne.BufferWriter=dg();Ne.Reader=Uf();Ne.BufferReader=vg();Ne.util=$r();Ne.rpc=Ag();Ne.roots=Cg();Ne.configure=Ig;function Ig(){Ne.util._configure(),Ne.Writer._configure(Ne.BufferWriter),Ne.Reader._configure(Ne.BufferReader)}Ig()});var Mr=E((uO,Bg)=>{"use strict";a();Bg.exports=Og()});var Pg=E((jf,Ng)=>{"use strict";a();Object.defineProperty(jf,"__esModule",{value:!0});ka.BASE=2166136261;function ka(r,e=ka.BASE){let t=r.length;for(let n=0;n<t;n++)e^=r.charCodeAt(n),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0}jf.default=ka;Ng.exports=ka});var Vf={};W(Vf,{concat:()=>Y});function Y(r,e){e||(e=r.reduce((i,o)=>i+o.length,0));let t=Ea(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return t}var jr=U(()=>{a();_f()});var rw=E((fB,tw)=>{"use strict";a();var ew="[a-fA-F\\d:]",Vr=r=>r&&r.includeBoundaries?`(?:(?<=\\s|^)(?=${ew})|(?<=${ew})(?=\\s|$))`:"",Dt="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",ae="[a-fA-F\\d]{1,4}",$a=`
(?:
(?:${ae}:){7}(?:${ae}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${ae}:){6}(?:${Dt}|:${ae}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${ae}:){5}(?::${Dt}|(?::${ae}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${ae}:){4}(?:(?::${ae}){0,1}:${Dt}|(?::${ae}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${ae}:){3}(?:(?::${ae}){0,2}:${Dt}|(?::${ae}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${ae}:){2}(?:(?::${ae}){0,3}:${Dt}|(?::${ae}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${ae}:){1}(?:(?::${ae}){0,4}:${Dt}|(?::${ae}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${ae}){0,5}:${Dt}|(?::${ae}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),J_=new RegExp(`(?:^${Dt}$)|(?:^${$a}$)`),Q_=new RegExp(`^${Dt}$`),Y_=new RegExp(`^${$a}$`),rl=r=>r&&r.exact?J_:new RegExp(`(?:${Vr(r)}${Dt}${Vr(r)})|(?:${Vr(r)}${$a}${Vr(r)})`,"g");rl.v4=r=>r&&r.exact?Q_:new RegExp(`${Vr(r)}${Dt}${Vr(r)}`,"g");rl.v6=r=>r&&r.exact?Y_:new RegExp(`${Vr(r)}${$a}${Vr(r)}`,"g");tw.exports=rl});var iw=E((hB,nw)=>{"use strict";a();var nl=rw(),Ri=r=>nl({exact:!0}).test(r);Ri.v4=r=>nl.v4({exact:!0}).test(r);Ri.v6=r=>nl.v6({exact:!0}).test(r);Ri.version=r=>Ri(r)?Ri.v4(r)?4:6:void 0;nw.exports=Ri});var uw=E((pB,cw)=>{"use strict";a();var ol=iw(),{toString:ow}=(H(),ke(Oo)),X_=ol,il=ol.v4,sw=ol.v6,aw=function(r,e,t){t=~~t;let n;if(il(r))n=e||new Uint8Array(t+4),r.split(/\./g).map(function(i){n[t++]=parseInt(i,10)&255});else if(sw(r)){let i=r.split(":",8),o;for(o=0;o<i.length;o++){let s=il(i[o]),c;s&&(c=aw(i[o]),i[o]=ow(c.slice(0,2),"base16")),c&&++o<8&&i.splice(o,0,ow(c.slice(2,4),"base16"))}if(i[0]==="")for(;i.length<8;)i.unshift("0");else if(i[i.length-1]==="")for(;i.length<8;)i.push("0");else if(i.length<8){for(o=0;o<i.length&&i[o]!=="";o++);let s=[o,"1"];for(o=9-i.length;o>0;o--)s.push("0");i.splice.apply(i,s)}for(n=e||new Uint8Array(t+16),o=0;o<i.length;o++){let s=parseInt(i[o],16);n[t++]=s>>8&255,n[t++]=s&255}}if(!n)throw Error("Invalid ip address: "+r);return n},Z_=function(r,e,t){e=~~e,t=t||r.length-e;let n=[],i,o=new DataView(r.buffer);if(t===4){for(let s=0;s<t;s++)n.push(r[e+s]);i=n.join(".")}else if(t===16){for(let s=0;s<t;s+=2)n.push(o.getUint16(e+s).toString(16));i=n.join(":"),i=i.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),i=i.replace(/:{3,4}/,"::")}return i};cw.exports={isIP:X_,isV4:il,isV6:sw,toBytes:aw,toString:Z_}});var Ua=E((mB,lw)=>{"use strict";a();function Pe(r){if(typeof r=="number"){if(Pe.codes[r])return Pe.codes[r];throw new Error("no protocol with code: "+r)}else if(typeof r=="string"){if(Pe.names[r])return Pe.names[r];throw new Error("no protocol with name: "+r)}throw new Error("invalid protocol id type: "+r)}var lt=-1;Pe.lengthPrefixedVarSize=lt;Pe.V=lt;Pe.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,lt,"ip6zone"],[53,lt,"dns","resolvable"],[54,lt,"dns4","resolvable"],[55,lt,"dns6","resolvable"],[56,lt,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,lt,"unix",!1,"path"],[421,lt,"ipfs"],[421,lt,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,lt,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,lt,"memory"]];Pe.names={};Pe.codes={};Pe.table.map(r=>{let e=fw.apply(null,r);return Pe.codes[e.code]=e,Pe.names[e.name]=e,null});Pe.object=fw;function fw(r,e,t,n,i){return{code:r,size:e,name:t,resolvable:Boolean(n),path:Boolean(i)}}lw.exports=Pe});var bw=E((wB,ww)=>{"use strict";a();var Ma=uw(),pw=Ua(),{CID:eS}=(q(),ke(Yu)),{base32:yw}=(xe(),ke(na)),{base58btc:tS}=(Re(),ke(So)),rS=(Ee(),ke(be)),Ni=Be(),{toString:ja}=(H(),ke(Oo)),{fromString:mw}=(we(),ke(xm)),{concat:za}=(jr(),ke(Vf));ww.exports=zo;function zo(r,e){return e instanceof Uint8Array?zo.toString(r,e):zo.toBytes(r,e)}zo.toString=function(e,t){switch(pw(e).code){case 4:case 41:return nS(t);case 6:case 273:case 33:case 132:return gw(t).toString();case 53:case 54:case 55:case 56:case 400:case 777:return oS(t);case 421:return aS(t);case 444:return dw(t);case 445:return dw(t);default:return ja(t,"base16")}};zo.toBytes=function(e,t){switch(pw(e).code){case 4:return hw(t);case 41:return hw(t);case 6:case 273:case 33:case 132:return sl(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 777:return iS(t);case 421:return sS(t);case 444:return cS(t);case 445:return uS(t);default:return mw(t,"base16")}};function hw(r){if(!Ma.isIP(r))throw new Error("invalid ip address");return Ma.toBytes(r)}function nS(r){let e=Ma.toString(r);if(!e||!Ma.isIP(e))throw new Error("invalid ip address");return e}function sl(r){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function gw(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function iS(r){let e=mw(r),t=Uint8Array.from(Ni.encode(e.length));return za([t,e],t.length+e.length)}function oS(r){let e=Ni.decode(r);if(r=r.slice(Ni.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return ja(r)}function sS(r){let e;r[0]==="Q"||r[0]==="1"?e=rS.decode(tS.decode(`z${r}`)).bytes:e=eS.parse(r).multihash.bytes;let t=Uint8Array.from(Ni.encode(e.length));return za([t,e],t.length+e.length)}function aS(r){let e=Ni.decode(r),t=r.slice(Ni.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return ja(t,"base58btc")}function cS(r){let e=r.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==16)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion address.");let t=yw.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=sl(n);return za([t,i],t.length+i.length)}function uS(r){let e=r.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==56)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion3 address.");let t=yw.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=sl(n);return za([t,i],t.length+i.length)}function dw(r){let e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=ja(e,"base32"),i=gw(t);return n+":"+i}});var Ow=E((EB,kw)=>{"use strict";a();var xw=bw(),al=Ua(),qo=Be(),{concat:Ew}=(jr(),ke(Vf)),{toString:fS}=(H(),ke(Oo));kw.exports={stringToStringTuples:vw,stringTuplesToString:_w,tuplesToStringTuples:Dw,stringTuplesToTuples:Sw,bytesToTuples:cl,tuplesToBytes:Aw,bytesToString:lS,stringToBytes:Cw,fromString:hS,fromBytes:Iw,validateBytes:ul,isValidBytes:dS,cleanPath:qa,ParseError:fl,protoFromTuple:Vo,sizeForAddr:Tw};function vw(r){let e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){let i=t[n],o=al(i);if(o.size===0){e.push([i]);continue}if(n++,n>=t.length)throw fl("invalid address: "+r);if(o.path){e.push([i,qa(t.slice(n).join("/"))]);break}e.push([i,t[n]])}return e}function _w(r){let e=[];return r.map(t=>{let n=Vo(t);return e.push(n.name),t.length>1&&e.push(t[1]),null}),qa(e.join("/"))}function Sw(r){return r.map(e=>{Array.isArray(e)||(e=[e]);let t=Vo(e);return e.length>1?[t.code,xw.toBytes(t.code,e[1])]:[t.code]})}function Dw(r){return r.map(e=>{let t=Vo(e);return e[1]?[t.code,xw.toString(t.code,e[1])]:[t.code]})}function Aw(r){return Iw(Ew(r.map(e=>{let t=Vo(e),n=Uint8Array.from(qo.encode(t.code));return e.length>1&&(n=Ew([n,e[1]])),n})))}function Tw(r,e){return r.size>0?r.size/8:r.size===0?0:qo.decode(e)+qo.decode.bytes}function cl(r){let e=[],t=0;for(;t<r.length;){let n=qo.decode(r,t),i=qo.decode.bytes,o=al(n),s=Tw(o,r.slice(t+i));if(s===0){e.push([n]),t+=i;continue}let c=r.slice(t+i,t+i+s);if(t+=s+i,t>r.length)throw fl("Invalid address Uint8Array: "+fS(r,"base16"));e.push([n,c])}return e}function lS(r){let e=cl(r),t=Dw(e);return _w(t)}function Cw(r){r=qa(r);let e=vw(r),t=Sw(e);return Aw(t)}function hS(r){return Cw(r)}function Iw(r){let e=ul(r);if(e)throw e;return Uint8Array.from(r)}function ul(r){try{cl(r)}catch(e){return e}}function dS(r){return ul(r)===void 0}function qa(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function fl(r){return new Error("Error parsing address: "+r)}function Vo(r){return al(r[0])}});var Bw={};W(Bw,{equals:()=>Ko});function Ko(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var Va=U(()=>{a()});var Pw=E((_B,Nw)=>{"use strict";a();var At=Ow(),Pi=Ua(),Lw=Be(),{CID:pS}=(q(),ke(Yu)),{base58btc:yS}=(Re(),ke(So)),mS=ve(),gS=Symbol.for("nodejs.util.inspect.custom"),{toString:Ka}=(H(),ke(Oo)),{equals:wS}=(Va(),ke(Bw)),ll=new Map,Rw=Symbol.for("@multiformats/js-multiaddr/multiaddr"),_e=class{constructor(e){if(e==null&&(e=""),Object.defineProperty(this,Rw,{value:!0}),e instanceof Uint8Array)this.bytes=At.fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=At.fromString(e)}else if(_e.isMultiaddr(e))this.bytes=At.fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return At.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let e={},t=this.toString().split("/");return e.family=t[1]==="ip4"?4:6,e.host=t[2],e.transport=t[3],e.port=parseInt(t[4]),e}protos(){return this.protoCodes().map(e=>Object.assign({},Pi(e)))}protoCodes(){let e=[],t=this.bytes,n=0;for(;n<t.length;){let i=Lw.decode(t,n),o=Lw.decode.bytes,s=Pi(i);n+=At.sizeForAddr(s,t.slice(n+o))+o,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return At.bytesToTuples(this.bytes)}stringTuples(){let e=At.bytesToTuples(this.bytes);return At.tuplesToStringTuples(e)}encapsulate(e){return e=new _e(e),new _e(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),n=this.toString(),i=n.lastIndexOf(t);if(i<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return new _e(n.slice(0,i))}decapsulateCode(e){let t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new _e(At.tuplesToBytes(t.slice(0,n)));return this}getPeerId(){try{let t=this.stringTuples().filter(n=>n[0]===Pi.names.ipfs.code).pop();if(t&&t[1]){let n=t[1];return n[0]==="Q"||n[0]==="1"?Ka(yS.decode(`z${n}`),"base58btc"):Ka(pS.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>!!Pi(t[0]).path)[0][1],e||(e=null)}catch{e=null}return e}equals(e){return wS(this.bytes,e.bytes)}async resolve(){let e=this.protos().find(i=>i.resolvable);if(!e)return[this];let t=ll.get(e.name);if(!t)throw mS(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await t(this)).map(i=>new _e(i))}nodeAddress(){let e=this.protoCodes(),t=this.protoNames(),n=this.toString().split("/").slice(1);if(n.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(e[0]!==4&&e[0]!==41&&e[0]!==54&&e[0]!==55)throw new Error(`no protocol with name: "'${t[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(n[2]!=="tcp"&&n[2]!=="udp")throw new Error(`no protocol with name: "'${t[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:e[0]===41||e[0]===55?6:4,address:n[1],port:parseInt(n[3])}}isThinWaistAddress(e){let t=(e||this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}static fromNodeAddress(e,t){if(!e)throw new Error("requires node address object");if(!t)throw new Error("requires transport protocol");let n;switch(e.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error(`Invalid addr family. Got '${e.family}' instead of 4 or 6`)}return new _e("/"+[n,e.address,t,e.port].join("/"))}static isName(e){return _e.isMultiaddr(e)?e.protos().some(t=>t.resolvable):!1}static isMultiaddr(e){return e instanceof _e||Boolean(e&&e[Rw])}[gS](){return"<Multiaddr "+Ka(this.bytes,"base16")+" - "+At.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+Ka(this.bytes,"base16")+" - "+At.bytesToString(this.bytes)+">"}};_e.protocols=Pi;_e.resolvers=ll;function bS(r){return new _e(r)}Nw.exports={Multiaddr:_e,multiaddr:bS,protocols:Pi,resolvers:ll}});var Ww=E((eL,Ha)=>{"use strict";a();Ha.exports=CS;Ha.exports.format=Vw;Ha.exports.parse=Kw;var DS=/\B(?=(\d{3})+(?!\d))/g,AS=/(?:\.0*|(\.[^0]+)0+)$/,Wr={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},TS=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function CS(r,e){return typeof r=="string"?Kw(r):typeof r=="number"?Vw(r,e):null}function Vw(r,e){if(!Number.isFinite(r))return null;var t=Math.abs(r),n=e&&e.thousandsSeparator||"",i=e&&e.unitSeparator||"",o=e&&e.decimalPlaces!==void 0?e.decimalPlaces:2,s=Boolean(e&&e.fixedDecimals),c=e&&e.unit||"";(!c||!Wr[c.toLowerCase()])&&(t>=Wr.pb?c="PB":t>=Wr.tb?c="TB":t>=Wr.gb?c="GB":t>=Wr.mb?c="MB":t>=Wr.kb?c="KB":c="B");var u=r/Wr[c.toLowerCase()],f=u.toFixed(o);return s||(f=f.replace(AS,"$1")),n&&(f=f.split(".").map(function(l,h){return h===0?l.replace(DS,n):l}).join(".")),f+i+c}function Kw(r){if(typeof r=="number"&&!isNaN(r))return r;if(typeof r!="string")return null;var e=TS.exec(r),t,n="b";return e?(t=parseFloat(e[1]),n=e[4].toLowerCase()):(t=parseInt(r,10),n="b"),isNaN(t)?null:Math.floor(Wr[n]*t)}});var Gw=E((rL,Hw)=>{"use strict";a();Hw.exports=r=>{if(Object.prototype.toString.call(r)!=="[object Object]")return!1;let e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}});var eb=E((Xw,Zw)=>{"use strict";a();var Ga=Gw(),{hasOwnProperty:Qw}=Object.prototype,{propertyIsEnumerable:IS}=Object,Mi=(r,e,t)=>Object.defineProperty(r,e,{value:t,writable:!0,enumerable:!0,configurable:!0}),kS=Xw,Jw={concatArrays:!1,ignoreUndefined:!1},Ja=r=>{let e=[];for(let t in r)Qw.call(r,t)&&e.push(t);if(Object.getOwnPropertySymbols){let t=Object.getOwnPropertySymbols(r);for(let n of t)IS.call(r,n)&&e.push(n)}return e};function ji(r){return Array.isArray(r)?OS(r):Ga(r)?BS(r):r}function OS(r){let e=r.slice(0,0);return Ja(r).forEach(t=>{Mi(e,t,ji(r[t]))}),e}function BS(r){let e=Object.getPrototypeOf(r)===null?Object.create(null):{};return Ja(r).forEach(t=>{Mi(e,t,ji(r[t]))}),e}var Yw=(r,e,t,n)=>(t.forEach(i=>{typeof e[i]>"u"&&n.ignoreUndefined||(i in r&&r[i]!==Object.getPrototypeOf(r)?Mi(r,i,gl(r[i],e[i],n)):Mi(r,i,ji(e[i])))}),r),LS=(r,e,t)=>{let n=r.slice(0,0),i=0;return[r,e].forEach(o=>{let s=[];for(let c=0;c<o.length;c++)!Qw.call(o,c)||(s.push(String(c)),o===r?Mi(n,i++,o[c]):Mi(n,i++,ji(o[c])));n=Yw(n,o,Ja(o).filter(c=>!s.includes(c)),t)}),n};function gl(r,e,t){return t.concatArrays&&Array.isArray(r)&&Array.isArray(e)?LS(r,e,t):!Ga(e)||!Ga(r)?ji(e):Yw(r,e,Ja(e),t)}Zw.exports=function(...r){let e=gl(ji(Jw),this!==kS&&this||{},Jw),t={_:{}};for(let n of r)if(n!==void 0){if(!Ga(n))throw new TypeError("`"+n+"` is not an Option Object");t=gl(t,{_:n},e)}return t._}});var fb=E((_L,bl)=>{"use strict";a();var MS=Object.prototype.hasOwnProperty,Ie="~";function Go(){}Object.create&&(Go.prototype=Object.create(null),new Go().__proto__||(Ie=!1));function jS(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function ub(r,e,t,n,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var o=new jS(t,n||r,i),s=Ie?Ie+e:e;return r._events[s]?r._events[s].fn?r._events[s]=[r._events[s],o]:r._events[s].push(o):(r._events[s]=o,r._eventsCount++),r}function Za(r,e){--r._eventsCount===0?r._events=new Go:delete r._events[e]}function Se(){this._events=new Go,this._eventsCount=0}Se.prototype.eventNames=function(){var e=[],t,n;if(this._eventsCount===0)return e;for(n in t=this._events)MS.call(t,n)&&e.push(Ie?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Se.prototype.listeners=function(e){var t=Ie?Ie+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s};Se.prototype.listenerCount=function(e){var t=Ie?Ie+e:e,n=this._events[t];return n?n.fn?1:n.length:0};Se.prototype.emit=function(e,t,n,i,o,s){var c=Ie?Ie+e:e;if(!this._events[c])return!1;var u=this._events[c],f=arguments.length,l,h;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),f){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,o),!0;case 6:return u.fn.call(u.context,t,n,i,o,s),!0}for(h=1,l=new Array(f-1);h<f;h++)l[h-1]=arguments[h];u.fn.apply(u.context,l)}else{var p=u.length,w;for(h=0;h<p;h++)switch(u[h].once&&this.removeListener(e,u[h].fn,void 0,!0),f){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,t);break;case 3:u[h].fn.call(u[h].context,t,n);break;case 4:u[h].fn.call(u[h].context,t,n,i);break;default:if(!l)for(w=1,l=new Array(f-1);w<f;w++)l[w-1]=arguments[w];u[h].fn.apply(u[h].context,l)}}return!0};Se.prototype.on=function(e,t,n){return ub(this,e,t,n,!1)};Se.prototype.once=function(e,t,n){return ub(this,e,t,n,!0)};Se.prototype.removeListener=function(e,t,n,i){var o=Ie?Ie+e:e;if(!this._events[o])return this;if(!t)return Za(this,o),this;var s=this._events[o];if(s.fn)s.fn===t&&(!i||s.once)&&(!n||s.context===n)&&Za(this,o);else{for(var c=0,u=[],f=s.length;c<f;c++)(s[c].fn!==t||i&&!s[c].once||n&&s[c].context!==n)&&u.push(s[c]);u.length?this._events[o]=u.length===1?u[0]:u:Za(this,o)}return this};Se.prototype.removeAllListeners=function(e){var t;return e?(t=Ie?Ie+e:e,this._events[t]&&Za(this,t)):(this._events=new Go,this._eventsCount=0),this};Se.prototype.off=Se.prototype.removeListener;Se.prototype.addListener=Se.prototype.on;Se.prefixed=Ie;Se.EventEmitter=Se;typeof bl<"u"&&(bl.exports=Se)});var Fn=E((hR,Db)=>{"use strict";a();var KS=async function*(r,e){for await(let t of r)await e(t)&&(yield t)};Db.exports=KS});var $n=E((bR,Tb)=>{"use strict";a();var HS=async r=>{for await(let e of r);};Tb.exports=HS});var Ol=E((RR,Pb)=>{"use strict";a();var QS=async r=>{for await(let e of r)return e};Pb.exports=QS});var Vi=E((rN,jb)=>{"use strict";a();var eD=async function*(r,e){for await(let t of r)yield e(t)};jb.exports=eD});var Zb=E((DN,Xb)=>{"use strict";a();async function*iD(r,e=1){let t=[];e<1&&(e=1);for await(let n of r)for(t.push(n);t.length>=e;)yield t.slice(0,e),t=t.slice(e);for(;t.length;)yield t.slice(0,e),t=t.slice(e)}Xb.exports=iD});var t0=E((TN,e0)=>{"use strict";a();var oD=Zb();async function*sD(r,e=1){for await(let t of oD(r,e)){let n=t.map(i=>i().then(o=>({ok:!0,value:o}),o=>({ok:!1,err:o})));for(let i=0;i<n.length;i++){let o=await n[i];if(o.ok)yield o.value;else throw o.err}}}e0.exports=sD});var i0=E((NN,n0)=>{a();n0.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var a0=E(($N,s0)=>{a();var o0=i0();s0.exports=class{constructor(e){this.hwm=e||16,this.head=new o0(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let t=this.head;this.head=t.next=new o0(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return e}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}});var u0=E((MN,c0)=>{a();var Wl=a0();c0.exports=r=>{r=r||{};let e;typeof r=="function"?(e=r,r={}):e=r.onEnd;let t=new Wl,n,i,o,s=()=>{if(!t.isEmpty()){if(r.writev){let y,k=[];for(;!t.isEmpty();){if(y=t.shift(),y.error)throw y.error;k.push(y.value)}return{done:y.done,value:k}}let g=t.shift();if(g.error)throw g.error;return g}return o?{done:!0}:new Promise((g,y)=>{i=k=>(i=null,k.error?y(k.error):r.writev&&!k.done?g({done:k.done,value:[k.value]}):g(k),n)})},c=g=>i?i(g):(t.push(g),n),u=g=>(t=new Wl,i?i({error:g}):(t.push({error:g}),n)),f=g=>o?n:c({done:!1,value:g}),l=g=>o?n:(o=!0,g?u(g):c({done:!0})),h=()=>(t=new Wl,l(),{done:!0}),p=g=>(l(g),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:s,return:h,throw:p,push:f,end:l},!e)return n;let w=n;return n={[Symbol.asyncIterator](){return this},next(){return w.next()},throw(g){return w.throw(g),e&&(e(g),e=null),{done:!0}},return(){return w.return(),e&&(e(),e=null),{done:!0}},push:f,end(g){return w.end(g),e&&(e(g),e=null),n}},n}});var hc=E((zN,f0)=>{"use strict";a();var cD=u0(),uD=async function*(...r){let e=cD();setTimeout(async()=>{try{await Promise.all(r.map(async t=>{for await(let n of t)e.push(n)})),e.end()}catch(t){e.end(t)}},0),yield*e};f0.exports=uD});var as=E((PP,S0)=>{"use strict";a();var ID=async r=>{let e=[];for await(let t of r)e.push(t);return e};S0.exports=ID});var cs=E((MP,A0)=>{"use strict";a();var kD=async function*(r,e){let t=0;if(!(e<1)){for await(let n of r)if(yield n,t++,t===e)return}};A0.exports=kD});var k0=E((Q5,I0)=>{"use strict";a();var PD=as(),FD=async function*(r,e){yield*(await PD(r)).sort(e)};I0.exports=FD});var B0=E(O0=>{"use strict";a();O0.supports=function(...e){let t=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}});var kt=E((tF,L0)=>{"use strict";a();L0.exports=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var th=E((nF,R0)=>{"use strict";a();var eh=null;R0.exports=function(){return eh===null&&(eh={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),eh}});var ih=E(N0=>{"use strict";a();var rh=kt(),$D=new Set(["buffer","view","utf8"]),nh=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!$D.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new rh(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new rh(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new rh(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};N0.Encoding=nh});var ch=E(wc=>{"use strict";a();var{Buffer:sh}=ho()||{},{Encoding:ah}=ih(),UD=th(),us=class extends ah{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new fs({encode:this.encode,decode:e=>this.decode(sh.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},fs=class extends ah{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new us({encode:e=>{let t=this.encode(e);return sh.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},oh=class extends ah{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new us({encode:e=>sh.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:t}=UD();return new fs({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(t.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};wc.BufferFormat=us;wc.ViewFormat=fs;wc.UTF8Format=oh});var U0=E(zn=>{"use strict";a();var{Buffer:De}=ho()||{Buffer:{isBuffer:()=>!1}},{textEncoder:F0,textDecoder:P0}=th()(),{BufferFormat:ls,ViewFormat:uh,UTF8Format:$0}=ch(),bc=r=>r;zn.utf8=new $0({encode:function(r){return De.isBuffer(r)?r.toString("utf8"):ArrayBuffer.isView(r)?P0.decode(r):String(r)},decode:bc,name:"utf8",createViewTranscoder(){return new uh({encode:function(r){return ArrayBuffer.isView(r)?r:F0.encode(r)},decode:function(r){return P0.decode(r)},name:`${this.name}+view`})},createBufferTranscoder(){return new ls({encode:function(r){return De.isBuffer(r)?r:ArrayBuffer.isView(r)?De.from(r.buffer,r.byteOffset,r.byteLength):De.from(String(r),"utf8")},decode:function(r){return r.toString("utf8")},name:`${this.name}+buffer`})}});zn.json=new $0({encode:JSON.stringify,decode:JSON.parse,name:"json"});zn.buffer=new ls({encode:function(r){return De.isBuffer(r)?r:ArrayBuffer.isView(r)?De.from(r.buffer,r.byteOffset,r.byteLength):De.from(String(r),"utf8")},decode:bc,name:"buffer",createViewTranscoder(){return new uh({encode:function(r){return ArrayBuffer.isView(r)?r:De.from(String(r),"utf8")},decode:function(r){return De.from(r.buffer,r.byteOffset,r.byteLength)},name:`${this.name}+view`})}});zn.view=new uh({encode:function(r){return ArrayBuffer.isView(r)?r:F0.encode(r)},decode:bc,name:"view",createBufferTranscoder(){return new ls({encode:function(r){return De.isBuffer(r)?r:ArrayBuffer.isView(r)?De.from(r.buffer,r.byteOffset,r.byteLength):De.from(String(r),"utf8")},decode:bc,name:`${this.name}+buffer`})}});zn.hex=new ls({encode:function(r){return De.isBuffer(r)?r:De.from(String(r),"hex")},decode:function(r){return r.toString("hex")},name:"hex"});zn.base64=new ls({encode:function(r){return De.isBuffer(r)?r:De.from(String(r),"base64")},decode:function(r){return r.toString("base64")},name:"base64"})});var z0=E(j0=>{"use strict";a();var M0=kt(),xc=U0(),{Encoding:MD}=ih(),{BufferFormat:jD,ViewFormat:zD,UTF8Format:qD}=ch(),hs=Symbol("formats"),Ec=Symbol("encodings"),VD=new Set(["buffer","view","utf8"]),fh=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>VD.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[Ec]=new Map,this[hs]=new Set(e);for(let t in xc)try{this.encoding(t)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[Ec].values()))}encoding(e){let t=this[Ec].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=GD[e],!t)throw new M0(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=KD(e)}let{name:n,format:i}=t;if(!this[hs].has(i))if(this[hs].has("view"))t=t.createViewTranscoder();else if(this[hs].has("buffer"))t=t.createBufferTranscoder();else if(this[hs].has("utf8"))t=t.createUTF8Transcoder();else throw new M0(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[e,n,t.name,t.commonName])this[Ec].set(o,t)}return t}};j0.Transcoder=fh;function KD(r){if(r instanceof MD)return r;let e="type"in r&&typeof r.type=="string"?r.type:void 0,t=r.name||e||`anonymous-${JD++}`;switch(WD(r)){case"view":return new zD({...r,name:t});case"utf8":return new qD({...r,name:t});case"buffer":return new jD({...r,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function WD(r){return"format"in r&&r.format!==void 0?r.format:"buffer"in r&&typeof r.buffer=="boolean"?r.buffer?"buffer":"utf8":"code"in r&&Number.isInteger(r.code)?"view":"buffer"}var HD={binary:xc.buffer,"utf-8":xc.utf8},GD={...xc,...HD},JD=0});var Z0=E((dF,lh)=>{"use strict";a();var Hi=typeof Reflect=="object"?Reflect:null,q0=Hi&&typeof Hi.apply=="function"?Hi.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},vc;Hi&&typeof Hi.ownKeys=="function"?vc=Hi.ownKeys:Object.getOwnPropertySymbols?vc=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:vc=function(e){return Object.getOwnPropertyNames(e)};function QD(r){console&&console.warn&&console.warn(r)}var K0=Number.isNaN||function(e){return e!==e};function V(){V.init.call(this)}lh.exports=V;lh.exports.once=e3;V.EventEmitter=V;V.prototype._events=void 0;V.prototype._eventsCount=0;V.prototype._maxListeners=void 0;var V0=10;function _c(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(V,"defaultMaxListeners",{enumerable:!0,get:function(){return V0},set:function(r){if(typeof r!="number"||r<0||K0(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");V0=r}});V.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};V.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||K0(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function W0(r){return r._maxListeners===void 0?V.defaultMaxListeners:r._maxListeners}V.prototype.getMaxListeners=function(){return W0(this)};V.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var c=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw c.context=s,c}var u=o[e];if(u===void 0)return!1;if(typeof u=="function")q0(u,this,t);else for(var f=u.length,l=Y0(u,f),n=0;n<f;++n)q0(l[n],this,t);return!0};function H0(r,e,t,n){var i,o,s;if(_c(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]),s===void 0)s=o[e]=t,++r._eventsCount;else if(typeof s=="function"?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),i=W0(r),i>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=r,c.type=e,c.count=s.length,QD(c)}return r}V.prototype.addListener=function(e,t){return H0(this,e,t,!1)};V.prototype.on=V.prototype.addListener;V.prototype.prependListener=function(e,t){return H0(this,e,t,!0)};function YD(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function G0(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=YD.bind(n);return i.listener=t,n.wrapFn=i,i}V.prototype.once=function(e,t){return _c(t),this.on(e,G0(this,e,t)),this};V.prototype.prependOnceListener=function(e,t){return _c(t),this.prependListener(e,G0(this,e,t)),this};V.prototype.removeListener=function(e,t){var n,i,o,s,c;if(_c(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){c=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():XD(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,c||t)}return this};V.prototype.off=V.prototype.removeListener;V.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function J0(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?ZD(i):Y0(i,i.length)}V.prototype.listeners=function(e){return J0(this,e,!0)};V.prototype.rawListeners=function(e){return J0(this,e,!1)};V.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):Q0.call(r,e)};V.prototype.listenerCount=Q0;function Q0(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}V.prototype.eventNames=function(){return this._eventsCount>0?vc(this._events):[]};function Y0(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function XD(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function ZD(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function e3(r,e){return new Promise(function(t,n){function i(s){r.removeListener(e,o),n(s)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}X0(r,e,o,{once:!0}),e!=="error"&&t3(r,i,{once:!0})})}function t3(r,e,t){typeof r.on=="function"&&X0(r,"error",e,t)}function X0(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}});var tE=E((yF,eE)=>{a();eE.exports=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r)});var ds=E(hh=>{"use strict";a();var rE=tE();hh.fromCallback=function(r,e){if(r===void 0){var t=new Promise(function(n,i){r=function(o,s){o?i(o):n(s)}});r[e!==void 0?e:"promise"]=t}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r};hh.fromPromise=function(r,e){if(e===void 0)return r;r.then(function(t){rE(()=>e(null,t))}).catch(function(t){rE(()=>e(t))})}});var Sc=E(dh=>{"use strict";a();dh.getCallback=function(r,e){return typeof r=="function"?r:e};dh.getOptions=function(r,e){return typeof r=="object"&&r!==null?r:e!==void 0?e:{}}});var on=E(Cc=>{"use strict";a();var{fromCallback:ph}=ds(),Je=kt(),{getOptions:yh,getCallback:nE}=Sc(),qn=Symbol("promise"),Gi=Symbol("callback"),Ht=Symbol("working"),Vn=Symbol("handleOne"),dr=Symbol("handleMany"),mh=Symbol("autoClose"),rn=Symbol("finishWork"),Gt=Symbol("returnMany"),Zr=Symbol("closing"),ps=Symbol("handleClose"),Dc=Symbol("closed"),ys=Symbol("closeCallbacks"),tn=Symbol("keyEncoding"),Kn=Symbol("valueEncoding"),gh=Symbol("abortOnClose"),Ac=Symbol("legacy"),wh=Symbol("keys"),bh=Symbol("values"),en=Symbol("limit"),dt=Symbol("count"),Tc=Object.freeze({}),r3=()=>{},iE=!1,ms=class{constructor(e,t,n){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[Dc]=!1,this[ys]=[],this[Ht]=!1,this[Zr]=!1,this[mh]=!1,this[Gi]=null,this[Vn]=this[Vn].bind(this),this[dr]=this[dr].bind(this),this[ps]=this[ps].bind(this),this[tn]=t[tn],this[Kn]=t[Kn],this[Ac]=n,this[en]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[dt]=0,this[gh]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[dt]}get limit(){return this[en]}next(e){let t;if(e===void 0)t=new Promise((n,i)=>{e=(o,s,c)=>{o?i(o):this[Ac]?s===void 0&&c===void 0?n():n([s,c]):n(s)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[Zr]?this.nextTick(e,new Je("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ht]?this.nextTick(e,new Je("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Ht]=!0,this[Gi]=e,this[dt]>=this[en]?this.nextTick(this[Vn],null):this._next(this[Vn])),t}_next(e){this.nextTick(e)}nextv(e,t,n){return n=nE(t,n),n=ph(n,qn),t=yh(t,Tc),Number.isInteger(e)?(this[Zr]?this.nextTick(n,new Je("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ht]?this.nextTick(n,new Je("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[en]<1/0&&(e=Math.min(e,this[en]-this[dt])),this[Ht]=!0,this[Gi]=n,e<=0?this.nextTick(this[dr],null,[]):this._nextv(e,t,this[dr])),n[qn]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[qn])}_nextv(e,t,n){let i=[],o=(s,c,u)=>{if(s)return n(s);if(this[Ac]?c===void 0&&u===void 0:c===void 0)return n(null,i);i.push(this[Ac]?[c,u]:c),i.length===e?n(null,i):this._next(o)};this._next(o)}all(e,t){return t=nE(e,t),t=ph(t,qn),e=yh(e,Tc),this[Zr]?this.nextTick(t,new Je("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ht]?this.nextTick(t,new Je("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Ht]=!0,this[Gi]=t,this[mh]=!0,this[dt]>=this[en]?this.nextTick(this[dr],null,[]):this._all(e,this[dr])),t[qn]}_all(e,t){let n=this[dt],i=[],o=()=>{let c=this[en]<1/0?Math.min(1e3,this[en]-n):1e3;c<=0?this.nextTick(t,null,i):this._nextv(c,Tc,s)},s=(c,u)=>{c?t(c):u.length===0?t(null,i):(i.push.apply(i,u),n+=u.length,o())};o()}[rn](){let e=this[Gi];return this[gh]&&e===null?r3:(this[Ht]=!1,this[Gi]=null,this[Zr]&&this._close(this[ps]),e)}[Gt](e,t,n){this[mh]?this.close(e.bind(null,t,n)):e(t,n)}seek(e,t){if(t=yh(t,Tc),!this[Zr]){if(this[Ht])throw new Je("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(t.keyEncoding||this[tn]),i=n.format;t.keyEncoding!==i&&(t={...t,keyEncoding:i});let o=this.db.prefixKey(n.encode(e),i);this._seek(o,t)}}}_seek(e,t){throw new Je("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=ph(e,qn),this[Dc]?this.nextTick(e):this[Zr]?this[ys].push(e):(this[Zr]=!0,this[ys].push(e),this[Ht]?this[gh]&&this[rn]()(new Je("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[ps])),e[qn]}_close(e){this.nextTick(e)}[ps](){this[Dc]=!0,this.db.detachResource(this);let e=this[ys];this[ys]=[];for(let t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[Dc]||await this.close()}}},Ji=class extends ms{constructor(e,t){super(e,t,!0),this[wh]=t.keys!==!1,this[bh]=t.values!==!1}[Vn](e,t,n){let i=this[rn]();if(e)return i(e);try{t=this[wh]&&t!==void 0?this[tn].decode(t):void 0,n=this[bh]&&n!==void 0?this[Kn].decode(n):void 0}catch(o){return i(new nn("entry",o))}t===void 0&&n===void 0||this[dt]++,i(null,t,n)}[dr](e,t){let n=this[rn]();if(e)return this[Gt](n,e);try{for(let i of t){let o=i[0],s=i[1];i[0]=this[wh]&&o!==void 0?this[tn].decode(o):void 0,i[1]=this[bh]&&s!==void 0?this[Kn].decode(s):void 0}}catch(i){return this[Gt](n,new nn("entries",i))}this[dt]+=t.length,this[Gt](n,null,t)}end(e){return!iE&&typeof console<"u"&&(iE=!0,console.warn(new Je("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},Eh=class extends ms{constructor(e,t){super(e,t,!1)}[Vn](e,t){let n=this[rn]();if(e)return n(e);try{t=t!==void 0?this[tn].decode(t):void 0}catch(i){return n(new nn("key",i))}t!==void 0&&this[dt]++,n(null,t)}[dr](e,t){let n=this[rn]();if(e)return this[Gt](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[tn].decode(o):void 0}}catch(i){return this[Gt](n,new nn("keys",i))}this[dt]+=t.length,this[Gt](n,null,t)}},xh=class extends ms{constructor(e,t){super(e,t,!1)}[Vn](e,t){let n=this[rn]();if(e)return n(e);try{t=t!==void 0?this[Kn].decode(t):void 0}catch(i){return n(new nn("value",i))}t!==void 0&&this[dt]++,n(null,t)}[dr](e,t){let n=this[rn]();if(e)return this[Gt](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[Kn].decode(o):void 0}}catch(i){return this[Gt](n,new nn("values",i))}this[dt]+=t.length,this[Gt](n,null,t)}},nn=class extends Je{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}};for(let r of["_ended property","_nexting property","_end method"])Object.defineProperty(Ji.prototype,r.split(" ")[0],{get(){throw new Je(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Je(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})}});Ji.keyEncoding=tn;Ji.valueEncoding=Kn;Cc.AbstractIterator=Ji;Cc.AbstractKeyIterator=Eh;Cc.AbstractValueIterator=xh});var oE=E(vh=>{"use strict";a();var{AbstractKeyIterator:n3,AbstractValueIterator:i3}=on(),Wn=Symbol("iterator"),gs=Symbol("callback"),Qi=Symbol("handleOne"),Hn=Symbol("handleMany"),ws=class extends n3{constructor(e,t){super(e,t),this[Wn]=e.iterator({...t,keys:!0,values:!1}),this[Qi]=this[Qi].bind(this),this[Hn]=this[Hn].bind(this)}},Ic=class extends i3{constructor(e,t){super(e,t),this[Wn]=e.iterator({...t,keys:!1,values:!0}),this[Qi]=this[Qi].bind(this),this[Hn]=this[Hn].bind(this)}};for(let r of[ws,Ic]){let e=r===ws,t=e?n=>n[0]:n=>n[1];r.prototype._next=function(n){this[gs]=n,this[Wn].next(this[Qi])},r.prototype[Qi]=function(n,i,o){let s=this[gs];n?s(n):s(null,e?i:o)},r.prototype._nextv=function(n,i,o){this[gs]=o,this[Wn].nextv(n,i,this[Hn])},r.prototype._all=function(n,i){this[gs]=i,this[Wn].all(n,this[Hn])},r.prototype[Hn]=function(n,i){let o=this[gs];n?o(n):o(null,i.map(t))},r.prototype._seek=function(n,i){this[Wn].seek(n,i)},r.prototype._close=function(n){this[Wn].close(n)}}vh.DefaultKeyIterator=ws;vh.DefaultValueIterator=Ic});var sE=E(Nc=>{"use strict";a();var{AbstractIterator:o3,AbstractKeyIterator:s3,AbstractValueIterator:a3}=on(),_h=kt(),Ue=Symbol("nut"),Lc=Symbol("undefer"),Rc=Symbol("factory"),kc=class extends o3{constructor(e,t){super(e,t),this[Ue]=null,this[Rc]=()=>e.iterator(t),this.db.defer(()=>this[Lc]())}},Oc=class extends s3{constructor(e,t){super(e,t),this[Ue]=null,this[Rc]=()=>e.keys(t),this.db.defer(()=>this[Lc]())}},Bc=class extends a3{constructor(e,t){super(e,t),this[Ue]=null,this[Rc]=()=>e.values(t),this.db.defer(()=>this[Lc]())}};for(let r of[kc,Oc,Bc])r.prototype[Lc]=function(){this.db.status==="open"&&(this[Ue]=this[Rc]())},r.prototype._next=function(e){this[Ue]!==null?this[Ue].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new _h("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._nextv=function(e,t,n){this[Ue]!==null?this[Ue].nextv(e,t,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,n)):this.nextTick(n,new _h("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._all=function(e,t){this[Ue]!==null?this[Ue].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new _h("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._seek=function(e,t){this[Ue]!==null?this[Ue]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},r.prototype._close=function(e){this[Ue]!==null?this[Ue].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};Nc.DeferredIterator=kc;Nc.DeferredKeyIterator=Oc;Nc.DeferredValueIterator=Bc});var Dh=E(cE=>{"use strict";a();var{fromCallback:aE}=ds(),Pc=kt(),{getCallback:c3,getOptions:u3}=Sc(),Fc=Symbol("promise"),pt=Symbol("status"),Yi=Symbol("operations"),bs=Symbol("finishClose"),Xi=Symbol("closeCallbacks"),Sh=class{constructor(e){if(typeof e!="object"||e===null){let t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[Yi]=[],this[Xi]=[],this[pt]="open",this[bs]=this[bs].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[Yi].length}put(e,t,n){if(this[pt]!=="open")throw new Pc("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(t);if(i)throw i;let o=n&&n.sublevel!=null?n.sublevel:this.db,s=n,c=o.keyEncoding(n&&n.keyEncoding),u=o.valueEncoding(n&&n.valueEncoding),f=c.format;n={...n,keyEncoding:f,valueEncoding:u.format},o!==this.db&&(n.sublevel=null);let l=o.prefixKey(c.encode(e),f),h=u.encode(t);return this._put(l,h,n),this[Yi].push({...s,type:"put",key:e,value:t}),this}_put(e,t,n){}del(e,t){if(this[pt]!=="open")throw new Pc("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let i=t&&t.sublevel!=null?t.sublevel:this.db,o=t,s=i.keyEncoding(t&&t.keyEncoding),c=s.format;return t={...t,keyEncoding:c},i!==this.db&&(t.sublevel=null),this._del(i.prefixKey(s.encode(e),c),t),this[Yi].push({...o,type:"del",key:e}),this}_del(e,t){}clear(){if(this[pt]!=="open")throw new Pc("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Yi]=[],this}_clear(){}write(e,t){return t=c3(e,t),t=aE(t,Fc),e=u3(e),this[pt]!=="open"?this.nextTick(t,new Pc("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[pt]="writing",this._write(e,n=>{this[pt]="closing",this[Xi].push(()=>t(n)),n||this.db.emit("batch",this[Yi]),this._close(this[bs])})),t[Fc]}_write(e,t){}close(e){return e=aE(e,Fc),this[pt]==="closing"?this[Xi].push(e):this[pt]==="closed"?this.nextTick(e):(this[Xi].push(e),this[pt]!=="writing"&&(this[pt]="closing",this._close(this[bs]))),e[Fc]}_close(e){this.nextTick(e)}[bs](){this[pt]="closed",this.db.detachResource(this);let e=this[Xi];this[Xi]=[];for(let t of e)t()}};cE.AbstractChainedBatch=Sh});var fE=E(uE=>{"use strict";a();var{AbstractChainedBatch:f3}=Dh(),l3=kt(),Zi=Symbol("encoded"),Ah=class extends f3{constructor(e){super(e),this[Zi]=[]}_put(e,t,n){this[Zi].push({...n,type:"put",key:e,value:t})}_del(e,t){this[Zi].push({...t,type:"del",key:e})}_clear(){this[Zi]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[Zi].length===0?this.nextTick(t):this.db._batch(this[Zi],e,t):this.nextTick(t,new l3("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};uE.DefaultChainedBatch=Ah});var dE=E((OF,hE)=>{"use strict";a();var lE=kt(),h3=Object.prototype.hasOwnProperty,d3=new Set(["lt","lte","gt","gte"]);hE.exports=function(r,e){let t={};for(let n in r)if(!!h3.call(r,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new lE(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new lE("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});d3.has(n)?t[n]=e.encode(r[n]):t[n]=r[n]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t}});var Th=E((LF,yE)=>{a();var pE;yE.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):r=>(pE||(pE=Promise.resolve())).then(r).catch(e=>setTimeout(()=>{throw e},0))});var wE=E((NF,gE)=>{"use strict";a();var mE=Th();gE.exports=function(r,...e){e.length===0?mE(r):mE(()=>r(...e))}});var bE=E($c=>{"use strict";a();var{AbstractIterator:p3,AbstractKeyIterator:y3,AbstractValueIterator:m3}=on(),eo=Symbol("unfix"),Ot=Symbol("iterator"),Gn=Symbol("handleOne"),sn=Symbol("handleMany"),pr=Symbol("callback"),Es=class extends p3{constructor(e,t,n,i){super(e,t),this[Ot]=n,this[eo]=i,this[Gn]=this[Gn].bind(this),this[sn]=this[sn].bind(this),this[pr]=null}[Gn](e,t,n){let i=this[pr];if(e)return i(e);t!==void 0&&(t=this[eo](t)),i(e,t,n)}[sn](e,t){let n=this[pr];if(e)return n(e);for(let i of t){let o=i[0];o!==void 0&&(i[0]=this[eo](o))}n(e,t)}},xs=class extends y3{constructor(e,t,n,i){super(e,t),this[Ot]=n,this[eo]=i,this[Gn]=this[Gn].bind(this),this[sn]=this[sn].bind(this),this[pr]=null}[Gn](e,t){let n=this[pr];if(e)return n(e);t!==void 0&&(t=this[eo](t)),n(e,t)}[sn](e,t){let n=this[pr];if(e)return n(e);for(let i=0;i<t.length;i++){let o=t[i];o!==void 0&&(t[i]=this[eo](o))}n(e,t)}},vs=class extends m3{constructor(e,t,n){super(e,t),this[Ot]=n}};for(let r of[Es,xs])r.prototype._next=function(e){this[pr]=e,this[Ot].next(this[Gn])},r.prototype._nextv=function(e,t,n){this[pr]=n,this[Ot].nextv(e,t,this[sn])},r.prototype._all=function(e,t){this[pr]=t,this[Ot].all(e,this[sn])};for(let r of[vs])r.prototype._next=function(e){this[Ot].next(e)},r.prototype._nextv=function(e,t,n){this[Ot].nextv(e,t,n)},r.prototype._all=function(e,t){this[Ot].all(e,t)};for(let r of[Es,xs,vs])r.prototype._seek=function(e,t){this[Ot].seek(e,t)},r.prototype._close=function(e){this[Ot].close(e)};$c.AbstractSublevelIterator=Es;$c.AbstractSublevelKeyIterator=xs;$c.AbstractSublevelValueIterator=vs});var _E=E((UF,vE)=>{"use strict";a();var Ch=kt(),{Buffer:Oh}=ho()||{},{AbstractSublevelIterator:g3,AbstractSublevelKeyIterator:w3,AbstractSublevelValueIterator:b3}=bE(),yr=Symbol("prefix"),EE=Symbol("upperBound"),_s=Symbol("prefixRange"),Qe=Symbol("parent"),Ih=Symbol("unfix"),xE=new TextEncoder,E3={separator:"!"};vE.exports=function({AbstractLevel:r}){class e extends r{static defaults(n){if(typeof n=="string")throw new Ch("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new Ch("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?E3:n.separator?n:{...n,separator:"!"}}constructor(n,i,o){let{separator:s,manifest:c,...u}=e.defaults(o);i=v3(i,s);let f=s.charCodeAt(0)+1,l=n[Qe]||n;if(!xE.encode(i).every(w=>w>f&&w<127))throw new Ch(`Prefix must use bytes > ${f} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(x3(l,c),u);let h=(n.prefix||"")+s+i+s,p=h.slice(0,-1)+String.fromCharCode(f);this[Qe]=l,this[yr]=new Uc(h),this[EE]=new Uc(p),this[Ih]=new Bh,this.nextTick=l.nextTick}prefixKey(n,i){if(i==="utf8")return this[yr].utf8+n;if(n.byteLength===0)return this[yr][i];if(i==="view"){let o=this[yr].view,s=new Uint8Array(o.byteLength+n.byteLength);return s.set(o,0),s.set(n,o.byteLength),s}else{let o=this[yr].buffer;return Oh.concat([o,n],o.byteLength+n.byteLength)}}[_s](n,i){n.gte!==void 0?n.gte=this.prefixKey(n.gte,i):n.gt!==void 0?n.gt=this.prefixKey(n.gt,i):n.gte=this[yr][i],n.lte!==void 0?n.lte=this.prefixKey(n.lte,i):n.lt!==void 0?n.lt=this.prefixKey(n.lt,i):n.lte=this[EE][i]}get prefix(){return this[yr].utf8}get db(){return this[Qe]}_open(n,i){this[Qe].open({passive:!0},i)}_put(n,i,o,s){this[Qe].put(n,i,o,s)}_get(n,i,o){this[Qe].get(n,i,o)}_getMany(n,i,o){this[Qe].getMany(n,i,o)}_del(n,i,o){this[Qe].del(n,i,o)}_batch(n,i,o){this[Qe].batch(n,i,o)}_clear(n,i){this[_s](n,n.keyEncoding),this[Qe].clear(n,i)}_iterator(n){this[_s](n,n.keyEncoding);let i=this[Qe].iterator(n),o=this[Ih].get(this[yr].utf8.length,n.keyEncoding);return new g3(this,n,i,o)}_keys(n){this[_s](n,n.keyEncoding);let i=this[Qe].keys(n),o=this[Ih].get(this[yr].utf8.length,n.keyEncoding);return new w3(this,n,i,o)}_values(n){this[_s](n,n.keyEncoding);let i=this[Qe].values(n);return new b3(this,n,i)}}return{AbstractSublevel:e}};var x3=function(r,e){return{...r.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:kh(r,"utf8"),buffer:kh(r,"buffer"),view:kh(r,"view")}}},kh=function(r,e){return r.supports.encodings[e]?r.keyEncoding(e).name===e:!1},Uc=class{constructor(e){this.utf8=e,this.view=xE.encode(e),this.buffer=Oh?Oh.from(this.view.buffer,0,this.view.byteLength):{}}},Bh=class{constructor(){this.cache=new Map}get(e,t){let n=this.cache.get(t);return n===void 0&&(t==="view"?n=function(i,o){return o.subarray(i)}.bind(null,e):n=function(i,o){return o.slice(i)}.bind(null,e),this.cache.set(t,n)),n}},v3=function(r,e){let t=0,n=r.length;for(;t<n&&r[t]===e;)t++;for(;n>t&&r[n-1]===e;)n--;return r.slice(t,n)}});var Fh=E(Ph=>{"use strict";a();var{supports:_3}=B0(),{Transcoder:S3}=z0(),{EventEmitter:D3}=Z0(),{fromCallback:an}=ds(),Bt=kt(),{AbstractIterator:Jn}=on(),{DefaultKeyIterator:A3,DefaultValueIterator:T3}=oE(),{DeferredIterator:C3,DeferredKeyIterator:I3,DeferredValueIterator:k3}=sE(),{DefaultChainedBatch:SE}=fE(),{getCallback:Qn,getOptions:cn}=Sc(),Mc=dE(),O=Symbol("promise"),mr=Symbol("landed"),Yn=Symbol("resources"),Lh=Symbol("closeResources"),Ss=Symbol("operations"),Ds=Symbol("undefer"),jc=Symbol("deferOpen"),DE=Symbol("options"),R=Symbol("status"),Xn=Symbol("defaultOptions"),to=Symbol("transcoder"),zc=Symbol("keyEncoding"),Rh=Symbol("valueEncoding"),O3=()=>{},As=class extends D3{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=cn(t);let{keyEncoding:n,valueEncoding:i,passive:o,...s}=t;this[Yn]=new Set,this[Ss]=[],this[jc]=!0,this[DE]=s,this[R]="opening",this.supports=_3(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[to]=new S3(B3(this)),this[zc]=this[to].encoding(n||"utf8"),this[Rh]=this[to].encoding(i||"utf8");for(let c of this[to].encodings())this.supports.encodings[c.commonName]||(this.supports.encodings[c.commonName]=!0);this[Xn]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[zc].commonName,valueEncoding:this[Rh].commonName}),key:Object.freeze({keyEncoding:this[zc].commonName})},this.nextTick(()=>{this[jc]&&this.open({passive:!1},O3)})}get status(){return this[R]}keyEncoding(e){return this[to].encoding(e??this[zc])}valueEncoding(e){return this[to].encoding(e??this[Rh])}open(e,t){t=Qn(e,t),t=an(t,O),e={...this[DE],...cn(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=i=>{this[R]==="closing"||this[R]==="opening"?this.once(mr,i?()=>n(i):n):this[R]!=="open"?t(new Bt("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):t()};return e.passive?this[R]==="opening"?this.once(mr,n):this.nextTick(n):this[R]==="closed"||this[jc]?(this[jc]=!1,this[R]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[R]="closed",this[Lh](()=>{this.emit(mr),n(i)}),this[Ds]();return}this[R]="open",this[Ds](),this.emit(mr),this[R]==="open"&&this.emit("open"),this[R]==="open"&&this.emit("ready"),n()})):this[R]==="open"?this.nextTick(n):this.once(mr,()=>this.open(e,t)),t[O]}_open(e,t){this.nextTick(t)}close(e){e=an(e,O);let t=n=>{this[R]==="opening"||this[R]==="closing"?this.once(mr,n?t(n):t):this[R]!=="closed"?e(new Bt("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[R]==="open"){this[R]="closing",this.emit("closing");let n=i=>{this[R]="open",this[Ds](),this.emit(mr),t(i)};this[Lh](()=>{this._close(i=>{if(i)return n(i);this[R]="closed",this[Ds](),this.emit(mr),this[R]==="closed"&&this.emit("closed"),t()})})}else this[R]==="closed"?this.nextTick(t):this.once(mr,()=>this.close(e));return e[O]}[Lh](e){if(this[Yn].size===0)return this.nextTick(e);let t=this[Yn].size,n=!0,i=()=>{--t===0&&(n?this.nextTick(e):e())};for(let o of this[Yn])o.close(i);n=!1,this[Yn].clear()}_close(e){this.nextTick(e)}get(e,t,n){if(n=Qn(t,n),n=an(n,O),t=cn(t,this[Xn].entry),this[R]==="opening")return this.defer(()=>this.get(e,t,n)),n[O];if(ro(this,n))return n[O];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[O];let o=this.keyEncoding(t.keyEncoding),s=this.valueEncoding(t.valueEncoding),c=o.format,u=s.format;return(t.keyEncoding!==c||t.valueEncoding!==u)&&(t=Object.assign({},t,{keyEncoding:c,valueEncoding:u})),this._get(this.prefixKey(o.encode(e),c),t,(f,l)=>{if(f)return(f.code==="LEVEL_NOT_FOUND"||f.notFound||/NotFound/i.test(f))&&(f.code||(f.code="LEVEL_NOT_FOUND"),f.notFound||(f.notFound=!0),f.status||(f.status=404)),n(f);try{l=s.decode(l)}catch(h){return n(new Bt("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:h}))}n(null,l)}),n[O]}_get(e,t,n){this.nextTick(n,new Error("NotFound"))}getMany(e,t,n){if(n=Qn(t,n),n=an(n,O),t=cn(t,this[Xn].entry),this[R]==="opening")return this.defer(()=>this.getMany(e,t,n)),n[O];if(ro(this,n))return n[O];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[O];if(e.length===0)return this.nextTick(n,null,[]),n[O];let i=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),s=i.format,c=o.format;(t.keyEncoding!==s||t.valueEncoding!==c)&&(t=Object.assign({},t,{keyEncoding:s,valueEncoding:c}));let u=new Array(e.length);for(let f=0;f<e.length;f++){let l=e[f],h=this._checkKey(l);if(h)return this.nextTick(n,h),n[O];u[f]=this.prefixKey(i.encode(l),s)}return this._getMany(u,t,(f,l)=>{if(f)return n(f);try{for(let h=0;h<l.length;h++)l[h]!==void 0&&(l[h]=o.decode(l[h]))}catch(h){return n(new Bt(`Could not decode one or more of ${l.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:h}))}n(null,l)}),n[O]}_getMany(e,t,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,t,n,i){if(i=Qn(n,i),i=an(i,O),n=cn(n,this[Xn].entry),this[R]==="opening")return this.defer(()=>this.put(e,t,n,i)),i[O];if(ro(this,i))return i[O];let o=this._checkKey(e)||this._checkValue(t);if(o)return this.nextTick(i,o),i[O];let s=this.keyEncoding(n.keyEncoding),c=this.valueEncoding(n.valueEncoding),u=s.format,f=c.format;(n.keyEncoding!==u||n.valueEncoding!==f)&&(n=Object.assign({},n,{keyEncoding:u,valueEncoding:f}));let l=this.prefixKey(s.encode(e),u),h=c.encode(t);return this._put(l,h,n,p=>{if(p)return i(p);this.emit("put",e,t),i()}),i[O]}_put(e,t,n,i){this.nextTick(i)}del(e,t,n){if(n=Qn(t,n),n=an(n,O),t=cn(t,this[Xn].key),this[R]==="opening")return this.defer(()=>this.del(e,t,n)),n[O];if(ro(this,n))return n[O];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[O];let o=this.keyEncoding(t.keyEncoding),s=o.format;return t.keyEncoding!==s&&(t=Object.assign({},t,{keyEncoding:s})),this._del(this.prefixKey(o.encode(e),s),t,c=>{if(c)return n(c);this.emit("del",e),n()}),n[O]}_del(e,t,n){this.nextTick(n)}batch(e,t,n){if(!arguments.length){if(this[R]==="opening")return new SE(this);if(this[R]!=="open")throw new Bt("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=Qn(t,n),n=an(n,O),t=cn(t,this[Xn].empty),this[R]==="opening")return this.defer(()=>this.batch(e,t,n)),n[O];if(ro(this,n))return n[O];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[O];if(e.length===0)return this.nextTick(n),n[O];let i=new Array(e.length),{keyEncoding:o,valueEncoding:s,...c}=t;for(let u=0;u<e.length;u++){if(typeof e[u]!="object"||e[u]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[O];let f=Object.assign({},e[u]);if(f.type!=="put"&&f.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[O];let l=this._checkKey(f.key);if(l)return this.nextTick(n,l),n[O];let h=f.sublevel!=null?f.sublevel:this,p=h.keyEncoding(f.keyEncoding||o),w=p.format;if(f.key=h.prefixKey(p.encode(f.key),w),f.keyEncoding=w,f.type==="put"){let g=this._checkValue(f.value);if(g)return this.nextTick(n,g),n[O];let y=h.valueEncoding(f.valueEncoding||s);f.value=y.encode(f.value),f.valueEncoding=y.format}h!==this&&(f.sublevel=null),i[u]=f}return this._batch(i,c,u=>{if(u)return n(u);this.emit("batch",e),n()}),n[O]}_batch(e,t,n){this.nextTick(n)}sublevel(e,t){return this._sublevel(e,Nh.defaults(t))}_sublevel(e,t){return new Nh(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=Qn(e,t),t=an(t,O),e=cn(e,this[Xn].empty),this[R]==="opening")return this.defer(()=>this.clear(e,t)),t[O];if(ro(this,t))return t[O];let n=e,i=this.keyEncoding(e.keyEncoding);return e=Mc(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(t):this._clear(e,o=>{if(o)return t(o);this.emit("clear",n),t()}),t[O]}_clear(e,t){this.nextTick(t)}iterator(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Mc(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[Jn.keyEncoding]=t,e[Jn.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[R]==="opening")return new C3(this,e);if(this[R]!=="open")throw new Bt("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new Jn(this,e)}keys(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Mc(e,t),e[Jn.keyEncoding]=t,e[Jn.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[R]==="opening")return new I3(this,e);if(this[R]!=="open")throw new Bt("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new A3(this,e)}values(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Mc(e,t),e[Jn.keyEncoding]=t,e[Jn.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[R]==="opening")return new k3(this,e);if(this[R]!=="open")throw new Bt("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new T3(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[Ss].push(e)}[Ds](){if(this[Ss].length===0)return;let e=this[Ss];this[Ss]=[];for(let t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[Yn].add(e)}detachResource(e){this[Yn].delete(e)}_chainedBatch(){return new SE(this)}_checkKey(e){if(e==null)return new Bt("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new Bt("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};As.prototype.nextTick=wE();var{AbstractSublevel:Nh}=_E()({AbstractLevel:As});Ph.AbstractLevel=As;Ph.AbstractSublevel=Nh;var ro=function(r,e){return r[R]!=="open"?(r.nextTick(e,new Bt("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},B3=function(r){return Object.keys(r.supports.encodings).filter(e=>!!r.supports.encodings[e])}});var $h=E(Zn=>{"use strict";a();Zn.AbstractLevel=Fh().AbstractLevel;Zn.AbstractSublevel=Fh().AbstractSublevel;Zn.AbstractIterator=on().AbstractIterator;Zn.AbstractKeyIterator=on().AbstractKeyIterator;Zn.AbstractValueIterator=on().AbstractValueIterator;Zn.AbstractChainedBatch=Dh().AbstractChainedBatch});var TE=E((KF,AE)=>{a();AE.exports=R3;var L3=Th();function R3(r,e,t){if(typeof e!="number")throw new Error("second argument must be a Number");let n,i,o,s,c,u=!0,f;Array.isArray(r)?(n=[],o=i=r.length):(s=Object.keys(r),n={},o=i=s.length);function l(p){function w(){t&&t(p,n),t=null}u?L3(w):w()}function h(p,w,g){if(n[p]=g,w&&(c=!0),--o===0||w)l(w);else if(!c&&f<i){let y;s?(y=s[f],f+=1,r[y](function(k,$){h(y,k,$)})):(y=f,f+=1,r[y](function(k,$){h(y,k,$)}))}}f=e,o?s?s.some(function(p,w){return r[p](function(g,y){h(p,g,y)}),w===e-1}):r.some(function(p,w){return p(function(g,y){h(w,g,y)}),w===e-1}):l(null),u=!1}});var Uh=E((HF,CE)=>{"use strict";a();CE.exports=function(e){let t=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,o=e.lte===void 0;return t!==void 0&&n!==void 0?IDBKeyRange.bound(t,n,i,o):t!==void 0?IDBKeyRange.lowerBound(t,i):n!==void 0?IDBKeyRange.upperBound(n,o):null}});var Mh=E((JF,IE)=>{"use strict";a();var N3=new TextEncoder;IE.exports=function(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):N3.encode(r)}});var RE=E(LE=>{"use strict";a();var{AbstractIterator:P3}=$h(),kE=Uh(),qc=Mh(),Jt=Symbol("cache"),gr=Symbol("finished"),Ye=Symbol("options"),wr=Symbol("currentOptions"),ei=Symbol("position"),jh=Symbol("location"),no=Symbol("first"),OE={},zh=class extends P3{constructor(e,t,n){super(e,n),this[Jt]=[],this[gr]=this.limit===0,this[Ye]=n,this[wr]={...n},this[ei]=void 0,this[jh]=t,this[no]=!0}_nextv(e,t,n){if(this[no]=!1,this[gr])return this.nextTick(n,null,[]);if(this[Jt].length>0)return e=Math.min(e,this[Jt].length),this.nextTick(n,null,this[Jt].splice(0,e));this[ei]!==void 0&&(this[Ye].reverse?(this[wr].lt=this[ei],this[wr].lte=void 0):(this[wr].gt=this[ei],this[wr].gte=void 0));let i;try{i=kE(this[wr])}catch{return this[gr]=!0,this.nextTick(n,null,[])}let o=this.db.db.transaction([this[jh]],"readonly"),s=o.objectStore(this[jh]),c=[];if(this[Ye].reverse){let u=!this[Ye].values&&s.openKeyCursor?"openKeyCursor":"openCursor";s[u](i,"prev").onsuccess=f=>{let l=f.target.result;if(l){let{key:h,value:p}=l;this[ei]=h,c.push([this[Ye].keys&&h!==void 0?qc(h):void 0,this[Ye].values&&p!==void 0?qc(p):void 0]),c.length<e?l.continue():BE(o)}else this[gr]=!0}}else{let u,f,l=()=>{if(u===void 0||f===void 0)return;let h=Math.max(u.length,f.length);h===0||e===1/0?this[gr]=!0:this[ei]=u[h-1],c.length=h;for(let p=0;p<h;p++){let w=u[p],g=f[p];c[p]=[this[Ye].keys&&w!==void 0?qc(w):void 0,this[Ye].values&&g!==void 0?qc(g):void 0]}BE(o)};this[Ye].keys||e<1/0?s.getAllKeys(i,e<1/0?e:void 0).onsuccess=h=>{u=h.target.result,l()}:(u=[],this.nextTick(l)),this[Ye].values?s.getAll(i,e<1/0?e:void 0).onsuccess=h=>{f=h.target.result,l()}:(f=[],this.nextTick(l))}o.onabort=()=>{n(o.error||new Error("aborted by user")),n=null},o.oncomplete=()=>{n(null,c),n=null}}_next(e){if(this[Jt].length>0){let[t,n]=this[Jt].shift();this.nextTick(e,null,t,n)}else if(this[gr])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[no]&&(this[no]=!1,t=1),this._nextv(t,OE,(n,i)=>{if(n)return e(n);this[Jt]=i,this._next(e)})}}_all(e,t){this[no]=!1;let n=this[Jt].splice(0,this[Jt].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(t,null,n);this._nextv(i,OE,(o,s)=>{if(o)return t(o);n.length>0&&(s=n.concat(s)),t(null,s)})}_seek(e,t){this[no]=!0,this[Jt]=[],this[gr]=!1,this[ei]=void 0,this[wr]={...this[Ye]};let n;try{n=kE(this[Ye])}catch{this[gr]=!0;return}n!==null&&!n.includes(e)?this[gr]=!0:this[Ye].reverse?this[wr].lte=e:this[wr].gte=e}};LE.Iterator=zh;function BE(r){typeof r.commit=="function"&&r.commit()}});var PE=E((ZF,NE)=>{"use strict";a();NE.exports=function(e,t,n,i,o){if(i.limit===0)return e.nextTick(o);let s=e.db.transaction([t],"readwrite"),c=s.objectStore(t),u=0;s.oncomplete=function(){o()},s.onabort=function(){o(s.error||new Error("aborted by user"))};let f=c.openKeyCursor?"openKeyCursor":"openCursor",l=i.reverse?"prev":"next";c[f](n,l).onsuccess=function(h){let p=h.target.result;p&&(c.delete(p.key).onsuccess=function(){(i.limit<=0||++u<i.limit)&&p.continue()})}}});var zE=E(jE=>{"use strict";a();var{AbstractLevel:F3}=$h(),FE=kt(),$3=TE(),{fromCallback:U3}=ds(),{Iterator:M3}=RE(),$E=Mh(),j3=PE(),z3=Uh(),ME="level-js-",Ts=Symbol("idb"),qh=Symbol("namePrefix"),br=Symbol("location"),Vh=Symbol("version"),ti=Symbol("store"),Cs=Symbol("onComplete"),UE=Symbol("promise"),Vc=class extends F3{constructor(e,t,n){if(typeof t=="function"||typeof n=="function")throw new FE("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:o,...s}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},s),typeof e!="string")throw new Error("constructor requires a location string argument");this[br]=e,this[qh]=i??ME,this[Vh]=parseInt(o||1,10),this[Ts]=null}get location(){return this[br]}get namePrefix(){return this[qh]}get version(){return this[Vh]}get db(){return this[Ts]}get type(){return"browser-level"}_open(e,t){let n=indexedDB.open(this[qh]+this[br],this[Vh]);n.onerror=function(){t(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[Ts]=n.result,t()},n.onupgradeneeded=i=>{let o=i.target.result;o.objectStoreNames.contains(this[br])||o.createObjectStore(this[br])}}[ti](e){return this[Ts].transaction([this[br]],e).objectStore(this[br])}[Cs](e,t){let n=e.transaction;n.onabort=function(){t(n.error||new Error("aborted by user"))},n.oncomplete=function(){t(null,e.result)}}_get(e,t,n){let i=this[ti]("readonly"),o;try{o=i.get(e)}catch(s){return this.nextTick(n,s)}this[Cs](o,function(s,c){if(s)return n(s);if(c===void 0)return n(new FE("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,$E(c))})}_getMany(e,t,n){let i=this[ti]("readonly"),o=e.map(s=>c=>{let u;try{u=i.get(s)}catch(f){return c(f)}u.onsuccess=()=>{let f=u.result;c(null,f===void 0?f:$E(f))},u.onerror=f=>{f.stopPropagation(),c(u.error)}});$3(o,16,n)}_del(e,t,n){let i=this[ti]("readwrite"),o;try{o=i.delete(e)}catch(s){return this.nextTick(n,s)}this[Cs](o,n)}_put(e,t,n,i){let o=this[ti]("readwrite"),s;try{s=o.put(t,e)}catch(c){return this.nextTick(i,c)}this[Cs](s,i)}_iterator(e){return new M3(this,this[br],e)}_batch(e,t,n){let i=this[ti]("readwrite"),o=i.transaction,s=0,c;o.onabort=function(){n(c||o.error||new Error("aborted by user"))},o.oncomplete=function(){n()};function u(){let f=e[s++],l=f.key,h;try{h=f.type==="del"?i.delete(l):i.put(f.value,l)}catch(p){c=p,o.abort();return}s<e.length?h.onsuccess=u:typeof o.commit=="function"&&o.commit()}u()}_clear(e,t){let n,i;try{n=z3(e)}catch{return this.nextTick(t)}if(e.limit>=0)return j3(this,this[br],n,e,t);try{let o=this[ti]("readwrite");i=n?o.delete(n):o.clear()}catch(o){return this.nextTick(t,o)}this[Cs](i,t)}_close(e){this[Ts].close(),this.nextTick(e)}};Vc.destroy=function(r,e,t){typeof e=="function"&&(t=e,e=ME),t=U3(t,UE);let n=indexedDB.deleteDatabase(e+r);return n.onsuccess=function(){t()},n.onerror=function(i){t(i)},t[UE]};jE.BrowserLevel=Vc});var VE=E(qE=>{a();qE.Level=zE().BrowserLevel});var ZE=E((N$,XE)=>{"use strict";a();XE.exports=function(){return Date.now()}});var t1=E((F$,e1)=>{"use strict";a();var Gc=ZE(),Xh=class{constructor(e,t,n){let i=this;this._started=Gc(),this._rescheduled=0,this._scheduled=t,this._args=n,this._triggered=!1,this._timerWrapper=()=>{i._rescheduled>0?(i._scheduled=i._rescheduled-(Gc()-i._started),i._schedule(i._scheduled)):(i._triggered=!0,e.apply(null,i._args))},this._timer=setTimeout(this._timerWrapper,t)}reschedule(e){e||(e=this._scheduled);let t=Gc();t+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=t,this._rescheduled=e)}_schedule(e){this._triggered=!1,this._started=Gc(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}clear(){clearTimeout(this._timer)}};function Y3(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let r;if(arguments.length>0){r=new Array(arguments.length-2);for(var e=0;e<r.length;e++)r[e]=arguments[e+2]}return new Xh(arguments[0],arguments[1],r)}e1.exports=Y3});var i1=E((U$,n1)=>{"use strict";a();var{AbortController:X3}=globalThis,r1=t1(),ks=class extends X3{constructor(e){super(),this._ms=e,this._timer=r1(()=>this.abort(),e),Object.setPrototypeOf(this,ks.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=r1(()=>this.abort(),this._ms)}};n1.exports={TimeoutController:ks}});var s1=E((j$,Zh)=>{a();function o1(r){let e=new globalThis.AbortController;function t(){e.abort();for(let n of r)!n||!n.removeEventListener||n.removeEventListener("abort",t)}for(let n of r)if(!(!n||!n.addEventListener)){if(n.aborted){t();break}n.addEventListener("abort",t)}return e.signal}Zh.exports=o1;Zh.exports.anySignal=o1});var p1=E((dU,d1)=>{"use strict";a();var rA=async r=>{let e;for await(let t of r)e=t;return e};d1.exports=rA});var kd=E((zM,X1)=>{"use strict";a();var uT=typeof navigator<"u"&&navigator.product==="ReactNative";function fT(){return uT?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}var $s=self.URL,Y1=fT(),Id=class{constructor(e="",t=Y1){this.super=new $s(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return $s.createObjectURL(e)}static revokeObjectURL(e){$s.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function lT(r){if(typeof r=="string")return new $s(r).toString();if(!(r instanceof $s)){let e=r.username&&r.password?`${r.username}:${r.password}@`:"",t=r.auth?r.auth+"@":"",n=r.port?":"+r.port:"",i=r.protocol?r.protocol+"//":"",o=r.host||"",s=r.hostname||"",c=r.search||(r.query?"?"+r.query:""),u=r.hash||"",f=r.pathname||"",l=r.path||f+c;return`${i}${e||t}${o||s+n}${l}${u}`}}X1.exports={URLWithLegacySupport:Id,URLSearchParams:self.URLSearchParams,defaultBase:Y1,format:lT}});var tx=E((VM,ex)=>{"use strict";a();var{URLWithLegacySupport:Z1,format:hT}=kd();ex.exports=(r,e={},t={},n)=>{let i=e.protocol?e.protocol.replace(":",""):"http";i=(t[i]||n||i)+":";let o;try{o=new Z1(r)}catch{o={}}let s=Object.assign({},e,{protocol:i||o.protocol,host:e.host||o.host});return new Z1(r,hT(s)).toString()}});var nx=E((WM,rx)=>{"use strict";a();var{URLWithLegacySupport:dT,format:pT,URLSearchParams:yT,defaultBase:mT}=kd(),gT=tx();rx.exports={URL:dT,URLSearchParams:yT,format:pT,relative:gT,defaultBase:mT}});var hx=E((v7,lx)=>{"use strict";a();function _T(r){let[e,t]=r[Symbol.asyncIterator]?[r[Symbol.asyncIterator](),Symbol.asyncIterator]:[r[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:i=>{n.push(i)},next:()=>n.length?{done:!1,value:n.shift()}:e.next(),[t](){return this}}}lx.exports=_T});a();a();a();var To=v(Be(),1);a();a();a();var Lv=["string","number","bigint","symbol"],Rv=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function xp(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let e=typeof r;if(Lv.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(Nv(r))return"Buffer";let t=Pv(r);return t||"Object"}function Nv(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function Pv(r){let e=Object.prototype.toString.call(r).slice(8,-1);if(Rv.includes(e))return e}a();var d=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};d.uint=new d(0,"uint",!0);d.negint=new d(1,"negint",!0);d.bytes=new d(2,"bytes",!0);d.string=new d(3,"string",!0);d.array=new d(4,"array",!1);d.map=new d(5,"map",!1);d.tag=new d(6,"tag",!1);d.float=new d(7,"float",!0);d.false=new d(7,"false",!0);d.true=new d(7,"true",!0);d.null=new d(7,"null",!0);d.undefined=new d(7,"undefined",!0);d.break=new d(7,"break",!0);var b=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};a();a();var ui=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Fv=new TextDecoder,$v=new TextEncoder;function Vs(r){return ui&&globalThis.Buffer.isBuffer(r)}function po(r){return r instanceof Uint8Array?Vs(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}var Dp=ui?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):_p(r,e,t):(r,e,t)=>t-e>64?Fv.decode(r.subarray(e,t)):_p(r,e,t),Ks=ui?r=>r.length>64?globalThis.Buffer.from(r):vp(r):r=>r.length>64?$v.encode(r):vp(r),Ut=r=>Uint8Array.from(r),fi=ui?(r,e,t)=>Vs(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),Ap=ui?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),po(globalThis.Buffer.concat(r,e))):(r,e)=>{let t=new Uint8Array(e),n=0;for(let i of r)n+i.length>t.length&&(i=i.subarray(0,t.length-n)),t.set(i,n),n+=i.length;return t},Tp=ui?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function Cp(r,e){if(Vs(r)&&Vs(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function vp(r,e=1/0){let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function _p(r,e,t){let n=[];for(;e<t;){let i=r[e],o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=t){let c,u,f,l;switch(s){case 1:i<128&&(o=i);break;case 2:c=r[e+1],(c&192)===128&&(l=(i&31)<<6|c&63,l>127&&(o=l));break;case 3:c=r[e+1],u=r[e+2],(c&192)===128&&(u&192)===128&&(l=(i&15)<<12|(c&63)<<6|u&63,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:c=r[e+1],u=r[e+2],f=r[e+3],(c&192)===128&&(u&192)===128&&(f&192)===128&&(l=(i&15)<<18|(c&63)<<12|(u&63)<<6|f&63,l>65535&&l<1114112&&(o=l))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=s}return ku(n)}var Sp=4096;function ku(r){let e=r.length;if(e<=Sp)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=Sp));return t}var Uv=256,yo=class{constructor(e=Uv){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=t.length-(this.maxCursor-this.cursor)-1;t.set(e,i)}else{if(t){let i=t.length-(this.maxCursor-this.cursor)-1;i<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=Tp(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=fi(n,0,this.cursor)}else t=Ap(this.chunks,this.cursor);return e&&this.reset(),t}};a();var S="CBOR decode error:",rr="CBOR encode error:",mo=[];mo[23]=1;mo[24]=2;mo[25]=3;mo[26]=5;mo[27]=9;function nr(r,e,t){if(r.length-e<t)throw new Error(`${S} not enough data for type`)}a();a();var he=[24,256,65536,4294967296,BigInt("18446744073709551616")];function je(r,e,t){nr(r,e,1);let n=r[e];if(t.strict===!0&&n<he[0])throw new Error(`${S} integer encoded in more bytes than necessary (strict decode)`);return n}function ze(r,e,t){nr(r,e,2);let n=r[e]<<8|r[e+1];if(t.strict===!0&&n<he[1])throw new Error(`${S} integer encoded in more bytes than necessary (strict decode)`);return n}function qe(r,e,t){nr(r,e,4);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<he[2])throw new Error(`${S} integer encoded in more bytes than necessary (strict decode)`);return n}function Ve(r,e,t){nr(r,e,8);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],i=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(t.strict===!0&&o<he[3])throw new Error(`${S} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(t.allowBigInt===!0)return o;throw new Error(`${S} integers outside of the safe integer range are not supported`)}function Ip(r,e,t,n){return new b(d.uint,je(r,e+1,n),2)}function kp(r,e,t,n){return new b(d.uint,ze(r,e+1,n),3)}function Op(r,e,t,n){return new b(d.uint,qe(r,e+1,n),5)}function Bp(r,e,t,n){return new b(d.uint,Ve(r,e+1,n),9)}function rt(r,e){return ge(r,0,e.value)}function ge(r,e,t){if(t<he[0]){let n=Number(t);r.push([e|n])}else if(t<he[1]){let n=Number(t);r.push([e|24,n])}else if(t<he[2]){let n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<he[3]){let n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<he[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=s&255,s=s>>8,i[3]=s&255,s=s>>8,i[2]=s&255,s=s>>8,i[1]=s&255,r.push(i)}else throw new Error(`${S} encountered BigInt larger than allowable range`)}}rt.encodedSize=function(e){return ge.encodedSize(e.value)};ge.encodedSize=function(e){return e<he[0]?1:e<he[1]?2:e<he[2]?3:e<he[3]?5:9};rt.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};a();function Lp(r,e,t,n){return new b(d.negint,-1-je(r,e+1,n),2)}function Rp(r,e,t,n){return new b(d.negint,-1-ze(r,e+1,n),3)}function Np(r,e,t,n){return new b(d.negint,-1-qe(r,e+1,n),5)}var Ou=BigInt(-1),Pp=BigInt(1);function Fp(r,e,t,n){let i=Ve(r,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new b(d.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${S} integers outside of the safe integer range are not supported`);return new b(d.negint,Ou-BigInt(i),9)}function Ws(r,e){let t=e.value,n=typeof t=="bigint"?t*Ou-Pp:t*-1-1;ge(r,e.type.majorEncoded,n)}Ws.encodedSize=function(e){let t=e.value,n=typeof t=="bigint"?t*Ou-Pp:t*-1-1;return n<he[0]?1:n<he[1]?2:n<he[2]?3:n<he[3]?5:9};Ws.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};a();function go(r,e,t,n){nr(r,e,t+n);let i=fi(r,e+t,e+t+n);return new b(d.bytes,i,t+n)}function $p(r,e,t,n){return go(r,e,1,t)}function Up(r,e,t,n){return go(r,e,2,je(r,e+1,n))}function Mp(r,e,t,n){return go(r,e,3,ze(r,e+1,n))}function jp(r,e,t,n){return go(r,e,5,qe(r,e+1,n))}function zp(r,e,t,n){let i=Ve(r,e+1,n);if(typeof i=="bigint")throw new Error(`${S} 64-bit integer bytes lengths not supported`);return go(r,e,9,i)}function Hs(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===d.string?Ks(r.value):r.value),r.encodedBytes}function li(r,e){let t=Hs(e);ge(r,e.type.majorEncoded,t.length),r.push(t)}li.encodedSize=function(e){let t=Hs(e);return ge.encodedSize(t.length)+t.length};li.compareTokens=function(e,t){return jv(Hs(e),Hs(t))};function jv(r,e){return r.length<e.length?-1:r.length>e.length?1:Cp(r,e)}a();function wo(r,e,t,n,i){let o=t+n;nr(r,e,o);let s=new b(d.string,Dp(r,e+t,e+o),o);return i.retainStringBytes===!0&&(s.byteValue=fi(r,e+t,e+o)),s}function qp(r,e,t,n){return wo(r,e,1,t,n)}function Vp(r,e,t,n){return wo(r,e,2,je(r,e+1,n),n)}function Kp(r,e,t,n){return wo(r,e,3,ze(r,e+1,n),n)}function Wp(r,e,t,n){return wo(r,e,5,qe(r,e+1,n),n)}function Hp(r,e,t,n){let i=Ve(r,e+1,n);if(typeof i=="bigint")throw new Error(`${S} 64-bit integer string lengths not supported`);return wo(r,e,9,i,n)}var Gp=li;a();function hi(r,e,t,n){return new b(d.array,n,t)}function Jp(r,e,t,n){return hi(r,e,1,t)}function Qp(r,e,t,n){return hi(r,e,2,je(r,e+1,n))}function Yp(r,e,t,n){return hi(r,e,3,ze(r,e+1,n))}function Xp(r,e,t,n){return hi(r,e,5,qe(r,e+1,n))}function Zp(r,e,t,n){let i=Ve(r,e+1,n);if(typeof i=="bigint")throw new Error(`${S} 64-bit integer array lengths not supported`);return hi(r,e,9,i)}function ey(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${S} indefinite length items not allowed`);return hi(r,e,1,1/0)}function Gs(r,e){ge(r,d.array.majorEncoded,e.value)}Gs.compareTokens=rt.compareTokens;Gs.encodedSize=function(e){return ge.encodedSize(e.value)};a();function di(r,e,t,n){return new b(d.map,n,t)}function ty(r,e,t,n){return di(r,e,1,t)}function ry(r,e,t,n){return di(r,e,2,je(r,e+1,n))}function ny(r,e,t,n){return di(r,e,3,ze(r,e+1,n))}function iy(r,e,t,n){return di(r,e,5,qe(r,e+1,n))}function oy(r,e,t,n){let i=Ve(r,e+1,n);if(typeof i=="bigint")throw new Error(`${S} 64-bit integer map lengths not supported`);return di(r,e,9,i)}function sy(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${S} indefinite length items not allowed`);return di(r,e,1,1/0)}function Js(r,e){ge(r,d.map.majorEncoded,e.value)}Js.compareTokens=rt.compareTokens;Js.encodedSize=function(e){return ge.encodedSize(e.value)};a();function ay(r,e,t,n){return new b(d.tag,t,1)}function cy(r,e,t,n){return new b(d.tag,je(r,e+1,n),2)}function uy(r,e,t,n){return new b(d.tag,ze(r,e+1,n),3)}function fy(r,e,t,n){return new b(d.tag,qe(r,e+1,n),5)}function ly(r,e,t,n){return new b(d.tag,Ve(r,e+1,n),9)}function Qs(r,e){ge(r,d.tag.majorEncoded,e.value)}Qs.compareTokens=rt.compareTokens;Qs.encodedSize=function(e){return ge.encodedSize(e.value)};a();var Hv=20,Gv=21,Jv=22,Qv=23;function hy(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${S} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new b(d.null,null,1):new b(d.undefined,void 0,1)}function dy(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${S} indefinite length items not allowed`);return new b(d.break,void 0,1)}function Bu(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${S} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${S} Infinity values are not supported`)}return new b(d.float,r,e)}function py(r,e,t,n){return Bu(Lu(r,e+1),3,n)}function yy(r,e,t,n){return Bu(Ru(r,e+1),5,n)}function my(r,e,t,n){return Bu(Ey(r,e+1),9,n)}function Ys(r,e,t){let n=e.value;if(n===!1)r.push([d.float.majorEncoded|Hv]);else if(n===!0)r.push([d.float.majorEncoded|Gv]);else if(n===null)r.push([d.float.majorEncoded|Jv]);else if(n===void 0)r.push([d.float.majorEncoded|Qv]);else{let i,o=!1;(!t||t.float64!==!0)&&(wy(n),i=Lu(wt,1),n===i||Number.isNaN(n)?(wt[0]=249,r.push(wt.slice(0,3)),o=!0):(by(n),i=Ru(wt,1),n===i&&(wt[0]=250,r.push(wt.slice(0,5)),o=!0))),o||(Yv(n),i=Ey(wt,1),wt[0]=251,r.push(wt.slice(0,9)))}}Ys.encodedSize=function(e,t){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){wy(n);let i=Lu(wt,1);if(n===i||Number.isNaN(n))return 3;if(by(n),i=Ru(wt,1),n===i)return 5}return 9};var gy=new ArrayBuffer(9),nt=new DataView(gy,1),wt=new Uint8Array(gy,0);function wy(r){if(r===1/0)nt.setUint16(0,31744,!1);else if(r===-1/0)nt.setUint16(0,64512,!1);else if(Number.isNaN(r))nt.setUint16(0,32256,!1);else{nt.setFloat32(0,r);let e=nt.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)nt.setUint16(0,31744,!1);else if(t===0)nt.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let i=t-127;i<-24?nt.setUint16(0,0):i<-14?nt.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):nt.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function Lu(r,e){if(r.length-e<2)throw new Error(`${S} not enough data for float16`);let t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,i=t&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,t&32768?-o:o}function by(r){nt.setFloat32(0,r,!1)}function Ru(r,e){if(r.length-e<4)throw new Error(`${S} not enough data for float32`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function Yv(r){nt.setFloat64(0,r,!1)}function Ey(r,e){if(r.length-e<8)throw new Error(`${S} not enough data for float64`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}Ys.compareTokens=rt.compareTokens;function F(r,e,t){throw new Error(`${S} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function Xs(r){return()=>{throw new Error(`${S} ${r}`)}}var _=[];for(let r=0;r<=23;r++)_[r]=F;_[24]=Ip;_[25]=kp;_[26]=Op;_[27]=Bp;_[28]=F;_[29]=F;_[30]=F;_[31]=F;for(let r=32;r<=55;r++)_[r]=F;_[56]=Lp;_[57]=Rp;_[58]=Np;_[59]=Fp;_[60]=F;_[61]=F;_[62]=F;_[63]=F;for(let r=64;r<=87;r++)_[r]=$p;_[88]=Up;_[89]=Mp;_[90]=jp;_[91]=zp;_[92]=F;_[93]=F;_[94]=F;_[95]=Xs("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)_[r]=qp;_[120]=Vp;_[121]=Kp;_[122]=Wp;_[123]=Hp;_[124]=F;_[125]=F;_[126]=F;_[127]=Xs("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)_[r]=Jp;_[152]=Qp;_[153]=Yp;_[154]=Xp;_[155]=Zp;_[156]=F;_[157]=F;_[158]=F;_[159]=ey;for(let r=160;r<=183;r++)_[r]=ty;_[184]=ry;_[185]=ny;_[186]=iy;_[187]=oy;_[188]=F;_[189]=F;_[190]=F;_[191]=sy;for(let r=192;r<=215;r++)_[r]=ay;_[216]=cy;_[217]=uy;_[218]=fy;_[219]=ly;_[220]=F;_[221]=F;_[222]=F;_[223]=F;for(let r=224;r<=243;r++)_[r]=Xs("simple values are not supported");_[244]=F;_[245]=F;_[246]=F;_[247]=hy;_[248]=Xs("simple values are not supported");_[249]=py;_[250]=yy;_[251]=my;_[252]=F;_[253]=F;_[254]=F;_[255]=dy;var bt=[];for(let r=0;r<24;r++)bt[r]=new b(d.uint,r,1);for(let r=-1;r>=-24;r--)bt[31-r]=new b(d.negint,r,1);bt[64]=new b(d.bytes,new Uint8Array(0),1);bt[96]=new b(d.string,"",1);bt[128]=new b(d.array,0,1);bt[160]=new b(d.map,0,1);bt[244]=new b(d.false,!1,1);bt[245]=new b(d.true,!0,1);bt[246]=new b(d.null,null,1);function Zs(r){switch(r.type){case d.false:return Ut([244]);case d.true:return Ut([245]);case d.null:return Ut([246]);case d.bytes:return r.value.length?void 0:Ut([64]);case d.string:return r.value===""?Ut([96]):void 0;case d.array:return r.value===0?Ut([128]):void 0;case d.map:return r.value===0?Ut([160]):void 0;case d.uint:return r.value<24?Ut([Number(r.value)]):void 0;case d.negint:if(r.value>=-24)return Ut([31-Number(r.value)])}}var Zv={float64:!1,mapSorter:t2,quickEncodeToken:Zs};function Pu(){let r=[];return r[d.uint.major]=rt,r[d.negint.major]=Ws,r[d.bytes.major]=li,r[d.string.major]=Gp,r[d.array.major]=Gs,r[d.map.major]=Js,r[d.tag.major]=Qs,r[d.float.major]=Ys,r}var xy=Pu(),Nu=new yo,pi=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${rr} object contains circular references`);return new pi(t,e)}},Dr={null:new b(d.null,null),undefined:new b(d.undefined,void 0),true:new b(d.true,!0),false:new b(d.false,!1),emptyArray:new b(d.array,0),emptyMap:new b(d.map,0)},Ar={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new b(d.float,r):r>=0?new b(d.uint,r):new b(d.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new b(d.uint,r):new b(d.negint,r)},Uint8Array(r,e,t,n){return new b(d.bytes,r)},string(r,e,t,n){return new b(d.string,r)},boolean(r,e,t,n){return r?Dr.true:Dr.false},null(r,e,t,n){return Dr.null},undefined(r,e,t,n){return Dr.undefined},ArrayBuffer(r,e,t,n){return new b(d.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new b(d.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[Dr.emptyArray,new b(d.break)]:Dr.emptyArray;n=pi.createCheck(n,r);let i=[],o=0;for(let s of r)i[o++]=bo(s,t,n);return t.addBreakTokens?[new b(d.array,r.length),i,new b(d.break)]:[new b(d.array,r.length),i]},Object(r,e,t,n){let i=e!=="Object",o=i?r.keys():Object.keys(r),s=i?r.size:o.length;if(!s)return t.addBreakTokens===!0?[Dr.emptyMap,new b(d.break)]:Dr.emptyMap;n=pi.createCheck(n,r);let c=[],u=0;for(let f of o)c[u++]=[bo(f,t,n),bo(i?r.get(f):r[f],t,n)];return e2(c,t),t.addBreakTokens?[new b(d.map,s),c,new b(d.break)]:[new b(d.map,s),c]}};Ar.Map=Ar.Object;Ar.Buffer=Ar.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Ar[`${r}Array`]=Ar.DataView;function bo(r,e={},t){let n=xp(r),i=e&&e.typeEncoders&&e.typeEncoders[n]||Ar[n];if(typeof i=="function"){let s=i(r,n,e,t);if(s!=null)return s}let o=Ar[n];if(!o)throw new Error(`${rr} unsupported type: ${n}`);return o(r,n,e,t)}function e2(r,e){e.mapSorter&&r.sort(e.mapSorter)}function t2(r,e){let t=Array.isArray(r[0])?r[0][0]:r[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==n.type)return t.type.compare(n.type);let i=t.type.major,o=xy[i].compareTokens(t,n);return o===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function vy(r,e,t,n){if(Array.isArray(e))for(let i of e)vy(r,i,t,n);else t[e.type.major](r,e,n)}function Fu(r,e,t){let n=bo(r,t);if(!Array.isArray(n)&&t.quickEncodeToken){let i=t.quickEncodeToken(n);if(i)return i;let o=e[n.type.major];if(o.encodedSize){let s=o.encodedSize(n,t),c=new yo(s);if(o(c,n,t),c.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return po(c.chunks[0])}}return Nu.reset(),vy(Nu,n,e,t),Nu.toBytes(!0)}function ir(r,e){return e=Object.assign({},Zv,e),Fu(r,xy,e)}a();var r2={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},$u=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=bt[e];if(t===void 0){let n=_[e];if(!n)throw new Error(`${S} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;t=n(this.data,this.pos,i,this.options)}return this.pos+=t.encodedLength,t}},Eo=Symbol.for("DONE"),ea=Symbol.for("BREAK");function n2(r,e,t){let n=[];for(let i=0;i<r.value;i++){let o=xo(e,t);if(o===ea){if(r.value===1/0)break;throw new Error(`${S} got unexpected break to lengthed array`)}if(o===Eo)throw new Error(`${S} found array but not enough entries (got ${i}, expected ${r.value})`);n[i]=o}return n}function i2(r,e,t){let n=t.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let s=0;s<r.value;s++){let c=xo(e,t);if(c===ea){if(r.value===1/0)break;throw new Error(`${S} got unexpected break to lengthed map`)}if(c===Eo)throw new Error(`${S} found map but not enough entries (got ${s} [no key], expected ${r.value})`);if(n!==!0&&typeof c!="string")throw new Error(`${S} non-string keys not supported (got ${typeof c})`);let u=xo(e,t);if(u===Eo)throw new Error(`${S} found map but not enough entries (got ${s} [no value], expected ${r.value})`);n?o.set(c,u):i[c]=u}return n?o:i}function xo(r,e){if(r.done())return Eo;let t=r.next();if(t.type===d.break)return ea;if(t.type.terminal)return t.value;if(t.type===d.array)return n2(t,r,e);if(t.type===d.map)return i2(t,r,e);if(t.type===d.tag){if(e.tags&&typeof e.tags[t.value]=="function"){let n=xo(r,e);return e.tags[t.value](n)}throw new Error(`${S} tag not supported (${t.value})`)}throw new Error("unsupported")}function Le(r,e){if(!(r instanceof Uint8Array))throw new Error(`${S} data to decode must be a Uint8Array`);e=Object.assign({},r2,e);let t=e.tokenizer||new $u(r,e),n=xo(t,e);if(n===Eo)throw new Error(`${S} did not find any content to decode`);if(n===ea)throw new Error(`${S} got unexpected break`);if(!t.done())throw new Error(`${S} too many terminals, data makes no sense`);return n}a();var o2=Pu(),s2={float64:!1,quickEncodeToken:Zs};function Mu(r,e=o2,t=s2){if(Array.isArray(r)){let n=0;for(let i of r)n+=Mu(i,e,t);return n}else{let n=e[r.type.major];if(n.encodedSize===void 0||typeof n.encodedSize!="function")throw new Error(`Encoder for ${r.type.name} does not have an encodedSize()`);return n.encodedSize(r,t)}}var kr={};W(kr,{code:()=>e8,decode:()=>Ao,encode:()=>xn,name:()=>Z2});a();q();var Ly=42;function G2(r){if(r.asCID!==r)return null;let e=x.asCID(r);if(!e)return null;let t=new Uint8Array(e.bytes.byteLength+1);return t.set(e.bytes,1),[new b(d.tag,Ly),new b(d.bytes,t)]}function J2(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Q2(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var Y2={float64:!0,typeEncoders:{Object:G2,undefined:J2,number:Q2}};function X2(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return x.decode(r.subarray(1))}var Ry={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Ry.tags[Ly]=X2;var Z2="dag-cbor",e8=113,xn=r=>ir(r,Y2),Ao=r=>Le(r,Ry);var Zu=class{constructor(e,t){this.bytes=e,this.byteOffset=t,this.roots=[],this.headerSize=t}addRoot(e,t){return t8(this,e,t),this}write(e){return r8(this,e),this}close(e){return n8(this,e)}},t8=(r,e,t={})=>{let{resize:n=!1}=t,{bytes:i,headerSize:o,byteOffset:s,roots:c}=r;r.roots.push(e);let u=Co(r);if(u>o)if(u-o+s<i.byteLength)if(n)Py(r,u);else throw c.pop(),new RangeError(`Header of size ${o} has no capacity for new root ${e}.
  However there is a space in the buffer and you could call addRoot(root, { resize: root }) to resize header to make a space for this root.`);else throw c.pop(),new RangeError(`Buffer has no capacity for a new root ${e}`)},ef=({cid:r,bytes:e})=>{let t=r.bytes.byteLength+e.byteLength;return To.default.encodingLength(t)+t},r8=(r,{cid:e,bytes:t})=>{let n=e.bytes.byteLength+t.byteLength,i=To.default.encode(n);if(r.byteOffset+i.length+n>r.bytes.byteLength)throw new RangeError("Buffer has no capacity for this block");Xu(r,i),Xu(r,e.bytes),Xu(r,t)},n8=(r,e={})=>{let{resize:t=!1}=e,{roots:n,bytes:i,byteOffset:o,headerSize:s}=r,c=xn({version:1,roots:n}),u=To.default.encode(c.length),f=u.length+c.byteLength;if(s-f===0)return Ny(r,u,c),i.subarray(0,o);if(t)return Py(r,f),Ny(r,u,c),i.subarray(0,r.byteOffset);throw new RangeError(`Header size was overestimated.
You can use close({ resize: true }) to resize header`)},Py=(r,e)=>{let{bytes:t,headerSize:n}=r;t.set(t.subarray(n,r.byteOffset),e),r.byteOffset+=e-n,r.headerSize=e},Xu=(r,e)=>{r.bytes.set(e,r.byteOffset),r.byteOffset+=e.length},Ny=({bytes:r},e,t)=>{r.set(e),r.set(t,e.length)},i8=[new b(d.map,2),new b(d.string,"version"),new b(d.uint,1),new b(d.string,"roots")],o8=new b(d.tag,42),s8=r=>{let e=[...i8];e.push(new b(d.array,r.length));for(let n of r)e.push(o8),e.push(new b(d.bytes,{length:n+1}));let t=Mu(e);return To.default.encodingLength(t)+t},Co=({roots:r})=>s8(r.map(e=>e.bytes.byteLength));var Fy=(r,e={})=>{let{roots:t=[],byteOffset:n=0,byteLength:i=r.byteLength,headerSize:o=Co({roots:t})}=e,s=new Uint8Array(r,n,i),c=new Zu(s,o);for(let u of t)c.addRoot(u);return c};a();a();a();var Br=v(Be(),1);q();Ee();a();var Or={Null:r=>r===null,Int:r=>Number.isInteger(r),Float:r=>typeof r=="number"&&Number.isFinite(r),String:r=>typeof r=="string",Bool:r=>typeof r=="boolean",Bytes:r=>r instanceof Uint8Array,Link:r=>!Or.Null(r)&&typeof r=="object"&&r.asCID===r,List:r=>Array.isArray(r),Map:r=>!Or.Null(r)&&typeof r=="object"&&r.asCID!==r&&!Or.List(r)&&!Or.Bytes(r)},wi={Int:Or.Int,"CarHeader > version":r=>wi.Int(r),"CarHeader > roots (anon) > valueType (anon)":Or.Link,"CarHeader > roots (anon)":r=>Or.List(r)&&Array.prototype.every.call(r,wi["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":r=>wi["CarHeader > roots (anon)"](r),CarHeader:r=>{let e=r&&Object.keys(r);return Or.Map(r)&&["version"].every(t=>e.includes(t))&&Object.entries(r).every(([t,n])=>wi["CarHeader > "+t]&&wi["CarHeader > "+t](n))}},$y=wi.CarHeader;var tf={SHA2_256:18,LENGTH:32,DAG_PB:112},Uy=16+8+8+8;async function sa(r){let e=await r.upTo(8);if(!e.length)throw new Error("Unexpected end of data");let t=Br.default.decode(e);return r.seek(Br.default.decode.bytes),t}async function c8(r){let e=await r.exactly(Uy),t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=0,i={version:2,characteristics:[t.getBigUint64(n,!0),t.getBigUint64(n+=8,!0)],dataOffset:Number(t.getBigUint64(n+=8,!0)),dataSize:Number(t.getBigUint64(n+=8,!0)),indexOffset:Number(t.getBigUint64(n+=8,!0))};return r.seek(Uy),i}async function aa(r,e){let t=await sa(r);if(t===0)throw new Error("Invalid CAR header (zero length)");let n=await r.exactly(t);r.seek(t);let i=Ao(n);if(!$y(i))throw new Error("Invalid CAR header format");if(i.version!==1&&i.version!==2||e!==void 0&&i.version!==e)throw new Error(`Invalid CAR version: ${i.version}${e!==void 0?` (expected ${e})`:""}`);let o=Array.isArray(i.roots);if(i.version===1&&!o||i.version===2&&o)throw new Error("Invalid CAR header format");if(i.version===1)return i;let s=await c8(r);r.seek(s.dataOffset-r.pos);let c=await aa(r,1);return Object.assign(c,s)}async function u8(r){let e=await r.upTo(8);Br.default.decode(e);let t=Br.default.decode.bytes,n=Br.default.decode(e.subarray(Br.default.decode.bytes)),i=Br.default.decode.bytes,o=t+i+n,s=await r.exactly(o);return r.seek(o),s}async function f8(r){let e=await r.exactly(2);if(e[0]===tf.SHA2_256&&e[1]===tf.LENGTH){let s=await r.exactly(34);r.seek(34);let c=G(s);return x.create(0,tf.DAG_PB,c)}let t=await sa(r);if(t!==1)throw new Error(`Unexpected CID version (${t})`);let n=await sa(r),i=await u8(r),o=G(i);return x.create(t,n,o)}async function My(r){let e=r.pos,t=await sa(r);if(t===0)throw new Error("Invalid CAR section (zero length)");t+=r.pos-e;let n=await f8(r),i=t-Number(r.pos-e);return{cid:n,length:t,blockLength:i}}async function l8(r){let{cid:e,blockLength:t}=await My(r),n=await r.exactly(t);return r.seek(t),{bytes:n,cid:e}}async function h8(r){let e=r.pos,{cid:t,length:n,blockLength:i}=await My(r),o={cid:t,length:n,blockLength:i,offset:e,blockOffset:r.pos};return r.seek(o.blockLength),o}function bi(r){let e=(async()=>{let t=await aa(r);if(t.version===2){let n=r.pos-t.dataOffset;r=p8(r,t.dataSize-n)}return t})();return{header:()=>e,async*blocks(){for(await e;(await r.upTo(8)).length>0;)yield await l8(r)},async*blocksIndex(){for(await e;(await r.upTo(8)).length>0;)yield await h8(r)}}}function Lr(r){let e=0;return{async upTo(t){return r.subarray(e,e+Math.min(t,r.length-e))},async exactly(t){if(t>r.length-e)throw new Error("Unexpected end of data");return r.subarray(e,e+t)},seek(t){e+=t},get pos(){return e}}}function d8(r){let e=0,t=0,n=0,i=new Uint8Array(0),o=async s=>{t=i.length-n;let c=[i.subarray(n)];for(;t<s;){let f=await r();if(f==null)break;t<0?f.length>t&&c.push(f.subarray(-t)):c.push(f),t+=f.length}i=new Uint8Array(c.reduce((f,l)=>f+l.length,0));let u=0;for(let f of c)i.set(f,u),u+=f.length;n=0};return{async upTo(s){return i.length-n<s&&await o(s),i.subarray(n,n+Math.min(i.length-n,s))},async exactly(s){if(i.length-n<s&&await o(s),i.length-n<s)throw new Error("Unexpected end of data");return i.subarray(n,n+s)},seek(s){e+=s,n+=s},get pos(){return e}}}function Ei(r){let e=r[Symbol.asyncIterator]();async function t(){let n=await e.next();return n.done?null:n.value}return d8(t)}function p8(r,e){let t=0;return{async upTo(n){let i=await r.upTo(n);return i.length+t>e&&(i=i.subarray(0,e-t)),i},async exactly(n){let i=await r.exactly(n);if(i.length+t>e)throw new Error("Unexpected end of data");return i},seek(n){t+=n,r.seek(n)},get pos(){return r.pos}}}var xi=class{constructor(e,t){this._header=e,this._blocks=t,this._keys=t.map(n=>n.cid.toString())}get version(){return this._header.version}async getRoots(){return this._header.roots}async has(e){return this._keys.indexOf(e.toString())>-1}async get(e){let t=this._keys.indexOf(e.toString());return t>-1?this._blocks[t]:void 0}async*blocks(){for(let e of this._blocks)yield e}async*cids(){for(let e of this._blocks)yield e.cid}static async fromBytes(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return jy(Lr(e))}static async fromIterable(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return jy(Ei(e))}};async function jy(r){let e=bi(r),t=await e.header(),n=[];for await(let i of e.blocks())n.push(i);return new xi(t,n)}a();var ca=class{constructor(e,t,n){this._version=e,this._roots=t,this._iterator=n}get version(){return this._version}async getRoots(){return this._roots}[Symbol.asyncIterator](){return this._iterator}static async fromBytes(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return zy(Lr(e))}static async fromIterable(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return zy(Ei(e))}};async function zy(r){let e=bi(r),{version:t,roots:n}=await e.header();return new ca(t,n,e.blocksIndex())}a();var ua=class{constructor(e,t,n){this._version=e,this._roots=t,this._iterable=n,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}},Rr=class extends ua{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){let{version:t,roots:n,iterator:i}=await qy(e);return new Rr(t,n,i)}static async fromIterable(e){let{version:t,roots:n,iterator:i}=await Vy(e);return new Rr(t,n,i)}},vi=class extends ua{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");this._decoded=!0;let e=this._iterable[Symbol.asyncIterator]();return{async next(){let t=await e.next();return t.done?t:{done:!1,value:t.value.cid}}}}static async fromBytes(e){let{version:t,roots:n,iterator:i}=await qy(e);return new vi(t,n,i)}static async fromIterable(e){let{version:t,roots:n,iterator:i}=await Vy(e);return new vi(t,n,i)}};async function qy(r){if(!(r instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return Ky(Lr(r))}async function Vy(r){if(!r||typeof r[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return Ky(Ei(r))}async function Ky(r){let e=bi(r),{version:t,roots:n}=await e.header();return{version:t,roots:n,iterator:e.blocks()}}a();q();a();var rf=v(Be(),1);function nf(r){let e=xn({version:1,roots:r}),t=rf.default.encode(e.length),n=new Uint8Array(t.length+e.length);return n.set(t,0),n.set(e,t.length),n}function Wy(r){return{async setRoots(e){let t=nf(e);await r.write(t)},async writeBlock(e){let{cid:t,bytes:n}=e;await r.write(new Uint8Array(rf.default.encode(t.bytes.length+n.length))),await r.write(t.bytes),n.length&&await r.write(n)},async close(){await r.end()}}}a();function fa(){}function Hy(){let r=[],e=null,t=fa,n=!1,i=null,o=fa,s=()=>(e||(e=new Promise(f=>{t=()=>{e=null,t=fa,f()}})),e),c={write(f){r.push(f);let l=s();return o(),l},async end(){n=!0;let f=s();o(),await f}},u={async next(){let f=r.shift();return f?(r.length===0&&t(),{done:!1,value:f}):n?(t(),{done:!0,value:void 0}):(i||(i=new Promise(l=>{o=()=>(i=null,o=fa,l(u.next()))})),i)}};return{writer:c,iterator:u}}var Nr=class{constructor(e,t){this._encoder=t,this._mutex=t.setRoots(e),this._ended=!1}async put(e){if(!(e.bytes instanceof Uint8Array)||!e.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");let t=x.asCID(e.cid);if(!t)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then(()=>this._encoder.writeBlock({cid:t,bytes:e.bytes})),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(e){e=y8(e);let{encoder:t,iterator:n}=Gy(),i=new Nr(e,t),o=new la(n);return{writer:i,out:o}}static createAppender(){let{encoder:e,iterator:t}=Gy();e.setRoots=()=>Promise.resolve();let n=new Nr([],e),i=new la(t);return{writer:n,out:i}}static async updateRootsInBytes(e,t){let n=Lr(e);await aa(n);let i=nf(t);if(Number(n.pos)!==i.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${n.pos} bytes, new header is ${i.length} bytes)`);return e.set(i,0),e}},la=class{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}};function Gy(){let r=Hy(),{writer:e,iterator:t}=r;return{encoder:Wy(e),iterator:t}}function y8(r){if(r===void 0)return[];if(!Array.isArray(r)){let t=x.asCID(r);if(!t)throw new TypeError("roots must be a single CID or an array of CIDs");return[t]}let e=[];for(let t of r){let n=x.asCID(t);if(!n)throw new TypeError("roots must be a single CID or an array of CIDs");e.push(n)}return e}a();vn();Ee();or();_i();a();vn();var ha=({enumerable:r=!0,configurable:e=!1}={})=>({enumerable:r,configurable:e,writable:!1}),uf=function*(r,e){if(r!=null&&!(r instanceof Uint8Array))for(let[t,n]of Object.entries(r)){let i=[...e,t];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(let[o,s]of n.entries()){let c=[...i,o],u=x.asCID(s);u?yield[c.join("/"),u]:typeof s=="object"&&(yield*uf(s,c))}else{let o=x.asCID(n);o?yield[i.join("/"),o]:yield*uf(n,i)}}},ff=function*(r,e){if(r!=null)for(let[t,n]of Object.entries(r)){let i=[...e,t];if(yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!x.asCID(n))if(Array.isArray(n))for(let[o,s]of n.entries()){let c=[...i,o];yield c.join("/"),typeof s=="object"&&!x.asCID(s)&&(yield*ff(s,c))}else yield*ff(n,i)}},b8=(r,e)=>{let t=r;for(let[n,i]of e.entries()){if(t=t[i],t==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(s=>`[${JSON.stringify(s)}]`).join("")}`);let o=x.asCID(t);if(o)return{value:o,remaining:e.slice(n+1).join("/")}}return{value:t}},da=class{constructor({cid:e,bytes:t,value:n}){if(!e||!t||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:ha(),bytes:ha(),value:ha(),asBlock:ha()})}links(){return uf(this.value,[])}tree(){return ff(this.value,[])}get(e="/"){return b8(this.value,e.split("/").filter(Boolean))}},lf=async({value:r,codec:e,hasher:t})=>{if(typeof r>"u")throw new Error('Missing required argument "value"');if(!e||!t)throw new Error("Missing required argument: codec or hasher");let n=e.encode(r),i=await t.digest(n),o=x.create(1,e.code,i);return new da({value:r,bytes:n,cid:o})};var _n=({bytes:r,cid:e,value:t,codec:n})=>{let i=t!==void 0?t:n&&n.decode(r);if(i===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new da({cid:e,bytes:r,value:i})},Xy=async({bytes:r,cid:e,hasher:t,codec:n})=>{if(!r)throw new Error('Missing required argument "bytes"');if(!t)throw new Error('Missing required argument "hasher"');let i=n.decode(r),o=await t.digest(r);if(!bn.equals(e.multihash.bytes,o.bytes))throw new Error("CID hash does not match bytes");return _n({bytes:r,cid:e,value:i,codec:n})};a();function pa(r){return{all:r=r||new Map,on:function(e,t){var n=r.get(e);n?n.push(t):r.set(e,[t])},off:function(e,t){var n=r.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):r.set(e,[]))},emit:function(e,t){var n=r.get(e);n&&n.slice().map(function(i){i(t)}),(n=r.get("*"))&&n.slice().map(function(i){i(e,t)})}}}var{isBinary:x8}=bn,em=r=>x8(r)?lf({value:r,hasher:Mt,codec:st}):lf({value:r,hasher:Mt,codec:kr}),Zy=({bytes:r,cid:e})=>{let t,n,{code:i}=e,o=e.multihash.code||G(e.multihash).code;if(o===18)t=Mt;else throw new Error("Unsupported hash function: "+o);if(i===113)n=kr;else if(i===85)n=st;else throw new Error("Unsupported codec: "+i);return Xy({bytes:r,cid:e,codec:n,hasher:t})},Sn=class{constructor(){Object.assign(this,pa()),this.blocks=[]}static create(){return new this}static async load(e){let t=await xi.fromBytes(e),[n]=await t.getRoots();return{root:n,get:o=>t.get(o).then(s=>Zy(s)).then(({value:s})=>s)}}async add(e){let t=await em(e);return this.last=t,this.blocks.push(t),this.emit("size",this.size),t.cid}async get(e){let{cid:t,bytes:n,value:i}=await Zy(e);return{cid:t,bytes:n,value:i}}undo(){return this.blocks.pop()}async commit(){let e=this.last.cid,t=0,n=Co({roots:[e]});t+=n;for(let s of this.blocks)t+=ef(s);let i=new Uint8Array(t),o=await Fy(i,{headerSize:n});o.addRoot(e);for(let s of this.blocks)o.write(s);return await o.close(),o.bytes}get size(){if(!this?.last)return 0;let e=this.last.cid,t=0;t+=Co({roots:[e]});for(let i of this.blocks)t+=ef(i);return t}};a();a();a();a();var Io=v8;function v8(r,e,t){if(!r)return t;var n,i;if(Array.isArray(e)&&(n=e.slice(0)),typeof e=="string"&&(n=e.split(".")),typeof e=="symbol"&&(n=[e]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");for(;n.length;)if(i=n.shift(),!r||(r=r[i],r===void 0))return t;return r}var w0=v(at(),1),Mn=v(ve(),1);a();a();a();q();a();a();a();var ct=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");H();we();var sr="/",vm=new TextEncoder().encode(sr),va=vm[0],M=class{constructor(e,t){if(typeof e=="string")this._buf=N(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==va)throw new Error("Invalid key")}toString(e="utf8"){return T(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new M(e.join(sr))}static random(){return new M(ct().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new M(e):typeof e.uint8Array=="function"?new M(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=vm),this._buf[0]!==va){let e=new Uint8Array(this._buf.byteLength+1);e.fill(va,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===va;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let o=t[i],s=n[i];if(o<s)return!0;if(o>s)return!1}return t.length<n.length}reverse(){return M.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(sr).slice(1)}type(){return o_(this.baseNamespace())}name(){return s_(this.baseNamespace())}instance(e){return new M(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(sr)||(e+=sr),e+=this.type(),new M(e)}parent(){let e=this.list();return e.length===1?new M(sr):new M(e.slice(0,-1).join(sr))}child(e){return this.toString()===sr?e:e.toString()===sr?this:new M(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return M.withNamespaces([...this.namespaces(),...a_(e.map(t=>t.namespaces()))])}};function o_(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function s_(r){let e=r.split(":");return e[e.length-1]}function a_(r){return[].concat(...r)}var Dm=v(at(),1),Am=v(Af(),1);xe();or();Ee();var u_=(0,Dm.default)("ipfs:repo:migrator:migration-8");function Tm(r){return r.child?Tm(r.child):r}function f_(r){try{let e=I.decode(`b${r.toString().toLowerCase().slice(1)}`),t=x.decode(e).multihash.bytes,n=I.encode(t).slice(1).toUpperCase();return new M(`/${n}`,!1)}catch{return r}}function l_(r){try{let e=I.decode(`b${r.toString().toLowerCase().slice(1)}`),t=G(e),n=I.encode(x.createV1(ot,t).bytes).slice(1);return new M(`/${n.toUpperCase()}`,!1)}catch{return r}}async function Sm(r,e,t){let n=r.blocks;await n.open();let i=Tm(n),o=await(0,Am.default)(i.queryKeys({filters:[s=>t(s).toString()!==s.toString()]}));try{let s=0;for await(let c of i.query({})){let u=t(c.key);u.toString()!==c.key.toString()&&(s+=1,u_(`Migrating Block from ${c.key} to ${u}`,await i.has(c.key)),await i.delete(c.key),await i.put(u,c.value),e(s/o*100,`Migrated Block from ${c.key} to ${u}`))}}finally{await n.close()}}var Cm={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(r,e=()=>{})=>Sm(r,e,f_),revert:(r,e=()=>{})=>Sm(r,e,l_)};a();q();a();q();a();var h_=new TextDecoder;function Tf(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");let i=r[e++];if(t+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[t,e]}function _a(r,e){let t;[t,e]=Tf(r,e);let n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function Im(r,e){let t;return[t,e]=Tf(r,e),[t&7,t>>3,e]}function d_(r){let e={},t=r.length,n=0;for(;n<t;){let i,o;if([i,o,n]=Im(r,n),o===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=_a(r,n)}else if(o===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let s;[s,n]=_a(r,n),e.Name=h_.decode(s)}else if(o===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=Tf(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function km(r){let e=r.length,t=0,n,i=!1,o;for(;t<e;){let c,u;if([c,u,t]=Im(r,t),c!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${c}`);if(u===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,t]=_a(r,t),n&&(i=!0)}else if(u===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let f;[f,t]=_a(r,t),n.push(d_(f))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${u}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");let s={};return o&&(s.Data=o),s.Links=n||[],s}a();var Bm=new TextEncoder,Om=2**32,p_=2**31;function y_(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=Bo(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){let n=Bm.encode(r.Name);t-=n.length,e.set(n,t),t=Bo(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=Bo(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function Lm(r){let e=g_(r),t=new Uint8Array(e),n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=Bo(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let i=r.Links.length-1;i>=0;i--){let o=y_(r.Links[i],t.subarray(0,n));n-=o,n=Bo(t,n,o)-1,t[n]=18}return t}function m_(r){let e=0;if(r.Hash){let t=r.Hash.length;e+=1+t+Ii(t)}if(typeof r.Name=="string"){let t=Bm.encode(r.Name).length;e+=1+t+Ii(t)}return typeof r.Tsize=="number"&&(e+=1+Ii(r.Tsize)),e}function g_(r){let e=0;if(r.Data){let t=r.Data.length;e+=1+t+Ii(t)}if(r.Links)for(let t of r.Links){let n=m_(t);e+=1+n+Ii(n)}return e}function Bo(r,e,t){e-=Ii(t);let n=e;for(;t>=p_;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function Ii(r){return r%2===0&&r++,Math.floor((w_(r)+6)/7)}function w_(r){let e=0;return r>=Om&&(r=Math.floor(r/Om),e=32),r>=1<<16&&(r>>>=16,e+=16),r>=1<<8&&(r>>>=8,e+=8),e+b_[r]}var b_=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];a();q();var E_=["Data","Links"],x_=["Hash","Name","Tsize"],Rm=new TextEncoder;function v_(r,e){if(r===e)return 0;let t=r.Name?Rm.encode(r.Name):[],n=e.Name?Rm.encode(e.Name):[],i=t.length,o=n.length;for(let s=0,c=Math.min(i,o);s<c;++s)if(t[s]!==n[s]){i=t[s],o=n[s];break}return i<o?-1:o<i?1:0}function Nm(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function Pm(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");if(!Nm(r,E_))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<r.Links.length;e++){let t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!Nm(t,x_))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!t.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash.asCID!==t.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0&&(typeof t.Tsize!="number"||t.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&v_(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}var xt=112;function Lo(r){Pm(r);let e={};return r.Links&&(e.Links=r.Links.map(t=>{let n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),Lm(e)}function Ro(r){let e=km(r),t={};return e.Data&&(t.Data=e.Data),e.Links&&(t.Links=e.Links.map(n=>{let i={};try{i.Hash=x.decode(n.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),t}a();q();a();var In=v(Mr(),1),Lg=In.default.Reader,B_=In.default.Writer,lO=In.default.util,Ia=In.default.roots.default||(In.default.roots.default={}),Rg=Ia.ipfs=(()=>{let r={};return r.pin=function(){let e={};return e.Set=function(){function t(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}return t.prototype.version=0,t.prototype.fanout=0,t.prototype.seed=0,t.encode=function(i,o){return o||(o=B_.create()),i.version!=null&&Object.hasOwnProperty.call(i,"version")&&o.uint32(8).uint32(i.version),i.fanout!=null&&Object.hasOwnProperty.call(i,"fanout")&&o.uint32(16).uint32(i.fanout),i.seed!=null&&Object.hasOwnProperty.call(i,"seed")&&o.uint32(29).fixed32(i.seed),o},t.decode=function(i,o){i instanceof Lg||(i=Lg.create(i));for(var s=o===void 0?i.len:i.pos+o,c=new Ia.ipfs.pin.Set;i.pos<s;){var u=i.uint32();switch(u>>>3){case 1:c.version=i.uint32();break;case 2:c.fanout=i.uint32();break;case 3:c.seed=i.fixed32();break;default:i.skipType(u&7);break}}return c},t.fromObject=function(i){if(i instanceof Ia.ipfs.pin.Set)return i;var o=new Ia.ipfs.pin.Set;return i.version!=null&&(o.version=i.version>>>0),i.fanout!=null&&(o.fanout=i.fanout>>>0),i.seed!=null&&(o.seed=i.seed>>>0),o},t.toObject=function(i,o){o||(o={});var s={};return o.defaults&&(s.version=0,s.fanout=0,s.seed=0),i.version!=null&&i.hasOwnProperty("version")&&(s.version=i.version),i.fanout!=null&&i.hasOwnProperty("fanout")&&(s.fanout=i.fanout),i.seed!=null&&i.hasOwnProperty("seed")&&(s.seed=i.seed),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,In.default.util.toJSONOptions)},t}(),e}(),r})();var Ug=v(Pg(),1),Ba=v(Be(),1);a();xe();q();var $o=new M("/local/pins"),Oa=256,Fg=8192,zf=x.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),kn={direct:"direct",recursive:"recursive"};function qf(r){return new M(`/${I.encode(r.multihash.bytes).toUpperCase().substring(1)}`)}jr();a();function $g(r,e){for(let t=0;t<r.byteLength;t++){if(r[t]<e[t])return-1;if(r[t]>e[t])return 1}return r.byteLength>e.byteLength?1:r.byteLength<e.byteLength?-1:0}H();we();_i();var Kf=Rg.pin.Set;function L_(r){let e=r.Data;if(!e)throw new Error("No data present");let t=Ba.default.decode(e),n=Ba.default.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+t>e.length)throw new Error("Impossibly large set header length");let i=e.slice(n,t+n),o=Kf.toObject(Kf.decode(i),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(o.version!==1)throw new Error(`Unsupported Set version: ${o.version}`);if(o.fanout>r.Links.length)throw new Error("Impossibly large fanout");return{header:o,data:e.slice(t+n)}}function R_(r,e){let t=new Uint8Array(4);new DataView(t.buffer).setUint32(0,r,!0);let i=N(e.toString()),o=Y([t,i],t.byteLength+i.byteLength);return(0,Ug.default)(T(o))}async function*Mg(r,e){let t=L_(e),n=0;for(let i of e.Links){if(n<t.header.fanout){let o=i.Hash;if(!zf.equals(o)){let s=await r.get(o),c=Ro(s);yield*Mg(r,c)}}else yield i.Hash;n++}}async function*Uo(r,e,t){let n=e.Links.find(s=>s.Name===t);if(!n)throw new Error("No link found with name "+t);let i=await r.get(n.Hash),o=Ro(i);yield*Mg(r,o)}function N_(r,e){return t(e,0);async function t(n,i){let o=Kf.encode({version:1,fanout:Oa,seed:i}).finish(),s=Ba.default.encode(o.length),c=Y([s,o]),u=[];for(let l=0;l<Oa;l++)u.push({Name:"",Tsize:1,Hash:zf});if(n.length<=Fg){let l=n.map(w=>({link:{Name:"",Tsize:1,Hash:w.key},data:w.data||new Uint8Array})).sort((w,g)=>$g(w.link.Hash.bytes,g.link.Hash.bytes)),h=u.concat(l.map(w=>w.link));return{Data:Y([c,...l.map(w=>w.data)]),Links:h}}else{let l=n.reduce((p,w)=>{let g=R_(i,w.key)%Oa;return p[g]=g in p?p[g].concat([w]):[w],p},[]),h=0;for(let p of l){let w=await t(p,i+1);await f(w,h),h++}return{Data:c,Links:u}}async function f(l,h){let p=Lo(l),w=await Mt.digest(p),g=x.createV0(w);await r.put(g,p);let y=l.Links.reduce((k,$)=>k+($.Tsize||0),0)+p.length;u[h]={Name:"",Tsize:y,Hash:g}}}}async function Wf(r,e,t){let n=await N_(r,t.map(u=>({key:u}))),i=Lo(n),o=await Mt.digest(i),s=x.createV0(o);await r.put(s,i);let c=n.Links.reduce((u,f)=>u+f.Tsize,0)+i.length;return{Name:e,Tsize:c,Hash:s}}var La=v(Af(),1);_i();Ee();xe();async function F_(r,e,t,n){if(!await e.has($o))return;let i=await e.get($o),o=x.decode(i),s=await r.get(o),c=Ro(s),u=0,f=await(0,La.default)(Uo(r,c,kn.recursive))+await(0,La.default)(Uo(r,c,kn.direct));for await(let l of Uo(r,c,kn.recursive)){u++;let h={depth:1/0};l.version!==0&&(h.version=l.version),l.code!==xt&&(h.codec=l.code),await t.put(qf(l),ir(h)),n(u/f*100,`Migrated recursive pin ${l}`)}for await(let l of Uo(r,c,kn.direct)){u++;let h={depth:0};l.version!==0&&(h.version=l.version),l.code!==xt&&(h.codec=l.code),await t.put(qf(l),ir(h)),n(u/f*100,`Migrated direct pin ${l}`)}await r.delete(o),await e.delete($o)}async function $_(r,e,t,n){let i=[],o=[],s=0,c=await(0,La.default)(t.queryKeys({}));for await(let{key:p,value:w}of t.query({})){s++;let g=Le(w),y=x.create(g.version||0,g.codec||xt,G(I.decode("b"+p.toString().toLowerCase().split("/").pop())));g.depth===0?(n(s/c*100,`Reverted direct pin ${y}`),o.push(y)):(n(s/c*100,`Reverted recursive pin ${y}`),i.push(y))}n(100,"Updating pin root");let u={Links:[await Wf(r,kn.direct,o),await Wf(r,kn.recursive,i)]},f=Lo(u),l=await Mt.digest(f),h=x.createV0(l);await r.put(h,f),await e.put($o,h.bytes)}async function jg(r,e,t){let n=r.blocks,i=r.datastore,o=r.pins;await n.open(),await i.open(),await o.open();try{await t(n,i,o,e)}finally{await o.close(),await i.close(),await n.close()}}var zg={version:9,description:"Migrates pins to datastore",migrate:(r,e=()=>{})=>jg(r,e,F_),revert:(r,e=()=>{})=>jg(r,e,$_)};a();a();var ft={};W(ft,{abortedError:()=>U_,dbDeleteFailedError:()=>Gf,dbOpenFailedError:()=>Hf,dbWriteFailedError:()=>Jf,notFoundError:()=>qt});a();var Oi=v(ve(),1);function Hf(r){return r=r||new Error("Cannot open database"),(0,Oi.default)(r,"ERR_DB_OPEN_FAILED")}function Gf(r){return r=r||new Error("Delete failed"),(0,Oi.default)(r,"ERR_DB_DELETE_FAILED")}function Jf(r){return r=r||new Error("Write failed"),(0,Oi.default)(r,"ERR_DB_WRITE_FAILED")}function qt(r){return r=r||new Error("Not Found"),(0,Oi.default)(r,"ERR_NOT_FOUND")}function U_(r){return r=r||new Error("Aborted"),(0,Oi.default)(r,"ERR_ABORTED")}var qg=new M("/config"),Mo=new M("/version");function jo(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}async function M_(r,e,t){let n=await e(r);if(n)return n;let i=jo(t);return i?new Promise((o,s)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{s(c.transaction.error)},c.transaction.oncomplete=()=>{o(Boolean(c.result))}}):!1}async function j_(r,e,t,n){if(await t(r))return e(r);let i=jo(n);if(!i)throw qt();return new Promise((o,s)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{s(c.transaction.error)},c.transaction.oncomplete=()=>{if(c.result)return o(c.result);s(qt())}})}function Ra(r){let e=r.get.bind(r),t=r.has.bind(r);return r.get=n=>j_(n,e,t,r),r.has=n=>M_(n,t,r),r}function Qf(r){return{...r,root:Ra(r.root),datastore:Ra(r.datastore),pins:Ra(r.pins),keys:Ra(r.keys)}}we();H();async function z_(r,e,t=()=>{}){let n=jo(e);if(!n){t(`${r} did not need an upgrade`);return}t(`Upgrading ${r}`),await Hg(n,(o,s)=>[{type:"del",key:o},{type:"put",key:N(o),value:s}])}async function q_(r,e,t=()=>{}){let n=jo(e);if(!n){t(`${r} did not need a downgrade`);return}t(`Downgrading ${r}`),await Hg(n,(o,s)=>[{type:"del",key:o},{type:"put",key:T(o),value:s}])}function Kg(r){return r.child?Kg(r.child):r}async function Vg(r,e,t){let n=Object.entries(r).map(([s,c])=>({key:s,backend:Kg(c)})).filter(({key:s,backend:c})=>c.constructor.name==="LevelDatastore").map(({key:s,backend:c})=>({name:s,store:c}));e(0,`Migrating ${n.length} dbs`);let i=0,o=s=>{e(Math.round(i/n.length*100),s)};for(let{name:s,store:c}of n){await c.open();try{await t(s,c,o)}finally{i++,await c.close()}}e(100,`Migrated ${n.length} dbs`)}var Wg={version:10,description:"Migrates datastore-level keys to binary",migrate:(r,e=()=>{})=>Vg(r,e,z_),revert:(r,e=()=>{})=>Vg(r,e,q_)};function Hg(r,e){function t(n,i){let o=r.store("readwrite"),s=o.transaction,c=0,u;s.onabort=()=>i(u||s.error||new Error("aborted by user")),s.oncomplete=()=>i();function f(){let l=n[c++],h=l.key,p;try{p=l.type==="del"?o.delete(h):o.put(l.value,h)}catch(w){u=w,s.abort();return}c<n.length&&(p.onsuccess=f)}f()}return new Promise((n,i)=>{let o=r.iterator(),s=u=>u;o._deserializeKey=o._deserializeValue=s,c();function c(){let u=(f,l,h)=>{if(f||l===void 0){let p=w=>{if(w){i(w);return}n()};o.end(p);return}t(e(l,h),c)};o.next(u)}})}a();var zr=new M("/local/filesroot");async function V_(r,e=()=>{}){if(e(100,"Migrating MFS root to repo datastore"),await r.root.open(),await r.datastore.open(),await r.root.has(zr)){let t=await r.root.get(zr);await r.datastore.put(zr,t),await r.root.delete(zr)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo datastore")}async function K_(r,e=()=>{}){if(e(100,"Migrating MFS root to repo root datastore"),await r.root.open(),await r.datastore.open(),await r.datastore.has(zr)){let t=await r.datastore.get(zr);await r.root.put(zr,t),await r.datastore.delete(zr)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo root datastore")}var Gg={version:11,description:"Store mfs root in the datastore",migrate:V_,revert:K_};a();var dl=v(Mr(),1);a();var On=v(Mr(),1),Jg=On.default.Reader,W_=On.default.Writer,H_=On.default.util,Na=On.default.roots.default||(On.default.roots.default={}),Yf=Na.Protocols=(()=>{function r(e){if(this.protocols=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.protocols=H_.emptyArray,r.encode=function(t,n){if(n||(n=W_.create()),t.protocols!=null&&t.protocols.length)for(var i=0;i<t.protocols.length;++i)n.uint32(10).string(t.protocols[i]);return n},r.decode=function(t,n){t instanceof Jg||(t=Jg.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new Na.Protocols;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.protocols&&o.protocols.length||(o.protocols=[]),o.protocols.push(t.string());break;default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof Na.Protocols)return t;var n=new Na.Protocols;if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Protocols.protocols: array expected");n.protocols=[];for(var i=0;i<t.protocols.length;++i)n.protocols[i]=String(t.protocols[i])}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.protocols=[]),t.protocols&&t.protocols.length){i.protocols=[];for(var o=0;o<t.protocols.length;++o)i.protocols[o]=t.protocols[o]}return i},r.prototype.toJSON=function(){return this.constructor.toObject(this,On.default.util.toJSONOptions)},r})();a();var ar=v(Mr(),1),Bi=ar.default.Reader,Xf=ar.default.Writer,J=ar.default.util,pe=ar.default.roots.default||(ar.default.roots.default={}),Zf=pe.Addresses=(()=>{function r(e){if(this.addrs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.addrs=J.emptyArray,r.prototype.certifiedRecord=null,r.encode=function(t,n){if(n||(n=Xf.create()),t.addrs!=null&&t.addrs.length)for(var i=0;i<t.addrs.length;++i)pe.Addresses.Address.encode(t.addrs[i],n.uint32(10).fork()).ldelim();return t.certifiedRecord!=null&&Object.hasOwnProperty.call(t,"certifiedRecord")&&pe.Addresses.CertifiedRecord.encode(t.certifiedRecord,n.uint32(18).fork()).ldelim(),n},r.decode=function(t,n){t instanceof Bi||(t=Bi.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new pe.Addresses;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.addrs&&o.addrs.length||(o.addrs=[]),o.addrs.push(pe.Addresses.Address.decode(t,t.uint32()));break;case 2:o.certifiedRecord=pe.Addresses.CertifiedRecord.decode(t,t.uint32());break;default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof pe.Addresses)return t;var n=new pe.Addresses;if(t.addrs){if(!Array.isArray(t.addrs))throw TypeError(".Addresses.addrs: array expected");n.addrs=[];for(var i=0;i<t.addrs.length;++i){if(typeof t.addrs[i]!="object")throw TypeError(".Addresses.addrs: object expected");n.addrs[i]=pe.Addresses.Address.fromObject(t.addrs[i])}}if(t.certifiedRecord!=null){if(typeof t.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");n.certifiedRecord=pe.Addresses.CertifiedRecord.fromObject(t.certifiedRecord)}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addrs=[]),n.defaults&&(i.certifiedRecord=null),t.addrs&&t.addrs.length){i.addrs=[];for(var o=0;o<t.addrs.length;++o)i.addrs[o]=pe.Addresses.Address.toObject(t.addrs[o],n)}return t.certifiedRecord!=null&&t.hasOwnProperty("certifiedRecord")&&(i.certifiedRecord=pe.Addresses.CertifiedRecord.toObject(t.certifiedRecord,n)),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,ar.default.util.toJSONOptions)},r.Address=function(){function e(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}e.prototype.multiaddr=J.newBuffer([]),e.prototype.isCertified=null;let t;return Object.defineProperty(e.prototype,"_isCertified",{get:J.oneOfGetter(t=["isCertified"]),set:J.oneOfSetter(t)}),e.encode=function(i,o){return o||(o=Xf.create()),i.multiaddr!=null&&Object.hasOwnProperty.call(i,"multiaddr")&&o.uint32(10).bytes(i.multiaddr),i.isCertified!=null&&Object.hasOwnProperty.call(i,"isCertified")&&o.uint32(16).bool(i.isCertified),o},e.decode=function(i,o){i instanceof Bi||(i=Bi.create(i));for(var s=o===void 0?i.len:i.pos+o,c=new pe.Addresses.Address;i.pos<s;){var u=i.uint32();switch(u>>>3){case 1:c.multiaddr=i.bytes();break;case 2:c.isCertified=i.bool();break;default:i.skipType(u&7);break}}return c},e.fromObject=function(i){if(i instanceof pe.Addresses.Address)return i;var o=new pe.Addresses.Address;return i.multiaddr!=null&&(typeof i.multiaddr=="string"?J.base64.decode(i.multiaddr,o.multiaddr=J.newBuffer(J.base64.length(i.multiaddr)),0):i.multiaddr.length&&(o.multiaddr=i.multiaddr)),i.isCertified!=null&&(o.isCertified=Boolean(i.isCertified)),o},e.toObject=function(i,o){o||(o={});var s={};return o.defaults&&(o.bytes===String?s.multiaddr="":(s.multiaddr=[],o.bytes!==Array&&(s.multiaddr=J.newBuffer(s.multiaddr)))),i.multiaddr!=null&&i.hasOwnProperty("multiaddr")&&(s.multiaddr=o.bytes===String?J.base64.encode(i.multiaddr,0,i.multiaddr.length):o.bytes===Array?Array.prototype.slice.call(i.multiaddr):i.multiaddr),i.isCertified!=null&&i.hasOwnProperty("isCertified")&&(s.isCertified=i.isCertified,o.oneofs&&(s._isCertified="isCertified")),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,ar.default.util.toJSONOptions)},e}(),r.CertifiedRecord=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.seq=J.Long?J.Long.fromBits(0,0,!0):0,e.prototype.raw=J.newBuffer([]),e.encode=function(n,i){return i||(i=Xf.create()),n.seq!=null&&Object.hasOwnProperty.call(n,"seq")&&i.uint32(8).uint64(n.seq),n.raw!=null&&Object.hasOwnProperty.call(n,"raw")&&i.uint32(18).bytes(n.raw),i},e.decode=function(n,i){n instanceof Bi||(n=Bi.create(n));for(var o=i===void 0?n.len:n.pos+i,s=new pe.Addresses.CertifiedRecord;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:s.seq=n.uint64();break;case 2:s.raw=n.bytes();break;default:n.skipType(c&7);break}}return s},e.fromObject=function(n){if(n instanceof pe.Addresses.CertifiedRecord)return n;var i=new pe.Addresses.CertifiedRecord;return n.seq!=null&&(J.Long?(i.seq=J.Long.fromValue(n.seq)).unsigned=!0:typeof n.seq=="string"?i.seq=parseInt(n.seq,10):typeof n.seq=="number"?i.seq=n.seq:typeof n.seq=="object"&&(i.seq=new J.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0))),n.raw!=null&&(typeof n.raw=="string"?J.base64.decode(n.raw,i.raw=J.newBuffer(J.base64.length(n.raw)),0):n.raw.length&&(i.raw=n.raw)),i},e.toObject=function(n,i){i||(i={});var o={};if(i.defaults){if(J.Long){var s=new J.Long(0,0,!0);o.seq=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else o.seq=i.longs===String?"0":0;i.bytes===String?o.raw="":(o.raw=[],i.bytes!==Array&&(o.raw=J.newBuffer(o.raw)))}return n.seq!=null&&n.hasOwnProperty("seq")&&(typeof n.seq=="number"?o.seq=i.longs===String?String(n.seq):n.seq:o.seq=i.longs===String?J.Long.prototype.toString.call(n.seq):i.longs===Number?new J.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0):n.seq),n.raw!=null&&n.hasOwnProperty("raw")&&(o.raw=i.bytes===String?J.base64.encode(n.raw,0,n.raw.length):i.bytes===Array?Array.prototype.slice.call(n.raw):n.raw),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,ar.default.util.toJSONOptions)},e}(),r})();a();var cr=v(Mr(),1),Li=cr.default.Reader,el=cr.default.Writer,j=cr.default.util,se=cr.default.roots.default||(cr.default.roots.default={}),tl=se.Peer=(()=>{function r(t){if(this.addresses=[],this.protocols=[],this.metadata=[],t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}r.prototype.addresses=j.emptyArray,r.prototype.protocols=j.emptyArray,r.prototype.metadata=j.emptyArray,r.prototype.pubKey=null,r.prototype.peerRecordEnvelope=null;let e;return Object.defineProperty(r.prototype,"_pubKey",{get:j.oneOfGetter(e=["pubKey"]),set:j.oneOfSetter(e)}),Object.defineProperty(r.prototype,"_peerRecordEnvelope",{get:j.oneOfGetter(e=["peerRecordEnvelope"]),set:j.oneOfSetter(e)}),r.encode=function(n,i){if(i||(i=el.create()),n.addresses!=null&&n.addresses.length)for(var o=0;o<n.addresses.length;++o)se.Address.encode(n.addresses[o],i.uint32(10).fork()).ldelim();if(n.protocols!=null&&n.protocols.length)for(var o=0;o<n.protocols.length;++o)i.uint32(18).string(n.protocols[o]);if(n.metadata!=null&&n.metadata.length)for(var o=0;o<n.metadata.length;++o)se.Metadata.encode(n.metadata[o],i.uint32(26).fork()).ldelim();return n.pubKey!=null&&Object.hasOwnProperty.call(n,"pubKey")&&i.uint32(34).bytes(n.pubKey),n.peerRecordEnvelope!=null&&Object.hasOwnProperty.call(n,"peerRecordEnvelope")&&i.uint32(42).bytes(n.peerRecordEnvelope),i},r.decode=function(n,i){n instanceof Li||(n=Li.create(n));for(var o=i===void 0?n.len:n.pos+i,s=new se.Peer;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:s.addresses&&s.addresses.length||(s.addresses=[]),s.addresses.push(se.Address.decode(n,n.uint32()));break;case 2:s.protocols&&s.protocols.length||(s.protocols=[]),s.protocols.push(n.string());break;case 3:s.metadata&&s.metadata.length||(s.metadata=[]),s.metadata.push(se.Metadata.decode(n,n.uint32()));break;case 4:s.pubKey=n.bytes();break;case 5:s.peerRecordEnvelope=n.bytes();break;default:n.skipType(c&7);break}}return s},r.fromObject=function(n){if(n instanceof se.Peer)return n;var i=new se.Peer;if(n.addresses){if(!Array.isArray(n.addresses))throw TypeError(".Peer.addresses: array expected");i.addresses=[];for(var o=0;o<n.addresses.length;++o){if(typeof n.addresses[o]!="object")throw TypeError(".Peer.addresses: object expected");i.addresses[o]=se.Address.fromObject(n.addresses[o])}}if(n.protocols){if(!Array.isArray(n.protocols))throw TypeError(".Peer.protocols: array expected");i.protocols=[];for(var o=0;o<n.protocols.length;++o)i.protocols[o]=String(n.protocols[o])}if(n.metadata){if(!Array.isArray(n.metadata))throw TypeError(".Peer.metadata: array expected");i.metadata=[];for(var o=0;o<n.metadata.length;++o){if(typeof n.metadata[o]!="object")throw TypeError(".Peer.metadata: object expected");i.metadata[o]=se.Metadata.fromObject(n.metadata[o])}}return n.pubKey!=null&&(typeof n.pubKey=="string"?j.base64.decode(n.pubKey,i.pubKey=j.newBuffer(j.base64.length(n.pubKey)),0):n.pubKey.length&&(i.pubKey=n.pubKey)),n.peerRecordEnvelope!=null&&(typeof n.peerRecordEnvelope=="string"?j.base64.decode(n.peerRecordEnvelope,i.peerRecordEnvelope=j.newBuffer(j.base64.length(n.peerRecordEnvelope)),0):n.peerRecordEnvelope.length&&(i.peerRecordEnvelope=n.peerRecordEnvelope)),i},r.toObject=function(n,i){i||(i={});var o={};if((i.arrays||i.defaults)&&(o.addresses=[],o.protocols=[],o.metadata=[]),n.addresses&&n.addresses.length){o.addresses=[];for(var s=0;s<n.addresses.length;++s)o.addresses[s]=se.Address.toObject(n.addresses[s],i)}if(n.protocols&&n.protocols.length){o.protocols=[];for(var s=0;s<n.protocols.length;++s)o.protocols[s]=n.protocols[s]}if(n.metadata&&n.metadata.length){o.metadata=[];for(var s=0;s<n.metadata.length;++s)o.metadata[s]=se.Metadata.toObject(n.metadata[s],i)}return n.pubKey!=null&&n.hasOwnProperty("pubKey")&&(o.pubKey=i.bytes===String?j.base64.encode(n.pubKey,0,n.pubKey.length):i.bytes===Array?Array.prototype.slice.call(n.pubKey):n.pubKey,i.oneofs&&(o._pubKey="pubKey")),n.peerRecordEnvelope!=null&&n.hasOwnProperty("peerRecordEnvelope")&&(o.peerRecordEnvelope=i.bytes===String?j.base64.encode(n.peerRecordEnvelope,0,n.peerRecordEnvelope.length):i.bytes===Array?Array.prototype.slice.call(n.peerRecordEnvelope):n.peerRecordEnvelope,i.oneofs&&(o._peerRecordEnvelope="peerRecordEnvelope")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,cr.default.util.toJSONOptions)},r})(),rB=se.Address=(()=>{function r(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}r.prototype.multiaddr=j.newBuffer([]),r.prototype.isCertified=null;let e;return Object.defineProperty(r.prototype,"_isCertified",{get:j.oneOfGetter(e=["isCertified"]),set:j.oneOfSetter(e)}),r.encode=function(n,i){return i||(i=el.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),n.isCertified!=null&&Object.hasOwnProperty.call(n,"isCertified")&&i.uint32(16).bool(n.isCertified),i},r.decode=function(n,i){n instanceof Li||(n=Li.create(n));for(var o=i===void 0?n.len:n.pos+i,s=new se.Address;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:s.multiaddr=n.bytes();break;case 2:s.isCertified=n.bool();break;default:n.skipType(c&7);break}}return s},r.fromObject=function(n){if(n instanceof se.Address)return n;var i=new se.Address;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?j.base64.decode(n.multiaddr,i.multiaddr=j.newBuffer(j.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),n.isCertified!=null&&(i.isCertified=Boolean(n.isCertified)),i},r.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.multiaddr="":(o.multiaddr=[],i.bytes!==Array&&(o.multiaddr=j.newBuffer(o.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(o.multiaddr=i.bytes===String?j.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),n.isCertified!=null&&n.hasOwnProperty("isCertified")&&(o.isCertified=n.isCertified,i.oneofs&&(o._isCertified="isCertified")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,cr.default.util.toJSONOptions)},r})(),nB=se.Metadata=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.key="",r.prototype.value=j.newBuffer([]),r.encode=function(t,n){return n||(n=el.create()),t.key!=null&&Object.hasOwnProperty.call(t,"key")&&n.uint32(10).string(t.key),t.value!=null&&Object.hasOwnProperty.call(t,"value")&&n.uint32(18).bytes(t.value),n},r.decode=function(t,n){t instanceof Li||(t=Li.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new se.Metadata;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.key=t.string();break;case 2:o.value=t.bytes();break;default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof se.Metadata)return t;var n=new se.Metadata;return t.key!=null&&(n.key=String(t.key)),t.value!=null&&(typeof t.value=="string"?j.base64.decode(t.value,n.value=j.newBuffer(j.base64.length(t.value)),0):t.value.length&&(n.value=t.value)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(i.key="",n.bytes===String?i.value="":(i.value=[],n.bytes!==Array&&(i.value=j.newBuffer(i.value)))),t.key!=null&&t.hasOwnProperty("key")&&(i.key=t.key),t.value!=null&&t.hasOwnProperty("value")&&(i.value=n.bytes===String?j.base64.encode(t.value,0,t.value.length):n.bytes===Array?Array.prototype.slice.call(t.value):t.value),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,cr.default.util.toJSONOptions)},r})();a();var Bn=v(Mr(),1),Qg=Bn.default.Reader,G_=Bn.default.Writer,Q=Bn.default.util,Pa=Bn.default.roots.default||(Bn.default.roots.default={}),Yg=Pa.Envelope=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.publicKey=Q.newBuffer([]),r.prototype.payloadType=Q.newBuffer([]),r.prototype.payload=Q.newBuffer([]),r.prototype.signature=Q.newBuffer([]),r.encode=function(t,n){return n||(n=G_.create()),t.publicKey!=null&&Object.hasOwnProperty.call(t,"publicKey")&&n.uint32(10).bytes(t.publicKey),t.payloadType!=null&&Object.hasOwnProperty.call(t,"payloadType")&&n.uint32(18).bytes(t.payloadType),t.payload!=null&&Object.hasOwnProperty.call(t,"payload")&&n.uint32(26).bytes(t.payload),t.signature!=null&&Object.hasOwnProperty.call(t,"signature")&&n.uint32(42).bytes(t.signature),n},r.decode=function(t,n){t instanceof Qg||(t=Qg.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new Pa.Envelope;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.publicKey=t.bytes();break;case 2:o.payloadType=t.bytes();break;case 3:o.payload=t.bytes();break;case 5:o.signature=t.bytes();break;default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof Pa.Envelope)return t;var n=new Pa.Envelope;return t.publicKey!=null&&(typeof t.publicKey=="string"?Q.base64.decode(t.publicKey,n.publicKey=Q.newBuffer(Q.base64.length(t.publicKey)),0):t.publicKey.length&&(n.publicKey=t.publicKey)),t.payloadType!=null&&(typeof t.payloadType=="string"?Q.base64.decode(t.payloadType,n.payloadType=Q.newBuffer(Q.base64.length(t.payloadType)),0):t.payloadType.length&&(n.payloadType=t.payloadType)),t.payload!=null&&(typeof t.payload=="string"?Q.base64.decode(t.payload,n.payload=Q.newBuffer(Q.base64.length(t.payload)),0):t.payload.length&&(n.payload=t.payload)),t.signature!=null&&(typeof t.signature=="string"?Q.base64.decode(t.signature,n.signature=Q.newBuffer(Q.base64.length(t.signature)),0):t.signature.length&&(n.signature=t.signature)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.publicKey="":(i.publicKey=[],n.bytes!==Array&&(i.publicKey=Q.newBuffer(i.publicKey))),n.bytes===String?i.payloadType="":(i.payloadType=[],n.bytes!==Array&&(i.payloadType=Q.newBuffer(i.payloadType))),n.bytes===String?i.payload="":(i.payload=[],n.bytes!==Array&&(i.payload=Q.newBuffer(i.payload))),n.bytes===String?i.signature="":(i.signature=[],n.bytes!==Array&&(i.signature=Q.newBuffer(i.signature)))),t.publicKey!=null&&t.hasOwnProperty("publicKey")&&(i.publicKey=n.bytes===String?Q.base64.encode(t.publicKey,0,t.publicKey.length):n.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),t.payloadType!=null&&t.hasOwnProperty("payloadType")&&(i.payloadType=n.bytes===String?Q.base64.encode(t.payloadType,0,t.payloadType.length):n.bytes===Array?Array.prototype.slice.call(t.payloadType):t.payloadType),t.payload!=null&&t.hasOwnProperty("payload")&&(i.payload=n.bytes===String?Q.base64.encode(t.payload,0,t.payload.length):n.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),t.signature!=null&&t.hasOwnProperty("signature")&&(i.signature=n.bytes===String?Q.base64.encode(t.signature,0,t.signature.length):n.bytes===Array?Array.prototype.slice.call(t.signature):t.signature),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Bn.default.util.toJSONOptions)},r})();a();var qr=v(Mr(),1),Fa=qr.default.Reader,Xg=qr.default.Writer,te=qr.default.util,St=qr.default.roots.default||(qr.default.roots.default={}),Zg=St.PeerRecord=(()=>{function r(e){if(this.addresses=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.peerId=te.newBuffer([]),r.prototype.seq=te.Long?te.Long.fromBits(0,0,!0):0,r.prototype.addresses=te.emptyArray,r.encode=function(t,n){if(n||(n=Xg.create()),t.peerId!=null&&Object.hasOwnProperty.call(t,"peerId")&&n.uint32(10).bytes(t.peerId),t.seq!=null&&Object.hasOwnProperty.call(t,"seq")&&n.uint32(16).uint64(t.seq),t.addresses!=null&&t.addresses.length)for(var i=0;i<t.addresses.length;++i)St.PeerRecord.AddressInfo.encode(t.addresses[i],n.uint32(26).fork()).ldelim();return n},r.decode=function(t,n){t instanceof Fa||(t=Fa.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new St.PeerRecord;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.peerId=t.bytes();break;case 2:o.seq=t.uint64();break;case 3:o.addresses&&o.addresses.length||(o.addresses=[]),o.addresses.push(St.PeerRecord.AddressInfo.decode(t,t.uint32()));break;default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof St.PeerRecord)return t;var n=new St.PeerRecord;if(t.peerId!=null&&(typeof t.peerId=="string"?te.base64.decode(t.peerId,n.peerId=te.newBuffer(te.base64.length(t.peerId)),0):t.peerId.length&&(n.peerId=t.peerId)),t.seq!=null&&(te.Long?(n.seq=te.Long.fromValue(t.seq)).unsigned=!0:typeof t.seq=="string"?n.seq=parseInt(t.seq,10):typeof t.seq=="number"?n.seq=t.seq:typeof t.seq=="object"&&(n.seq=new te.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".PeerRecord.addresses: array expected");n.addresses=[];for(var i=0;i<t.addresses.length;++i){if(typeof t.addresses[i]!="object")throw TypeError(".PeerRecord.addresses: object expected");n.addresses[i]=St.PeerRecord.AddressInfo.fromObject(t.addresses[i])}}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addresses=[]),n.defaults)if(n.bytes===String?i.peerId="":(i.peerId=[],n.bytes!==Array&&(i.peerId=te.newBuffer(i.peerId))),te.Long){var o=new te.Long(0,0,!0);i.seq=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.seq=n.longs===String?"0":0;if(t.peerId!=null&&t.hasOwnProperty("peerId")&&(i.peerId=n.bytes===String?te.base64.encode(t.peerId,0,t.peerId.length):n.bytes===Array?Array.prototype.slice.call(t.peerId):t.peerId),t.seq!=null&&t.hasOwnProperty("seq")&&(typeof t.seq=="number"?i.seq=n.longs===String?String(t.seq):t.seq:i.seq=n.longs===String?te.Long.prototype.toString.call(t.seq):n.longs===Number?new te.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.addresses&&t.addresses.length){i.addresses=[];for(var s=0;s<t.addresses.length;++s)i.addresses[s]=St.PeerRecord.AddressInfo.toObject(t.addresses[s],n)}return i},r.prototype.toJSON=function(){return this.constructor.toObject(this,qr.default.util.toJSONOptions)},r.AddressInfo=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.multiaddr=te.newBuffer([]),e.encode=function(n,i){return i||(i=Xg.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),i},e.decode=function(n,i){n instanceof Fa||(n=Fa.create(n));for(var o=i===void 0?n.len:n.pos+i,s=new St.PeerRecord.AddressInfo;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:s.multiaddr=n.bytes();break;default:n.skipType(c&7);break}}return s},e.fromObject=function(n){if(n instanceof St.PeerRecord.AddressInfo)return n;var i=new St.PeerRecord.AddressInfo;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?te.base64.decode(n.multiaddr,i.multiaddr=te.newBuffer(te.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),i},e.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.multiaddr="":(o.multiaddr=[],i.bytes!==Array&&(o.multiaddr=te.newBuffer(o.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(o.multiaddr=i.bytes===String?te.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,qr.default.util.toJSONOptions)},e}(),r})();var hl=v(Pw(),1);dl.default.util.Long=void 0;dl.default.configure();async function ES(r,e=()=>{}){e(0,"Storing each peerstore key under a single datastore key"),await r.datastore.open();let t={},n=[];for await(let{key:i,value:o}of r.datastore.query({prefix:"/peers"})){n.push(i);let s=i.toString(),[c,u,f,l,h]=s.split("/");if(u==="peers"&&!!["protos","addrs","metadata","keys"].includes(f)&&!!l)if(t[l]=t[l]||{addresses:[],protocols:[],metadata:[]},f==="protos"){let p=Yf.decode(o);t[l].protocols=p.protocols.sort()}else if(f==="addrs"){let p=Zf.decode(o);t[l].addresses=p.addrs.sort((w,g)=>new hl.Multiaddr(w.multiaddr).toString().localeCompare(new hl.Multiaddr(g.multiaddr).toString())),p.certifiedRecord&&p.certifiedRecord.raw&&(t[l].peerRecordEnvelope=p.certifiedRecord.raw)}else f==="metadata"?t[l].metadata.push({key:h,value:o}):f==="keys"&&(t[l].pubKey=o)}e(33,"Read peer data from store");for(let i of n)await r.datastore.delete(i);e(66,"Removed existing peer data from store");for(let i of Object.keys(t)){let o=t[i];o.metadata=o.metadata.sort((c,u)=>c.key.localeCompare(u.key));let s=tl.encode(o).finish();await r.datastore.put(new M(`/peers/${i}`),s)}await r.datastore.close(),e(100,"Stored each peerstore key under a single datastore key")}async function xS(r,e=()=>{}){e(0,"Storing each peerstore key under a multiple datastore keys"),await r.datastore.open();let t={},n=[];for await(let{key:i,value:o}of r.datastore.query({prefix:"/peers"})){n.push(i);let s=i.toString(),[c,u,f]=s.split("/");t[f]=tl.decode(o)}e(33,"Read peer data from store");for(let i of n)await r.datastore.delete(i);e(66,"Removed existing peer data from store");for(let[i,o]of Object.entries(t)){if(o.protocols&&o.protocols.length>0&&await r.datastore.put(new M(`/peers/protos/${i}`),Yf.encode({protocols:o.protocols}).finish()),o.addresses&&o.addresses.length>0){let s=o.peerRecordEnvelope,c;if(s){let u=Yg.decode(s),f=Zg.decode(u.payload);c={raw:s,seq:f.seq}}await r.datastore.put(new M(`/peers/addrs/${i}`),Zf.encode({addrs:o.addresses,certifiedRecord:c}).finish())}if(o.metadata&&o.metadata.length>0)for(let{key:s,value:c}of o.metadata)await r.datastore.put(new M(`/peers/metadata/${i}/${s}`),c);o.pubKey&&await r.datastore.put(new M(`/peers/keys/${i}`),o.pubKey)}await r.datastore.close(),e(100,"Stored each peerstore key under multiple datastore keys")}var Fw={version:12,description:"Store each peerstore peer under a single datastore key",migrate:ES,revert:xS};var Ln={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},Wa=[Object.assign({version:1},Ln),Object.assign({version:2},Ln),Object.assign({version:3},Ln),Object.assign({version:4},Ln),Object.assign({version:5},Ln),Object.assign({version:6},Ln),Object.assign({version:7},Ln),Cm,zg,Wg,Gg,Fw];a();a();var $w=v(at(),1);var pl={};W(pl,{InvalidValueError:()=>Ui,MissingRepoOptionsError:()=>Vt,NonReversibleMigrationError:()=>Fi,NotInitializedRepoError:()=>Kr,RequiredParameterError:()=>$i});a();var Fi=class extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=Fi.code,this.message=e}};Fi.code="ERR_NON_REVERSIBLE_MIGRATION";var Kr=class extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=Kr.code,this.message=e}};Kr.code="ERR_NOT_INITIALIZED_REPO";var $i=class extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=$i.code,this.message=e}};$i.code="ERR_REQUIRED_PARAMETER";var Ui=class extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=Ui.code,this.message=e}};Ui.code="ERR_INVALID_VALUE";var Vt=class extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=Vt.code,this.message=e}};Vt.code="ERR_MISSING_REPO_OPTIONS";var yl=(0,$w.default)("ipfs:repo:migrator:repo:init");async function Uw(r){if(!r)throw new Vt("Please pass repo options when trying to open a repo");let e=r.root;try{await e.open();let t=await e.has(Mo),n=await e.has(qg);return!t||!n?(yl(`Version entry present: ${t}`),yl(`Config entry present: ${n}`),!1):!0}catch(t){return yl("While checking if repo is initialized error was thrown: "+t.message),!1}finally{if(e!==void 0)try{await e.close()}catch{}}}we();H();async function ml(r){if(!await Uw(r))throw new Kr("Repo is not initialized!");let e=r.root;await e.open();try{return parseInt(T(await e.get(Mo)))}finally{await e.close()}}async function Wo(r,e){if(!e)throw new Vt("Please pass repo options when trying to open a repo");let t=e.root;await t.open(),await t.put(Mo,N(String(r))),await t.close()}var Mw=v(at(),1),Tt=(0,Mw.default)("ipfs:repo:migrator");function _S(r){return r=r||Wa,!Array.isArray(r)||r.length===0?0:r[r.length-1].version}async function jw(r,e,t,n,{ignoreLock:i=!1,onProgress:o,isDryRun:s=!1,migrations:c}){if(c=c||Wa,!r)throw new ht.RequiredParameterError("Path argument is required!");if(!t)throw new ht.RequiredParameterError("repoOptions argument is required!");if(!n)throw new ht.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(n)||n<=0)throw new ht.InvalidValueError("Version has to be positive integer!");e=Qf(e);let u=await ml(e);if(u===n){Tt("Nothing to migrate.");return}if(u>n)throw new ht.InvalidValueError(`Current repo's version (${u}) is higher then toVersion (${n}), you probably wanted to revert it?`);qw(c,u,n);let f;!s&&!i&&(f=await t.repoLock.lock(r));try{for(let l of c){if(n!==void 0&&l.version>n)break;if(!(l.version<=u)){Tt(`Migrating version ${l.version}`);try{if(!s){let h=()=>{};o&&(h=(p,w)=>o(l.version,p.toFixed(2),w)),await l.migrate(e,h)}}catch(h){let p=l.version-1;throw Tt(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${p}`),await Wo(p,e),new Error(`During migration to version ${l.version} exception was raised: ${h.stack||h.message||h}`)}Tt(`Migrating to version ${l.version} finished`)}}s||await Wo(n||_S(c),e),Tt("Repo successfully migrated",n!==void 0?`to version ${n}!`:"to latest version!")}finally{!s&&!i&&f&&await f.close()}}async function zw(r,e,t,n,{ignoreLock:i=!1,onProgress:o,isDryRun:s=!1,migrations:c}){if(c=c||Wa,!r)throw new ht.RequiredParameterError("Path argument is required!");if(!t)throw new ht.RequiredParameterError("repoOptions argument is required!");if(!n)throw new ht.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(n)||n<=0)throw new ht.InvalidValueError("Version has to be positive integer!");e=Qf(e);let u=await ml(e);if(u===n){Tt("Nothing to revert.");return}if(u<n)throw new ht.InvalidValueError(`Current repo's version (${u}) is lower then toVersion (${n}), you probably wanted to migrate it?`);qw(c,n,u,!0);let f;!s&&!i&&(f=await t.repoLock.lock(r)),Tt(`Reverting from version ${u} to ${n}`);try{let l=c.slice().reverse();for(let h of l){if(h.version<=n)break;if(!(h.version>u)){Tt(`Reverting migration version ${h.version}`);try{if(!s){let p=()=>{};o&&(p=(w,g)=>o(h.version,w.toFixed(2),g)),await h.revert(e,p)}}catch(p){let w=h.version;throw Tt(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${w}`),await Wo(w,e),p.message=`During reversion to version ${h.version} exception was raised: ${p.message}`,p}Tt(`Reverting to version ${h.version} finished`)}}s||await Wo(n,e),Tt(`All migrations successfully reverted to version ${n}!`)}finally{!s&&!i&&f&&await f.close()}}function qw(r,e,t,n=!1){let i=0;for(let o of r){if(o.version>t)break;if(o.version>e){if(n&&!o.revert)throw new ht.NonReversibleMigrationError(`It is not possible to revert to version ${e} because migration version ${o.version} is not reversible. Cancelling reversion.`);i++}}if(i!==t-e)throw new ht.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${e} to ${t}`)}var ht=pl;var b0=v(Ww(),1);a();var tb=v(eb(),1),rb=tb.default;a();a();a();H();we();var ur="/",nb=new TextEncoder().encode(ur),Qa=nb[0],K=class{constructor(e,t){if(typeof e=="string")this._buf=N(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Qa)throw new Error("Invalid key")}toString(e="utf8"){return T(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new K(e.join(ur))}static random(){return new K(ct().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new K(e):typeof e.uint8Array=="function"?new K(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=nb),this._buf[0]!==Qa){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Qa,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Qa;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let o=t[i],s=n[i];if(o<s)return!0;if(o>s)return!1}return t.length<n.length}reverse(){return K.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(ur).slice(1)}type(){return NS(this.baseNamespace())}name(){return PS(this.baseNamespace())}instance(e){return new K(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(ur)||(e+=ur),e+=this.type(),new K(e)}parent(){let e=this.list();return e.length===1?new K(ur):new K(e.slice(0,-1).join(ur))}child(e){return this.toString()===ur?e:e.toString()===ur?this:new K(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return K.withNamespaces([...this.namespaces(),...FS(e.map(t=>t.namespaces()))])}};function NS(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function PS(r){let e=r.split(":");return e[e.length-1]}function FS(r){return[].concat(...r)}var ab=v(at(),1);H();we();a();a();var Rn=class extends Error{constructor(e){super(e),this.name="LockExistsError",this.code=Rn.code}};Rn.code="ERR_LOCK_EXISTS";var We=class extends Error{constructor(e){super(e),this.name="NotFoundError",this.code=We.code}};We.code="ERR_NOT_FOUND";var Nn=class extends Error{constructor(e){super(e),this.name="InvalidRepoVersionError",this.code=Nn.code}};Nn.code="ERR_INVALID_REPO_VERSION";var Ho="ERR_REPO_NOT_INITIALIZED",ib="ERR_REPO_ALREADY_OPEN",ob="ERR_REPO_ALREADY_CLOSED";async function Ya(r,e,t){let n=await e(r);if(n)return n;let i=sb(t);return i?new Promise((o,s)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{s(c.transaction.error)},c.transaction.oncomplete=()=>{o(Boolean(c.result))}}):!1}async function Xa(r,e,t,n){if(await t(r))return e(r);let i=sb(n);if(!i)throw new We;return new Promise((o,s)=>{let c=i.store("readonly").get(r.toString());c.transaction.onabort=()=>{s(c.transaction.error)},c.transaction.oncomplete=()=>{if(c.result)return o(c.result);s(new We)}})}function sb(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}var US=(0,ab.default)("ipfs:repo:version"),wl=new K("version");function cb(r){return{async exists(){return Ya(wl,r.has.bind(r),r)},async get(){let e=await Xa(wl,r.get.bind(r),r.has.bind(r),r);return parseInt(T(e),10)},set(e){return r.put(wl,N(String(e)))},async check(e){let t=await this.get();return US("comparing version: %s and %s",t,e),t===e||(t===6&&e===7||e===6&&t===7)}}}a();a();var bb=v(fb(),1);a();var Jo=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},El=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},lb=r=>globalThis.DOMException===void 0?new El(r):new DOMException(r),hb=r=>{let e=r.reason===void 0?lb("This operation was aborted."):r.reason;return e instanceof Error?e:lb(e)};function xl(r,e,t,n){let i,o=new Promise((s,c)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){s(r);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:u}=n;u.aborted&&c(hb(u)),u.addEventListener("abort",()=>{c(hb(u))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof t=="function"){try{s(t())}catch(l){c(l)}return}let u=typeof t=="string"?t:`Promise timed out after ${e} milliseconds`,f=t instanceof Error?t:new Jo(u);typeof r.cancel=="function"&&r.cancel(),c(f)},e),(async()=>{try{s(await r)}catch(u){c(u)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return o.clear=()=>{clearTimeout(i),i=void 0},o}a();a();function vl(r,e,t){let n=0,i=r.length;for(;i>0;){let o=Math.trunc(i/2),s=n+o;t(r[s],e)<=0?(n=++s,i-=o+1):i=o}return n}var Pn=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},fr,Qo=class{constructor(){fr.set(this,[])}enqueue(e,t){t={priority:0,...t};let n={priority:t.priority,run:e};if(this.size&&Pn(this,fr,"f")[this.size-1].priority>=t.priority){Pn(this,fr,"f").push(n);return}let i=vl(Pn(this,fr,"f"),n,(o,s)=>s.priority-o.priority);Pn(this,fr,"f").splice(i,0,n)}dequeue(){let e=Pn(this,fr,"f").shift();return e?.run}filter(e){return Pn(this,fr,"f").filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return Pn(this,fr,"f").length}};fr=new WeakMap;var X=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},D=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},oe,Xo,Zo,Gr,oc,es,ec,Ct,Yo,He,tc,Ge,ts,Hr,rc,db,pb,wb,yb,mb,gb,nc,_l,Sl,sc,ic,zS=new Jo,Dl=class extends Error{},Kt=class extends bb.default{constructor(e){var t,n,i,o;if(super(),oe.add(this),Xo.set(this,void 0),Zo.set(this,void 0),Gr.set(this,0),oc.set(this,void 0),es.set(this,void 0),ec.set(this,0),Ct.set(this,void 0),Yo.set(this,void 0),He.set(this,void 0),tc.set(this,void 0),Ge.set(this,0),ts.set(this,void 0),Hr.set(this,void 0),rc.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Qo,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof e.interval})`);X(this,Xo,e.carryoverConcurrencyCount,"f"),X(this,Zo,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),X(this,oc,e.intervalCap,"f"),X(this,es,e.interval,"f"),X(this,He,new e.queueClass,"f"),X(this,tc,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,X(this,rc,e.throwOnTimeout===!0,"f"),X(this,Hr,e.autoStart===!1,"f")}get concurrency(){return D(this,ts,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);X(this,ts,e,"f"),D(this,oe,"m",sc).call(this)}async add(e,t={}){return new Promise((n,i)=>{let o=async()=>{var s,c,u;X(this,Ge,(c=D(this,Ge,"f"),c++,c),"f"),X(this,Gr,(u=D(this,Gr,"f"),u++,u),"f");try{if(!((s=t.signal)===null||s===void 0)&&s.aborted){i(new Dl("The task was aborted."));return}let l=await(this.timeout===void 0&&t.timeout===void 0?e({signal:t.signal}):xl(Promise.resolve(e({signal:t.signal})),t.timeout===void 0?this.timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?D(this,rc,"f"):t.throwOnTimeout)&&i(zS)}));n(l),this.emit("completed",l)}catch(f){i(f),this.emit("error",f)}D(this,oe,"m",wb).call(this)};D(this,He,"f").enqueue(o,t),D(this,oe,"m",nc).call(this),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async n=>this.add(n,t)))}start(){return D(this,Hr,"f")?(X(this,Hr,!1,"f"),D(this,oe,"m",sc).call(this),this):this}pause(){X(this,Hr,!0,"f")}clear(){X(this,He,new(D(this,tc,"f")),"f")}async onEmpty(){D(this,He,"f").size!==0&&await D(this,oe,"m",ic).call(this,"empty")}async onSizeLessThan(e){D(this,He,"f").size<e||await D(this,oe,"m",ic).call(this,"next",()=>D(this,He,"f").size<e)}async onIdle(){D(this,Ge,"f")===0&&D(this,He,"f").size===0||await D(this,oe,"m",ic).call(this,"idle")}get size(){return D(this,He,"f").size}sizeBy(e){return D(this,He,"f").filter(e).length}get pending(){return D(this,Ge,"f")}get isPaused(){return D(this,Hr,"f")}};Xo=new WeakMap,Zo=new WeakMap,Gr=new WeakMap,oc=new WeakMap,es=new WeakMap,ec=new WeakMap,Ct=new WeakMap,Yo=new WeakMap,He=new WeakMap,tc=new WeakMap,Ge=new WeakMap,ts=new WeakMap,Hr=new WeakMap,rc=new WeakMap,oe=new WeakSet,db=function(){return D(this,Zo,"f")||D(this,Gr,"f")<D(this,oc,"f")},pb=function(){return D(this,Ge,"f")<D(this,ts,"f")},wb=function(){var e;X(this,Ge,(e=D(this,Ge,"f"),e--,e),"f"),D(this,oe,"m",nc).call(this),this.emit("next")},yb=function(){this.emit("empty"),D(this,Ge,"f")===0&&this.emit("idle")},mb=function(){D(this,oe,"m",Sl).call(this),D(this,oe,"m",_l).call(this),X(this,Yo,void 0,"f")},gb=function(){let e=Date.now();if(D(this,Ct,"f")===void 0){let t=D(this,ec,"f")-e;if(t<0)X(this,Gr,D(this,Xo,"f")?D(this,Ge,"f"):0,"f");else return D(this,Yo,"f")===void 0&&X(this,Yo,setTimeout(()=>{D(this,oe,"m",mb).call(this)},t),"f"),!0}return!1},nc=function(){if(D(this,He,"f").size===0)return D(this,Ct,"f")&&clearInterval(D(this,Ct,"f")),X(this,Ct,void 0,"f"),D(this,oe,"m",yb).call(this),!1;if(!D(this,Hr,"f")){let e=!D(this,oe,"a",gb);if(D(this,oe,"a",db)&&D(this,oe,"a",pb)){let t=D(this,He,"f").dequeue();return t?(this.emit("active"),t(),e&&D(this,oe,"m",_l).call(this),!0):!1}}return!1},_l=function(){D(this,Zo,"f")||D(this,Ct,"f")!==void 0||(X(this,Ct,setInterval(()=>{D(this,oe,"m",Sl).call(this)},D(this,es,"f")),"f"),X(this,ec,Date.now()+D(this,es,"f"),"f"))},Sl=function(){D(this,Gr,"f")===0&&D(this,Ge,"f")===0&&D(this,Ct,"f")&&(clearInterval(D(this,Ct,"f")),X(this,Ct,void 0,"f")),X(this,Gr,D(this,Xo,"f")?D(this,Ge,"f"):0,"f"),D(this,oe,"m",sc).call(this)},sc=function(){for(;D(this,oe,"m",nc).call(this););},ic=async function(e,t){return new Promise(n=>{let i=()=>{t&&!t()||(this.off(e,i),n())};this.on(e,i)})};a();var xb=qS;function qS(r,e,t){var n,i;if(Array.isArray(e)&&(n=e.slice(0)),typeof e=="string"&&(n=e.split(".")),typeof e=="symbol"&&(n=[e]),!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");if(i=n.pop(),!i)return!1;Eb(i);for(var o;o=n.shift();)if(Eb(o),typeof r[o]>"u"&&(r[o]={}),r=r[o],!r||typeof r!="object")return!1;return r[i]=t,!0}function Eb(r){if(r=="__proto__"||r=="constructor"||r=="prototype")throw new Error("setting of prototype values not supported")}var ac=v(ve(),1);H();we();var VS=Kt.default?Kt.default:Kt,Al=new K("config");function vb(r){let e=new VS({concurrency:1}),t={async getAll(o={}){let s=await Xa(Al,r.get.bind(r),r.has.bind(r),r);return JSON.parse(T(s))},async get(o,s={}){if(o==null)throw new We(`Key ${o} does not exist in config`);let c=await this.getAll(s),u=Io(c,o);if(u===void 0)throw new We(`Key ${o} does not exist in config`);return u},set(o,s,c={}){if(typeof o!="string"&&!(o instanceof String))throw(0,ac.default)(new Error("Invalid key type: "+typeof o),"ERR_INVALID_KEY");if(s===void 0||s instanceof Uint8Array)throw(0,ac.default)(new Error("Invalid value type: "+typeof s),"ERR_INVALID_VALUE");return e.add(()=>n({key:o,value:s},c.signal))},replace(o,s={}){if(!o||o instanceof Uint8Array)throw(0,ac.default)(new Error("Invalid value type: "+typeof o),"ERR_INVALID_VALUE");return e.add(()=>n({key:void 0,value:o},s.signal))},async exists(){return Ya(Al,r.has.bind(r),r)}};return t;async function n(o,s){if(s&&s.aborted)return;let c=o.key,u=o.value;if(c){let f=await t.getAll();return typeof f=="object"&&f!==null&&xb(f,c,u),i(f)}return i(u)}function i(o){let s=N(JSON.stringify(o,null,2));return r.put(Al,s)}}a();a();a();a();function rs(r){if(typeof r!="object"||r===null)return!1;let e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)}function Tl(r,e={}){if(!rs(r)&&!Array.isArray(r))throw new TypeError("Expected a plain object or array");let{deep:t,compare:n}=e,i=[],o=[],s=u=>{let f=i.indexOf(u);if(f!==-1)return o[f];let l=[];return i.push(u),o.push(l),l.push(...u.map(h=>Array.isArray(h)?s(h):rs(h)?c(h):h)),l},c=u=>{let f=i.indexOf(u);if(f!==-1)return o[f];let l={},h=Object.keys(u).sort(n);i.push(u),o.push(l);for(let p of h){let w=u[p],g;t&&Array.isArray(w)?g=s(w):g=t&&rs(w)?c(w):w,Object.defineProperty(l,p,{...Object.getOwnPropertyDescriptor(u,p),value:g})}return l};return Array.isArray(r)?t?s(r):r.slice():c(r)}H();we();var Cl=new K("datastore_spec");function _b(r){return{exists(){return r.has(Cl)},async get(){let e=await r.get(Cl);return JSON.parse(T(e))},async set(e){return r.put(Cl,N(JSON.stringify(Tl(e,{deep:!0}))))}}}a();we();var Il=new K("api");function Sb(r){return{async get(){let e=await r.get(Il);return e&&e.toString()},set(e){return r.put(Il,N(e.toString()))},delete(){return r.delete(Il)}}}a();var Cb=v(Fn(),1);a();a();var cc=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},zi=class{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new cc(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let t=this.head;this.head=t.next=new cc(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function Ab(r={}){return WS(t=>{let n=t.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},r)}function WS(r,e){e=e??{};let t=e.onEnd,n=new zi,i,o,s,c=async()=>n.isEmpty()?s?{done:!0}:await new Promise((y,k)=>{o=$=>{o=null,n.push($);try{y(r(n))}catch(re){k(re)}return i}}):r(n),u=y=>o!=null?o(y):(n.push(y),i),f=y=>(n=new zi,o!=null?o({error:y}):(n.push({error:y}),i)),l=y=>{if(s)return i;if(e?.objectMode!==!0&&y?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return u({done:!1,value:y})},h=y=>s?i:(s=!0,y!=null?f(y):u({done:!0})),p=()=>(n=new zi,h(),{done:!0}),w=y=>(h(y),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:c,return:p,throw:w,push:l,end:h,get readableLength(){return n.size}},t==null)return i;let g=i;return i={[Symbol.asyncIterator](){return this},next(){return g.next()},throw(y){return g.throw(y),t!=null&&(t(y),t=void 0),{done:!0}},return(){return g.return(),t!=null&&(t(),t=void 0),{done:!0}},push:l,end(y){return g.end(y),t!=null&&(t(y),t=void 0),i},get readableLength(){return g.readableLength}},i}var Ib=v($n(),1);q();var kb=v(ve(),1);wa();function Ob(r){return{open(){return r.open()},close(){return r.close()},query(e,t){return r.query(e,t)},queryKeys(e,t){return r.queryKeys(e,t)},async get(e,t){let n=Jr(e);return n.isIdentity?Promise.resolve(n.digest):r.get(e,t)},async*getMany(e,t){for await(let n of e)yield this.get(n,t)},async put(e,t,n){let{isIdentity:i}=Jr(e);i||await r.put(e,t,n)},async*putMany(e,t){let n=Ab({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{await(0,Ib.default)(r.putMany(async function*(){for await(let{key:o,value:s}of e)Jr(o).isIdentity||(yield{key:o,value:s}),n.push({key:o,value:s})}())),n.end()}catch(o){n.end(o)}}),yield*n},has(e,t){let{isIdentity:n}=Jr(e);return n?Promise.resolve(!0):r.has(e,t)},delete(e,t){let{isIdentity:n}=Jr(e);return n?Promise.resolve():r.delete(e,t)},deleteMany(e,t){return r.deleteMany((0,Cb.default)(e,n=>!Jr(n).isIdentity),t)},batch(){let e=r.batch();return{put(t,n){let{isIdentity:i}=Jr(t);i||e.put(t,n)},delete(t){let{isIdentity:n}=Jr(t);n||e.delete(t)},commit:t=>e.commit(t)}}}}function Jr(r){let e=x.asCID(r);if(e==null)throw(0,kb.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return e.multihash.code!==Ci.code?{isIdentity:!1}:{isIdentity:!0,digest:e.multihash.digest}}a();a();var Bb=v(at(),1),Lb=(0,Bb.default)("ipfs:repo:lock:memory"),Rb="repo.lock",ns={};async function GS(r){let e=r+"/"+Rb;if(Lb("locking %s",e),ns[e]===!0)throw new Rn(`Lock already being held for file: ${e}`);return ns[e]=!0,{async close(){ns[e]&&delete ns[e]}}}async function JS(r){let e=r+"/"+Rb;return Lb(`checking lock: ${e}`),Boolean(ns[e])}var uc={lock:GS,locked:JS};var Nb={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:uc};a();var kl={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};a();q();var Ub=v(ve(),1),Mb=v(at(),1),Ll=v(Ol(),1);a();vn();or();var Fb=v(ve(),1);xe();Ee();function is(r){let e=x.asCID(r);if(e==null)throw(0,Fb.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");let t=I.encode(e.multihash.bytes);return new K("/"+t.slice(1).toUpperCase(),!1)}function Bl(r){return G(I.decode(`b${r.toString().toLowerCase().substring(1)}`))}a();var $b=v(at(),1);var YS=(0,$b.default)("ipfs:repo:utils:walk-dag");async function*qi(r,e,t,n){try{let i=await e.get(r,n),o=await t(r.code),s=_n({bytes:i,cid:r,codec:o});for(let[,c]of s.links())yield c,yield*qi(c,e,t,n)}catch(i){throw YS("Could not walk DAG for CID",r.toString(),i),i}}a();var Fe={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};a();var os=class extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(let[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){let n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(let e of this.oldCache){let[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)===!1&&(yield e)}for(let e of this.cache){let[t,n]=e;this._deleteIfExpired(t,n)===!1&&(yield e)}}get(e){if(this.cache.has(e)){let t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){let t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){let i=typeof n=="number"&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:i}):this._set(e,{value:t,expiry:i})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){let t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");let t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache){let[t,n]=e;this._deleteIfExpired(t,n)===!1&&(yield[t,n.value])}for(let e of this.oldCache){let[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)===!1&&(yield[t,n.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){let n=e[t],[i,o]=n;this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){let n=e[t],[i,o]=n;this.cache.has(i)||this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}}*entriesAscending(){for(let[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(let t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(let[n,i]of this.entriesAscending())e.call(t,i,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}};var XS=2048;function ZS(r){let e=`Invalid type '${r}', must be one of {direct, indirect, recursive, all}`;return(0,Ub.default)(new Error(e),"ERR_INVALID_PIN_TYPE")}var fc=class{constructor({pinstore:e,blockstore:t,loadCodec:n}){this.pinstore=e,this.blockstore=t,this.loadCodec=n,this.log=(0,Mb.default)("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(e,t={}){await this.blockstore.get(e,t);let n={depth:0};return e.version!==0&&(n.version=e.version),e.code!==xt&&(n.codec=e.code),t.metadata&&(n.metadata=t.metadata),this.pinstore.put(is(e),ir(n))}unpin(e,t){return this.pinstore.delete(is(e),t)}async pinRecursively(e,t={}){await this.fetchCompleteDag(e,t);let n={depth:1/0};e.version!==0&&(n.version=e.version),e.code!==xt&&(n.codec=e.code),t.metadata&&(n.metadata=t.metadata),await this.pinstore.put(is(e),ir(n))}async*directKeys(e){for await(let t of this.pinstore.query({filters:[n=>Le(n.value).depth===0]})){let n=Le(t.value),i=n.version||0,o=n.codec!=null?n.codec:xt,s=Bl(t.key);yield{cid:x.create(i,o,s),metadata:n.metadata}}}async*recursiveKeys(e){for await(let t of this.pinstore.query({filters:[n=>Le(n.value).depth===1/0]})){let n=Le(t.value),i=n.version||0,o=n.codec!=null?n.codec:xt,s=Bl(t.key);yield{cid:x.create(i,o,s),metadata:n.metadata}}}async*indirectKeys(e){for await(let{cid:t}of this.recursiveKeys())for await(let n of qi(t,this.blockstore,this.loadCodec,e)){let i=[Fe.recursive];(await this.isPinnedWithType(n,i)).pinned||(yield n)}}async isPinnedWithType(e,t,n){Array.isArray(t)||(t=[t]);let i=t.includes(Fe.all),o=t.includes(Fe.direct),s=t.includes(Fe.recursive),c=t.includes(Fe.indirect);if(s||o||i){let l=await(0,Ll.default)(this.pinstore.query({prefix:is(e).toString(),filters:[h=>{if(i)return!0;let p=Le(h.value);return t.includes(p.depth===0?Fe.direct:Fe.recursive)}],limit:1}));if(l){let h=Le(l.value);return{cid:e,pinned:!0,reason:h.depth===0?Fe.direct:Fe.recursive,metadata:h.metadata}}}let u=this;async function*f(l,h){for await(let{cid:p}of h)for await(let w of qi(p,u.blockstore,u.loadCodec))if(w.equals(l)){yield p;return}}if(i||c){let l=await(0,Ll.default)(f(e,this.recursiveKeys()));if(l)return{cid:e,pinned:!0,reason:Fe.indirect,parent:l}}return{cid:e,pinned:!1}}async fetchCompleteDag(e,t={}){let n=new os({maxSize:t.cidCacheMaxSize??XS}),i=async(o,s)=>{if(n.has(o.toString()))return;n.set(o.toString(),!0);let c=await this.blockstore.get(o,s),u=await this.loadCodec(o.code),f=_n({bytes:c,cid:o,codec:u});await Promise.all([...f.links()].map(([,l])=>i(l,s)))};await i(e,t)}static checkPinType(e){if(typeof e!="string"||!Object.keys(Fe).includes(e))throw ZS(e);return!0}};a();var qb=v(Vi(),1),Vb=v(ve(),1);function Kb(r,e){return{open(){return e.open()},close(){return e.close()},query(t,n){return e.query(t,n)},queryKeys(t,n){return e.queryKeys(t,n)},async get(t,n){return e.get(t,n)},async*getMany(t,n){yield*e.getMany(t,n)},async put(t,n,i){await e.put(t,n,i)},async*putMany(t,n){yield*e.putMany(t,n)},has(t,n){return e.has(t,n)},async delete(t,n){return await zb(t,r),e.delete(t,n)},deleteMany(t,n){return e.deleteMany((0,qb.default)(t,async i=>(await zb(i,r),i)),n)},batch(){return e.batch()}}}async function zb(r,e){let{pinned:t,reason:n}=await e.isPinnedWithType(r,Fe.all);if(t)throw(0,Vb.default)(new Error(`pinned: ${n}`),"ERR_BLOCK_PINNED")}a();a();var Rl=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},Nl=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},Wb=r=>globalThis.DOMException===void 0?new Nl(r):new DOMException(r),Hb=r=>{let e=r.reason===void 0?Wb("This operation was aborted."):r.reason;return e instanceof Error?e:Wb(e)};function Pl(r,e){let{milliseconds:t,fallback:n,message:i,customTimers:o={setTimeout,clearTimeout}}=e,s,c=new Promise((u,f)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t===Number.POSITIVE_INFINITY){u(r);return}if(e.signal){let{signal:l}=e;l.aborted&&f(Hb(l)),l.addEventListener("abort",()=>{f(Hb(l))})}s=o.setTimeout.call(void 0,()=>{if(n){try{u(n())}catch(p){f(p)}return}let l=typeof i=="string"?i:`Promise timed out after ${t} milliseconds`,h=i instanceof Error?i:new Rl(l);typeof r.cancel=="function"&&r.cancel(),f(h)},t),(async()=>{try{u(await r)}catch(l){f(l)}finally{o.clearTimeout.call(void 0,s)}})()});return c.clear=()=>{o.clearTimeout.call(void 0,s),s=void 0},c}a();a();var Gb=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");a();var Fl="lock:worker:request-read",$l="lock:worker:release-read",Ul="lock:master:grant-read",Ml="lock:worker:request-write",jl="lock:worker:release-write",zl="lock:master:grant-write";a();var Qr={},Ki=r=>{r.addEventListener("message",e=>{Ki.dispatchEvent("message",r,e)}),r.port!=null&&r.port.addEventListener("message",e=>{Ki.dispatchEvent("message",r,e)})};Ki.addEventListener=(r,e)=>{Qr[r]==null&&(Qr[r]=[]),Qr[r].push(e)};Ki.removeEventListener=(r,e)=>{Qr[r]!=null&&(Qr[r]=Qr[r].filter(t=>t===e))};Ki.dispatchEvent=function(r,e,t){Qr[r]!=null&&Qr[r].forEach(n=>n(e,t))};var ql=Ki;var Jb=(r,e,t,n,i)=>(o,s)=>{if(s.data.type!==t)return;let c={type:s.data.type,name:s.data.name,identifier:s.data.identifier};r.dispatchEvent(new MessageEvent(e,{data:{name:c.name,handler:async()=>(o.postMessage({type:i,name:c.name,identifier:c.identifier}),await new Promise(u=>{let f=l=>{if(l==null||l.data==null)return;let h={type:l.data.type,name:l.data.name,identifier:l.data.identifier};h.type===n&&h.identifier===c.identifier&&(o.removeEventListener("message",f),u())};o.addEventListener("message",f)}))}}))},Qb=(r,e,t,n)=>async()=>{let i=Gb();return globalThis.postMessage({type:e,identifier:i,name:r}),await new Promise(o=>{let s=c=>{if(c==null||c.data==null)return;let u={type:c.data.type,identifier:c.data.identifier};u.type===t&&u.identifier===i&&(globalThis.removeEventListener("message",s),o(()=>{globalThis.postMessage({type:n,identifier:i,name:r})}))};globalThis.addEventListener("message",s)})},tD={singleProcess:!1},Yb=r=>{if(r=Object.assign({},tD,r),Boolean(globalThis.document)||r.singleProcess){let t=new EventTarget;return ql.addEventListener("message",Jb(t,"requestReadLock",Fl,$l,Ul)),ql.addEventListener("message",Jb(t,"requestWriteLock",Ml,jl,zl)),t}return{isWorker:!0,readLock:t=>Qb(t,Fl,Ul,$l),writeLock:t=>Qb(t,Ml,zl,jl)}};var Un={},Yr;async function Vl(r,e){let t,n=new Promise(i=>{t=i});return r.add(async()=>await Pl((async()=>await new Promise(i=>{t(()=>{i()})}))(),{milliseconds:e.timeout})),await n}var rD=(r,e)=>{if(Yr.isWorker===!0)return{readLock:Yr.readLock(r,e),writeLock:Yr.writeLock(r,e)};let t=new Kt({concurrency:1}),n;return{async readLock(){if(n!=null)return await Vl(n,e);n=new Kt({concurrency:e.concurrency,autoStart:!1});let i=n,o=Vl(n,e);return t.add(async()=>(i.start(),await i.onIdle().then(()=>{n===i&&(n=null)}))),await o},async writeLock(){return n=null,await Vl(t,e)}}},nD={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function Kl(r){let e=Object.assign({},nD,r);return Yr==null&&(Yr=Yb(e),Yr.isWorker!==!0&&(Yr.addEventListener("requestReadLock",t=>{Un[t.data.name]!=null&&Un[t.data.name].readLock().then(async n=>await t.data.handler().finally(()=>n()))}),Yr.addEventListener("requestWriteLock",async t=>{Un[t.data.name]!=null&&Un[t.data.name].writeLock().then(async n=>await t.data.handler().finally(()=>n()))}))),Un[e.name]==null&&(Un[e.name]=rD(e.name,e)),Un[e.name]}a();q();var d0=v(at(),1);var p0=v(t0(),1);a();a();a();var lc=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},Wi=class{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new lc(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let t=this.head;this.head=t.next=new lc(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function r0(r={}){return aD(t=>{let n=t.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},r)}function aD(r,e){e=e??{};let t=e.onEnd,n=new Wi,i,o,s,c=async()=>n.isEmpty()?s?{done:!0}:await new Promise((y,k)=>{o=$=>{o=null,n.push($);try{y(r(n))}catch(re){k(re)}return i}}):r(n),u=y=>o!=null?o(y):(n.push(y),i),f=y=>(n=new Wi,o!=null?o({error:y}):(n.push({error:y}),i)),l=y=>{if(s)return i;if(e?.objectMode!==!0&&y?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return u({done:!1,value:y})},h=y=>s?i:(s=!0,y!=null?f(y):u({done:!0})),p=()=>(n=new Wi,h(),{done:!0}),w=y=>(h(y),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:c,return:p,throw:w,push:l,end:h,get readableLength(){return n.size}},t==null)return i;let g=i;return i={[Symbol.asyncIterator](){return this},next(){return g.next()},throw(y){return g.throw(y),t!=null&&(t(y),t=void 0),{done:!0}},return(){return g.return(),t!=null&&(t(),t=void 0),{done:!0}},push:l,end(y){return g.end(y),t!=null&&(t(y),t=void 0),i},get readableLength(){return g.readableLength}},i}var l0=v(hc(),1),fD=(...r)=>{let e;for(;r.length>0;)e=r.shift()(e);return e},h0=r=>r!=null&&(typeof r[Symbol.asyncIterator]=="function"||typeof r[Symbol.iterator]=="function"||typeof r.next=="function"),Hl=r=>r!=null&&typeof r.sink=="function"&&h0(r.source),lD=r=>e=>{let t=r.sink(e);if(t.then!=null){let n=r0({objectMode:!0});return t.then(()=>{n.end()},o=>{n.end(o)}),(0,l0.default)(n,async function*(){yield*r.source,n.end()}())}return r.source};function Gl(r,...e){if(Hl(r)){let n=r;r=()=>n.source}else if(h0(r)){let n=r;r=()=>n}let t=[r,...e];if(t.length>1&&Hl(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let n=1;n<t.length-1;n++)Hl(t[n])&&(t[n]=lD(t[n]));return fD(...t)}var Jl=v(hc(),1),dc=v(Vi(),1),y0=v(Fn(),1);xe();var ss=(0,d0.default)("ipfs:repo:gc"),hD=qt().code,dD=256,pD=new K("/local/filesroot");function m0({gcLock:r,pins:e,blockstore:t,root:n,loadCodec:i}){async function*o(){let s=Date.now();ss("Creating set of marked blocks");let c=await r.writeLock();try{let u=await yD({pins:e,blockstore:t,root:n,loadCodec:i}),f=t.queryKeys({});yield*mD({blockstore:t},u,f),ss(`Complete (${Date.now()-s}ms)`)}finally{c()}}return o}async function yD({pins:r,blockstore:e,loadCodec:t,root:n}){let i=async function*(){let c;try{c=await n.get(pD)}catch(f){if(f.code===hD){ss("No blocks in MFS");return}throw f}let u=x.decode(c);yield u,yield*qi(u,e,t)}(),o=(0,Jl.default)((0,dc.default)(r.recursiveKeys(),({cid:c})=>c),r.indirectKeys(),(0,dc.default)(r.directKeys(),({cid:c})=>c),i),s=new Set;for await(let c of(0,Jl.default)(o,i))s.add(I.encode(c.multihash.bytes));return s}async function*mD({blockstore:r},e,t){let n=0,i=0;yield*Gl((0,p0.default)((0,dc.default)(t,async s=>async function(){n++;try{let u=I.encode(s.multihash.bytes);if(e.has(u))return null;try{await r.delete(s),i++}catch(f){return{err:new Error(`Could not delete block with CID ${s}: ${f.message}`)}}return{cid:s}}catch(u){let f=`Could delete block with CID ${s}`;return ss(f,u),{err:new Error(f+`: ${u.message}`)}}}),dD),s=>(0,y0.default)(s,Boolean)),ss(`Marked set has ${e.size} unique blocks. Blockstore has ${n} blocks. Deleted ${i} blocks.`)}var $e=(0,w0.default)("ipfs:repo"),gD=Number.MAX_SAFE_INTEGER,wD="repoAutoMigrate",Yl=class{constructor(e,t,n,i){if(typeof e!="string")throw new Error("missing repo path");if(typeof t!="function")throw new Error("missing codec loader");this.options=rb(Nb,i),this.closed=!0,this.path=e,this.root=n.root,this.datastore=n.datastore,this.keys=n.keys;let o=n.blocks,s=n.pins;this.pins=new fc({pinstore:s,blockstore:o,loadCodec:t});let c=Kb(this.pins,o);this.blocks=Ob(c),this.version=cb(this.root),this.config=vb(this.root),this.spec=_b(this.root),this.apiAddr=Sb(this.root),this.gcLock=Kl({name:e,singleProcess:this.options.repoOwner!==!1}),this.gc=m0({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:t})}async init(e){$e("initializing at: %s",this.path),await this._openRoot(),await this.config.replace(bD(e)),await this.spec.set(ED(e)),await this.version.set(12)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch{return!1}}async open(){if(!this.closed)throw(0,Mn.default)(new Error("repo is already open"),ib);$e("opening at: %s",this.path);try{if(await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),$e("acquired repo.lock"),!await this.version.check(12))if(await this._isAutoMigrationEnabled())await this._migrate(12,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys});else throw new Nn("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");$e("creating datastore"),await this.datastore.open(),$e("creating blocks"),await this.blocks.open(),$e("creating keystore"),await this.keys.open(),$e("creating pins"),await this.pins.pinstore.open(),this.closed=!1,$e("all opened")}catch(e){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(t){$e("error removing lock",t)}throw e}}async _openRoot(){try{await this.root.open()}catch(e){if(e.message!=="Already open")throw e}}async _openLock(){let e=await this.options.repoLock.lock(this.path);if(typeof e.close!="function")throw(0,Mn.default)(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return e}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){$e("init check");let e;try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(t){throw t.code==="ERR_NOT_FOUND"?(0,Mn.default)(new Error("repo is not initialized yet"),Ho,{path:this.path}):t}if(!e)throw(0,Mn.default)(new Error("repo is not initialized yet"),Ho,{path:this.path})}async close(){if(this.closed)throw(0,Mn.default)(new Error("repo is already closed"),ob);$e("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(e){if(e.code!==Ho&&!e.message.startsWith("ENOENT"))throw e}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map(e=>e&&e.close())),$e("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){let[e,t,n,i,o]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),g0(this.datastore),g0(this.keys)]),s=t.size+i+o;return{repoPath:this.path,storageMax:e,version:n,numObjects:t.count,repoSize:s}}throw(0,Mn.default)(new Error("repo is not initialized yet"),Ho,{path:this.path})}async _isAutoMigrationEnabled(){if(this.options.autoMigrate!==void 0)return this.options.autoMigrate;let e;try{e=await this.config.get(wD)}catch(t){if(t.code===We.code)e=!0;else throw t}return e}async _migrate(e,t){return await this.version.get()>e?($e(`reverting to version ${e}`),zw(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):($e(`migrating to version ${e}`),jw(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{let e=await this.config.get("Datastore.StorageMax");return BigInt((0,b0.default)(e))}catch{return BigInt(gD)}}async _blockStat(){let e=BigInt(0),t=BigInt(0);if(this.blocks)for await(let{key:n,value:i}of this.blocks.query({}))e+=BigInt(1),t+=BigInt(i.byteLength),t+=BigInt(n.bytes.byteLength);return{count:e,size:t}}};async function g0(r){let e=BigInt(0);for await(let t of r.query({}))e+=BigInt(t.value.byteLength),e+=BigInt(t.key.uint8Array().byteLength);return e}function pc(r,e,t,n){return new Yl(r,e,t,n)}function bD(r){return r.Datastore=Object.assign({},kl,Io(r,"datastore")),r}function ED(r){let e={...kl.Spec,...Io(r,"Datastore.Spec")};return{type:e.type,mounts:e.mounts.map(t=>({mountpoint:t.mountpoint,type:t.child.type,path:t.child.path,shardFunc:t.child.shardFunc}))}}a();a();a();H();we();var lr="/",E0=new TextEncoder().encode(lr),yc=E0[0],ye=class{constructor(e,t){if(typeof e=="string")this._buf=N(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==yc)throw new Error("Invalid key")}toString(e="utf8"){return T(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new ye(e.join(lr))}static random(){return new ye(ct().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new ye(e):typeof e.uint8Array=="function"?new ye(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=E0),this._buf[0]!==yc){let e=new Uint8Array(this._buf.byteLength+1);e.fill(yc,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===yc;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let o=t[i],s=n[i];if(o<s)return!0;if(o>s)return!1}return t.length<n.length}reverse(){return ye.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(lr).slice(1)}type(){return xD(this.baseNamespace())}name(){return vD(this.baseNamespace())}instance(e){return new ye(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(lr)||(e+=lr),e+=this.type(),new ye(e)}parent(){let e=this.list();return e.length===1?new ye(lr):new ye(e.slice(0,-1).join(lr))}child(e){return this.toString()===lr?e:e.toString()===lr?this:new ye(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return ye.withNamespaces([...this.namespaces(),..._D(e.map(t=>t.namespaces()))])}};function xD(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function vD(r){let e=r.split(":");return e[e.length-1]}function _D(r){return[].concat(...r)}a();a();a();H();we();var hr="/",x0=new TextEncoder().encode(hr),mc=x0[0],Z=class{constructor(e,t){if(typeof e=="string")this._buf=N(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==mc)throw new Error("Invalid key")}toString(e="utf8"){return T(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Z(e.join(hr))}static random(){return new Z(ct().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Z(e):typeof e.uint8Array=="function"?new Z(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=x0),this._buf[0]!==mc){let e=new Uint8Array(this._buf.byteLength+1);e.fill(mc,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===mc;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let o=t[i],s=n[i];if(o<s)return!0;if(o>s)return!1}return t.length<n.length}reverse(){return Z.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(hr).slice(1)}type(){return SD(this.baseNamespace())}name(){return DD(this.baseNamespace())}instance(e){return new Z(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(hr)||(e+=hr),e+=this.type(),new Z(e)}parent(){let e=this.list();return e.length===1?new Z(hr):new Z(e.slice(0,-1).join(hr))}child(e){return this.toString()===hr?e:e.toString()===hr?this:new Z(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Z.withNamespaces([...this.namespaces(),...AD(e.map(t=>t.namespaces()))])}};function SD(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function DD(r){let e=r.split(":");return e[e.length-1]}function AD(r){return[].concat(...r)}a();var v0="SHARDING",_0="_README";a();a();var D0=v(as(),1),gc=(r,e)=>async function*(){yield*(await(0,D0.default)(r)).sort(e)}();var Xl=v($n(),1),jn=v(Fn(),1),Zl=v(cs(),1),It=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:n,value:i}of e)await this.put(n,i,t),yield{key:n,value:i}}async*getMany(e,t={}){for await(let n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(let n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(n,i){e.push({key:n,value:i})},delete(n){t.push(n)},commit:async n=>{await(0,Xl.default)(this.putMany(e,n)),e=[],await(0,Xl.default)(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(e.prefix!=null&&(n=(0,jn.default)(n,i=>i.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,jn.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>gc(i,o),n)),e.offset!=null){let i=0;n=(0,jn.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,Zl.default)(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(e.prefix!=null&&(n=(0,jn.default)(n,i=>i.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,jn.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>gc(i,o),n)),e.offset!=null){let i=0;n=(0,jn.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,Zl.default)(n,e.limit)),n}};a();var Xr=class extends It{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,t){this.data[e.toString()]=t}async get(e){if(!await this.has(e))throw qt();return this.data[e.toString()]}async has(e){return this.data[e.toString()]!==void 0}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map(([e,t])=>({key:new Z(e),value:t}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>new Z(e))}};a();var OD=v(Vi(),1);a();a();var a5=new Z(v0),c5=new Z(_0);a();var BD=v(Fn(),1),LD=v(cs(),1),RD=v(hc(),1);a();a();var Wt=v(at(),1);Re();xe();Ti();Wt.default.formatters.b=r=>r==null?"undefined":z.baseEncode(r);Wt.default.formatters.t=r=>r==null?"undefined":I.baseEncode(r);Wt.default.formatters.m=r=>r==null?"undefined":Pr.baseEncode(r);Wt.default.formatters.p=r=>r==null?"undefined":r.toString();Wt.default.formatters.c=r=>r==null?"undefined":r.toString();Wt.default.formatters.k=r=>r==null?"undefined":r.toString();function C0(r){return Object.assign((0,Wt.default)(r),{error:(0,Wt.default)(`${r}:error`),trace:(0,Wt.default)(`${r}:trace`)})}a();a();var ND=v($n(),1),k5=C0("datastore:core:tiered");a();var Is=v(Fn(),1),KE=v(Vi(),1),Kh=v(cs(),1),Wh=v(k0(),1),WE=v(VE(),1),un=class extends It{constructor(e,t={}){super(),this.db=typeof e=="string"?new WE.Level(e,{...t,keyEncoding:"utf8",valueEncoding:"view"}):e,this.opts={createIfMissing:!0,compression:!1,...t}}async open(){try{await this.db.open(this.opts)}catch(e){throw ft.dbOpenFailedError(e)}}async put(e,t){try{await this.db.put(e.toString(),t)}catch(n){throw ft.dbWriteFailedError(n)}}async get(e){let t;try{t=await this.db.get(e.toString())}catch(n){throw n.notFound?ft.notFoundError(n):ft.dbWriteFailedError(n)}return t}async has(e){try{await this.db.get(e.toString())}catch(t){if(t.notFound)return!1;throw t}return!0}async delete(e){try{await this.db.del(e.toString())}catch(t){throw ft.dbDeleteFailedError(t)}}close(){return this.db&&this.db.close()}batch(){let e=[];return{put:(t,n)=>{e.push({type:"put",key:t.toString(),value:n})},delete:t=>{e.push({type:"del",key:t.toString()})},commit:()=>this.db.batch(e)}}query(e){let t=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(t=e.filters.reduce((o,s)=>(0,Is.default)(o,s),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((o,s)=>(0,Wh.default)(o,s),t));let{offset:n,limit:i}=e;if(n){let o=0;t=(0,Is.default)(t,()=>o++>=n)}return i&&(t=(0,Kh.default)(t,i)),t}queryKeys(e){let t=(0,KE.default)(this._query({values:!1,prefix:e.prefix}),({key:o})=>o);Array.isArray(e.filters)&&(t=e.filters.reduce((o,s)=>(0,Is.default)(o,s),t)),Array.isArray(e.orders)&&(t=e.orders.reduce((o,s)=>(0,Wh.default)(o,s),t));let{offset:n,limit:i}=e;if(n){let o=0;t=(0,Is.default)(t,()=>o++>=n)}return i&&(t=(0,Kh.default)(t,i)),t}_query(e){let t={keys:!0,keyEncoding:"buffer",values:e.values};if(e.prefix!=null){let i=e.prefix.toString();t.gte=i,t.lt=i+"\xFF"}let n=this.db.iterator(t);if(n[Symbol.asyncIterator])return q3(n);if(n.next!=null&&n.end!=null)return V3(n);throw new Error("Level returned incompatible iterator")}};async function*q3(r){for await(let[e,t]of r)yield{key:new ye(e,!1),value:t};await r.close()}function V3(r){return{[Symbol.asyncIterator](){return{next:()=>new Promise((e,t)=>{r.next((n,i,o)=>{if(n)return t(n);if(i==null)return r.end(s=>{if(s)return t(s);e({done:!0,value:void 0})});e({done:!1,value:{key:new ye(i,!1),value:o}})})}),return:()=>new Promise((e,t)=>{r.end(n=>{if(n)return t(n);e({done:!0,value:void 0})})})}}}}a();var Qh=v($n(),1);a();a();var Kc=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},io=class{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new Kc(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let t=this.head;this.head=t.next=new Kc(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function Hh(r={}){return K3(t=>{let n=t.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},r)}function K3(r,e){e=e??{};let t=e.onEnd,n=new io,i,o,s,c=async()=>n.isEmpty()?s?{done:!0}:await new Promise((y,k)=>{o=$=>{o=null,n.push($);try{y(r(n))}catch(re){k(re)}return i}}):r(n),u=y=>o!=null?o(y):(n.push(y),i),f=y=>(n=new io,o!=null?o({error:y}):(n.push({error:y}),i)),l=y=>{if(s)return i;if(e?.objectMode!==!0&&y?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return u({done:!1,value:y})},h=y=>s?i:(s=!0,y!=null?f(y):u({done:!0})),p=()=>(n=new io,h(),{done:!0}),w=y=>(h(y),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:c,return:p,throw:w,push:l,end:h,get readableLength(){return n.size}},t==null)return i;let g=i;return i={[Symbol.asyncIterator](){return this},next(){return g.next()},throw(y){return g.throw(y),t!=null&&(t(y),t=void 0),{done:!0}},return(){return g.return(),t!=null&&(t(),t=void 0),{done:!0}},push:l,end(y){return g.end(y),t!=null&&(t(y),t=void 0),i},get readableLength(){return g.readableLength}},i}a();H();we();var Er="/",HE=new TextEncoder().encode(Er),Wc=HE[0],Ae=class{constructor(e,t){if(typeof e=="string")this._buf=N(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Wc)throw new Error("Invalid key")}toString(e="utf8"){return T(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Ae(e.join(Er))}static random(){return new Ae(ct().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Ae(e):typeof e.uint8Array=="function"?new Ae(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=HE),this._buf[0]!==Wc){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Wc,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Wc;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let o=t[i],s=n[i];if(o<s)return!0;if(o>s)return!1}return t.length<n.length}reverse(){return Ae.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Er).slice(1)}type(){return W3(this.baseNamespace())}name(){return H3(this.baseNamespace())}instance(e){return new Ae(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Er)||(e+=Er),e+=this.type(),new Ae(e)}parent(){let e=this.list();return e.length===1?new Ae(Er):new Ae(e.slice(0,-1).join(Er))}child(e){return this.toString()===Er?e:e.toString()===Er?this:new Ae(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Ae.withNamespaces([...this.namespaces(),...G3(e.map(t=>t.namespaces()))])}};function W3(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function H3(r){let e=r.split(":");return e[e.length-1]}function G3(r){return[].concat(...r)}q();or();Ee();xe();Re();var QE=v(ve(),1);a();var Gh=v($n(),1),ri=v(Fn(),1),Jh=v(cs(),1),JE=v(as(),1),GE=(r,e)=>async function*(){yield*(await(0,JE.default)(r)).sort(e)}(),oo=class{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(let{key:n,value:i}of e)await this.put(n,i,t),yield{key:n,value:i}}async*getMany(e,t={}){for await(let n of e)yield this.get(n,t)}async*deleteMany(e,t={}){for await(let n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(n,i){e.push({key:n,value:i})},delete(n){t.push(n)},commit:async n=>{await(0,Gh.default)(this.putMany(e,n)),e=[],await(0,Gh.default)(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(e.prefix!=null&&(n=(0,ri.default)(n,i=>i.key.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,ri.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>GE(i,o),n)),e.offset!=null){let i=0;n=(0,ri.default)(n,()=>i++>=(e.offset||0))}return e.limit!=null&&(n=(0,Jh.default)(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(e.prefix!=null&&(n=(0,ri.default)(n,i=>i.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(n=e.filters.reduce((i,o)=>(0,ri.default)(i,o),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((i,o)=>GE(i,o),n)),e.offset!=null){let i=0;n=(0,ri.default)(n,()=>i++>=e.offset)}return e.limit!=null&&(n=(0,Jh.default)(n,e.limit)),n}};function so(r){let e=x.asCID(r);if(!e)throw(0,QE.default)(new Error("Not a valid cid"),"ERR_INVALID_CID");return new Ae("/"+I.encode(e.multihash.bytes).slice(1).toUpperCase(),!1)}function fn(r){return x.createV1(ot,G(I.decode("b"+r.toString().slice(1).toLowerCase())))}function Yh(r){let e=r.substring(0,1);if(e==="/")return Yh(r.substring(1));let t;e.toLowerCase()==="b"?t=o=>I.decode(o.toLowerCase()).subarray(2):e.toLowerCase()==="c"?t=o=>Qu.decode(o.toLowerCase()).subarray(2):e==="z"?t=o=>z.decode(o).subarray(2):e==="Q"?t=o=>z.decode("z"+o):t=o=>I.decode("b"+o.toLowerCase()).subarray(2);let n;for(let o=1;o<r.length;o++)try{n=t(r.substring(0,o))}catch(s){if(s.message!=="Unexpected end of data")throw s}let i="/C";return n&&(i=`/${I.encode(n).slice(1,-1).toUpperCase()||"C"}`),i}function J3(r){return{...r,prefix:r.prefix?Yh(r.prefix):void 0,filters:r.filters?r.filters.map(e=>t=>e({key:fn(t.key),value:t.value})):void 0,orders:r.orders?r.orders.map(e=>(t,n)=>e({key:fn(t.key),value:t.value},{key:fn(n.key),value:n.value})):void 0}}function Q3(r){return{...r,prefix:r.prefix?Yh(r.prefix):void 0,filters:r.filters?r.filters.map(e=>t=>e(fn(t))):void 0,orders:r.orders?r.orders.map(e=>(t,n)=>e(fn(t),fn(n))):void 0}}var Hc=class extends oo{constructor(e){super(),this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,t){for await(let{key:n,value:i}of this.child.query(J3(e),t))yield{key:fn(n),value:i}}async*queryKeys(e,t){for await(let n of this.child.queryKeys(Q3(e),t))yield fn(n)}async get(e,t){return this.child.get(so(e),t)}async*getMany(e,t){for await(let n of e)yield this.get(n,t)}async put(e,t,n){await this.child.put(so(e),t,n)}async*putMany(e,t){let n=Hh({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{let o=this.child;await(0,Qh.default)(this.child.putMany(async function*(){for await(let s of e){let c=so(s.key);await o.has(c,t)||(yield{key:c,value:s.value}),n.push(s)}}())),n.end()}catch(o){n.end(o)}}),yield*n}has(e,t){return this.child.has(so(e),t)}delete(e,t){return this.child.delete(so(e),t)}deleteMany(e,t){let n=Hh({objectMode:!0});return(0,Qh.default)(this.child.deleteMany(async function*(){for await(let i of e)yield so(i),n.push(i);n.end()}(),t)).catch(i=>{n.end(i)}),n}};function YE(r,e,t){let n=t.path||"ipfs";return pc(n,i=>e.getCodec(i),{root:new un(n,{prefix:"",version:2}),blocks:new Hc(new un(`${n}/blocks`,{prefix:"",version:2})),datastore:new un(`${n}/datastore`,{prefix:"",version:2}),keys:new un(`${n}/keys`,{prefix:"",version:2}),pins:new un(`${n}/pins`,{prefix:"",version:2})},{autoMigrate:t.autoMigrate,onMigrationProgress:t.onMigrationProgress||r,repoLock:uc})}a();a();q();a();var u1=v(i1(),1),f1=v(s1(),1);a();var Z3=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;L.nanosecond=L.ns=1/1e6;L.\u00B5s=L.\u03BCs=L.us=L.microsecond=1/1e3;L.millisecond=L.ms=L[""]=1;L.second=L.sec=L.s=L.ms*1e3;L.minute=L.min=L.m=L.s*60;L.hour=L.hr=L.h=L.m*60;L.day=L.d=L.h*24;L.week=L.wk=L.w=L.d*7;L.month=L.b=L.d*(365.25/12);L.year=L.yr=L.y=L.d*365.25;function L(r="",e="ms"){var t=null;return r=(r+"").replace(/(\d)[,_](\d)/g,"$1$2"),r.replace(Z3,function(n,i,o){o=a1(o),o&&(t=(t||0)+parseFloat(i,10)*o)}),t&&t/(a1(e)||1)}function a1(r){return L[r]||L[r.toLowerCase().replace(/s$/,"")]}var c1=L;a();var xr=class extends Error{constructor(e="request timed out"){super(e),this.name="TimeoutError",this.code=xr.code}};xr.code="ERR_TIMEOUT";function yt(r,e){return(...t)=>{let n=t[e??t.length-1];if(!n||!n.timeout)return r(...t);let i=typeof n.timeout=="string"?c1(n.timeout):n.timeout,o=new u1.TimeoutController(i);n.signal=(0,f1.anySignal)([n.signal,o.signal]);let s=r(...t),c=new Promise((l,h)=>{o.signal.addEventListener("abort",()=>{h(new xr)})}),u=Date.now(),f=()=>{if(o.signal.aborted)throw new xr;if(Date.now()-u>i)throw o.abort(),new xr};return s[Symbol.asyncIterator]?async function*(){let l=s[Symbol.asyncIterator]();try{for(;;){let{value:h,done:p}=await Promise.race([l.next(),c]);if(p)break;f(),yield h}}catch(h){throw f(),h}finally{o.clear(),l.return&&l.return()}}():(async()=>{try{let l=await Promise.race([s,c]);return f(),l}catch(l){throw f(),l}finally{o.clear()}})()}}a();var Qt=v(at(),1);Re();xe();Ti();Qt.default.formatters.b=r=>r==null?"undefined":z.baseEncode(r);Qt.default.formatters.t=r=>r==null?"undefined":I.baseEncode(r);Qt.default.formatters.m=r=>r==null?"undefined":Pr.baseEncode(r);Qt.default.formatters.p=r=>r==null?"undefined":r.toString();Qt.default.formatters.c=r=>r==null?"undefined":r.toString();Qt.default.formatters.k=r=>r==null?"undefined":r.toString();function Jc(r){return Object.assign((0,Qt.default)(r),{error:(0,Qt.default)(`${r}:error`),trace:(0,Qt.default)(`${r}:trace`)})}or();vf();a();Re();var ed=async({cid:r,load:e,seen:t})=>{t=t||new Set;let n=r.toString(z);if(t.has(n))return;let i=await e(r);if(t.add(n),i!==null)for(let[,o]of i.links())await ed({cid:o,load:e,seen:t})};var l1=Jc("ipfs:components:dag:import"),eA=[ot,xf];function h1({repo:r,preload:e,codecs:t}){async function*n(i,o={}){o.preload!==!1&&e(i);let s=x.asCID(i);if(!s)throw new Error(`Unexpected error converting CID type: ${i}`);l1(`Exporting ${s} as car`);let{writer:c,out:u}=await Nr.create([s]),f=null;(async()=>{try{let l=tA(r,c,{signal:o.signal,timeout:o.timeout},t);await ed({cid:s,load:l})}catch(l){f=l}finally{c.close()}})();for await(let l of u){if(f)break;yield l}if(f)throw f}return yt(n)}function tA(r,e,t,n){return async i=>{let o=await n.getCodec(i.code);if(!o)throw new Error(`Can't decode links in block with codec 0x${i.code.toString(16)} to form complete DAG`);let s=await r.blocks.get(i,t);return l1(`Adding block ${i} to car`),await e.put({cid:i,bytes:s}),eA.includes(i.code)?null:_n({bytes:s,cid:i,codec:o})}}a();var ax=v(Ol(),1),cx=v(p1(),1);a();a();Re();xe();Ee();a();a();a();a();a();a();var y1="[a-fA-F\\d:]",ln=r=>r&&r.includeBoundaries?`(?:(?<=\\s|^)(?=${y1})|(?<=${y1})(?=\\s|$))`:"",Lt="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",ce="[a-fA-F\\d]{1,4}",Qc=`
(?:
(?:${ce}:){7}(?:${ce}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${ce}:){6}(?:${Lt}|:${ce}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${ce}:){5}(?::${Lt}|(?::${ce}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${ce}:){4}(?:(?::${ce}){0,1}:${Lt}|(?::${ce}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${ce}:){3}(?:(?::${ce}){0,2}:${Lt}|(?::${ce}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${ce}:){2}(?:(?::${ce}){0,3}:${Lt}|(?::${ce}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${ce}:){1}(?:(?::${ce}){0,4}:${Lt}|(?::${ce}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${ce}){0,5}:${Lt}|(?::${ce}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),nA=new RegExp(`(?:^${Lt}$)|(?:^${Qc}$)`),iA=new RegExp(`^${Lt}$`),oA=new RegExp(`^${Qc}$`),td=r=>r&&r.exact?nA:new RegExp(`(?:${ln(r)}${Lt}${ln(r)})|(?:${ln(r)}${Qc}${ln(r)})`,"g");td.v4=r=>r&&r.exact?iA:new RegExp(`${ln(r)}${Lt}${ln(r)}`,"g");td.v6=r=>r&&r.exact?oA:new RegExp(`${ln(r)}${Qc}${ln(r)}`,"g");var Yc=td;a();a();function rd(r){let e=(...t)=>r(...t);return Object.defineProperty(e,"name",{value:`functionTimeout(${r.name||"<anonymous>"})`,configurable:!0}),e}function m1(){return!1}a();a();a();var{toString:sA}=Object.prototype;function nd(r){return sA.call(r)==="[object RegExp]"}var g1={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function id(r,e={}){if(!nd(r))throw new TypeError("Expected a RegExp instance");let t=Object.keys(g1).map(i=>(typeof e[i]=="boolean"?e[i]:r[i])?g1[i]:"").join(""),n=new RegExp(e.source||r.source,t);return n.lastIndex=typeof e.lastIndex=="number"?e.lastIndex:r.lastIndex,n}function Xc(r,e,{timeout:t}={}){try{return rd(()=>id(r).test(e),{timeout:t})()}catch(n){if(m1(n))return!1;throw n}}var aA=15,w1=45,od={timeout:400};function hn(r){return Xc(Yc({exact:!0}),r.slice(0,w1),od)}function Zc(r){return Xc(Yc.v6({exact:!0}),r.slice(0,w1),od)}function eu(r){return Xc(Yc.v4({exact:!0}),r.slice(0,aA),od)}H();var b1=eu,cA=Zc,sd=function(r){let e=0;if(r=r.toString().trim(),b1(r)){let t=new Uint8Array(e+4);return r.split(/\./g).forEach(n=>{t[e++]=parseInt(n,10)&255}),t}if(cA(r)){let t=r.split(":",8),n;for(n=0;n<t.length;n++){let o=b1(t[n]),s;o&&(s=sd(t[n]),t[n]=T(s.slice(0,2),"base16")),s!=null&&++n<8&&t.splice(n,0,T(s.slice(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);let o=[n,1];for(n=9-t.length;n>0;n--)o.push("0");t.splice.apply(t,o)}let i=new Uint8Array(e+16);for(n=0;n<t.length;n++){let o=parseInt(t[n],16);i[e++]=o>>8&255,i[e++]=o&255}return i}throw new Error("invalid ip address")},E1=function(r,e=0,t){e=~~e,t=t??r.length-e;let n=new DataView(r.buffer);if(t===4){let i=[];for(let o=0;o<t;o++)i.push(r[e+o]);return i.join(".")}if(t===16){let i=[];for(let o=0;o<t;o+=2)i.push(n.getUint16(e+o).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};a();var Os={},ad={},fA=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];fA.forEach(r=>{let e=lA(...r);ad[e.code]=e,Os[e.name]=e});function lA(r,e,t,n,i){return{code:r,size:e,name:t,resolvable:Boolean(n),path:Boolean(i)}}function ue(r){if(typeof r=="number"){if(ad[r]!=null)return ad[r];throw new Error(`no protocol with code: ${r}`)}else if(typeof r=="string"){if(Os[r]!=null)return Os[r];throw new Error(`no protocol with name: ${r}`)}throw new Error(`invalid protocol id type: ${typeof r}`)}q();xe();Re();ko();Ee();var Yt=v(Be(),1);H();we();jr();function _1(r,e){switch(ue(r).code){case 4:case 41:return dA(e);case 6:case 273:case 33:case 132:return D1(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return yA(e);case 421:return bA(e);case 444:return v1(e);case 445:return v1(e);case 466:return wA(e);default:return T(e,"base16")}}function S1(r,e){switch(ue(r).code){case 4:return x1(e);case 41:return x1(e);case 6:case 273:case 33:case 132:return ud(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return pA(e);case 421:return mA(e);case 444:return EA(e);case 445:return xA(e);case 466:return gA(e);default:return N(e,"base16")}}var cd=Object.values(An).map(r=>r.decoder),hA=function(){let r=cd[0].or(cd[1]);return cd.slice(2).forEach(e=>r=r.or(e)),r}();function x1(r){if(!hn(r))throw new Error("invalid ip address");return sd(r)}function dA(r){let e=E1(r,0,r.length);if(e==null)throw new Error("ipBuff is required");if(!hn(e))throw new Error("invalid ip address");return e}function ud(r){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function D1(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function pA(r){let e=N(r),t=Uint8Array.from(Yt.default.encode(e.length));return Y([t,e],t.length+e.length)}function yA(r){let e=Yt.default.decode(r);if(r=r.slice(Yt.default.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return T(r)}function mA(r){let e;r[0]==="Q"||r[0]==="1"?e=G(z.decode(`z${r}`)).bytes:e=x.parse(r).multihash.bytes;let t=Uint8Array.from(Yt.default.encode(e.length));return Y([t,e],t.length+e.length)}function gA(r){let e=hA.decode(r),t=Uint8Array.from(Yt.default.encode(e.length));return Y([t,e],t.length+e.length)}function wA(r){let e=Yt.default.decode(r),t=r.slice(Yt.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return"u"+T(t,"base64url")}function bA(r){let e=Yt.default.decode(r),t=r.slice(Yt.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return T(t,"base58btc")}function EA(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let t=I.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=ud(n);return Y([t,i],t.length+i.length)}function xA(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let t=I.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=ud(n);return Y([t,i],t.length+i.length)}function v1(r){let e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=T(e,"base32"),i=D1(t);return`${n}:${i}`}var ao=v(Be(),1);jr();H();function vA(r){let e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){let i=t[n],o=ue(i);if(o.size===0){e.push([i]);continue}if(n++,n>=t.length)throw T1("invalid address: "+r);if(o.path===!0){e.push([i,pd(t.slice(n).join("/"))]);break}e.push([i,t[n]])}return e}function _A(r){let e=[];return r.map(t=>{let n=nu(t);return e.push(n.name),t.length>1&&t[1]!=null&&e.push(t[1]),null}),pd(e.join("/"))}function SA(r){return r.map(e=>{Array.isArray(e)||(e=[e]);let t=nu(e);return e.length>1?[t.code,S1(t.code,e[1])]:[t.code]})}function fd(r){return r.map(e=>{let t=nu(e);return e[1]!=null?[t.code,_1(t.code,e[1])]:[t.code]})}function ld(r){return ru(Y(r.map(e=>{let t=nu(e),n=Uint8Array.from(ao.default.encode(t.code));return e.length>1&&e[1]!=null&&(n=Y([n,e[1]])),n})))}function hd(r,e){return r.size>0?r.size/8:r.size===0?0:ao.default.decode(e)+ao.default.decode.bytes}function tu(r){let e=[],t=0;for(;t<r.length;){let n=ao.default.decode(r,t),i=ao.default.decode.bytes,o=ue(n),s=hd(o,r.slice(t+i));if(s===0){e.push([n]),t+=i;continue}let c=r.slice(t+i,t+i+s);if(t+=s+i,t>r.length)throw T1("Invalid address Uint8Array: "+T(r,"base16"));e.push([n,c])}return e}function dd(r){let e=tu(r),t=fd(e);return _A(t)}function DA(r){r=pd(r);let e=vA(r),t=SA(e);return ld(t)}function A1(r){return DA(r)}function ru(r){let e=AA(r);if(e!=null)throw e;return Uint8Array.from(r)}function AA(r){try{tu(r)}catch(e){return e}}function pd(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function T1(r){return new Error("Error parsing address: "+r)}function nu(r){return ue(r[0])}var yd=v(Be(),1);q();Re();var k1=v(ve(),1);H();Va();var C1,CA=Symbol.for("nodejs.util.inspect.custom"),I1=[ue("dns").code,ue("dns4").code,ue("dns6").code,ue("dnsaddr").code],IA=[ue("p2p").code,ue("ipfs").code],kA=new Map,O1=Symbol.for("@multiformats/js-multiaddr/multiaddr");function OA(r){return Boolean(r?.[O1])}var dn=class{constructor(e){if(this[C1]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=ru(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=A1(e)}else if(OA(e))this.bytes=ru(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return this._string==null&&(this._string=dd(this.bytes)),this._string}toJSON(){return this.toString()}toOptions(){let e=this.protoCodes(),t=this.toString().split("/").slice(1),n,i;if(t.length>2)I1.includes(e[0])&&IA.includes(e[1])?(n=ue("tcp").name,i=443):(n=ue(t[2]).name,i=parseInt(t[3]));else if(I1.includes(e[0]))n=ue("tcp").name,i=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e[0]===41||e[0]===55?6:4,host:t[1],transport:n,port:i}}protos(){return this.protoCodes().map(e=>Object.assign({},ue(e)))}protoCodes(){let e=[],t=this.bytes,n=0;for(;n<t.length;){let i=yd.default.decode(t,n),o=yd.default.decode.bytes,s=ue(i);n+=hd(s,t.slice(n+o))+o,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return this._tuples==null&&(this._tuples=tu(this.bytes)),this._tuples}stringTuples(){return this._stringTuples==null&&(this._stringTuples=fd(this.tuples())),this._stringTuples}encapsulate(e){return e=new dn(e),new dn(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),n=this.toString(),i=n.lastIndexOf(t);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new dn(n.slice(0,i))}decapsulateCode(e){let t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new dn(ld(t.slice(0,n)));return this}getPeerId(){try{let t=this.stringTuples().filter(n=>n[0]===Os.ipfs.code).pop();if(t?.[1]!=null){let n=t[1];return n[0]==="Q"||n[0]==="1"?T(z.decode(`z${n}`),"base58btc"):T(x.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>ue(t[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return Ko(this.bytes,e.bytes)}async resolve(e){let t=this.protos().find(o=>o.resolvable);if(t==null)return[this];let n=kA.get(t.name);if(n==null)throw(0,k1.default)(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(o=>new dn(o))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let t=(e??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(C1=O1,CA)](){return this.inspect()}inspect(){return"<Multiaddr "+T(this.bytes,"base16")+" - "+dd(this.bytes)+">"}};a();a();a();a();a();H();var B1=eu,BA=Zc,md=function(r){let e=0;if(r=r.toString().trim(),B1(r)){let t=new Uint8Array(e+4);return r.split(/\./g).forEach(n=>{t[e++]=parseInt(n,10)&255}),t}if(BA(r)){let t=r.split(":",8),n;for(n=0;n<t.length;n++){let o=B1(t[n]),s;o&&(s=md(t[n]),t[n]=T(s.slice(0,2),"base16")),s!=null&&++n<8&&t.splice(n,0,T(s.slice(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);let o=[n,1];for(n=9-t.length;n>0;n--)o.push("0");t.splice.apply(t,o)}let i=new Uint8Array(e+16);for(n=0;n<t.length;n++){let o=parseInt(t[n],16);i[e++]=o>>8&255,i[e++]=o&255}return i}throw new Error("invalid ip address")},L1=function(r,e=0,t){e=~~e,t=t??r.length-e;let n=new DataView(r.buffer);if(t===4){let i=[];for(let o=0;o<t;o++)i.push(r[e+o]);return i.join(".")}if(t===16){let i=[];for(let o=0;o<t;o+=2)i.push(n.getUint16(e+o).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};a();var Bs={},gd={},RA=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];RA.forEach(r=>{let e=NA(...r);gd[e.code]=e,Bs[e.name]=e});function NA(r,e,t,n,i){return{code:r,size:e,name:t,resolvable:Boolean(n),path:Boolean(i)}}function fe(r){if(typeof r=="number"){if(gd[r]!=null)return gd[r];throw new Error(`no protocol with code: ${r}`)}else if(typeof r=="string"){if(Bs[r]!=null)return Bs[r];throw new Error(`no protocol with name: ${r}`)}throw new Error(`invalid protocol id type: ${typeof r}`)}q();xe();Re();ko();Ee();var Xt=v(Be(),1);H();we();jr();function P1(r,e){switch(fe(r).code){case 4:case 41:return FA(e);case 6:case 273:case 33:case 132:return $1(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return UA(e);case 421:return qA(e);case 444:return N1(e);case 445:return N1(e);case 466:return zA(e);default:return T(e,"base16")}}function F1(r,e){switch(fe(r).code){case 4:return R1(e);case 41:return R1(e);case 6:case 273:case 33:case 132:return bd(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return $A(e);case 421:return MA(e);case 444:return VA(e);case 445:return KA(e);case 466:return jA(e);default:return N(e,"base16")}}var wd=Object.values(An).map(r=>r.decoder),PA=function(){let r=wd[0].or(wd[1]);return wd.slice(2).forEach(e=>r=r.or(e)),r}();function R1(r){if(!hn(r))throw new Error("invalid ip address");return md(r)}function FA(r){let e=L1(r,0,r.length);if(e==null)throw new Error("ipBuff is required");if(!hn(e))throw new Error("invalid ip address");return e}function bd(r){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function $1(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function $A(r){let e=N(r),t=Uint8Array.from(Xt.default.encode(e.length));return Y([t,e],t.length+e.length)}function UA(r){let e=Xt.default.decode(r);if(r=r.slice(Xt.default.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return T(r)}function MA(r){let e;r[0]==="Q"||r[0]==="1"?e=G(z.decode(`z${r}`)).bytes:e=x.parse(r).multihash.bytes;let t=Uint8Array.from(Xt.default.encode(e.length));return Y([t,e],t.length+e.length)}function jA(r){let e=PA.decode(r),t=Uint8Array.from(Xt.default.encode(e.length));return Y([t,e],t.length+e.length)}function zA(r){let e=Xt.default.decode(r),t=r.slice(Xt.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return"u"+T(t,"base64url")}function qA(r){let e=Xt.default.decode(r),t=r.slice(Xt.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return T(t,"base58btc")}function VA(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let t=I.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=bd(n);return Y([t,i],t.length+i.length)}function KA(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let t=I.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=bd(n);return Y([t,i],t.length+i.length)}function N1(r){let e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=T(e,"base32"),i=$1(t);return`${n}:${i}`}var co=v(Be(),1);jr();H();function WA(r){let e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){let i=t[n],o=fe(i);if(o.size===0){e.push([i]);continue}if(n++,n>=t.length)throw M1("invalid address: "+r);if(o.path===!0){e.push([i,Sd(t.slice(n).join("/"))]);break}e.push([i,t[n]])}return e}function HA(r){let e=[];return r.map(t=>{let n=su(t);return e.push(n.name),t.length>1&&t[1]!=null&&e.push(t[1]),null}),Sd(e.join("/"))}function GA(r){return r.map(e=>{Array.isArray(e)||(e=[e]);let t=su(e);return e.length>1?[t.code,F1(t.code,e[1])]:[t.code]})}function Ed(r){return r.map(e=>{let t=su(e);return e[1]!=null?[t.code,P1(t.code,e[1])]:[t.code]})}function xd(r){return ou(Y(r.map(e=>{let t=su(e),n=Uint8Array.from(co.default.encode(t.code));return e.length>1&&e[1]!=null&&(n=Y([n,e[1]])),n})))}function vd(r,e){return r.size>0?r.size/8:r.size===0?0:co.default.decode(e)+co.default.decode.bytes}function iu(r){let e=[],t=0;for(;t<r.length;){let n=co.default.decode(r,t),i=co.default.decode.bytes,o=fe(n),s=vd(o,r.slice(t+i));if(s===0){e.push([n]),t+=i;continue}let c=r.slice(t+i,t+i+s);if(t+=s+i,t>r.length)throw M1("Invalid address Uint8Array: "+T(r,"base16"));e.push([n,c])}return e}function _d(r){let e=iu(r),t=Ed(e);return HA(t)}function JA(r){r=Sd(r);let e=WA(r),t=GA(e);return xd(t)}function U1(r){return JA(r)}function ou(r){let e=QA(r);if(e!=null)throw e;return Uint8Array.from(r)}function QA(r){try{iu(r)}catch(e){return e}}function Sd(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function M1(r){return new Error("Error parsing address: "+r)}function su(r){return fe(r[0])}var Dd=v(Be(),1);q();Re();var q1=v(ve(),1);H();Va();var j1,XA=Symbol.for("nodejs.util.inspect.custom"),z1=[fe("dns").code,fe("dns4").code,fe("dns6").code,fe("dnsaddr").code],ZA=[fe("p2p").code,fe("ipfs").code],eT=new Map,V1=Symbol.for("@multiformats/js-multiaddr/multiaddr");function tT(r){return Boolean(r?.[V1])}var vr=class{constructor(e){if(this[j1]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=ou(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=U1(e)}else if(tT(e))this.bytes=ou(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return this._string==null&&(this._string=_d(this.bytes)),this._string}toJSON(){return this.toString()}toOptions(){let e=this.protoCodes(),t=this.toString().split("/").slice(1),n,i;if(t.length>2)z1.includes(e[0])&&ZA.includes(e[1])?(n=fe("tcp").name,i=443):(n=fe(t[2]).name,i=parseInt(t[3]));else if(z1.includes(e[0]))n=fe("tcp").name,i=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e[0]===41||e[0]===55?6:4,host:t[1],transport:n,port:i}}protos(){return this.protoCodes().map(e=>Object.assign({},fe(e)))}protoCodes(){let e=[],t=this.bytes,n=0;for(;n<t.length;){let i=Dd.default.decode(t,n),o=Dd.default.decode.bytes,s=fe(i);n+=vd(s,t.slice(n+o))+o,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return this._tuples==null&&(this._tuples=iu(this.bytes)),this._tuples}stringTuples(){return this._stringTuples==null&&(this._stringTuples=Ed(this.tuples())),this._stringTuples}encapsulate(e){return e=new vr(e),new vr(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),n=this.toString(),i=n.lastIndexOf(t);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new vr(n.slice(0,i))}decapsulateCode(e){let t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new vr(xd(t.slice(0,n)));return this}getPeerId(){try{let t=this.stringTuples().filter(n=>n[0]===Bs.ipfs.code).pop();if(t?.[1]!=null){let n=t[1];return n[0]==="Q"||n[0]==="1"?T(z.decode(`z${n}`),"base58btc"):T(x.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>fe(t[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return Ko(this.bytes,e.bytes)}async resolve(e){let t=this.protos().find(o=>o.resolvable);if(t==null)return[this];let n=eT.get(t.name);if(n==null)throw(0,q1.default)(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(o=>new vr(o))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let t=(e??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(j1=V1,XA)](){return this.inspect()}inspect(){return"<Multiaddr "+T(this.bytes,"base16")+" - "+_d(this.bytes)+">"}};function Ad(r){return new vr(r)}var rT=C("dns4"),nT=C("dns6"),iT=C("dnsaddr"),uo=Te(C("dns"),iT,rT,nT),au=Te(C("ip4"),C("ip6")),Fs=Te(B(au,C("tcp")),B(uo,C("tcp"))),W1=B(au,C("udp")),oT=B(W1,C("utp")),sT=B(W1,C("quic")),Rs=Te(B(Fs,C("ws")),B(uo,C("ws"))),Ns=Te(B(Fs,C("wss")),B(uo,C("wss"))),Td=Te(B(Fs,C("http")),B(au,C("http")),B(uo,C("http"))),Cd=Te(B(Fs,C("https")),B(au,C("https")),B(uo,C("https"))),H1=Te(B(Rs,C("p2p-webrtc-star"),C("p2p")),B(Ns,C("p2p-webrtc-star"),C("p2p")),B(Rs,C("p2p-webrtc-star")),B(Ns,C("p2p-webrtc-star"))),UM=Te(B(Rs,C("p2p-websocket-star"),C("p2p")),B(Ns,C("p2p-websocket-star"),C("p2p")),B(Rs,C("p2p-websocket-star")),B(Ns,C("p2p-websocket-star"))),G1=Te(B(Td,C("p2p-webrtc-direct"),C("p2p")),B(Cd,C("p2p-webrtc-direct"),C("p2p")),B(Td,C("p2p-webrtc-direct")),B(Cd,C("p2p-webrtc-direct"))),Ps=Te(Rs,Ns,Td,Cd,H1,G1,Fs,oT,sT,uo),MM=Te(B(Ps,C("p2p-stardust"),C("p2p")),B(Ps,C("p2p-stardust"))),pn=Te(B(Ps,C("p2p")),H1,G1,C("p2p")),K1=Te(B(pn,C("p2p-circuit"),pn),B(pn,C("p2p-circuit")),B(C("p2p-circuit"),pn),B(Ps,C("p2p-circuit")),B(C("p2p-circuit"),Ps),C("p2p-circuit")),J1=()=>Te(B(K1,J1),K1),Ls=J1(),aT=Te(B(Ls,pn,Ls),B(pn,Ls),B(Ls,pn),Ls,pn);function Q1(r){function e(t){let n;try{n=Ad(t)}catch{return!1}let i=r(n.protoNames());return i===null?!1:i===!0||i===!1?i:i.length===0}return e}function B(...r){function e(t){if(t.length<r.length)return null;let n=t;return r.some(i=>(n=typeof i=="function"?i().partialMatch(t):i.partialMatch(t),Array.isArray(n)&&(t=n),n===null)),n}return{toString:function(){return"{ "+r.join(" ")+" }"},input:r,matches:Q1(e),partialMatch:e}}function Te(...r){function e(n){let i=null;return r.some(o=>{let s=typeof o=="function"?o().partialMatch(n):o.partialMatch(n);return s!=null?(i=s,!0):!1}),i}return{toString:function(){return"{ "+r.join(" ")+" }"},input:r,matches:Q1(e),partialMatch:e}}function C(r){let e=r;function t(i){let o;try{o=Ad(i)}catch{return!1}let s=o.protoNames();return s.length===1&&s[0]===e}function n(i){return i.length===0?null:i[0]===e?i.slice(1):null}return{toString:function(){return e},matches:t,partialMatch:n}}q();var wT=v(nx(),1);H();q();a();H();we();var _r="/",ix=new TextEncoder().encode(_r),cu=ix[0],Ce=class{constructor(e,t){if(typeof e=="string")this._buf=N(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==cu)throw new Error("Invalid key")}toString(e="utf8"){return T(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Ce(e.join(_r))}static random(){return new Ce(ct().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Ce(e):typeof e.uint8Array=="function"?new Ce(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=ix),this._buf[0]!==cu){let e=new Uint8Array(this._buf.byteLength+1);e.fill(cu,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===cu;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let o=t[i],s=n[i];if(o<s)return!0;if(o>s)return!1}return t.length<n.length}reverse(){return Ce.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(_r).slice(1)}type(){return ET(this.baseNamespace())}name(){return xT(this.baseNamespace())}instance(e){return new Ce(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(_r)||(e+=_r),e+=this.type(),new Ce(e)}parent(){let e=this.list();return e.length===1?new Ce(_r):new Ce(e.slice(0,-1).join(_r))}child(e){return this.toString()===_r?e:e.toString()===_r?this:new Ce(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Ce.withNamespaces([...this.namespaces(),...vT(e.map(t=>t.namespaces()))])}};function ET(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function xT(r){let e=r.split(":");return e[e.length-1]}function vT(r){return[].concat(...r)}var Bd=v(ve(),1);a();q();var Od=v(ve(),1),ox="/ipfs/";function uu(r){if(r instanceof Uint8Array)try{r=x.decode(r)}catch(i){throw(0,Od.default)(i,"ERR_INVALID_CID")}let e=x.asCID(r);if(e)return{cid:e,path:void 0};r=r.toString(),r.startsWith(ox)&&(r=r.substring(ox.length));let t=r.split("/"),n;try{e=x.parse(t.shift()||"")}catch(i){throw(0,Od.default)(i,"ERR_INVALID_CID")}return t.length&&(n=`/${t.join("/")}`),{cid:e,path:n}}var p7=new Ce("/local/filesroot");var sx=async function(r,e,t,n={}){let{cid:i,path:o}=uu(t);o&&(n.path=o);let s=i,c=n.path||"";if(c.startsWith("/")&&(c=c.substring(1)),n.path)try{for await(let{value:u,remainderPath:f}of fu(i,n.path,e,r,{signal:n.signal})){if(!x.asCID(u))break;c=f,s=u}}catch(u){throw u.message.startsWith("Object has no property")&&(u.message=`no link named "${c.split("/")[0]}" under ${s}`,u.code="ERR_NO_LINK"),u}return{cid:s,remainderPath:c||""}};var y7=yt(async(r,e)=>await r),fu=async function*(r,e,t,n,i){let o=async f=>{let l=await t.getCodec(f.code),h=await n.blocks.get(f,i);return l.decode(h)},s=e.split("/").filter(Boolean),c=await o(r),u=r;for(;s.length;){let f=s.shift();if(!f)throw(0,Bd.default)(new Error(`Could not resolve path "${e}"`),"ERR_INVALID_PATH");if(r.code===xt&&Array.isArray(c.Links)){let l=c.Links.find(h=>h.Name===f);if(l){yield{value:l.Hash,remainderPath:s.join("/")},c=await o(l.Hash),u=l.Hash;continue}}if(Object.prototype.hasOwnProperty.call(c,f))c=c[f],yield{value:c,remainderPath:s.join("/")};else throw(0,Bd.default)(new Error(`no link named "${f}" under ${u}`),"ERR_NO_LINK");x.asCID(c)&&(u=c,c=await o(c))}yield{value:c,remainderPath:""}};var ux=v(ve(),1);function fx({codecs:r,repo:e,preload:t}){return yt(async function(o,s={}){if(s.preload!==!1&&t(o),s.path){let h=s.localResolve?await(0,ax.default)(fu(o,s.path,r,e,s)):await(0,cx.default)(fu(o,s.path,r,e,s));if(!h)throw(0,ux.default)(new Error("Not found"),"ERR_NOT_FOUND");return h}let c=await r.getCodec(o.code),u=await e.blocks.get(o,s);return{value:c.decode(u),remainderPath:""}})}a();var dx=v(hx(),1),px=v($n(),1),yx=v(Vi(),1);var mx=Jc("ipfs:components:dag:import");function gx({repo:r}){async function*e(t,n={}){let i=await r.gcLock.readLock();try{let o={signal:n.signal,timeout:n.timeout},s=(0,dx.default)(t),{value:c,done:u}=await s.peek();if(u)return;c&&s.push(c);let f;c instanceof Uint8Array?f=[s]:f=s;for await(let l of f){let h=await ST(r,o,l);if(n.pinRoots!==!1)for(let p of h){let w="";try{await r.blocks.has(p)?(mx(`Pinning root ${p}`),await r.pins.pinRecursively(p)):w="blockstore: block not found"}catch(g){w=g.message}yield{root:{cid:p,pinErrorMsg:w}}}}}finally{i()}}return yt(e)}async function ST(r,e,t){let n=await Rr.fromIterable(t),i=await n.getRoots();return await(0,px.default)(r.blocks.putMany((0,yx.default)(n,({cid:o,bytes:s})=>(mx(`Import block ${o}`),{key:o,value:s})),{signal:e.signal})),i}a();q();function wx({repo:r,codecs:e,hashers:t,preload:n}){async function i(o,s={}){let c=s.pin?await r.gcLock.readLock():null;try{let u=await e.getCodec(s.storeCodec||"dag-cbor");if(!u)throw new Error(`Unknown storeCodec ${s.storeCodec}, please configure additional BlockCodecs for this IPFS instance`);if(s.inputCodec){if(!(o instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");let g=await e.getCodec(s.inputCodec);if(!g)throw new Error(`Unknown inputCodec ${s.inputCodec}, please configure additional BlockCodecs for this IPFS instance`);o=g.decode(o)}let f=s.version!=null?s.version:1,l=await t.getHasher(s.hashAlg||"sha2-256");if(!l)throw new Error(`Unknown hash algorithm ${s.hashAlg}, please configure additional MultihashHashers for this IPFS instance`);let h=u.encode(o),p=await l.digest(h),w=x.create(f,u.code,p);return await r.blocks.put(w,h,{signal:s.signal}),s.pin&&await r.pins.pinRecursively(w),s.preload!==!1&&n(w),w}finally{c&&c()}}return yt(i)}a();function bx({repo:r,codecs:e,preload:t}){async function n(i,o={}){let{cid:s}=uu(i);return o.preload!==!1&&t(s),sx(r,e,i,o)}return yt(n)}var lu=class{constructor({repo:e,codecs:t,hashers:n,preload:i}){this.export=h1({repo:e,preload:i,codecs:t}),this.get=fx({codecs:t,repo:e,preload:i}),this.import=gx({repo:e}),this.resolve=bx({repo:e,codecs:t,preload:i}),this.put=wx({repo:e,codecs:t,hashers:n,preload:i})}};or();_i();wa();ko();var $d={};W($d,{code:()=>LT,decode:()=>NT,encode:()=>RT,name:()=>BT});a();vn();Ti();a();a();var Ld=class extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){let t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===d.array&&(t.elements++,t.elements!==1&&e.push([44])),t.type===d.map&&(t.elements++,t.elements!==1&&(t.elements%2===1?e.push([44]):e.push([58]))))}[d.uint.major](e,t){this.prefix(e);let n=String(t.value),i=[];for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);e.push(i)}[d.negint.major](e,t){this[d.uint.major](e,t)}[d.bytes.major](e,t){throw new Error(`${rr} unsupported type: Uint8Array`)}[d.string.major](e,t){this.prefix(e);let n=Ks(JSON.stringify(t.value));e.push(n.length>32?po(n):n)}[d.array.major](e,t){this.prefix(e),this.inRecursive.push({type:d.array,elements:0}),e.push([91])}[d.map.major](e,t){this.prefix(e),this.inRecursive.push({type:d.map,elements:0}),e.push([123])}[d.tag.major](e,t){}[d.float.major](e,t){if(t.type.name==="break"){let s=this.inRecursive.pop();if(s){if(s.type===d.array)e.push([93]);else if(s.type===d.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(t.value===void 0)throw new Error(`${rr} unsupported type: undefined`);if(this.prefix(e),t.type.name==="true"){e.push([116,114,117,101]);return}else if(t.type.name==="false"){e.push([102,97,108,115,101]);return}else if(t.type.name==="null"){e.push([110,117,108,108]);return}let n=String(t.value),i=[],o=!1;for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s),!o&&(i[s]===46||i[s]===101||i[s]===69)&&(o=!0);o||(i.push(46),i.push(48)),e.push(i)}};function DT(r,e){if(Array.isArray(r[0])||Array.isArray(e[0]))throw new Error(`${rr} complex map keys are not supported`);let t=r[0],n=e[0];if(t.type!==d.string||n.type!==d.string)throw new Error(`${rr} non-string map keys are not supported`);if(t<n)return-1;if(t>n)return 1;throw new Error(`${rr} unexpected duplicate map keys, this is not supported`)}var AT={addBreakTokens:!0,mapSorter:DT};function Rd(r,e){return e=Object.assign({},AT,e),Fu(r,new Ld,e)}a();var fo=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this.pos]}expect(e){if(this.data.length-this.pos<e.length)throw new Error(`${S} unexpected end of input at position ${this.pos}`);for(let t=0;t<e.length;t++)if(this.data[this.pos++]!==e[t])throw new Error(`${S} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){let e=this.pos,t=!1,n=!1,i=c=>{for(;!this.done();){let u=this.ch();if(c.includes(u))this.pos++;else break}};if(this.ch()===45&&(t=!0,this.pos++),this.ch()===48)if(this.pos++,this.ch()===46)this.pos++,n=!0;else return new b(d.uint,0,this.pos-e);if(i([48,49,50,51,52,53,54,55,56,57]),t&&this.pos===e+1)throw new Error(`${S} unexpected token at position ${this.pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${S} unexpected token at position ${this.pos}`);n=!0,this.pos++,i([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this.pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this.pos++,i([48,49,50,51,52,53,54,55,56,57]));let o=String.fromCharCode.apply(null,this.data.subarray(e,this.pos)),s=parseFloat(o);return n?new b(d.float,s,this.pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(s)?new b(s>=0?d.uint:d.negint,s,this.pos-e):new b(s>=0?d.uint:d.negint,BigInt(o),this.pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${S} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let o=this.pos,s=0;o<this.data.length&&s<65536;o++,s++){let c=this.data[o];if(c===92||c<32||c>=128)break;if(c===34){let u=String.fromCharCode.apply(null,this.data.subarray(this.pos,o));return this.pos=o+1,new b(d.string,u,s)}}let e=this.pos,t=[],n=()=>{if(this.pos+4>=this.data.length)throw new Error(`${S} unexpected end of unicode escape sequence at position ${this.pos}`);let o=0;for(let s=0;s<4;s++){let c=this.ch();if(c>=48&&c<=57)c-=48;else if(c>=97&&c<=102)c=c-97+10;else if(c>=65&&c<=70)c=c-65+10;else throw new Error(`${S} unexpected unicode escape character at position ${this.pos}`);o=o*16+c,this.pos++}return o},i=()=>{let o=this.ch(),s=null,c=o>239?4:o>223?3:o>191?2:1;if(this.pos+c>this.data.length)throw new Error(`${S} unexpected unicode sequence at position ${this.pos}`);let u,f,l,h;switch(c){case 1:o<128&&(s=o);break;case 2:u=this.data[this.pos+1],(u&192)===128&&(h=(o&31)<<6|u&63,h>127&&(s=h));break;case 3:u=this.data[this.pos+1],f=this.data[this.pos+2],(u&192)===128&&(f&192)===128&&(h=(o&15)<<12|(u&63)<<6|f&63,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:u=this.data[this.pos+1],f=this.data[this.pos+2],l=this.data[this.pos+3],(u&192)===128&&(f&192)===128&&(l&192)===128&&(h=(o&15)<<18|(u&63)<<12|(f&63)<<6|l&63,h>65535&&h<1114112&&(s=h))}s===null?(s=65533,c=1):s>65535&&(s-=65536,t.push(s>>>10&1023|55296),s=56320|s&1023),t.push(s),this.pos+=c};for(;!this.done();){let o=this.ch(),s;switch(o){case 92:if(this.pos++,this.done())throw new Error(`${S} unexpected string termination at position ${this.pos}`);switch(s=this.ch(),this.pos++,s){case 34:case 39:case 92:case 47:t.push(s);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(n());break;default:throw new Error(`${S} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new b(d.string,ku(t),this.pos-e);default:if(o<32)throw new Error(`${S} invalid control character at position ${this.pos}`);o<128?(t.push(o),this.pos++):i()}}throw new Error(`${S} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new b(d.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new b(d.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new b(d.null,null,4);case 102:return this.expect([102,97,108,115,101]),new b(d.false,!1,5);case 116:return this.expect([116,114,117,101]),new b(d.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${S} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this.pos++,this.skipWhitespace(),new b(d.break,void 0,1);if(this.ch()!==44)throw new Error(`${S} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this.pos++,this.skipWhitespace(),new b(d.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new b(d.break,void 0,1);if(this.ch()!==44)throw new Error(`${S} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this.pos++,this.skipWhitespace(),new b(d.break,void 0,1);let e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${S} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${S} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}};function Nd(r,e){return e=Object.assign({tokenizer:new fo(r,e)},e),Le(r,e)}function CT(r){if(r.asCID!==r)return null;let e=x.asCID(r);if(!e)return null;let t=e.toString();return[new b(d.map,1/0,1),new b(d.string,"/",1),new b(d.string,t,t.length),new b(d.break,void 0,1)]}function Ex(r){let e=Pr.encode(r).slice(1);return[new b(d.map,1/0,1),new b(d.string,"/",1),new b(d.map,1/0,1),new b(d.string,"bytes",5),new b(d.string,e,e.length),new b(d.break,void 0,1),new b(d.break,void 0,1)]}function IT(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function kT(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var OT={typeEncoders:{Object:CT,Uint8Array:Ex,Buffer:Ex,undefined:IT,number:kT}},Pd=class extends fo{constructor(e,t){super(e,t),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){let e=this._next();if(e.type===d.map){let t=this._next();if(t.type===d.string&&t.value==="/"){let n=this._next();if(n.type===d.string){if(this._next().type!==d.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new b(d.tag,42,0)}if(n.type===d.map){let i=this._next();if(i.type===d.string&&i.value==="bytes"){let o=this._next();if(o.type===d.string){for(let c=0;c<2;c++)if(this._next().type!==d.break)throw new Error("Invalid encoded Bytes form");let s=Pr.decode(`m${o.value}`);return new b(d.bytes,s,o.value.length)}this.tokenBuffer.push(o)}this.tokenBuffer.push(i)}this.tokenBuffer.push(n)}this.tokenBuffer.push(t)}return e}},Fd={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Fd.tags[42]=x.parse;var BT="dag-json",LT=297,RT=r=>Rd(r,OT),NT=r=>{let e=Object.assign(Fd,{tokenizer:new Pd(r,Fd)});return Nd(r,e)};var Ud={};W(Ud,{code:()=>qT,decode:()=>HT,encode:()=>WT,name:()=>zT,toGeneral:()=>Ix});a();a();a();Ti();function Rt(r){return ga.encode(r).slice(1)}function mt(r){return ga.decode(`u${r}`)}q();function xx(r){let[e,t,n]=r;return{payload:t,signatures:[{protected:e,signature:n}],link:x.decode(mt(t))}}function PT(r){let e={signature:mt(r.signature)};return r.header&&(e.header=r.header),r.protected&&(e.protected=mt(r.protected)),e}function vx(r){let e=mt(r.payload);try{x.decode(e)}catch{throw new Error("Not a valid DagJWS")}return{payload:e,signatures:r.signatures.map(PT)}}function FT(r){let e={signature:Rt(r.signature)};return r.header&&(e.header=r.header),r.protected&&(e.protected=Rt(r.protected)),e}function _x(r){let e={payload:Rt(r.payload),signatures:r.signatures.map(FT)};return e.link=x.decode(new Uint8Array(r.payload)),e}a();function Sx(r){let[e,t,n,i,o]=r,s={ciphertext:i,iv:n,protected:e,tag:o};return t&&(s.recipients=[{encrypted_key:t}]),s}function UT(r){let e={};return r.encrypted_key&&(e.encrypted_key=mt(r.encrypted_key)),r.header&&(e.header=r.header),e}function Dx(r){let e={ciphertext:mt(r.ciphertext),protected:mt(r.protected),iv:mt(r.iv),tag:mt(r.tag)};return r.aad&&(e.aad=mt(r.aad)),r.recipients&&(e.recipients=r.recipients.map(UT)),r.unprotected&&(e.unprotected=r.unprotected),e}function MT(r){let e={};return r.encrypted_key&&(e.encrypted_key=Rt(r.encrypted_key)),r.header&&(e.header=r.header),e}function Ax(r){let e={ciphertext:Rt(r.ciphertext),protected:Rt(r.protected),iv:Rt(r.iv),tag:Rt(r.tag)};return r.aad&&(e.aad=Rt(r.aad)),r.recipients&&(e.recipients=r.recipients.map(MT)),r.unprotected&&(e.unprotected=r.unprotected),e}var zT="dag-jose",qT=133;function Tx(r){return"payload"in r&&typeof r.payload=="string"&&"signatures"in r&&Array.isArray(r.signatures)}function VT(r){return"payload"in r&&r.payload instanceof Uint8Array&&"signatures"in r&&Array.isArray(r.signatures)}function KT(r){return"ciphertext"in r&&r.ciphertext instanceof Uint8Array&&"iv"in r&&r.iv instanceof Uint8Array&&"protected"in r&&r.protected instanceof Uint8Array&&"tag"in r&&r.tag instanceof Uint8Array}function Cx(r){return"ciphertext"in r&&typeof r.ciphertext=="string"&&"iv"in r&&typeof r.iv=="string"&&"protected"in r&&typeof r.protected=="string"&&"tag"in r&&typeof r.tag=="string"}function Ix(r){if(typeof r=="string"){let e=r.split(".");if(e.length===3)return xx(e);if(e.length===5)return Sx(e);throw new Error("Not a valid JOSE string")}if(Tx(r)||Cx(r))return r;throw new Error("Not a valid unencoded JOSE object")}function WT(r){typeof r=="string"&&(r=Ix(r));let e;if(Tx(r))e=vx(r);else if(Cx(r))e=Dx(r);else throw new Error("Not a valid JOSE object");return new Uint8Array(xn(e))}function HT(r){let e;try{e=Ao(r)}catch{throw new Error("Not a valid DAG-JOSE object")}if(VT(e))return _x(e);if(KT(e))return Ax(e);throw new Error("Not a valid DAG-JOSE object")}a();var GT=r=>Promise.reject(new Error(`No codec found for "${r}"`)),hu=class{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||GT;for(let t of e.codecs)this.addCodec(t)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){let t=typeof e=="string"?this._codecsByName:this._codecsByCode;if(t[e])return t[e];let n=await this._loadCodec(e);return t[e]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}};a();var JT=r=>Promise.reject(new Error(`No hasher found for "${r}"`)),du=class{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||JT;for(let t of e.hashers)this.addHasher(t)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){let t=typeof e=="string"?this._hashersByName:this._hashersByCode;if(t[e])return t[e];let n=await this._loadHasher(e);return t[e]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}};a();async function*kx(r){let e=0;for(;e<r.length;)yield r[e++]}var Lx=v(as(),1);vn();a();xe();or();q();Ee();a();var Ox=v(ve(),1);function Bx(r){return r=r||new Error("Not Found"),(0,Ox.default)(r,"ERR_NOT_FOUND")}var pu=class extends oo{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,t){this.data[I.encode(e.multihash.bytes)]=t}async get(e){if(!await this.has(e))throw Bx();return this.data[I.encode(e.multihash.bytes)]}async has(e){return this.data[I.encode(e.multihash.bytes)]!==void 0}async delete(e){delete this.data[I.encode(e.multihash.bytes)]}async*_all(){yield*Object.entries(this.data).map(([e,t])=>({key:x.createV1(ot,G(I.decode(e))),value:t}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>x.createV1(ot,G(I.decode(e))))}};var yu=class extends lu{constructor({repo:e,codecs:t,options:n}){let i=Object.values(gm);(n.ipld&&n.ipld.hashers?n.ipld.hashers:[]).forEach(s=>i.push(s));let o=new du({hashers:i,loadHasher:n.ipld&&n.ipld.loadHasher});super({repo:e,codecs:t,hashers:o,preload:s=>{}}),Object.assign(this,pa()),this.repo=e,this.rootCID,this.tx={pending:Sn.create(),checkSize:async s=>{let c=Sn.create();return await c.add(s),c.size},getExistingTx:async()=>{let s={};try{let c=this.tx.pending.last;if(!c)return;s=(await this.tx.pending.get(c)).value}catch{return s}return s},addData:async s=>await this.tx.pending.add(s),addTag:async(s,c)=>await this.tx.add(s,c),add:async(s,c)=>{if(!c)return;c=Object.fromEntries(Object.entries(c).map(([g,y])=>y===void 0?[g,null]:[g,y]));let u=!1,f=await this.tx.getExistingTx()||null;if(f&&f[s])u=f[s]?f[s]:!1;else if(this.rootCID)try{let g=(await this.get(this.rootCID)).value;u=g[s]?g[s]:!1}catch{}let l=await this.tx.pending.add(c),h=f&&Object.keys(f).length!==0?Object.fromEntries(Object.entries(f).filter(([g,y])=>y.hasOwnProperty("obj")&&y.hasOwnProperty("prev"))):null,p=h&&Object.keys(h).length!==0?Object.assign({},h,{[s]:{obj:l,prev:u}}):{[s]:{obj:l,prev:u}},w=await this.tx.pending.add(p);return this.emit("added",w),w},commit:async()=>{let s=await this.tx.getExistingTx(),c={};try{this.rootCID&&(c=(await this.get(this.rootCID)).value);let f=Object.assign({},c,Object.fromEntries(Object.entries(s).filter(([l,h])=>h.hasOwnProperty("obj")&&h.hasOwnProperty("prev"))));this.rootCID=await this.tx.pending.add(f)}catch(f){this.rootCID&&console.log("thats odd",{error:f})}let u=await this.tx.pending.commit();return await this.importBuffer(u),this.tx.pending=Sn.create(),u}}}async latest(e){return(await this.get(this.rootCID,{path:`/${e}/obj`})).value}async importBuffers(e){let t;for(let n of e)t=await this.importBuffer(n);return t}async importBuffer(e){return Rx(this,e)}};async function Rx(r,e){let t=await kx([e]),[{root:n}]=await(0,Lx.default)(r.import(t));return n.cid}async function YT(r={}){let e={name:Ci.name,code:Ci.code,encode:u=>u,decode:u=>u},t=Object.values(wm);[kr,$d,Ud,e].concat(r.ipld&&r.ipld.codecs||[]).forEach(u=>t.push(u));let n=new hu({codecs:t,loadCodec:r.ipld&&r.ipld.loadCodec}),i=r.path||"ipfs",o;r?.persist?o=YE(console.log,n,{path:i,autoMigrate:!0}):o=pc(i,u=>n.getCodec(u),{blocks:new pu,datastore:new Xr,root:new Xr,keys:new Xr,pins:new Xr},r);let s={};try{await o.init(s),await o.open()}catch(u){throw u}let c=await o.config.getAll();return new yu({repo:o,codecs:n,options:{...r,repoConfig:c}})}export{yu as DagRepo,Sn as Transaction,YT as createDagRepo,em as encode,Rx as importBuffer};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
//# sourceMappingURL=index.js.map
