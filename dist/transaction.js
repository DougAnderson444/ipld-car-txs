var n0=Object.create;var Xo=Object.defineProperty;var i0=Object.getOwnPropertyDescriptor;var o0=Object.getOwnPropertyNames;var s0=Object.getPrototypeOf,a0=Object.prototype.hasOwnProperty;var P=(r,e)=>()=>(r&&(e=r(r=0)),e);var m=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Z=(r,e)=>{for(var t in e)Xo(r,t,{get:e[t],enumerable:!0})},kl=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of o0(e))!a0.call(r,i)&&i!==t&&Xo(r,i,{get:()=>e[i],enumerable:!(n=i0(e,i))||n.enumerable});return r};var w=(r,e,t)=>(t=r!=null?n0(s0(r)):{},kl(e||!r||!r.__esModule?Xo(t,"default",{value:r,enumerable:!0}):t,r)),Oe=r=>kl(Xo({},"__esModule",{value:!0}),r);var Nl=m(Zo=>{"use strict";a();Zo.byteLength=u0;Zo.toByteArray=l0;Zo.fromByteArray=p0;var xt=[],Ye=[],c0=typeof Uint8Array<"u"?Uint8Array:Array,oc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(jr=0,Ll=oc.length;jr<Ll;++jr)xt[jr]=oc[jr],Ye[oc.charCodeAt(jr)]=jr;var jr,Ll;Ye["-".charCodeAt(0)]=62;Ye["_".charCodeAt(0)]=63;function Rl(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function u0(r){var e=Rl(r),t=e[0],n=e[1];return(t+n)*3/4-n}function f0(r,e,t){return(e+t)*3/4-t}function l0(r){var e,t=Rl(r),n=t[0],i=t[1],o=new c0(f0(r,n,i)),s=0,c=i>0?n-4:n,u;for(u=0;u<c;u+=4)e=Ye[r.charCodeAt(u)]<<18|Ye[r.charCodeAt(u+1)]<<12|Ye[r.charCodeAt(u+2)]<<6|Ye[r.charCodeAt(u+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Ye[r.charCodeAt(u)]<<2|Ye[r.charCodeAt(u+1)]>>4,o[s++]=e&255),i===1&&(e=Ye[r.charCodeAt(u)]<<10|Ye[r.charCodeAt(u+1)]<<4|Ye[r.charCodeAt(u+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function h0(r){return xt[r>>18&63]+xt[r>>12&63]+xt[r>>6&63]+xt[r&63]}function d0(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(h0(n));return i.join("")}function p0(r){for(var e,t=r.length,n=t%3,i=[],o=16383,s=0,c=t-n;s<c;s+=o)i.push(d0(r,s,s+o>c?c:s+o));return n===1?(e=r[t-1],i.push(xt[e>>2]+xt[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(xt[e>>10]+xt[e>>4&63]+xt[e<<2&63]+"=")),i.join("")}});var Pl=m(sc=>{a();sc.read=function(r,e,t,n,i){var o,s,c=i*8-n-1,u=(1<<c)-1,f=u>>1,l=-7,h=t?i-1:0,y=t?-1:1,x=r[e+h];for(h+=y,o=x&(1<<-l)-1,x>>=-l,l+=c;l>0;o=o*256+r[e+h],h+=y,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=s*256+r[e+h],h+=y,l-=8);if(o===0)o=1-f;else{if(o===u)return s?NaN:(x?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-f}return(x?-1:1)*s*Math.pow(2,o-n)};sc.write=function(r,e,t,n,i,o){var s,c,u,f=o*8-i-1,l=(1<<f)-1,h=l>>1,y=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=n?0:o-1,g=n?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+h>=1?e+=y/u:e+=y*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=l?(c=0,s=l):s+h>=1?(c=(e*u-1)*Math.pow(2,i),s=s+h):(c=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+x]=c&255,x+=g,c/=256,i-=8);for(s=s<<i|c,f+=i;f>0;r[t+x]=s&255,x+=g,s/=256,f-=8);r[t+x-g]|=S*128}});var Bi=m(Bn=>{"use strict";a();var ac=Nl(),In=Pl(),Fl=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Bn.Buffer=p;Bn.SlowBuffer=E0;Bn.INSPECT_MAX_BYTES=50;var es=2147483647;Bn.kMaxLength=es;p.TYPED_ARRAY_SUPPORT=y0();!p.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function y0(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(!!p.isBuffer(this))return this.buffer}});Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(!!p.isBuffer(this))return this.byteOffset}});function Ft(r){if(r>es)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,p.prototype),e}function p(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return lc(r)}return jl(r,e,t)}p.poolSize=8192;function jl(r,e,t){if(typeof r=="string")return g0(r,e);if(ArrayBuffer.isView(r))return w0(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(vt(r,ArrayBuffer)||r&&vt(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(vt(r,SharedArrayBuffer)||r&&vt(r.buffer,SharedArrayBuffer)))return uc(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return p.from(n,e,t);let i=b0(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return p.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}p.from=function(r,e,t){return jl(r,e,t)};Object.setPrototypeOf(p.prototype,Uint8Array.prototype);Object.setPrototypeOf(p,Uint8Array);function zl(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function m0(r,e,t){return zl(r),r<=0?Ft(r):e!==void 0?typeof t=="string"?Ft(r).fill(e,t):Ft(r).fill(e):Ft(r)}p.alloc=function(r,e,t){return m0(r,e,t)};function lc(r){return zl(r),Ft(r<0?0:hc(r)|0)}p.allocUnsafe=function(r){return lc(r)};p.allocUnsafeSlow=function(r){return lc(r)};function g0(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!p.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=ql(r,e)|0,n=Ft(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function cc(r){let e=r.length<0?0:hc(r.length)|0,t=Ft(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function w0(r){if(vt(r,Uint8Array)){let e=new Uint8Array(r);return uc(e.buffer,e.byteOffset,e.byteLength)}return cc(r)}function uc(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,p.prototype),n}function b0(r){if(p.isBuffer(r)){let e=hc(r.length)|0,t=Ft(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||pc(r.length)?Ft(0):cc(r);if(r.type==="Buffer"&&Array.isArray(r.data))return cc(r.data)}function hc(r){if(r>=es)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+es.toString(16)+" bytes");return r|0}function E0(r){return+r!=r&&(r=0),p.alloc(+r)}p.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==p.prototype};p.compare=function(e,t){if(vt(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),vt(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),!p.isBuffer(e)||!p.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};p.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};p.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return p.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=p.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let s=e[n];if(vt(s,Uint8Array))o+s.length>i.length?(p.isBuffer(s)||(s=p.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(p.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function ql(r,e){if(p.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||vt(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return fc(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Xl(r).length;default:if(i)return n?-1:fc(r).length;e=(""+e).toLowerCase(),i=!0}}p.byteLength=ql;function x0(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return B0(this,e,t);case"utf8":case"utf-8":return Kl(this,e,t);case"ascii":return I0(this,e,t);case"latin1":case"binary":return O0(this,e,t);case"base64":return T0(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k0(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}p.prototype._isBuffer=!0;function zr(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}p.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)zr(this,t,t+1);return this};p.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)zr(this,t,t+3),zr(this,t+1,t+2);return this};p.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)zr(this,t,t+7),zr(this,t+1,t+6),zr(this,t+2,t+5),zr(this,t+3,t+4);return this};p.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Kl(this,0,e):x0.apply(this,arguments)};p.prototype.toLocaleString=p.prototype.toString;p.prototype.equals=function(e){if(!p.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:p.compare(this,e)===0};p.prototype.inspect=function(){let e="",t=Bn.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};Fl&&(p.prototype[Fl]=p.prototype.inspect);p.prototype.compare=function(e,t,n,i,o){if(vt(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),!p.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,c=n-t,u=Math.min(s,c),f=this.slice(i,o),l=e.slice(t,n);for(let h=0;h<u;++h)if(f[h]!==l[h]){s=f[h],c=l[h];break}return s<c?-1:c<s?1:0};function Vl(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,pc(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=p.from(e,n)),p.isBuffer(e))return e.length===0?-1:Ul(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):Ul(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function Ul(r,e,t,n,i){let o=1,s=r.length,c=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,c/=2,t/=2}function u(l,h){return o===1?l[h]:l.readUInt16BE(h*o)}let f;if(i){let l=-1;for(f=t;f<s;f++)if(u(r,f)===u(e,l===-1?0:f-l)){if(l===-1&&(l=f),f-l+1===c)return l*o}else l!==-1&&(f-=f-l),l=-1}else for(t+c>s&&(t=s-c),f=t;f>=0;f--){let l=!0;for(let h=0;h<c;h++)if(u(r,f+h)!==u(e,h)){l=!1;break}if(l)return f}return-1}p.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};p.prototype.indexOf=function(e,t,n){return Vl(this,e,t,n,!0)};p.prototype.lastIndexOf=function(e,t,n){return Vl(this,e,t,n,!1)};function v0(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let c=parseInt(e.substr(s*2,2),16);if(pc(c))return s;r[t+s]=c}return s}function _0(r,e,t,n){return ts(fc(e,r.length-t),r,t,n)}function D0(r,e,t,n){return ts(P0(e),r,t,n)}function S0(r,e,t,n){return ts(Xl(e),r,t,n)}function A0(r,e,t,n){return ts(F0(e,r.length-t),r,t,n)}p.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return v0(this,e,t,n);case"utf8":case"utf-8":return _0(this,e,t,n);case"ascii":case"latin1":case"binary":return D0(this,e,t,n);case"base64":return S0(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A0(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T0(r,e,t){return e===0&&t===r.length?ac.fromByteArray(r):ac.fromByteArray(r.slice(e,t))}function Kl(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],s=null,c=o>239?4:o>223?3:o>191?2:1;if(i+c<=t){let u,f,l,h;switch(c){case 1:o<128&&(s=o);break;case 2:u=r[i+1],(u&192)===128&&(h=(o&31)<<6|u&63,h>127&&(s=h));break;case 3:u=r[i+1],f=r[i+2],(u&192)===128&&(f&192)===128&&(h=(o&15)<<12|(u&63)<<6|f&63,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:u=r[i+1],f=r[i+2],l=r[i+3],(u&192)===128&&(f&192)===128&&(l&192)===128&&(h=(o&15)<<18|(u&63)<<12|(f&63)<<6|l&63,h>65535&&h<1114112&&(s=h))}}s===null?(s=65533,c=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=c}return C0(n)}var $l=4096;function C0(r){let e=r.length;if(e<=$l)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=$l));return t}function I0(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function O0(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function B0(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=U0[r[o]];return i}function k0(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}p.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,p.prototype),i};function fe(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}p.prototype.readUintLE=p.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||fe(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return i};p.prototype.readUintBE=p.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||fe(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};p.prototype.readUint8=p.prototype.readUInt8=function(e,t){return e=e>>>0,t||fe(e,1,this.length),this[e]};p.prototype.readUint16LE=p.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||fe(e,2,this.length),this[e]|this[e+1]<<8};p.prototype.readUint16BE=p.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||fe(e,2,this.length),this[e]<<8|this[e+1]};p.prototype.readUint32LE=p.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||fe(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};p.prototype.readUint32BE=p.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||fe(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};p.prototype.readBigUInt64LE=or(function(e){e=e>>>0,On(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Oi(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});p.prototype.readBigUInt64BE=or(function(e){e=e>>>0,On(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Oi(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});p.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||fe(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};p.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||fe(e,t,this.length);let i=t,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};p.prototype.readInt8=function(e,t){return e=e>>>0,t||fe(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};p.prototype.readInt16LE=function(e,t){e=e>>>0,t||fe(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};p.prototype.readInt16BE=function(e,t){e=e>>>0,t||fe(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};p.prototype.readInt32LE=function(e,t){return e=e>>>0,t||fe(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};p.prototype.readInt32BE=function(e,t){return e=e>>>0,t||fe(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};p.prototype.readBigInt64LE=or(function(e){e=e>>>0,On(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Oi(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});p.prototype.readBigInt64BE=or(function(e){e=e>>>0,On(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Oi(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});p.prototype.readFloatLE=function(e,t){return e=e>>>0,t||fe(e,4,this.length),In.read(this,e,!0,23,4)};p.prototype.readFloatBE=function(e,t){return e=e>>>0,t||fe(e,4,this.length),In.read(this,e,!1,23,4)};p.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||fe(e,8,this.length),In.read(this,e,!0,52,8)};p.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||fe(e,8,this.length),In.read(this,e,!1,52,8)};function Be(r,e,t,n,i,o){if(!p.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}p.prototype.writeUintLE=p.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;Be(this,e,t,n,c,0)}let o=1,s=0;for(this[t]=e&255;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n};p.prototype.writeUintBE=p.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let c=Math.pow(2,8*n)-1;Be(this,e,t,n,c,0)}let o=n-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n};p.prototype.writeUint8=p.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||Be(this,e,t,1,255,0),this[t]=e&255,t+1};p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Be(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Be(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Be(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Be(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function Wl(r,e,t,n,i){Yl(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,t}function Hl(r,e,t,n,i){Yl(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=s,s=s>>8,r[t+2]=s,s=s>>8,r[t+1]=s,s=s>>8,r[t]=s,t+8}p.prototype.writeBigUInt64LE=or(function(e,t=0){return Wl(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});p.prototype.writeBigUInt64BE=or(function(e,t=0){return Hl(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});p.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let u=Math.pow(2,8*n-1);Be(this,e,t,n,u-1,-u)}let o=0,s=1,c=0;for(this[t]=e&255;++o<n&&(s*=256);)e<0&&c===0&&this[t+o-1]!==0&&(c=1),this[t+o]=(e/s>>0)-c&255;return t+n};p.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let u=Math.pow(2,8*n-1);Be(this,e,t,n,u-1,-u)}let o=n-1,s=1,c=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&c===0&&this[t+o+1]!==0&&(c=1),this[t+o]=(e/s>>0)-c&255;return t+n};p.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||Be(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};p.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Be(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};p.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Be(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};p.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Be(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};p.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Be(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};p.prototype.writeBigInt64LE=or(function(e,t=0){return Wl(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});p.prototype.writeBigInt64BE=or(function(e,t=0){return Hl(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Gl(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Jl(r,e,t,n,i){return e=+e,t=t>>>0,i||Gl(r,e,t,4,34028234663852886e22,-34028234663852886e22),In.write(r,e,t,n,23,4),t+4}p.prototype.writeFloatLE=function(e,t,n){return Jl(this,e,t,!0,n)};p.prototype.writeFloatBE=function(e,t,n){return Jl(this,e,t,!1,n)};function Ql(r,e,t,n,i){return e=+e,t=t>>>0,i||Gl(r,e,t,8,17976931348623157e292,-17976931348623157e292),In.write(r,e,t,n,52,8),t+8}p.prototype.writeDoubleLE=function(e,t,n){return Ql(this,e,t,!0,n)};p.prototype.writeDoubleBE=function(e,t,n){return Ql(this,e,t,!1,n)};p.prototype.copy=function(e,t,n,i){if(!p.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};p.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!p.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let s=p.isBuffer(e)?e:p.from(e,i),c=s.length;if(c===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%c]}return this};var Cn={};function dc(r,e,t){Cn[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}dc("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);dc("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);dc("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=Ml(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=Ml(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function Ml(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function L0(r,e,t){On(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&Oi(e,r.length-(t+1))}function Yl(r,e,t,n,i,o){if(r>t||r<e){let s=typeof e=="bigint"?"n":"",c;throw o>3?e===0||e===BigInt(0)?c=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:c=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:c=`>= ${e}${s} and <= ${t}${s}`,new Cn.ERR_OUT_OF_RANGE("value",c,r)}L0(n,i,o)}function On(r,e){if(typeof r!="number")throw new Cn.ERR_INVALID_ARG_TYPE(e,"number",r)}function Oi(r,e,t){throw Math.floor(r)!==r?(On(r,t),new Cn.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new Cn.ERR_BUFFER_OUT_OF_BOUNDS:new Cn.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var R0=/[^+/0-9A-Za-z-_]/g;function N0(r){if(r=r.split("=")[0],r=r.trim().replace(R0,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function fc(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function P0(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function F0(r,e){let t,n,i,o=[];for(let s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function Xl(r){return ac.toByteArray(N0(r))}function ts(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function vt(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function pc(r){return r!==r}var U0=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function or(r){return typeof BigInt>"u"?$0:r}function $0(){throw new Error("BigInt not supported")}});var nh=m((SS,rh)=>{a();var ee=rh.exports={},_t,Dt;function yc(){throw new Error("setTimeout has not been defined")}function mc(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?_t=setTimeout:_t=yc}catch{_t=yc}try{typeof clearTimeout=="function"?Dt=clearTimeout:Dt=mc}catch{Dt=mc}})();function Zl(r){if(_t===setTimeout)return setTimeout(r,0);if((_t===yc||!_t)&&setTimeout)return _t=setTimeout,setTimeout(r,0);try{return _t(r,0)}catch{try{return _t.call(null,r,0)}catch{return _t.call(this,r,0)}}}function M0(r){if(Dt===clearTimeout)return clearTimeout(r);if((Dt===mc||!Dt)&&clearTimeout)return Dt=clearTimeout,clearTimeout(r);try{return Dt(r)}catch{try{return Dt.call(null,r)}catch{return Dt.call(this,r)}}}var Ut=[],kn=!1,qr,rs=-1;function j0(){!kn||!qr||(kn=!1,qr.length?Ut=qr.concat(Ut):rs=-1,Ut.length&&eh())}function eh(){if(!kn){var r=Zl(j0);kn=!0;for(var e=Ut.length;e;){for(qr=Ut,Ut=[];++rs<e;)qr&&qr[rs].run();rs=-1,e=Ut.length}qr=null,kn=!1,M0(r)}}ee.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Ut.push(new th(r,e)),Ut.length===1&&!kn&&Zl(eh)};function th(r,e){this.fun=r,this.array=e}th.prototype.run=function(){this.fun.apply(null,this.array)};ee.title="browser";ee.browser=!0;ee.env={};ee.argv=[];ee.version="";ee.versions={};function $t(){}ee.on=$t;ee.addListener=$t;ee.once=$t;ee.off=$t;ee.removeListener=$t;ee.removeAllListeners=$t;ee.emit=$t;ee.prependListener=$t;ee.prependOnceListener=$t;ee.listeners=function(r){return[]};ee.binding=function(r){throw new Error("process.binding is not supported")};ee.cwd=function(){return"/"};ee.chdir=function(r){throw new Error("process.chdir is not supported")};ee.umask=function(){return 0}});var Buffer,process,global,self,a=P(()=>{"use strict";Buffer=Bi().Buffer,process=nh(),global=typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{},self=globalThis;globalThis&&globalThis.process&&globalThis.process.env&&(globalThis.process.env.LIBP2P_FORCE_PNET=!1)});var sh=m((CS,oh)=>{a();oh.exports=gc;var ih=128,z0=127,q0=~z0,V0=Math.pow(2,31);function gc(r,e,t){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw gc.bytes=0,new RangeError("Could not encode varint");e=e||[],t=t||0;for(var n=t;r>=V0;)e[t++]=r&255|ih,r/=128;for(;r&q0;)e[t++]=r&255|ih,r>>>=7;return e[t]=r|0,gc.bytes=t-n+1,e}});var uh=m((OS,ch)=>{a();ch.exports=wc;var K0=128,ah=127;function wc(r,n){var t=0,n=n||0,i=0,o=n,s,c=r.length;do{if(o>=c||i>49)throw wc.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(s&ah)<<i:(s&ah)*Math.pow(2,i),i+=7}while(s>=K0);return wc.bytes=o-n,t}});var lh=m((kS,fh)=>{a();var W0=Math.pow(2,7),H0=Math.pow(2,14),G0=Math.pow(2,21),J0=Math.pow(2,28),Q0=Math.pow(2,35),Y0=Math.pow(2,42),X0=Math.pow(2,49),Z0=Math.pow(2,56),eE=Math.pow(2,63);fh.exports=function(r){return r<W0?1:r<H0?2:r<G0?3:r<J0?4:r<Q0?5:r<Y0?6:r<X0?7:r<Z0?8:r<eE?9:10}});var ke=m((RS,hh)=>{a();hh.exports={encode:sh(),decode:uh(),encodingLength:lh()}});function wd(r,e,t){e=e||[],t=t||0;for(var n=t;r>=RE;)e[t++]=r&255|md,r/=128;for(;r&LE;)e[t++]=r&255|md,r>>>=7;return e[t]=r|0,wd.bytes=t-n+1,e}function Oc(r,n){var t=0,n=n||0,i=0,o=n,s,c=r.length;do{if(o>=c)throw Oc.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(s&gd)<<i:(s&gd)*Math.pow(2,i),i+=7}while(s>=PE);return Oc.bytes=o-n,t}var BE,md,kE,LE,RE,NE,PE,gd,FE,UE,$E,ME,jE,zE,qE,VE,KE,WE,HE,GE,$i,bd=P(()=>{a();BE=wd,md=128,kE=127,LE=~kE,RE=Math.pow(2,31);NE=Oc,PE=128,gd=127;FE=Math.pow(2,7),UE=Math.pow(2,14),$E=Math.pow(2,21),ME=Math.pow(2,28),jE=Math.pow(2,35),zE=Math.pow(2,42),qE=Math.pow(2,49),VE=Math.pow(2,56),KE=Math.pow(2,63),WE=function(r){return r<FE?1:r<UE?2:r<$E?3:r<ME?4:r<jE?5:r<zE?6:r<qE?7:r<VE?8:r<KE?9:10},HE={encode:BE,decode:NE,encodingLength:WE},GE=HE,$i=GE});var Mi,Mn,jn,ps=P(()=>{a();bd();Mi=(r,e=0)=>[$i.decode(r,e),$i.decode.bytes],Mn=(r,e,t=0)=>($i.encode(r,e,t),e),jn=r=>$i.encodingLength(r)});var Wr={};Z(Wr,{coerce:()=>et,empty:()=>Ed,equals:()=>Bc,fromHex:()=>QE,fromString:()=>kc,isBinary:()=>YE,toHex:()=>JE,toString:()=>Lc});var Ed,JE,QE,Bc,et,YE,kc,Lc,cr=P(()=>{a();Ed=new Uint8Array(0),JE=r=>r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),""),QE=r=>{let e=r.match(/../g);return e?new Uint8Array(e.map(t=>parseInt(t,16))):Ed},Bc=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},et=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},YE=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),kc=r=>new TextEncoder().encode(r),Lc=r=>new TextDecoder().decode(r)});var De={};Z(De,{Digest:()=>Hr,create:()=>ur,decode:()=>ue,equals:()=>Rc});var ur,ue,Rc,Hr,Se=P(()=>{a();cr();ps();ur=(r,e)=>{let t=e.byteLength,n=jn(r),i=n+jn(t),o=new Uint8Array(i+t);return Mn(r,o,0),Mn(t,o,n),o.set(e,i),new Hr(r,t,e,o)},ue=r=>{let e=et(r),[t,n]=Mi(e),[i,o]=Mi(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new Hr(t,i,s,e)},Rc=(r,e)=>r===e?!0:r.code===e.code&&r.size===e.size&&Bc(r.bytes,e.bytes),Hr=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}}});function XE(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=i}var c=r.length,u=r.charAt(0),f=Math.log(c)/Math.log(256),l=Math.log(256)/Math.log(c);function h(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var S=0,L=0,K=0,_e=g.length;K!==_e&&g[K]===0;)K++,S++;for(var Ge=(_e-K)*l+1>>>0,pe=new Uint8Array(Ge);K!==_e;){for(var at=g[K],Je=0,Fe=Ge-1;(at!==0||Je<L)&&Fe!==-1;Fe--,Je++)at+=256*pe[Fe]>>>0,pe[Fe]=at%c>>>0,at=at/c>>>0;if(at!==0)throw new Error("Non-zero carry");L=Je,K++}for(var Qe=Ge-L;Qe!==Ge&&pe[Qe]===0;)Qe++;for(var Tn=u.repeat(S);Qe<Ge;++Qe)Tn+=r.charAt(pe[Qe]);return Tn}function y(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;var S=0;if(g[S]!==" "){for(var L=0,K=0;g[S]===u;)L++,S++;for(var _e=(g.length-S)*f+1>>>0,Ge=new Uint8Array(_e);g[S];){var pe=t[g.charCodeAt(S)];if(pe===255)return;for(var at=0,Je=_e-1;(pe!==0||at<K)&&Je!==-1;Je--,at++)pe+=c*Ge[Je]>>>0,Ge[Je]=pe%256>>>0,pe=pe/256>>>0;if(pe!==0)throw new Error("Non-zero carry");K=at,S++}if(g[S]!==" "){for(var Fe=_e-K;Fe!==_e&&Ge[Fe]===0;)Fe++;for(var Qe=new Uint8Array(L+(_e-Fe)),Tn=L;Fe!==_e;)Qe[Tn++]=Ge[Fe++];return Qe}}}function x(g){var S=y(g);if(S)return S;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:y,decode:x}}var ZE,ex,xd,vd=P(()=>{a();ZE=XE,ex=ZE,xd=ex});var Nc,Pc,Fc,_d,Uc,zn,fr,tx,rx,Y,ft=P(()=>{a();vd();cr();Nc=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Pc=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return _d(this,e)}},Fc=class{constructor(e){this.decoders=e}or(e){return _d(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},_d=(r,e)=>new Fc({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),Uc=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Nc(e,t,n),this.decoder=new Pc(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},zn=({name:r,prefix:e,encode:t,decode:n})=>new Uc(r,e,t,n),fr=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=xd(t,e);return zn({prefix:r,name:e,encode:n,decode:o=>et(i(o))})},tx=(r,e,t,n)=>{let i={};for(let l=0;l<e.length;++l)i[e[l]]=l;let o=r.length;for(;r[o-1]==="=";)--o;let s=new Uint8Array(o*t/8|0),c=0,u=0,f=0;for(let l=0;l<o;++l){let h=i[r[l]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<t|h,c+=t,c>=8&&(c-=8,s[f++]=255&u>>c)}if(c>=t||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return s},rx=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",s=0,c=0;for(let u=0;u<r.length;++u)for(c=c<<8|r[u],s+=8;s>t;)s-=t,o+=e[i&c>>s];if(s&&(o+=e[i&c<<t-s]),n)for(;o.length*t&7;)o+="=";return o},Y=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>zn({prefix:e,name:r,encode(i){return rx(i,n,t)},decode(i){return tx(i,n,t,r)}})});var ji={};Z(ji,{base58btc:()=>W,base58flickr:()=>nx});var W,nx,Le=P(()=>{a();ft();W=fr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),nx=fr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var ys={};Z(ys,{base32:()=>U,base32hex:()=>sx,base32hexpad:()=>cx,base32hexpadupper:()=>ux,base32hexupper:()=>ax,base32pad:()=>Dd,base32padupper:()=>ox,base32upper:()=>ix,base32z:()=>fx});var U,ix,Dd,ox,sx,ax,cx,ux,fx,Ae=P(()=>{a();ft();U=Y({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ix=Y({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Dd=Y({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ox=Y({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),sx=Y({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ax=Y({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),cx=Y({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ux=Y({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fx=Y({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var $c={};Z($c,{CID:()=>v});var v,lx,hx,dx,zi,px,Sd,Ad,ms,gs,yx,mx,gx,z=P(()=>{a();ps();Se();Le();Ae();cr();v=class{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:gs,byteLength:gs,code:ms,version:ms,multihash:ms,bytes:ms,_baseCache:gs,asCID:gs})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:t}=this;if(e!==zi)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==px)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return v.createV0(t)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=ur(e,t);return v.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Rc(this.multihash,e.multihash)}toString(e){let{bytes:t,version:n,_baseCache:i}=this;switch(n){case 0:return hx(t,i,e||W.encoder);default:return dx(t,i,e||U.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return mx(/^0\.0/,gx),!!(e&&(e[Ad]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof v)return e;if(e!=null&&e.asCID===e){let{version:t,code:n,multihash:i,bytes:o}=e;return new v(t,n,i,o||Sd(t,n,i.bytes))}else if(e!=null&&e[Ad]===!0){let{version:t,multihash:n,code:i}=e,o=ue(n);return v.create(t,i,o)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(t!==zi)throw new Error(`Version 0 CID must use dag-pb (code: ${zi}) block encoding`);return new v(e,t,n,n.bytes)}case 1:{let i=Sd(e,t,n.bytes);return new v(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return v.create(0,zi,e)}static createV1(e,t){return v.create(1,e,t)}static decode(e){let[t,n]=v.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=v.inspectBytes(e),n=t.size-t.multihashSize,i=et(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),s=new Hr(t.multihashCode,t.digestSize,o,i);return[t.version===0?v.createV0(s):v.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[h,y]=Mi(e.subarray(t));return t+=y,h},i=n(),o=zi;if(i===18?(i=0,t=0):i===1&&(o=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=t,c=n(),u=n(),f=t+u,l=f-s;return{version:i,codec:o,multihashCode:c,digestSize:u,multihashSize:l,size:f}}static parse(e,t){let[n,i]=lx(e,t),o=v.decode(i);return o._baseCache.set(n,e),o}},lx=(r,e)=>{switch(r[0]){case"Q":{let t=e||W;return[W.prefix,t.decode(`${W.prefix}${r}`)]}case W.prefix:{let t=e||W;return[W.prefix,t.decode(r)]}case U.prefix:{let t=e||U;return[U.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},hx=(r,e,t)=>{let{prefix:n}=t;if(n!==W.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i},dx=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i},zi=112,px=18,Sd=(r,e,t)=>{let n=jn(r),i=n+jn(e),o=new Uint8Array(i+t.byteLength);return Mn(r,o,0),Mn(e,o,n),o.set(t,i),o},Ad=Symbol.for("@ipld/js-cid/CID"),ms={writable:!1,configurable:!1,enumerable:!0},gs={writable:!1,enumerable:!1,configurable:!1},yx="0.0.0-dev",mx=(r,e)=>{if(r.test(yx))console.warn(e);else throw new Error(e)},gx=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var Wc,Kc,Hc=P(()=>{a();Se();Wc=({name:r,code:e,encode:t})=>new Kc(r,e,t),Kc=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?ur(this.code,t):t.then(n=>ur(this.code,n))}else throw Error("Unknown type, must be binary type")}}});var Gn=P(()=>{a();z();ps();cr();Hc();Se()});var At={};Z(At,{code:()=>Yr,decode:()=>zx,encode:()=>jx,name:()=>zd});var zd,Yr,jx,zx,dr=P(()=>{a();cr();zd="raw",Yr=85,jx=r=>et(r),zx=r=>et(r)});var Gc={};Z(Gc,{sha256:()=>Tt,sha512:()=>qx});var qd,Tt,qx,Jn=P(()=>{a();Hc();qd=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),Tt=Wc({name:"sha2-256",code:18,encode:qd("SHA-256")}),qx=Wc({name:"sha2-512",code:19,encode:qd("SHA-512")})});var Gd=m((LT,Hd)=>{a();var Qn=1e3,Yn=Qn*60,Xn=Yn*60,Xr=Xn*24,Hx=Xr*7,Gx=Xr*365.25;Hd.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Jx(r);if(t==="number"&&isFinite(r))return e.long?Yx(r):Qx(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Jx(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Gx;case"weeks":case"week":case"w":return t*Hx;case"days":case"day":case"d":return t*Xr;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Xn;case"minutes":case"minute":case"mins":case"min":case"m":return t*Yn;case"seconds":case"second":case"secs":case"sec":case"s":return t*Qn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Qx(r){var e=Math.abs(r);return e>=Xr?Math.round(r/Xr)+"d":e>=Xn?Math.round(r/Xn)+"h":e>=Yn?Math.round(r/Yn)+"m":e>=Qn?Math.round(r/Qn)+"s":r+"ms"}function Yx(r){var e=Math.abs(r);return e>=Xr?As(r,e,Xr,"day"):e>=Xn?As(r,e,Xn,"hour"):e>=Yn?As(r,e,Yn,"minute"):e>=Qn?As(r,e,Qn,"second"):r+" ms"}function As(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var Qd=m((NT,Jd)=>{a();function Xx(r){t.debug=t,t.default=t,t.coerce=u,t.disable=o,t.enable=i,t.enabled=s,t.humanize=Gd(),t.destroy=f,Object.keys(r).forEach(l=>{t[l]=r[l]}),t.names=[],t.skips=[],t.formatters={};function e(l){let h=0;for(let y=0;y<l.length;y++)h=(h<<5)-h+l.charCodeAt(y),h|=0;return t.colors[Math.abs(h)%t.colors.length]}t.selectColor=e;function t(l){let h,y=null,x,g;function S(...L){if(!S.enabled)return;let K=S,_e=Number(new Date),Ge=_e-(h||_e);K.diff=Ge,K.prev=h,K.curr=_e,h=_e,L[0]=t.coerce(L[0]),typeof L[0]!="string"&&L.unshift("%O");let pe=0;L[0]=L[0].replace(/%([a-zA-Z%])/g,(Je,Fe)=>{if(Je==="%%")return"%";pe++;let Qe=t.formatters[Fe];if(typeof Qe=="function"){let Tn=L[pe];Je=Qe.call(K,Tn),L.splice(pe,1),pe--}return Je}),t.formatArgs.call(K,L),(K.log||t.log).apply(K,L)}return S.namespace=l,S.useColors=t.useColors(),S.color=t.selectColor(l),S.extend=n,S.destroy=t.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(x!==t.namespaces&&(x=t.namespaces,g=t.enabled(l)),g),set:L=>{y=L}}),typeof t.init=="function"&&t.init(S),S}function n(l,h){let y=t(this.namespace+(typeof h>"u"?":":h)+l);return y.log=this.log,y}function i(l){t.save(l),t.namespaces=l,t.names=[],t.skips=[];let h,y=(typeof l=="string"?l:"").split(/[\s,]+/),x=y.length;for(h=0;h<x;h++)!y[h]||(l=y[h].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.slice(1)+"$")):t.names.push(new RegExp("^"+l+"$")))}function o(){let l=[...t.names.map(c),...t.skips.map(c).map(h=>"-"+h)].join(",");return t.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let h,y;for(h=0,y=t.skips.length;h<y;h++)if(t.skips[h].test(l))return!1;for(h=0,y=t.names.length;h<y;h++)if(t.names[h].test(l))return!0;return!1}function c(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function u(l){return l instanceof Error?l.stack||l.message:l}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Jd.exports=Xx});var tt=m((ze,Ts)=>{a();ze.formatArgs=e1;ze.save=t1;ze.load=r1;ze.useColors=Zx;ze.storage=n1();ze.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ze.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Zx(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function e1(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+Ts.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}ze.log=console.debug||console.log||(()=>{});function t1(r){try{r?ze.storage.setItem("debug",r):ze.storage.removeItem("debug")}catch{}}function r1(){let r;try{r=ze.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function n1(){try{return localStorage}catch{}}Ts.exports=Qd()(ze);var{formatters:i1}=Ts.exports;i1.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Te=m((UT,Xd)=>{"use strict";a();function Yd(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function o1(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return Yd(r,t)}catch{t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),Yd(new i,t)}}Xd.exports=o1});var Zc={};Z(Zc,{identity:()=>s1});var s1,Zd=P(()=>{a();ft();cr();s1=zn({prefix:"\0",name:"identity",encode:r=>Lc(r),decode:r=>kc(r)})});var eu={};Z(eu,{base2:()=>a1});var a1,ep=P(()=>{a();ft();a1=Y({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var tu={};Z(tu,{base8:()=>c1});var c1,tp=P(()=>{a();ft();c1=Y({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var ru={};Z(ru,{base10:()=>u1});var u1,rp=P(()=>{a();ft();u1=fr({prefix:"9",name:"base10",alphabet:"0123456789"})});var nu={};Z(nu,{base16:()=>f1,base16upper:()=>l1});var f1,l1,np=P(()=>{a();ft();f1=Y({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),l1=Y({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var iu={};Z(iu,{base36:()=>h1,base36upper:()=>d1});var h1,d1,ip=P(()=>{a();ft();h1=fr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),d1=fr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var ou={};Z(ou,{base64:()=>Wi,base64pad:()=>p1,base64url:()=>op,base64urlpad:()=>y1});var Wi,p1,op,y1,Hi=P(()=>{a();ft();Wi=Y({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),p1=Y({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),op=Y({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),y1=Y({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var su={};Z(su,{base256emoji:()=>E1});function w1(r){return r.reduce((e,t)=>(e+=m1[t],e),"")}function b1(r){let e=[];for(let t of r){let n=g1[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var sp,m1,g1,E1,ap=P(()=>{a();ft();sp=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),m1=sp.reduce((r,e,t)=>(r[t]=e,r),[]),g1=sp.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);E1=zn({prefix:"\u{1F680}",name:"base256emoji",encode:w1,decode:b1})});var cu={};Z(cu,{identity:()=>au});var cp,x1,up,v1,au,Cs=P(()=>{a();cr();Se();cp=0,x1="identity",up=et,v1=r=>ur(cp,up(r)),au={code:cp,name:x1,encode:up,digest:v1}});var lC,hC,uu=P(()=>{a();lC=new TextEncoder,hC=new TextDecoder});var Zr,_1,Gi=P(()=>{a();Zd();ep();tp();rp();np();Ae();ip();Le();Hi();ap();Jn();Cs();dr();uu();Gn();Zr={...Zc,...eu,...tu,...ru,...nu,...ys,...iu,...ji,...ou,...su},_1={...Gc,...cu}});function Is(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}var fu=P(()=>{a()});function hp(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var lp,lu,D1,Os,hu=P(()=>{a();Gi();fu();lp=hp("utf8","u",r=>{let e=new TextDecoder("utf8");return"u"+e.decode(r)},r=>new TextEncoder().encode(r.substring(1))),lu=hp("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=Is(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),D1={utf8:lp,"utf-8":lp,hex:Zr.base16,latin1:lu,ascii:lu,binary:lu,...Zr},Os=D1});var Ji={};Z(Ji,{toString:()=>A});function A(r,e="utf8"){let t=Os[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var q=P(()=>{a();hu()});var dp={};Z(dp,{fromString:()=>M});function M(r,e="utf8"){let t=Os[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}var me=P(()=>{a();hu()});var du=m((kC,yp)=>{"use strict";a();var C1=async r=>{let e=0;for await(let t of r)e++;return e};yp.exports=C1});var Op=m((eI,Ip)=>{"use strict";a();Ip.exports=q1;function q1(r,e){for(var t=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)t[n++]=arguments[i++];return new Promise(function(c,u){t[n]=function(l){if(o)if(o=!1,l)u(l);else{for(var h=new Array(arguments.length-1),y=0;y<h.length;)h[y++]=arguments[y];c.apply(null,h)}};try{r.apply(e||null,t)}catch(f){o&&(o=!1,u(f))}})}});var Rp=m(Lp=>{"use strict";a();var Rs=Lp;Rs.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&e.charAt(t)==="=";)++n;return Math.ceil(e.length*3)/4-n};var ti=new Array(64),kp=new Array(123);for(lt=0;lt<64;)kp[ti[lt]=lt<26?lt+65:lt<52?lt+71:lt<62?lt-4:lt-59|43]=lt++;var lt;Rs.encode=function(e,t,n){for(var i=null,o=[],s=0,c=0,u;t<n;){var f=e[t++];switch(c){case 0:o[s++]=ti[f>>2],u=(f&3)<<4,c=1;break;case 1:o[s++]=ti[u|f>>4],u=(f&15)<<2,c=2;break;case 2:o[s++]=ti[u|f>>6],o[s++]=ti[f&63],c=0;break}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0)}return c&&(o[s++]=ti[u],o[s++]=61,c===1&&(o[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var Bp="invalid encoding";Rs.decode=function(e,t,n){for(var i=n,o=0,s,c=0;c<e.length;){var u=e.charCodeAt(c++);if(u===61&&o>1)break;if((u=kp[u])===void 0)throw Error(Bp);switch(o){case 0:s=u,o=1;break;case 1:t[n++]=s<<2|(u&48)>>4,s=u,o=2;break;case 2:t[n++]=(s&15)<<4|(u&60)>>2,s=u,o=3;break;case 3:t[n++]=(s&3)<<6|u,o=0;break}}if(o===1)throw Error(Bp);return n-i};Rs.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var Pp=m((iI,Np)=>{"use strict";a();Np.exports=Ns;function Ns(){this._listeners={}}Ns.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this};Ns.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this};Ns.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}});var qp=m((sI,zp)=>{"use strict";a();zp.exports=Fp(Fp);function Fp(r){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),n=t[3]===128;function i(u,f,l){e[0]=u,f[l]=t[0],f[l+1]=t[1],f[l+2]=t[2],f[l+3]=t[3]}function o(u,f,l){e[0]=u,f[l]=t[3],f[l+1]=t[2],f[l+2]=t[1],f[l+3]=t[0]}r.writeFloatLE=n?i:o,r.writeFloatBE=n?o:i;function s(u,f){return t[0]=u[f],t[1]=u[f+1],t[2]=u[f+2],t[3]=u[f+3],e[0]}function c(u,f){return t[3]=u[f],t[2]=u[f+1],t[1]=u[f+2],t[0]=u[f+3],e[0]}r.readFloatLE=n?s:c,r.readFloatBE=n?c:s}():function(){function e(n,i,o,s){var c=i<0?1:0;if(c&&(i=-i),i===0)n(1/i>0?0:2147483648,o,s);else if(isNaN(i))n(2143289344,o,s);else if(i>34028234663852886e22)n((c<<31|2139095040)>>>0,o,s);else if(i<11754943508222875e-54)n((c<<31|Math.round(i/1401298464324817e-60))>>>0,o,s);else{var u=Math.floor(Math.log(i)/Math.LN2),f=Math.round(i*Math.pow(2,-u)*8388608)&8388607;n((c<<31|u+127<<23|f)>>>0,o,s)}}r.writeFloatLE=e.bind(null,Up),r.writeFloatBE=e.bind(null,$p);function t(n,i,o){var s=n(i,o),c=(s>>31)*2+1,u=s>>>23&255,f=s&8388607;return u===255?f?NaN:c*(1/0):u===0?c*1401298464324817e-60*f:c*Math.pow(2,u-150)*(f+8388608)}r.readFloatLE=t.bind(null,Mp),r.readFloatBE=t.bind(null,jp)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),n=t[7]===128;function i(u,f,l){e[0]=u,f[l]=t[0],f[l+1]=t[1],f[l+2]=t[2],f[l+3]=t[3],f[l+4]=t[4],f[l+5]=t[5],f[l+6]=t[6],f[l+7]=t[7]}function o(u,f,l){e[0]=u,f[l]=t[7],f[l+1]=t[6],f[l+2]=t[5],f[l+3]=t[4],f[l+4]=t[3],f[l+5]=t[2],f[l+6]=t[1],f[l+7]=t[0]}r.writeDoubleLE=n?i:o,r.writeDoubleBE=n?o:i;function s(u,f){return t[0]=u[f],t[1]=u[f+1],t[2]=u[f+2],t[3]=u[f+3],t[4]=u[f+4],t[5]=u[f+5],t[6]=u[f+6],t[7]=u[f+7],e[0]}function c(u,f){return t[7]=u[f],t[6]=u[f+1],t[5]=u[f+2],t[4]=u[f+3],t[3]=u[f+4],t[2]=u[f+5],t[1]=u[f+6],t[0]=u[f+7],e[0]}r.readDoubleLE=n?s:c,r.readDoubleBE=n?c:s}():function(){function e(n,i,o,s,c,u){var f=s<0?1:0;if(f&&(s=-s),s===0)n(0,c,u+i),n(1/s>0?0:2147483648,c,u+o);else if(isNaN(s))n(0,c,u+i),n(2146959360,c,u+o);else if(s>17976931348623157e292)n(0,c,u+i),n((f<<31|2146435072)>>>0,c,u+o);else{var l;if(s<22250738585072014e-324)l=s/5e-324,n(l>>>0,c,u+i),n((f<<31|l/4294967296)>>>0,c,u+o);else{var h=Math.floor(Math.log(s)/Math.LN2);h===1024&&(h=1023),l=s*Math.pow(2,-h),n(l*4503599627370496>>>0,c,u+i),n((f<<31|h+1023<<20|l*1048576&1048575)>>>0,c,u+o)}}}r.writeDoubleLE=e.bind(null,Up,0,4),r.writeDoubleBE=e.bind(null,$p,4,0);function t(n,i,o,s,c){var u=n(s,c+i),f=n(s,c+o),l=(f>>31)*2+1,h=f>>>20&2047,y=4294967296*(f&1048575)+u;return h===2047?y?NaN:l*(1/0):h===0?l*5e-324*y:l*Math.pow(2,h-1075)*(y+4503599627370496)}r.readDoubleLE=t.bind(null,Mp,0,4),r.readDoubleBE=t.bind(null,jp,4,0)}(),r}function Up(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function $p(r,e,t){e[t]=r>>>24,e[t+1]=r>>>16&255,e[t+2]=r>>>8&255,e[t+3]=r&255}function Mp(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0}function jp(r,e){return(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}});var Vp=m((exports,module)=>{"use strict";a();module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}});var Wp=m(Kp=>{"use strict";a();var yu=Kp;yu.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?t+=1:n<2048?t+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,t+=4):t+=3;return t};yu.read=function(e,t,n){var i=n-t;if(i<1)return"";for(var o=null,s=[],c=0,u;t<n;)u=e[t++],u<128?s[c++]=u:u>191&&u<224?s[c++]=(u&31)<<6|e[t++]&63:u>239&&u<365?(u=((u&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,s[c++]=55296+(u>>10),s[c++]=56320+(u&1023)):s[c++]=(u&15)<<12|(e[t++]&63)<<6|e[t++]&63,c>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),c=0);return o?(c&&o.push(String.fromCharCode.apply(String,s.slice(0,c))),o.join("")):String.fromCharCode.apply(String,s.slice(0,c))};yu.write=function(e,t,n){for(var i=n,o,s,c=0;c<e.length;++c)o=e.charCodeAt(c),o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&((s=e.charCodeAt(c+1))&64512)===56320?(o=65536+((o&1023)<<10)+(s&1023),++c,t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128);return n-i}});var Gp=m((lI,Hp)=>{"use strict";a();Hp.exports=V1;function V1(r,e,t){var n=t||8192,i=n>>>1,o=null,s=n;return function(u){if(u<1||u>i)return r(u);s+u>n&&(o=r(n),s=0);var f=e.call(o,s,s+=u);return s&7&&(s=(s|7)+1),f}}});var Qp=m((dI,Jp)=>{"use strict";a();Jp.exports=he;var Zi=yr();function he(r,e){this.lo=r>>>0,this.hi=e>>>0}var en=he.zero=new he(0,0);en.toNumber=function(){return 0};en.zzEncode=en.zzDecode=function(){return this};en.length=function(){return 1};var K1=he.zeroHash="\0\0\0\0\0\0\0\0";he.fromNumber=function(e){if(e===0)return en;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new he(n,i)};he.from=function(e){if(typeof e=="number")return he.fromNumber(e);if(Zi.isString(e))if(Zi.Long)e=Zi.Long.fromString(e);else return he.fromNumber(parseInt(e,10));return e.low||e.high?new he(e.low>>>0,e.high>>>0):en};he.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296};he.prototype.toLong=function(e){return Zi.Long?new Zi.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var pr=String.prototype.charCodeAt;he.fromHash=function(e){return e===K1?en:new he((pr.call(e,0)|pr.call(e,1)<<8|pr.call(e,2)<<16|pr.call(e,3)<<24)>>>0,(pr.call(e,4)|pr.call(e,5)<<8|pr.call(e,6)<<16|pr.call(e,7)<<24)>>>0)};he.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};he.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};he.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};he.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}});var yr=m(mu=>{"use strict";a();var D=mu;D.asPromise=Op();D.base64=Rp();D.EventEmitter=Pp();D.float=qp();D.inquire=Vp();D.utf8=Wp();D.pool=Gp();D.LongBits=Qp();D.isNode=Boolean(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);D.global=D.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||mu;D.emptyArray=Object.freeze?Object.freeze([]):[];D.emptyObject=Object.freeze?Object.freeze({}):{};D.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};D.isString=function(e){return typeof e=="string"||e instanceof String};D.isObject=function(e){return e&&typeof e=="object"};D.isset=D.isSet=function(e,t){var n=e[t];return n!=null&&e.hasOwnProperty(t)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};D.Buffer=function(){try{var r=D.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch{return null}}();D._Buffer_from=null;D._Buffer_allocUnsafe=null;D.newBuffer=function(e){return typeof e=="number"?D.Buffer?D._Buffer_allocUnsafe(e):new D.Array(e):D.Buffer?D._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};D.Array=typeof Uint8Array<"u"?Uint8Array:Array;D.Long=D.global.dcodeIO&&D.global.dcodeIO.Long||D.global.Long||D.inquire("long");D.key2Re=/^true|false|0|1$/;D.key32Re=/^-?(?:0|[1-9][0-9]*)$/;D.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;D.longToHash=function(e){return e?D.LongBits.from(e).toHash():D.LongBits.zeroHash};D.longFromHash=function(e,t){var n=D.LongBits.fromHash(e);return D.Long?D.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))};function Yp(r,e,t){for(var n=Object.keys(e),i=0;i<n.length;++i)(r[n[i]]===void 0||!t)&&(r[n[i]]=e[n[i]]);return r}D.merge=Yp;D.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function Xp(r){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&Yp(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get(){return r},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}D.newError=Xp;D.ProtocolError=Xp("ProtocolError");D.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var i=Object.keys(this),o=i.length-1;o>-1;--o)if(t[i[o]]===1&&this[i[o]]!==void 0&&this[i[o]]!==null)return i[o]}};D.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}};D.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};D._configure=function(){var r=D.Buffer;if(!r){D._Buffer_from=D._Buffer_allocUnsafe=null;return}D._Buffer_from=r.from!==Uint8Array.from&&r.from||function(t,n){return new r(t,n)},D._Buffer_allocUnsafe=r.allocUnsafe||function(t){return new r(t)}}});var _u=m((gI,ry)=>{"use strict";a();ry.exports=R;var nt=yr(),gu,Ps=nt.LongBits,Zp=nt.base64,ey=nt.utf8;function eo(r,e,t){this.fn=r,this.len=e,this.next=void 0,this.val=t}function bu(){}function W1(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function R(){this.len=0,this.head=new eo(bu,0,0),this.tail=this.head,this.states=null}var ty=function(){return nt.Buffer?function(){return(R.create=function(){return new gu})()}:function(){return new R}};R.create=ty();R.alloc=function(e){return new nt.Array(e)};nt.Array!==Array&&(R.alloc=nt.pool(R.alloc,nt.Array.prototype.subarray));R.prototype._push=function(e,t,n){return this.tail=this.tail.next=new eo(e,t,n),this.len+=t,this};function Eu(r,e,t){e[t]=r&255}function H1(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}function xu(r,e){this.len=r,this.next=void 0,this.val=e}xu.prototype=Object.create(eo.prototype);xu.prototype.fn=H1;R.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new xu((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};R.prototype.int32=function(e){return e<0?this._push(vu,10,Ps.fromNumber(e)):this.uint32(e)};R.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function vu(r,e,t){for(;r.hi;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}R.prototype.uint64=function(e){var t=Ps.from(e);return this._push(vu,t.length(),t)};R.prototype.int64=R.prototype.uint64;R.prototype.sint64=function(e){var t=Ps.from(e).zzEncode();return this._push(vu,t.length(),t)};R.prototype.bool=function(e){return this._push(Eu,1,e?1:0)};function wu(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}R.prototype.fixed32=function(e){return this._push(wu,4,e>>>0)};R.prototype.sfixed32=R.prototype.fixed32;R.prototype.fixed64=function(e){var t=Ps.from(e);return this._push(wu,4,t.lo)._push(wu,4,t.hi)};R.prototype.sfixed64=R.prototype.fixed64;R.prototype.float=function(e){return this._push(nt.float.writeFloatLE,4,e)};R.prototype.double=function(e){return this._push(nt.float.writeDoubleLE,8,e)};var G1=nt.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};R.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(Eu,1,0);if(nt.isString(e)){var n=R.alloc(t=Zp.length(e));Zp.decode(e,n,0),e=n}return this.uint32(t)._push(G1,t,e)};R.prototype.string=function(e){var t=ey.length(e);return t?this.uint32(t)._push(ey.write,t,e):this._push(Eu,1,0)};R.prototype.fork=function(){return this.states=new W1(this),this.head=this.tail=new eo(bu,0,0),this.len=0,this};R.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new eo(bu,0,0),this.len=0),this};R.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this};R.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t};R._configure=function(r){gu=r,R.create=ty(),gu._configure()}});var oy=m((bI,iy)=>{"use strict";a();iy.exports=Ct;var ny=_u();(Ct.prototype=Object.create(ny.prototype)).constructor=Ct;var mr=yr();function Ct(){ny.call(this)}Ct._configure=function(){Ct.alloc=mr._Buffer_allocUnsafe,Ct.writeBytesBuffer=mr.Buffer&&mr.Buffer.prototype instanceof Uint8Array&&mr.Buffer.prototype.set.name==="set"?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}};Ct.prototype.bytes=function(e){mr.isString(e)&&(e=mr._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(Ct.writeBytesBuffer,t,e),this};function J1(r,e,t){r.length<40?mr.utf8.write(r,e,t):e.utf8Write?e.utf8Write(r,t):e.write(r,t)}Ct.prototype.string=function(e){var t=mr.Buffer.byteLength(e);return this.uint32(t),t&&this._push(J1,t,e),this};Ct._configure()});var Au=m((xI,fy)=>{"use strict";a();fy.exports=te;var It=yr(),Su,cy=It.LongBits,Q1=It.utf8;function ht(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function te(r){this.buf=r,this.pos=0,this.len=r.length}var sy=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new te(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new te(e);throw Error("illegal buffer")},uy=function(){return It.Buffer?function(t){return(te.create=function(i){return It.Buffer.isBuffer(i)?new Su(i):sy(i)})(t)}:sy};te.create=uy();te.prototype._slice=It.Array.prototype.subarray||It.Array.prototype.slice;te.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,ht(this,10);return e}}();te.prototype.int32=function(){return this.uint32()|0};te.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Du(){var r=new cy(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw ht(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw ht(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}te.prototype.bool=function(){return this.uint32()!==0};function Fs(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}te.prototype.fixed32=function(){if(this.pos+4>this.len)throw ht(this,4);return Fs(this.buf,this.pos+=4)};te.prototype.sfixed32=function(){if(this.pos+4>this.len)throw ht(this,4);return Fs(this.buf,this.pos+=4)|0};function ay(){if(this.pos+8>this.len)throw ht(this,8);return new cy(Fs(this.buf,this.pos+=4),Fs(this.buf,this.pos+=4))}te.prototype.float=function(){if(this.pos+4>this.len)throw ht(this,4);var e=It.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};te.prototype.double=function(){if(this.pos+8>this.len)throw ht(this,4);var e=It.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};te.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw ht(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};te.prototype.string=function(){var e=this.bytes();return Q1.read(e,0,e.length)};te.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw ht(this,e);this.pos+=e}else do if(this.pos>=this.len)throw ht(this);while(this.buf[this.pos++]&128);return this};te.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};te._configure=function(r){Su=r,te.create=uy(),Su._configure();var e=It.Long?"toLong":"toNumber";It.merge(te.prototype,{int64:function(){return Du.call(this)[e](!1)},uint64:function(){return Du.call(this)[e](!0)},sint64:function(){return Du.call(this).zzDecode()[e](!1)},fixed64:function(){return ay.call(this)[e](!0)},sfixed64:function(){return ay.call(this)[e](!1)}})}});var py=m((_I,dy)=>{"use strict";a();dy.exports=tn;var hy=Au();(tn.prototype=Object.create(hy.prototype)).constructor=tn;var ly=yr();function tn(r){hy.call(this,r)}tn._configure=function(){ly.Buffer&&(tn.prototype._slice=ly.Buffer.prototype.slice)};tn.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};tn._configure()});var my=m((SI,yy)=>{"use strict";a();yy.exports=to;var Tu=yr();(to.prototype=Object.create(Tu.EventEmitter.prototype)).constructor=to;function to(r,e,t){if(typeof r!="function")throw TypeError("rpcImpl must be a function");Tu.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(t)}to.prototype.rpcCall=function r(e,t,n,i,o){if(!i)throw TypeError("request must be specified");var s=this;if(!o)return Tu.asPromise(r,s,e,t,n,i);if(!s.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return s.rpcImpl(e,t[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(u,f){if(u)return s.emit("error",u,e),o(u);if(f===null){s.end(!0);return}if(!(f instanceof n))try{f=n[s.responseDelimited?"decodeDelimited":"decode"](f)}catch(l){return s.emit("error",l,e),o(l)}return s.emit("data",f,e),o(null,f)})}catch(c){s.emit("error",c,e),setTimeout(function(){o(c)},0);return}};to.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var wy=m(gy=>{"use strict";a();var Y1=gy;Y1.Service=my()});var Ey=m((II,by)=>{"use strict";a();by.exports={}});var _y=m(vy=>{"use strict";a();var Re=vy;Re.build="minimal";Re.Writer=_u();Re.BufferWriter=oy();Re.Reader=Au();Re.BufferReader=py();Re.util=yr();Re.rpc=wy();Re.roots=Ey();Re.configure=xy;function xy(){Re.util._configure(),Re.Writer._configure(Re.BufferWriter),Re.Reader._configure(Re.BufferReader)}xy()});var gr=m((LI,Dy)=>{"use strict";a();Dy.exports=_y()});var Cy=m((Cu,Ty)=>{"use strict";a();Object.defineProperty(Cu,"__esModule",{value:!0});$s.BASE=2166136261;function $s(r,e=$s.BASE){let t=r.length;for(let n=0;n<t;n++)e^=r.charCodeAt(n),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0}Cu.default=$s;Ty.exports=$s});var Bu={};Z(Bu,{concat:()=>J});function J(r,e){e||(e=r.reduce((i,o)=>i+o.length,0));let t=Is(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return t}var wr=P(()=>{a();fu()});var Jy=m((R6,Gy)=>{"use strict";a();var Hy="[a-fA-F\\d:]",xr=r=>r&&r.includeBoundaries?`(?:(?<=\\s|^)(?=${Hy})|(?<=${Hy})(?=\\s|$))`:"",pt="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",oe="[a-fA-F\\d]{1,4}",Ws=`
(?:
(?:${oe}:){7}(?:${oe}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${oe}:){6}(?:${pt}|:${oe}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${oe}:){5}(?::${pt}|(?::${oe}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${oe}:){4}(?:(?::${oe}){0,1}:${pt}|(?::${oe}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${oe}:){3}(?:(?::${oe}){0,2}:${pt}|(?::${oe}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${oe}:){2}(?:(?::${oe}){0,3}:${pt}|(?::${oe}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${oe}:){1}(?:(?::${oe}){0,4}:${pt}|(?::${oe}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${oe}){0,5}:${pt}|(?::${oe}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),dv=new RegExp(`(?:^${pt}$)|(?:^${Ws}$)`),pv=new RegExp(`^${pt}$`),yv=new RegExp(`^${Ws}$`),Mu=r=>r&&r.exact?dv:new RegExp(`(?:${xr(r)}${pt}${xr(r)})|(?:${xr(r)}${Ws}${xr(r)})`,"g");Mu.v4=r=>r&&r.exact?pv:new RegExp(`${xr(r)}${pt}${xr(r)}`,"g");Mu.v6=r=>r&&r.exact?yv:new RegExp(`${xr(r)}${Ws}${xr(r)}`,"g");Gy.exports=Mu});var Yy=m((P6,Qy)=>{"use strict";a();var ju=Jy(),si=r=>ju({exact:!0}).test(r);si.v4=r=>ju.v4({exact:!0}).test(r);si.v6=r=>ju.v6({exact:!0}).test(r);si.version=r=>si(r)?si.v4(r)?4:6:void 0;Qy.exports=si});var rm=m((U6,tm)=>{"use strict";a();var qu=Yy(),{toString:Xy}=(q(),Oe(Ji)),mv=qu,zu=qu.v4,Zy=qu.v6,em=function(r,e,t){t=~~t;let n;if(zu(r))n=e||new Uint8Array(t+4),r.split(/\./g).map(function(i){n[t++]=parseInt(i,10)&255});else if(Zy(r)){let i=r.split(":",8),o;for(o=0;o<i.length;o++){let s=zu(i[o]),c;s&&(c=em(i[o]),i[o]=Xy(c.slice(0,2),"base16")),c&&++o<8&&i.splice(o,0,Xy(c.slice(2,4),"base16"))}if(i[0]==="")for(;i.length<8;)i.unshift("0");else if(i[i.length-1]==="")for(;i.length<8;)i.push("0");else if(i.length<8){for(o=0;o<i.length&&i[o]!=="";o++);let s=[o,"1"];for(o=9-i.length;o>0;o--)s.push("0");i.splice.apply(i,s)}for(n=e||new Uint8Array(t+16),o=0;o<i.length;o++){let s=parseInt(i[o],16);n[t++]=s>>8&255,n[t++]=s&255}}if(!n)throw Error("Invalid ip address: "+r);return n},gv=function(r,e,t){e=~~e,t=t||r.length-e;let n=[],i,o=new DataView(r.buffer);if(t===4){for(let s=0;s<t;s++)n.push(r[e+s]);i=n.join(".")}else if(t===16){for(let s=0;s<t;s+=2)n.push(o.getUint16(e+s).toString(16));i=n.join(":"),i=i.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),i=i.replace(/:{3,4}/,"::")}return i};tm.exports={isIP:mv,isV4:zu,isV6:Zy,toBytes:em,toString:gv}});var Hs=m((M6,im)=>{"use strict";a();function Ne(r){if(typeof r=="number"){if(Ne.codes[r])return Ne.codes[r];throw new Error("no protocol with code: "+r)}else if(typeof r=="string"){if(Ne.names[r])return Ne.names[r];throw new Error("no protocol with name: "+r)}throw new Error("invalid protocol id type: "+r)}var it=-1;Ne.lengthPrefixedVarSize=it;Ne.V=it;Ne.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,it,"ip6zone"],[53,it,"dns","resolvable"],[54,it,"dns4","resolvable"],[55,it,"dns6","resolvable"],[56,it,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,it,"unix",!1,"path"],[421,it,"ipfs"],[421,it,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,it,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,it,"memory"]];Ne.names={};Ne.codes={};Ne.table.map(r=>{let e=nm.apply(null,r);return Ne.codes[e.code]=e,Ne.names[e.name]=e,null});Ne.object=nm;function nm(r,e,t,n,i){return{code:r,size:e,name:t,resolvable:Boolean(n),path:Boolean(i)}}im.exports=Ne});var hm=m((z6,lm)=>{"use strict";a();var Gs=rm(),am=Hs(),{CID:wv}=(z(),Oe($c)),{base32:cm}=(Ae(),Oe(ys)),{base58btc:bv}=(Le(),Oe(ji)),Ev=(Se(),Oe(De)),ai=ke(),{toString:Js}=(q(),Oe(Ji)),{fromString:um}=(me(),Oe(dp)),{concat:Qs}=(wr(),Oe(Bu));lm.exports=io;function io(r,e){return e instanceof Uint8Array?io.toString(r,e):io.toBytes(r,e)}io.toString=function(e,t){switch(am(e).code){case 4:case 41:return xv(t);case 6:case 273:case 33:case 132:return fm(t).toString();case 53:case 54:case 55:case 56:case 400:case 777:return _v(t);case 421:return Sv(t);case 444:return sm(t);case 445:return sm(t);default:return Js(t,"base16")}};io.toBytes=function(e,t){switch(am(e).code){case 4:return om(t);case 41:return om(t);case 6:case 273:case 33:case 132:return Vu(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 777:return vv(t);case 421:return Dv(t);case 444:return Av(t);case 445:return Tv(t);default:return um(t,"base16")}};function om(r){if(!Gs.isIP(r))throw new Error("invalid ip address");return Gs.toBytes(r)}function xv(r){let e=Gs.toString(r);if(!e||!Gs.isIP(e))throw new Error("invalid ip address");return e}function Vu(r){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function fm(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function vv(r){let e=um(r),t=Uint8Array.from(ai.encode(e.length));return Qs([t,e],t.length+e.length)}function _v(r){let e=ai.decode(r);if(r=r.slice(ai.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return Js(r)}function Dv(r){let e;r[0]==="Q"||r[0]==="1"?e=Ev.decode(bv.decode(`z${r}`)).bytes:e=wv.parse(r).multihash.bytes;let t=Uint8Array.from(ai.encode(e.length));return Qs([t,e],t.length+e.length)}function Sv(r){let e=ai.decode(r),t=r.slice(ai.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return Js(t,"base58btc")}function Av(r){let e=r.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==16)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion address.");let t=cm.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=Vu(n);return Qs([t,i],t.length+i.length)}function Tv(r){let e=r.split(":");if(e.length!==2)throw new Error("failed to parse onion addr: "+e+" does not contain a port number");if(e[0].length!==56)throw new Error("failed to parse onion addr: "+e[0]+" not a Tor onion3 address.");let t=cm.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=Vu(n);return Qs([t,i],t.length+i.length)}function sm(r){let e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=Js(e,"base32"),i=fm(t);return n+":"+i}});var Dm=m((V6,_m)=>{"use strict";a();var pm=hm(),Ku=Hs(),oo=ke(),{concat:dm}=(wr(),Oe(Bu)),{toString:Cv}=(q(),Oe(Ji));_m.exports={stringToStringTuples:ym,stringTuplesToString:mm,tuplesToStringTuples:wm,stringTuplesToTuples:gm,bytesToTuples:Wu,tuplesToBytes:bm,bytesToString:Iv,stringToBytes:xm,fromString:Ov,fromBytes:vm,validateBytes:Hu,isValidBytes:Bv,cleanPath:Ys,ParseError:Gu,protoFromTuple:so,sizeForAddr:Em};function ym(r){let e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){let i=t[n],o=Ku(i);if(o.size===0){e.push([i]);continue}if(n++,n>=t.length)throw Gu("invalid address: "+r);if(o.path){e.push([i,Ys(t.slice(n).join("/"))]);break}e.push([i,t[n]])}return e}function mm(r){let e=[];return r.map(t=>{let n=so(t);return e.push(n.name),t.length>1&&e.push(t[1]),null}),Ys(e.join("/"))}function gm(r){return r.map(e=>{Array.isArray(e)||(e=[e]);let t=so(e);return e.length>1?[t.code,pm.toBytes(t.code,e[1])]:[t.code]})}function wm(r){return r.map(e=>{let t=so(e);return e[1]?[t.code,pm.toString(t.code,e[1])]:[t.code]})}function bm(r){return vm(dm(r.map(e=>{let t=so(e),n=Uint8Array.from(oo.encode(t.code));return e.length>1&&(n=dm([n,e[1]])),n})))}function Em(r,e){return r.size>0?r.size/8:r.size===0?0:oo.decode(e)+oo.decode.bytes}function Wu(r){let e=[],t=0;for(;t<r.length;){let n=oo.decode(r,t),i=oo.decode.bytes,o=Ku(n),s=Em(o,r.slice(t+i));if(s===0){e.push([n]),t+=i;continue}let c=r.slice(t+i,t+i+s);if(t+=s+i,t>r.length)throw Gu("Invalid address Uint8Array: "+Cv(r,"base16"));e.push([n,c])}return e}function Iv(r){let e=Wu(r),t=wm(e);return mm(t)}function xm(r){r=Ys(r);let e=ym(r),t=gm(e);return bm(t)}function Ov(r){return xm(r)}function vm(r){let e=Hu(r);if(e)throw e;return Uint8Array.from(r)}function Hu(r){try{Wu(r)}catch(e){return e}}function Bv(r){return Hu(r)===void 0}function Ys(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function Gu(r){return new Error("Error parsing address: "+r)}function so(r){return Ku(r[0])}});var Sm={};Z(Sm,{equals:()=>ao});function ao(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var Xs=P(()=>{a()});var Im=m((H6,Cm)=>{"use strict";a();var yt=Dm(),ci=Hs(),Am=ke(),{CID:kv}=(z(),Oe($c)),{base58btc:Lv}=(Le(),Oe(ji)),Rv=Te(),Nv=Symbol.for("nodejs.util.inspect.custom"),{toString:Zs}=(q(),Oe(Ji)),{equals:Pv}=(Xs(),Oe(Sm)),Ju=new Map,Tm=Symbol.for("@multiformats/js-multiaddr/multiaddr"),ge=class{constructor(e){if(e==null&&(e=""),Object.defineProperty(this,Tm,{value:!0}),e instanceof Uint8Array)this.bytes=yt.fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=yt.fromString(e)}else if(ge.isMultiaddr(e))this.bytes=yt.fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return yt.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){let e={},t=this.toString().split("/");return e.family=t[1]==="ip4"?4:6,e.host=t[2],e.transport=t[3],e.port=parseInt(t[4]),e}protos(){return this.protoCodes().map(e=>Object.assign({},ci(e)))}protoCodes(){let e=[],t=this.bytes,n=0;for(;n<t.length;){let i=Am.decode(t,n),o=Am.decode.bytes,s=ci(i);n+=yt.sizeForAddr(s,t.slice(n+o))+o,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return yt.bytesToTuples(this.bytes)}stringTuples(){let e=yt.bytesToTuples(this.bytes);return yt.tuplesToStringTuples(e)}encapsulate(e){return e=new ge(e),new ge(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),n=this.toString(),i=n.lastIndexOf(t);if(i<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return new ge(n.slice(0,i))}decapsulateCode(e){let t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new ge(yt.tuplesToBytes(t.slice(0,n)));return this}getPeerId(){try{let t=this.stringTuples().filter(n=>n[0]===ci.names.ipfs.code).pop();if(t&&t[1]){let n=t[1];return n[0]==="Q"||n[0]==="1"?Zs(Lv.decode(`z${n}`),"base58btc"):Zs(kv.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>!!ci(t[0]).path)[0][1],e||(e=null)}catch{e=null}return e}equals(e){return Pv(this.bytes,e.bytes)}async resolve(){let e=this.protos().find(i=>i.resolvable);if(!e)return[this];let t=Ju.get(e.name);if(!t)throw Rv(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await t(this)).map(i=>new ge(i))}nodeAddress(){let e=this.protoCodes(),t=this.protoNames(),n=this.toString().split("/").slice(1);if(n.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(e[0]!==4&&e[0]!==41&&e[0]!==54&&e[0]!==55)throw new Error(`no protocol with name: "'${t[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if(n[2]!=="tcp"&&n[2]!=="udp")throw new Error(`no protocol with name: "'${t[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:e[0]===41||e[0]===55?6:4,address:n[1],port:parseInt(n[3])}}isThinWaistAddress(e){let t=(e||this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}static fromNodeAddress(e,t){if(!e)throw new Error("requires node address object");if(!t)throw new Error("requires transport protocol");let n;switch(e.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error(`Invalid addr family. Got '${e.family}' instead of 4 or 6`)}return new ge("/"+[n,e.address,t,e.port].join("/"))}static isName(e){return ge.isMultiaddr(e)?e.protos().some(t=>t.resolvable):!1}static isMultiaddr(e){return e instanceof ge||Boolean(e&&e[Tm])}[Nv](){return"<Multiaddr "+Zs(this.bytes,"base16")+" - "+yt.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+Zs(this.bytes,"base16")+" - "+yt.bytesToString(this.bytes)+">"}};ge.protocols=ci;ge.resolvers=Ju;function Fv(r){return new ge(r)}Cm.exports={Multiaddr:ge,multiaddr:Fv,protocols:ci,resolvers:Ju}});var Nm=m((O4,ea)=>{"use strict";a();ea.exports=Hv;ea.exports.format=Lm;ea.exports.parse=Rm;var Vv=/\B(?=(\d{3})+(?!\d))/g,Kv=/(?:\.0*|(\.[^0]+)0+)$/,vr={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},Wv=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function Hv(r,e){return typeof r=="string"?Rm(r):typeof r=="number"?Lm(r,e):null}function Lm(r,e){if(!Number.isFinite(r))return null;var t=Math.abs(r),n=e&&e.thousandsSeparator||"",i=e&&e.unitSeparator||"",o=e&&e.decimalPlaces!==void 0?e.decimalPlaces:2,s=Boolean(e&&e.fixedDecimals),c=e&&e.unit||"";(!c||!vr[c.toLowerCase()])&&(t>=vr.pb?c="PB":t>=vr.tb?c="TB":t>=vr.gb?c="GB":t>=vr.mb?c="MB":t>=vr.kb?c="KB":c="B");var u=r/vr[c.toLowerCase()],f=u.toFixed(o);return s||(f=f.replace(Kv,"$1")),n&&(f=f.split(".").map(function(l,h){return h===0?l.replace(Vv,n):l}).join(".")),f+i+c}function Rm(r){if(typeof r=="number"&&!isNaN(r))return r;if(typeof r!="string")return null;var e=Wv.exec(r),t,n="b";return e?(t=parseFloat(e[1]),n=e[4].toLowerCase()):(t=parseInt(r,10),n="b"),isNaN(t)?null:Math.floor(vr[n]*t)}});var Fm=m((k4,Pm)=>{"use strict";a();Pm.exports=r=>{if(Object.prototype.toString.call(r)!=="[object Object]")return!1;let e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}});var qm=m((jm,zm)=>{"use strict";a();var ta=Fm(),{hasOwnProperty:$m}=Object.prototype,{propertyIsEnumerable:Gv}=Object,fi=(r,e,t)=>Object.defineProperty(r,e,{value:t,writable:!0,enumerable:!0,configurable:!0}),Jv=jm,Um={concatArrays:!1,ignoreUndefined:!1},ra=r=>{let e=[];for(let t in r)$m.call(r,t)&&e.push(t);if(Object.getOwnPropertySymbols){let t=Object.getOwnPropertySymbols(r);for(let n of t)Gv.call(r,n)&&e.push(n)}return e};function li(r){return Array.isArray(r)?Qv(r):ta(r)?Yv(r):r}function Qv(r){let e=r.slice(0,0);return ra(r).forEach(t=>{fi(e,t,li(r[t]))}),e}function Yv(r){let e=Object.getPrototypeOf(r)===null?Object.create(null):{};return ra(r).forEach(t=>{fi(e,t,li(r[t]))}),e}var Mm=(r,e,t,n)=>(t.forEach(i=>{typeof e[i]>"u"&&n.ignoreUndefined||(i in r&&r[i]!==Object.getPrototypeOf(r)?fi(r,i,Xu(r[i],e[i],n)):fi(r,i,li(e[i])))}),r),Xv=(r,e,t)=>{let n=r.slice(0,0),i=0;return[r,e].forEach(o=>{let s=[];for(let c=0;c<o.length;c++)!$m.call(o,c)||(s.push(String(c)),o===r?fi(n,i++,o[c]):fi(n,i++,li(o[c])));n=Mm(n,o,ra(o).filter(c=>!s.includes(c)),t)}),n};function Xu(r,e,t){return t.concatArrays&&Array.isArray(r)&&Array.isArray(e)?Xv(r,e,t):!ta(e)||!ta(r)?li(e):Mm(r,e,ra(e),t)}zm.exports=function(...r){let e=Xu(li(Um),this!==Jv&&this||{},Um),t={_:{}};for(let n of r)if(n!==void 0){if(!ta(n))throw new TypeError("`"+n+"` is not an Option Object");t=Xu(t,{_:n},e)}return t._}});var Hm=m((tO,Zu)=>{"use strict";a();var a2=Object.prototype.hasOwnProperty,Ce="~";function lo(){}Object.create&&(lo.prototype=Object.create(null),new lo().__proto__||(Ce=!1));function c2(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function Wm(r,e,t,n,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var o=new c2(t,n||r,i),s=Ce?Ce+e:e;return r._events[s]?r._events[s].fn?r._events[s]=[r._events[s],o]:r._events[s].push(o):(r._events[s]=o,r._eventsCount++),r}function ia(r,e){--r._eventsCount===0?r._events=new lo:delete r._events[e]}function we(){this._events=new lo,this._eventsCount=0}we.prototype.eventNames=function(){var e=[],t,n;if(this._eventsCount===0)return e;for(n in t=this._events)a2.call(t,n)&&e.push(Ce?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};we.prototype.listeners=function(e){var t=Ce?Ce+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s};we.prototype.listenerCount=function(e){var t=Ce?Ce+e:e,n=this._events[t];return n?n.fn?1:n.length:0};we.prototype.emit=function(e,t,n,i,o,s){var c=Ce?Ce+e:e;if(!this._events[c])return!1;var u=this._events[c],f=arguments.length,l,h;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),f){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,o),!0;case 6:return u.fn.call(u.context,t,n,i,o,s),!0}for(h=1,l=new Array(f-1);h<f;h++)l[h-1]=arguments[h];u.fn.apply(u.context,l)}else{var y=u.length,x;for(h=0;h<y;h++)switch(u[h].once&&this.removeListener(e,u[h].fn,void 0,!0),f){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,t);break;case 3:u[h].fn.call(u[h].context,t,n);break;case 4:u[h].fn.call(u[h].context,t,n,i);break;default:if(!l)for(x=1,l=new Array(f-1);x<f;x++)l[x-1]=arguments[x];u[h].fn.apply(u[h].context,l)}}return!0};we.prototype.on=function(e,t,n){return Wm(this,e,t,n,!1)};we.prototype.once=function(e,t,n){return Wm(this,e,t,n,!0)};we.prototype.removeListener=function(e,t,n,i){var o=Ce?Ce+e:e;if(!this._events[o])return this;if(!t)return ia(this,o),this;var s=this._events[o];if(s.fn)s.fn===t&&(!i||s.once)&&(!n||s.context===n)&&ia(this,o);else{for(var c=0,u=[],f=s.length;c<f;c++)(s[c].fn!==t||i&&!s[c].once||n&&s[c].context!==n)&&u.push(s[c]);u.length?this._events[o]=u.length===1?u[0]:u:ia(this,o)}return this};we.prototype.removeAllListeners=function(e){var t;return e?(t=Ce?Ce+e:e,this._events[t]&&ia(this,t)):(this._events=new lo,this._eventsCount=0),this};we.prototype.off=we.prototype.removeListener;we.prototype.addListener=we.prototype.on;we.prefixed=Ce;we.EventEmitter=we;typeof Zu<"u"&&(Zu.exports=we)});var fn=m((YO,ng)=>{"use strict";a();var h2=async function*(r,e){for await(let t of r)await e(t)&&(yield t)};ng.exports=h2});var ln=m((oB,ig)=>{"use strict";a();var d2=async r=>{for await(let e of r);};ig.exports=d2});var af=m((vB,sg)=>{"use strict";a();var w2=async r=>{for await(let e of r)return e};sg.exports=w2});var pi=m((HB,cg)=>{"use strict";a();var S2=async function*(r,e){for await(let t of r)yield e(t)};cg.exports=S2});var fg=m((vk,ug)=>{"use strict";a();async function*C2(r,e=1){let t=[];e<1&&(e=1);for await(let n of r)for(t.push(n);t.length>=e;)yield t.slice(0,e),t=t.slice(e);for(;t.length;)yield t.slice(0,e),t=t.slice(e)}ug.exports=C2});var hg=m((Dk,lg)=>{"use strict";a();var I2=fg();async function*O2(r,e=1){for await(let t of I2(r,e)){let n=t.map(i=>i().then(o=>({ok:!0,value:o}),o=>({ok:!1,err:o})));for(let i=0;i<n.length;i++){let o=await n[i];if(o.ok)yield o.value;else throw o.err}}}lg.exports=O2});var pg=m((Lk,dg)=>{a();dg.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var gg=m((Pk,mg)=>{a();var yg=pg();mg.exports=class{constructor(e){this.hwm=e||16,this.head=new yg(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let t=this.head;this.head=t.next=new yg(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return e}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}});var bg=m((Uk,wg)=>{a();var cf=gg();wg.exports=r=>{r=r||{};let e;typeof r=="function"?(e=r,r={}):e=r.onEnd;let t=new cf,n,i,o,s=()=>{if(!t.isEmpty()){if(r.writev){let S,L=[];for(;!t.isEmpty();){if(S=t.shift(),S.error)throw S.error;L.push(S.value)}return{done:S.done,value:L}}let g=t.shift();if(g.error)throw g.error;return g}return o?{done:!0}:new Promise((g,S)=>{i=L=>(i=null,L.error?S(L.error):r.writev&&!L.done?g({done:L.done,value:[L.value]}):g(L),n)})},c=g=>i?i(g):(t.push(g),n),u=g=>(t=new cf,i?i({error:g}):(t.push({error:g}),n)),f=g=>o?n:c({done:!1,value:g}),l=g=>o?n:(o=!0,g?u(g):c({done:!0})),h=()=>(t=new cf,l(),{done:!0}),y=g=>(l(g),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:s,return:h,throw:y,push:f,end:l},!e)return n;let x=n;return n={[Symbol.asyncIterator](){return this},next(){return x.next()},throw(g){return x.throw(g),e&&(e(g),e=null),{done:!0}},return(){return x.return(),e&&(e(),e=null),{done:!0}},push:f,end(g){return x.end(g),e&&(e(g),e=null),n}},n}});var da=m((Mk,Eg)=>{"use strict";a();var B2=bg(),k2=async function*(...r){let e=B2();setTimeout(async()=>{try{await Promise.all(r.map(async t=>{for await(let n of t)e.push(n)})),e.end()}catch(t){e.end(t)}},0),yield*e};Eg.exports=k2});var xo=m((iR,Tg)=>{"use strict";a();var J2=async r=>{let e=[];for await(let t of r)e.push(t);return e};Tg.exports=J2});var vo=m((cR,Cg)=>{"use strict";a();var Y2=async function*(r,e){let t=0;if(!(e<1)){for await(let n of r)if(yield n,t++,t===e)return}};Cg.exports=Y2});var kg=m((bN,Bg)=>{"use strict";a();var f8=xo(),l8=async function*(r,e){yield*(await f8(r)).sort(e)};Bg.exports=l8});var Rg=m(Lg=>{"use strict";a();Lg.supports=function(...e){let t=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}});var gt=m((DN,Ng)=>{"use strict";a();Ng.exports=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var ff=m((AN,Pg)=>{"use strict";a();var uf=null;Pg.exports=function(){return uf===null&&(uf={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),uf}});var df=m(Fg=>{"use strict";a();var lf=gt(),h8=new Set(["buffer","view","utf8"]),hf=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!h8.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new lf(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new lf(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new lf(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};Fg.Encoding=hf});var gf=m(ma=>{"use strict";a();var{Buffer:yf}=Bi()||{},{Encoding:mf}=df(),d8=ff(),_o=class extends mf{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new Do({encode:this.encode,decode:e=>this.decode(yf.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},Do=class extends mf{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new _o({encode:e=>{let t=this.encode(e);return yf.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},pf=class extends mf{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new _o({encode:e=>yf.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:t}=d8();return new Do({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(t.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};ma.BufferFormat=_o;ma.ViewFormat=Do;ma.UTF8Format=pf});var jg=m(hn=>{"use strict";a();var{Buffer:Ee}=Bi()||{Buffer:{isBuffer:()=>!1}},{textEncoder:$g,textDecoder:Ug}=ff()(),{BufferFormat:So,ViewFormat:wf,UTF8Format:Mg}=gf(),ga=r=>r;hn.utf8=new Mg({encode:function(r){return Ee.isBuffer(r)?r.toString("utf8"):ArrayBuffer.isView(r)?Ug.decode(r):String(r)},decode:ga,name:"utf8",createViewTranscoder(){return new wf({encode:function(r){return ArrayBuffer.isView(r)?r:$g.encode(r)},decode:function(r){return Ug.decode(r)},name:`${this.name}+view`})},createBufferTranscoder(){return new So({encode:function(r){return Ee.isBuffer(r)?r:ArrayBuffer.isView(r)?Ee.from(r.buffer,r.byteOffset,r.byteLength):Ee.from(String(r),"utf8")},decode:function(r){return r.toString("utf8")},name:`${this.name}+buffer`})}});hn.json=new Mg({encode:JSON.stringify,decode:JSON.parse,name:"json"});hn.buffer=new So({encode:function(r){return Ee.isBuffer(r)?r:ArrayBuffer.isView(r)?Ee.from(r.buffer,r.byteOffset,r.byteLength):Ee.from(String(r),"utf8")},decode:ga,name:"buffer",createViewTranscoder(){return new wf({encode:function(r){return ArrayBuffer.isView(r)?r:Ee.from(String(r),"utf8")},decode:function(r){return Ee.from(r.buffer,r.byteOffset,r.byteLength)},name:`${this.name}+view`})}});hn.view=new wf({encode:function(r){return ArrayBuffer.isView(r)?r:$g.encode(r)},decode:ga,name:"view",createBufferTranscoder(){return new So({encode:function(r){return Ee.isBuffer(r)?r:ArrayBuffer.isView(r)?Ee.from(r.buffer,r.byteOffset,r.byteLength):Ee.from(String(r),"utf8")},decode:ga,name:`${this.name}+buffer`})}});hn.hex=new So({encode:function(r){return Ee.isBuffer(r)?r:Ee.from(String(r),"hex")},decode:function(r){return r.toString("hex")},name:"hex"});hn.base64=new So({encode:function(r){return Ee.isBuffer(r)?r:Ee.from(String(r),"base64")},decode:function(r){return r.toString("base64")},name:"base64"})});var Vg=m(qg=>{"use strict";a();var zg=gt(),ba=jg(),{Encoding:p8}=df(),{BufferFormat:y8,ViewFormat:m8,UTF8Format:g8}=gf(),Ao=Symbol("formats"),wa=Symbol("encodings"),w8=new Set(["buffer","view","utf8"]),bf=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>w8.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[wa]=new Map,this[Ao]=new Set(e);for(let t in ba)try{this.encoding(t)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[wa].values()))}encoding(e){let t=this[wa].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=v8[e],!t)throw new zg(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=b8(e)}let{name:n,format:i}=t;if(!this[Ao].has(i))if(this[Ao].has("view"))t=t.createViewTranscoder();else if(this[Ao].has("buffer"))t=t.createBufferTranscoder();else if(this[Ao].has("utf8"))t=t.createUTF8Transcoder();else throw new zg(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[e,n,t.name,t.commonName])this[wa].set(o,t)}return t}};qg.Transcoder=bf;function b8(r){if(r instanceof p8)return r;let e="type"in r&&typeof r.type=="string"?r.type:void 0,t=r.name||e||`anonymous-${_8++}`;switch(E8(r)){case"view":return new m8({...r,name:t});case"utf8":return new g8({...r,name:t});case"buffer":return new y8({...r,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function E8(r){return"format"in r&&r.format!==void 0?r.format:"buffer"in r&&typeof r.buffer=="boolean"?r.buffer?"buffer":"utf8":"code"in r&&Number.isInteger(r.code)?"view":"buffer"}var x8={binary:ba.buffer,"utf-8":ba.utf8},v8={...ba,...x8},_8=0});var tw=m((PN,Ef)=>{"use strict";a();var mi=typeof Reflect=="object"?Reflect:null,Kg=mi&&typeof mi.apply=="function"?mi.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Ea;mi&&typeof mi.ownKeys=="function"?Ea=mi.ownKeys:Object.getOwnPropertySymbols?Ea=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ea=function(e){return Object.getOwnPropertyNames(e)};function D8(r){console&&console.warn&&console.warn(r)}var Hg=Number.isNaN||function(e){return e!==e};function j(){j.init.call(this)}Ef.exports=j;Ef.exports.once=C8;j.EventEmitter=j;j.prototype._events=void 0;j.prototype._eventsCount=0;j.prototype._maxListeners=void 0;var Wg=10;function xa(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(j,"defaultMaxListeners",{enumerable:!0,get:function(){return Wg},set:function(r){if(typeof r!="number"||r<0||Hg(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Wg=r}});j.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};j.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Hg(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Gg(r){return r._maxListeners===void 0?j.defaultMaxListeners:r._maxListeners}j.prototype.getMaxListeners=function(){return Gg(this)};j.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var c=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw c.context=s,c}var u=o[e];if(u===void 0)return!1;if(typeof u=="function")Kg(u,this,t);else for(var f=u.length,l=Zg(u,f),n=0;n<f;++n)Kg(l[n],this,t);return!0};function Jg(r,e,t,n){var i,o,s;if(xa(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]),s===void 0)s=o[e]=t,++r._eventsCount;else if(typeof s=="function"?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),i=Gg(r),i>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=r,c.type=e,c.count=s.length,D8(c)}return r}j.prototype.addListener=function(e,t){return Jg(this,e,t,!1)};j.prototype.on=j.prototype.addListener;j.prototype.prependListener=function(e,t){return Jg(this,e,t,!0)};function S8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Qg(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=S8.bind(n);return i.listener=t,n.wrapFn=i,i}j.prototype.once=function(e,t){return xa(t),this.on(e,Qg(this,e,t)),this};j.prototype.prependOnceListener=function(e,t){return xa(t),this.prependListener(e,Qg(this,e,t)),this};j.prototype.removeListener=function(e,t){var n,i,o,s,c;if(xa(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){c=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():A8(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,c||t)}return this};j.prototype.off=j.prototype.removeListener;j.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function Yg(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?T8(i):Zg(i,i.length)}j.prototype.listeners=function(e){return Yg(this,e,!0)};j.prototype.rawListeners=function(e){return Yg(this,e,!1)};j.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):Xg.call(r,e)};j.prototype.listenerCount=Xg;function Xg(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}j.prototype.eventNames=function(){return this._eventsCount>0?Ea(this._events):[]};function Zg(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function A8(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function T8(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function C8(r,e){return new Promise(function(t,n){function i(s){r.removeListener(e,o),n(s)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}ew(r,e,o,{once:!0}),e!=="error"&&I8(r,i,{once:!0})})}function I8(r,e,t){typeof r.on=="function"&&ew(r,"error",e,t)}function ew(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}});var nw=m((UN,rw)=>{a();rw.exports=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r)});var To=m(xf=>{"use strict";a();var iw=nw();xf.fromCallback=function(r,e){if(r===void 0){var t=new Promise(function(n,i){r=function(o,s){o?i(o):n(s)}});r[e!==void 0?e:"promise"]=t}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r};xf.fromPromise=function(r,e){if(e===void 0)return r;r.then(function(t){iw(()=>e(null,t))}).catch(function(t){iw(()=>e(t))})}});var va=m(vf=>{"use strict";a();vf.getCallback=function(r,e){return typeof r=="function"?r:e};vf.getOptions=function(r,e){return typeof r=="object"&&r!==null?r:e!==void 0?e:{}}});var Lr=m(Aa=>{"use strict";a();var{fromCallback:_f}=To(),Ke=gt(),{getOptions:Df,getCallback:ow}=va(),dn=Symbol("promise"),gi=Symbol("callback"),Bt=Symbol("working"),pn=Symbol("handleOne"),Gt=Symbol("handleMany"),Sf=Symbol("autoClose"),Br=Symbol("finishWork"),kt=Symbol("returnMany"),Cr=Symbol("closing"),Co=Symbol("handleClose"),_a=Symbol("closed"),Io=Symbol("closeCallbacks"),Or=Symbol("keyEncoding"),yn=Symbol("valueEncoding"),Af=Symbol("abortOnClose"),Da=Symbol("legacy"),Tf=Symbol("keys"),Cf=Symbol("values"),Ir=Symbol("limit"),ot=Symbol("count"),Sa=Object.freeze({}),O8=()=>{},sw=!1,Oo=class{constructor(e,t,n){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[_a]=!1,this[Io]=[],this[Bt]=!1,this[Cr]=!1,this[Sf]=!1,this[gi]=null,this[pn]=this[pn].bind(this),this[Gt]=this[Gt].bind(this),this[Co]=this[Co].bind(this),this[Or]=t[Or],this[yn]=t[yn],this[Da]=n,this[Ir]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[ot]=0,this[Af]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[ot]}get limit(){return this[Ir]}next(e){let t;if(e===void 0)t=new Promise((n,i)=>{e=(o,s,c)=>{o?i(o):this[Da]?s===void 0&&c===void 0?n():n([s,c]):n(s)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[Cr]?this.nextTick(e,new Ke("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Bt]?this.nextTick(e,new Ke("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Bt]=!0,this[gi]=e,this[ot]>=this[Ir]?this.nextTick(this[pn],null):this._next(this[pn])),t}_next(e){this.nextTick(e)}nextv(e,t,n){return n=ow(t,n),n=_f(n,dn),t=Df(t,Sa),Number.isInteger(e)?(this[Cr]?this.nextTick(n,new Ke("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Bt]?this.nextTick(n,new Ke("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[Ir]<1/0&&(e=Math.min(e,this[Ir]-this[ot])),this[Bt]=!0,this[gi]=n,e<=0?this.nextTick(this[Gt],null,[]):this._nextv(e,t,this[Gt])),n[dn]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[dn])}_nextv(e,t,n){let i=[],o=(s,c,u)=>{if(s)return n(s);if(this[Da]?c===void 0&&u===void 0:c===void 0)return n(null,i);i.push(this[Da]?[c,u]:c),i.length===e?n(null,i):this._next(o)};this._next(o)}all(e,t){return t=ow(e,t),t=_f(t,dn),e=Df(e,Sa),this[Cr]?this.nextTick(t,new Ke("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Bt]?this.nextTick(t,new Ke("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Bt]=!0,this[gi]=t,this[Sf]=!0,this[ot]>=this[Ir]?this.nextTick(this[Gt],null,[]):this._all(e,this[Gt])),t[dn]}_all(e,t){let n=this[ot],i=[],o=()=>{let c=this[Ir]<1/0?Math.min(1e3,this[Ir]-n):1e3;c<=0?this.nextTick(t,null,i):this._nextv(c,Sa,s)},s=(c,u)=>{c?t(c):u.length===0?t(null,i):(i.push.apply(i,u),n+=u.length,o())};o()}[Br](){let e=this[gi];return this[Af]&&e===null?O8:(this[Bt]=!1,this[gi]=null,this[Cr]&&this._close(this[Co]),e)}[kt](e,t,n){this[Sf]?this.close(e.bind(null,t,n)):e(t,n)}seek(e,t){if(t=Df(t,Sa),!this[Cr]){if(this[Bt])throw new Ke("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(t.keyEncoding||this[Or]),i=n.format;t.keyEncoding!==i&&(t={...t,keyEncoding:i});let o=this.db.prefixKey(n.encode(e),i);this._seek(o,t)}}}_seek(e,t){throw new Ke("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=_f(e,dn),this[_a]?this.nextTick(e):this[Cr]?this[Io].push(e):(this[Cr]=!0,this[Io].push(e),this[Bt]?this[Af]&&this[Br]()(new Ke("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[Co])),e[dn]}_close(e){this.nextTick(e)}[Co](){this[_a]=!0,this.db.detachResource(this);let e=this[Io];this[Io]=[];for(let t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[_a]||await this.close()}}},wi=class extends Oo{constructor(e,t){super(e,t,!0),this[Tf]=t.keys!==!1,this[Cf]=t.values!==!1}[pn](e,t,n){let i=this[Br]();if(e)return i(e);try{t=this[Tf]&&t!==void 0?this[Or].decode(t):void 0,n=this[Cf]&&n!==void 0?this[yn].decode(n):void 0}catch(o){return i(new kr("entry",o))}t===void 0&&n===void 0||this[ot]++,i(null,t,n)}[Gt](e,t){let n=this[Br]();if(e)return this[kt](n,e);try{for(let i of t){let o=i[0],s=i[1];i[0]=this[Tf]&&o!==void 0?this[Or].decode(o):void 0,i[1]=this[Cf]&&s!==void 0?this[yn].decode(s):void 0}}catch(i){return this[kt](n,new kr("entries",i))}this[ot]+=t.length,this[kt](n,null,t)}end(e){return!sw&&typeof console<"u"&&(sw=!0,console.warn(new Ke("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},If=class extends Oo{constructor(e,t){super(e,t,!1)}[pn](e,t){let n=this[Br]();if(e)return n(e);try{t=t!==void 0?this[Or].decode(t):void 0}catch(i){return n(new kr("key",i))}t!==void 0&&this[ot]++,n(null,t)}[Gt](e,t){let n=this[Br]();if(e)return this[kt](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[Or].decode(o):void 0}}catch(i){return this[kt](n,new kr("keys",i))}this[ot]+=t.length,this[kt](n,null,t)}},Of=class extends Oo{constructor(e,t){super(e,t,!1)}[pn](e,t){let n=this[Br]();if(e)return n(e);try{t=t!==void 0?this[yn].decode(t):void 0}catch(i){return n(new kr("value",i))}t!==void 0&&this[ot]++,n(null,t)}[Gt](e,t){let n=this[Br]();if(e)return this[kt](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[yn].decode(o):void 0}}catch(i){return this[kt](n,new kr("values",i))}this[ot]+=t.length,this[kt](n,null,t)}},kr=class extends Ke{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}};for(let r of["_ended property","_nexting property","_end method"])Object.defineProperty(wi.prototype,r.split(" ")[0],{get(){throw new Ke(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Ke(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})}});wi.keyEncoding=Or;wi.valueEncoding=yn;Aa.AbstractIterator=wi;Aa.AbstractKeyIterator=If;Aa.AbstractValueIterator=Of});var aw=m(Bf=>{"use strict";a();var{AbstractKeyIterator:B8,AbstractValueIterator:k8}=Lr(),mn=Symbol("iterator"),Bo=Symbol("callback"),bi=Symbol("handleOne"),gn=Symbol("handleMany"),ko=class extends B8{constructor(e,t){super(e,t),this[mn]=e.iterator({...t,keys:!0,values:!1}),this[bi]=this[bi].bind(this),this[gn]=this[gn].bind(this)}},Ta=class extends k8{constructor(e,t){super(e,t),this[mn]=e.iterator({...t,keys:!1,values:!0}),this[bi]=this[bi].bind(this),this[gn]=this[gn].bind(this)}};for(let r of[ko,Ta]){let e=r===ko,t=e?n=>n[0]:n=>n[1];r.prototype._next=function(n){this[Bo]=n,this[mn].next(this[bi])},r.prototype[bi]=function(n,i,o){let s=this[Bo];n?s(n):s(null,e?i:o)},r.prototype._nextv=function(n,i,o){this[Bo]=o,this[mn].nextv(n,i,this[gn])},r.prototype._all=function(n,i){this[Bo]=i,this[mn].all(n,this[gn])},r.prototype[gn]=function(n,i){let o=this[Bo];n?o(n):o(null,i.map(t))},r.prototype._seek=function(n,i){this[mn].seek(n,i)},r.prototype._close=function(n){this[mn].close(n)}}Bf.DefaultKeyIterator=ko;Bf.DefaultValueIterator=Ta});var cw=m(La=>{"use strict";a();var{AbstractIterator:L8,AbstractKeyIterator:R8,AbstractValueIterator:N8}=Lr(),kf=gt(),Pe=Symbol("nut"),Ba=Symbol("undefer"),ka=Symbol("factory"),Ca=class extends L8{constructor(e,t){super(e,t),this[Pe]=null,this[ka]=()=>e.iterator(t),this.db.defer(()=>this[Ba]())}},Ia=class extends R8{constructor(e,t){super(e,t),this[Pe]=null,this[ka]=()=>e.keys(t),this.db.defer(()=>this[Ba]())}},Oa=class extends N8{constructor(e,t){super(e,t),this[Pe]=null,this[ka]=()=>e.values(t),this.db.defer(()=>this[Ba]())}};for(let r of[Ca,Ia,Oa])r.prototype[Ba]=function(){this.db.status==="open"&&(this[Pe]=this[ka]())},r.prototype._next=function(e){this[Pe]!==null?this[Pe].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new kf("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._nextv=function(e,t,n){this[Pe]!==null?this[Pe].nextv(e,t,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,n)):this.nextTick(n,new kf("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._all=function(e,t){this[Pe]!==null?this[Pe].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new kf("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._seek=function(e,t){this[Pe]!==null?this[Pe]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},r.prototype._close=function(e){this[Pe]!==null?this[Pe].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};La.DeferredIterator=Ca;La.DeferredKeyIterator=Ia;La.DeferredValueIterator=Oa});var Rf=m(fw=>{"use strict";a();var{fromCallback:uw}=To(),Ra=gt(),{getCallback:P8,getOptions:F8}=va(),Na=Symbol("promise"),st=Symbol("status"),Ei=Symbol("operations"),Lo=Symbol("finishClose"),xi=Symbol("closeCallbacks"),Lf=class{constructor(e){if(typeof e!="object"||e===null){let t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[Ei]=[],this[xi]=[],this[st]="open",this[Lo]=this[Lo].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[Ei].length}put(e,t,n){if(this[st]!=="open")throw new Ra("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(t);if(i)throw i;let o=n&&n.sublevel!=null?n.sublevel:this.db,s=n,c=o.keyEncoding(n&&n.keyEncoding),u=o.valueEncoding(n&&n.valueEncoding),f=c.format;n={...n,keyEncoding:f,valueEncoding:u.format},o!==this.db&&(n.sublevel=null);let l=o.prefixKey(c.encode(e),f),h=u.encode(t);return this._put(l,h,n),this[Ei].push({...s,type:"put",key:e,value:t}),this}_put(e,t,n){}del(e,t){if(this[st]!=="open")throw new Ra("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let i=t&&t.sublevel!=null?t.sublevel:this.db,o=t,s=i.keyEncoding(t&&t.keyEncoding),c=s.format;return t={...t,keyEncoding:c},i!==this.db&&(t.sublevel=null),this._del(i.prefixKey(s.encode(e),c),t),this[Ei].push({...o,type:"del",key:e}),this}_del(e,t){}clear(){if(this[st]!=="open")throw new Ra("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Ei]=[],this}_clear(){}write(e,t){return t=P8(e,t),t=uw(t,Na),e=F8(e),this[st]!=="open"?this.nextTick(t,new Ra("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[st]="writing",this._write(e,n=>{this[st]="closing",this[xi].push(()=>t(n)),n||this.db.emit("batch",this[Ei]),this._close(this[Lo])})),t[Na]}_write(e,t){}close(e){return e=uw(e,Na),this[st]==="closing"?this[xi].push(e):this[st]==="closed"?this.nextTick(e):(this[xi].push(e),this[st]!=="writing"&&(this[st]="closing",this._close(this[Lo]))),e[Na]}_close(e){this.nextTick(e)}[Lo](){this[st]="closed",this.db.detachResource(this);let e=this[xi];this[xi]=[];for(let t of e)t()}};fw.AbstractChainedBatch=Lf});var hw=m(lw=>{"use strict";a();var{AbstractChainedBatch:U8}=Rf(),$8=gt(),vi=Symbol("encoded"),Nf=class extends U8{constructor(e){super(e),this[vi]=[]}_put(e,t,n){this[vi].push({...n,type:"put",key:e,value:t})}_del(e,t){this[vi].push({...t,type:"del",key:e})}_clear(){this[vi]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[vi].length===0?this.nextTick(t):this.db._batch(this[vi],e,t):this.nextTick(t,new $8("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};lw.DefaultChainedBatch=Nf});var yw=m((eP,pw)=>{"use strict";a();var dw=gt(),M8=Object.prototype.hasOwnProperty,j8=new Set(["lt","lte","gt","gte"]);pw.exports=function(r,e){let t={};for(let n in r)if(!!M8.call(r,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new dw(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new dw("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});j8.has(n)?t[n]=e.encode(r[n]):t[n]=r[n]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t}});var Pf=m((rP,gw)=>{a();var mw;gw.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):r=>(mw||(mw=Promise.resolve())).then(r).catch(e=>setTimeout(()=>{throw e},0))});var Ew=m((iP,bw)=>{"use strict";a();var ww=Pf();bw.exports=function(r,...e){e.length===0?ww(r):ww(()=>r(...e))}});var xw=m(Pa=>{"use strict";a();var{AbstractIterator:z8,AbstractKeyIterator:q8,AbstractValueIterator:V8}=Lr(),_i=Symbol("unfix"),wt=Symbol("iterator"),wn=Symbol("handleOne"),Rr=Symbol("handleMany"),Jt=Symbol("callback"),Ro=class extends z8{constructor(e,t,n,i){super(e,t),this[wt]=n,this[_i]=i,this[wn]=this[wn].bind(this),this[Rr]=this[Rr].bind(this),this[Jt]=null}[wn](e,t,n){let i=this[Jt];if(e)return i(e);t!==void 0&&(t=this[_i](t)),i(e,t,n)}[Rr](e,t){let n=this[Jt];if(e)return n(e);for(let i of t){let o=i[0];o!==void 0&&(i[0]=this[_i](o))}n(e,t)}},No=class extends q8{constructor(e,t,n,i){super(e,t),this[wt]=n,this[_i]=i,this[wn]=this[wn].bind(this),this[Rr]=this[Rr].bind(this),this[Jt]=null}[wn](e,t){let n=this[Jt];if(e)return n(e);t!==void 0&&(t=this[_i](t)),n(e,t)}[Rr](e,t){let n=this[Jt];if(e)return n(e);for(let i=0;i<t.length;i++){let o=t[i];o!==void 0&&(t[i]=this[_i](o))}n(e,t)}},Po=class extends V8{constructor(e,t,n){super(e,t),this[wt]=n}};for(let r of[Ro,No])r.prototype._next=function(e){this[Jt]=e,this[wt].next(this[wn])},r.prototype._nextv=function(e,t,n){this[Jt]=n,this[wt].nextv(e,t,this[Rr])},r.prototype._all=function(e,t){this[Jt]=t,this[wt].all(e,this[Rr])};for(let r of[Po])r.prototype._next=function(e){this[wt].next(e)},r.prototype._nextv=function(e,t,n){this[wt].nextv(e,t,n)},r.prototype._all=function(e,t){this[wt].all(e,t)};for(let r of[Ro,No,Po])r.prototype._seek=function(e,t){this[wt].seek(e,t)},r.prototype._close=function(e){this[wt].close(e)};Pa.AbstractSublevelIterator=Ro;Pa.AbstractSublevelKeyIterator=No;Pa.AbstractSublevelValueIterator=Po});var Sw=m((cP,Dw)=>{"use strict";a();var Ff=gt(),{Buffer:Mf}=Bi()||{},{AbstractSublevelIterator:K8,AbstractSublevelKeyIterator:W8,AbstractSublevelValueIterator:H8}=xw(),Qt=Symbol("prefix"),vw=Symbol("upperBound"),Fo=Symbol("prefixRange"),We=Symbol("parent"),Uf=Symbol("unfix"),_w=new TextEncoder,G8={separator:"!"};Dw.exports=function({AbstractLevel:r}){class e extends r{static defaults(n){if(typeof n=="string")throw new Ff("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new Ff("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?G8:n.separator?n:{...n,separator:"!"}}constructor(n,i,o){let{separator:s,manifest:c,...u}=e.defaults(o);i=Q8(i,s);let f=s.charCodeAt(0)+1,l=n[We]||n;if(!_w.encode(i).every(x=>x>f&&x<127))throw new Ff(`Prefix must use bytes > ${f} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(J8(l,c),u);let h=(n.prefix||"")+s+i+s,y=h.slice(0,-1)+String.fromCharCode(f);this[We]=l,this[Qt]=new Fa(h),this[vw]=new Fa(y),this[Uf]=new jf,this.nextTick=l.nextTick}prefixKey(n,i){if(i==="utf8")return this[Qt].utf8+n;if(n.byteLength===0)return this[Qt][i];if(i==="view"){let o=this[Qt].view,s=new Uint8Array(o.byteLength+n.byteLength);return s.set(o,0),s.set(n,o.byteLength),s}else{let o=this[Qt].buffer;return Mf.concat([o,n],o.byteLength+n.byteLength)}}[Fo](n,i){n.gte!==void 0?n.gte=this.prefixKey(n.gte,i):n.gt!==void 0?n.gt=this.prefixKey(n.gt,i):n.gte=this[Qt][i],n.lte!==void 0?n.lte=this.prefixKey(n.lte,i):n.lt!==void 0?n.lt=this.prefixKey(n.lt,i):n.lte=this[vw][i]}get prefix(){return this[Qt].utf8}get db(){return this[We]}_open(n,i){this[We].open({passive:!0},i)}_put(n,i,o,s){this[We].put(n,i,o,s)}_get(n,i,o){this[We].get(n,i,o)}_getMany(n,i,o){this[We].getMany(n,i,o)}_del(n,i,o){this[We].del(n,i,o)}_batch(n,i,o){this[We].batch(n,i,o)}_clear(n,i){this[Fo](n,n.keyEncoding),this[We].clear(n,i)}_iterator(n){this[Fo](n,n.keyEncoding);let i=this[We].iterator(n),o=this[Uf].get(this[Qt].utf8.length,n.keyEncoding);return new K8(this,n,i,o)}_keys(n){this[Fo](n,n.keyEncoding);let i=this[We].keys(n),o=this[Uf].get(this[Qt].utf8.length,n.keyEncoding);return new W8(this,n,i,o)}_values(n){this[Fo](n,n.keyEncoding);let i=this[We].values(n);return new H8(this,n,i)}}return{AbstractSublevel:e}};var J8=function(r,e){return{...r.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:$f(r,"utf8"),buffer:$f(r,"buffer"),view:$f(r,"view")}}},$f=function(r,e){return r.supports.encodings[e]?r.keyEncoding(e).name===e:!1},Fa=class{constructor(e){this.utf8=e,this.view=_w.encode(e),this.buffer=Mf?Mf.from(this.view.buffer,0,this.view.byteLength):{}}},jf=class{constructor(){this.cache=new Map}get(e,t){let n=this.cache.get(t);return n===void 0&&(t==="view"?n=function(i,o){return o.subarray(i)}.bind(null,e):n=function(i,o){return o.slice(i)}.bind(null,e),this.cache.set(t,n)),n}},Q8=function(r,e){let t=0,n=r.length;for(;t<n&&r[t]===e;)t++;for(;n>t&&r[n-1]===e;)n--;return r.slice(t,n)}});var Wf=m(Kf=>{"use strict";a();var{supports:Y8}=Rg(),{Transcoder:X8}=Vg(),{EventEmitter:Z8}=tw(),{fromCallback:Nr}=To(),bt=gt(),{AbstractIterator:bn}=Lr(),{DefaultKeyIterator:e_,DefaultValueIterator:t_}=aw(),{DeferredIterator:r_,DeferredKeyIterator:n_,DeferredValueIterator:i_}=cw(),{DefaultChainedBatch:Aw}=hw(),{getCallback:En,getOptions:Pr}=va(),Ua=yw(),I=Symbol("promise"),Yt=Symbol("landed"),xn=Symbol("resources"),zf=Symbol("closeResources"),Uo=Symbol("operations"),$o=Symbol("undefer"),$a=Symbol("deferOpen"),Tw=Symbol("options"),k=Symbol("status"),vn=Symbol("defaultOptions"),Di=Symbol("transcoder"),Ma=Symbol("keyEncoding"),qf=Symbol("valueEncoding"),o_=()=>{},Mo=class extends Z8{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=Pr(t);let{keyEncoding:n,valueEncoding:i,passive:o,...s}=t;this[xn]=new Set,this[Uo]=[],this[$a]=!0,this[Tw]=s,this[k]="opening",this.supports=Y8(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Di]=new X8(s_(this)),this[Ma]=this[Di].encoding(n||"utf8"),this[qf]=this[Di].encoding(i||"utf8");for(let c of this[Di].encodings())this.supports.encodings[c.commonName]||(this.supports.encodings[c.commonName]=!0);this[vn]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[Ma].commonName,valueEncoding:this[qf].commonName}),key:Object.freeze({keyEncoding:this[Ma].commonName})},this.nextTick(()=>{this[$a]&&this.open({passive:!1},o_)})}get status(){return this[k]}keyEncoding(e){return this[Di].encoding(e??this[Ma])}valueEncoding(e){return this[Di].encoding(e??this[qf])}open(e,t){t=En(e,t),t=Nr(t,I),e={...this[Tw],...Pr(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=i=>{this[k]==="closing"||this[k]==="opening"?this.once(Yt,i?()=>n(i):n):this[k]!=="open"?t(new bt("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):t()};return e.passive?this[k]==="opening"?this.once(Yt,n):this.nextTick(n):this[k]==="closed"||this[$a]?(this[$a]=!1,this[k]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[k]="closed",this[zf](()=>{this.emit(Yt),n(i)}),this[$o]();return}this[k]="open",this[$o](),this.emit(Yt),this[k]==="open"&&this.emit("open"),this[k]==="open"&&this.emit("ready"),n()})):this[k]==="open"?this.nextTick(n):this.once(Yt,()=>this.open(e,t)),t[I]}_open(e,t){this.nextTick(t)}close(e){e=Nr(e,I);let t=n=>{this[k]==="opening"||this[k]==="closing"?this.once(Yt,n?t(n):t):this[k]!=="closed"?e(new bt("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[k]==="open"){this[k]="closing",this.emit("closing");let n=i=>{this[k]="open",this[$o](),this.emit(Yt),t(i)};this[zf](()=>{this._close(i=>{if(i)return n(i);this[k]="closed",this[$o](),this.emit(Yt),this[k]==="closed"&&this.emit("closed"),t()})})}else this[k]==="closed"?this.nextTick(t):this.once(Yt,()=>this.close(e));return e[I]}[zf](e){if(this[xn].size===0)return this.nextTick(e);let t=this[xn].size,n=!0,i=()=>{--t===0&&(n?this.nextTick(e):e())};for(let o of this[xn])o.close(i);n=!1,this[xn].clear()}_close(e){this.nextTick(e)}get(e,t,n){if(n=En(t,n),n=Nr(n,I),t=Pr(t,this[vn].entry),this[k]==="opening")return this.defer(()=>this.get(e,t,n)),n[I];if(Si(this,n))return n[I];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[I];let o=this.keyEncoding(t.keyEncoding),s=this.valueEncoding(t.valueEncoding),c=o.format,u=s.format;return(t.keyEncoding!==c||t.valueEncoding!==u)&&(t=Object.assign({},t,{keyEncoding:c,valueEncoding:u})),this._get(this.prefixKey(o.encode(e),c),t,(f,l)=>{if(f)return(f.code==="LEVEL_NOT_FOUND"||f.notFound||/NotFound/i.test(f))&&(f.code||(f.code="LEVEL_NOT_FOUND"),f.notFound||(f.notFound=!0),f.status||(f.status=404)),n(f);try{l=s.decode(l)}catch(h){return n(new bt("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:h}))}n(null,l)}),n[I]}_get(e,t,n){this.nextTick(n,new Error("NotFound"))}getMany(e,t,n){if(n=En(t,n),n=Nr(n,I),t=Pr(t,this[vn].entry),this[k]==="opening")return this.defer(()=>this.getMany(e,t,n)),n[I];if(Si(this,n))return n[I];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[I];if(e.length===0)return this.nextTick(n,null,[]),n[I];let i=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),s=i.format,c=o.format;(t.keyEncoding!==s||t.valueEncoding!==c)&&(t=Object.assign({},t,{keyEncoding:s,valueEncoding:c}));let u=new Array(e.length);for(let f=0;f<e.length;f++){let l=e[f],h=this._checkKey(l);if(h)return this.nextTick(n,h),n[I];u[f]=this.prefixKey(i.encode(l),s)}return this._getMany(u,t,(f,l)=>{if(f)return n(f);try{for(let h=0;h<l.length;h++)l[h]!==void 0&&(l[h]=o.decode(l[h]))}catch(h){return n(new bt(`Could not decode one or more of ${l.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:h}))}n(null,l)}),n[I]}_getMany(e,t,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,t,n,i){if(i=En(n,i),i=Nr(i,I),n=Pr(n,this[vn].entry),this[k]==="opening")return this.defer(()=>this.put(e,t,n,i)),i[I];if(Si(this,i))return i[I];let o=this._checkKey(e)||this._checkValue(t);if(o)return this.nextTick(i,o),i[I];let s=this.keyEncoding(n.keyEncoding),c=this.valueEncoding(n.valueEncoding),u=s.format,f=c.format;(n.keyEncoding!==u||n.valueEncoding!==f)&&(n=Object.assign({},n,{keyEncoding:u,valueEncoding:f}));let l=this.prefixKey(s.encode(e),u),h=c.encode(t);return this._put(l,h,n,y=>{if(y)return i(y);this.emit("put",e,t),i()}),i[I]}_put(e,t,n,i){this.nextTick(i)}del(e,t,n){if(n=En(t,n),n=Nr(n,I),t=Pr(t,this[vn].key),this[k]==="opening")return this.defer(()=>this.del(e,t,n)),n[I];if(Si(this,n))return n[I];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[I];let o=this.keyEncoding(t.keyEncoding),s=o.format;return t.keyEncoding!==s&&(t=Object.assign({},t,{keyEncoding:s})),this._del(this.prefixKey(o.encode(e),s),t,c=>{if(c)return n(c);this.emit("del",e),n()}),n[I]}_del(e,t,n){this.nextTick(n)}batch(e,t,n){if(!arguments.length){if(this[k]==="opening")return new Aw(this);if(this[k]!=="open")throw new bt("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=En(t,n),n=Nr(n,I),t=Pr(t,this[vn].empty),this[k]==="opening")return this.defer(()=>this.batch(e,t,n)),n[I];if(Si(this,n))return n[I];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[I];if(e.length===0)return this.nextTick(n),n[I];let i=new Array(e.length),{keyEncoding:o,valueEncoding:s,...c}=t;for(let u=0;u<e.length;u++){if(typeof e[u]!="object"||e[u]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[I];let f=Object.assign({},e[u]);if(f.type!=="put"&&f.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[I];let l=this._checkKey(f.key);if(l)return this.nextTick(n,l),n[I];let h=f.sublevel!=null?f.sublevel:this,y=h.keyEncoding(f.keyEncoding||o),x=y.format;if(f.key=h.prefixKey(y.encode(f.key),x),f.keyEncoding=x,f.type==="put"){let g=this._checkValue(f.value);if(g)return this.nextTick(n,g),n[I];let S=h.valueEncoding(f.valueEncoding||s);f.value=S.encode(f.value),f.valueEncoding=S.format}h!==this&&(f.sublevel=null),i[u]=f}return this._batch(i,c,u=>{if(u)return n(u);this.emit("batch",e),n()}),n[I]}_batch(e,t,n){this.nextTick(n)}sublevel(e,t){return this._sublevel(e,Vf.defaults(t))}_sublevel(e,t){return new Vf(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=En(e,t),t=Nr(t,I),e=Pr(e,this[vn].empty),this[k]==="opening")return this.defer(()=>this.clear(e,t)),t[I];if(Si(this,t))return t[I];let n=e,i=this.keyEncoding(e.keyEncoding);return e=Ua(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(t):this._clear(e,o=>{if(o)return t(o);this.emit("clear",n),t()}),t[I]}_clear(e,t){this.nextTick(t)}iterator(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Ua(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[bn.keyEncoding]=t,e[bn.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[k]==="opening")return new r_(this,e);if(this[k]!=="open")throw new bt("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new bn(this,e)}keys(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Ua(e,t),e[bn.keyEncoding]=t,e[bn.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[k]==="opening")return new n_(this,e);if(this[k]!=="open")throw new bt("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new e_(this,e)}values(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Ua(e,t),e[bn.keyEncoding]=t,e[bn.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[k]==="opening")return new i_(this,e);if(this[k]!=="open")throw new bt("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new t_(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[Uo].push(e)}[$o](){if(this[Uo].length===0)return;let e=this[Uo];this[Uo]=[];for(let t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[xn].add(e)}detachResource(e){this[xn].delete(e)}_chainedBatch(){return new Aw(this)}_checkKey(e){if(e==null)return new bt("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new bt("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};Mo.prototype.nextTick=Ew();var{AbstractSublevel:Vf}=Sw()({AbstractLevel:Mo});Kf.AbstractLevel=Mo;Kf.AbstractSublevel=Vf;var Si=function(r,e){return r[k]!=="open"?(r.nextTick(e,new bt("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},s_=function(r){return Object.keys(r.supports.encodings).filter(e=>!!r.supports.encodings[e])}});var Hf=m(_n=>{"use strict";a();_n.AbstractLevel=Wf().AbstractLevel;_n.AbstractSublevel=Wf().AbstractSublevel;_n.AbstractIterator=Lr().AbstractIterator;_n.AbstractKeyIterator=Lr().AbstractKeyIterator;_n.AbstractValueIterator=Lr().AbstractValueIterator;_n.AbstractChainedBatch=Rf().AbstractChainedBatch});var Iw=m((pP,Cw)=>{a();Cw.exports=c_;var a_=Pf();function c_(r,e,t){if(typeof e!="number")throw new Error("second argument must be a Number");let n,i,o,s,c,u=!0,f;Array.isArray(r)?(n=[],o=i=r.length):(s=Object.keys(r),n={},o=i=s.length);function l(y){function x(){t&&t(y,n),t=null}u?a_(x):x()}function h(y,x,g){if(n[y]=g,x&&(c=!0),--o===0||x)l(x);else if(!c&&f<i){let S;s?(S=s[f],f+=1,r[S](function(L,K){h(S,L,K)})):(S=f,f+=1,r[S](function(L,K){h(S,L,K)}))}}f=e,o?s?s.some(function(y,x){return r[y](function(g,S){h(y,g,S)}),x===e-1}):r.some(function(y,x){return y(function(g,S){h(x,g,S)}),x===e-1}):l(null),u=!1}});var Gf=m((mP,Ow)=>{"use strict";a();Ow.exports=function(e){let t=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,o=e.lte===void 0;return t!==void 0&&n!==void 0?IDBKeyRange.bound(t,n,i,o):t!==void 0?IDBKeyRange.lowerBound(t,i):n!==void 0?IDBKeyRange.upperBound(n,o):null}});var Jf=m((wP,Bw)=>{"use strict";a();var u_=new TextEncoder;Bw.exports=function(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):u_.encode(r)}});var Pw=m(Nw=>{"use strict";a();var{AbstractIterator:f_}=Hf(),kw=Gf(),ja=Jf(),Lt=Symbol("cache"),Xt=Symbol("finished"),He=Symbol("options"),Zt=Symbol("currentOptions"),Dn=Symbol("position"),Qf=Symbol("location"),Ai=Symbol("first"),Lw={},Yf=class extends f_{constructor(e,t,n){super(e,n),this[Lt]=[],this[Xt]=this.limit===0,this[He]=n,this[Zt]={...n},this[Dn]=void 0,this[Qf]=t,this[Ai]=!0}_nextv(e,t,n){if(this[Ai]=!1,this[Xt])return this.nextTick(n,null,[]);if(this[Lt].length>0)return e=Math.min(e,this[Lt].length),this.nextTick(n,null,this[Lt].splice(0,e));this[Dn]!==void 0&&(this[He].reverse?(this[Zt].lt=this[Dn],this[Zt].lte=void 0):(this[Zt].gt=this[Dn],this[Zt].gte=void 0));let i;try{i=kw(this[Zt])}catch{return this[Xt]=!0,this.nextTick(n,null,[])}let o=this.db.db.transaction([this[Qf]],"readonly"),s=o.objectStore(this[Qf]),c=[];if(this[He].reverse){let u=!this[He].values&&s.openKeyCursor?"openKeyCursor":"openCursor";s[u](i,"prev").onsuccess=f=>{let l=f.target.result;if(l){let{key:h,value:y}=l;this[Dn]=h,c.push([this[He].keys&&h!==void 0?ja(h):void 0,this[He].values&&y!==void 0?ja(y):void 0]),c.length<e?l.continue():Rw(o)}else this[Xt]=!0}}else{let u,f,l=()=>{if(u===void 0||f===void 0)return;let h=Math.max(u.length,f.length);h===0||e===1/0?this[Xt]=!0:this[Dn]=u[h-1],c.length=h;for(let y=0;y<h;y++){let x=u[y],g=f[y];c[y]=[this[He].keys&&x!==void 0?ja(x):void 0,this[He].values&&g!==void 0?ja(g):void 0]}Rw(o)};this[He].keys||e<1/0?s.getAllKeys(i,e<1/0?e:void 0).onsuccess=h=>{u=h.target.result,l()}:(u=[],this.nextTick(l)),this[He].values?s.getAll(i,e<1/0?e:void 0).onsuccess=h=>{f=h.target.result,l()}:(f=[],this.nextTick(l))}o.onabort=()=>{n(o.error||new Error("aborted by user")),n=null},o.oncomplete=()=>{n(null,c),n=null}}_next(e){if(this[Lt].length>0){let[t,n]=this[Lt].shift();this.nextTick(e,null,t,n)}else if(this[Xt])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[Ai]&&(this[Ai]=!1,t=1),this._nextv(t,Lw,(n,i)=>{if(n)return e(n);this[Lt]=i,this._next(e)})}}_all(e,t){this[Ai]=!1;let n=this[Lt].splice(0,this[Lt].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(t,null,n);this._nextv(i,Lw,(o,s)=>{if(o)return t(o);n.length>0&&(s=n.concat(s)),t(null,s)})}_seek(e,t){this[Ai]=!0,this[Lt]=[],this[Xt]=!1,this[Dn]=void 0,this[Zt]={...this[He]};let n;try{n=kw(this[He])}catch{this[Xt]=!0;return}n!==null&&!n.includes(e)?this[Xt]=!0:this[He].reverse?this[Zt].lte=e:this[Zt].gte=e}};Nw.Iterator=Yf;function Rw(r){typeof r.commit=="function"&&r.commit()}});var Uw=m((vP,Fw)=>{"use strict";a();Fw.exports=function(e,t,n,i,o){if(i.limit===0)return e.nextTick(o);let s=e.db.transaction([t],"readwrite"),c=s.objectStore(t),u=0;s.oncomplete=function(){o()},s.onabort=function(){o(s.error||new Error("aborted by user"))};let f=c.openKeyCursor?"openKeyCursor":"openCursor",l=i.reverse?"prev":"next";c[f](n,l).onsuccess=function(h){let y=h.target.result;y&&(c.delete(y.key).onsuccess=function(){(i.limit<=0||++u<i.limit)&&y.continue()})}}});var Vw=m(qw=>{"use strict";a();var{AbstractLevel:l_}=Hf(),$w=gt(),h_=Iw(),{fromCallback:d_}=To(),{Iterator:p_}=Pw(),Mw=Jf(),y_=Uw(),m_=Gf(),zw="level-js-",jo=Symbol("idb"),Xf=Symbol("namePrefix"),er=Symbol("location"),Zf=Symbol("version"),Sn=Symbol("store"),zo=Symbol("onComplete"),jw=Symbol("promise"),za=class extends l_{constructor(e,t,n){if(typeof t=="function"||typeof n=="function")throw new $w("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:o,...s}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},s),typeof e!="string")throw new Error("constructor requires a location string argument");this[er]=e,this[Xf]=i??zw,this[Zf]=parseInt(o||1,10),this[jo]=null}get location(){return this[er]}get namePrefix(){return this[Xf]}get version(){return this[Zf]}get db(){return this[jo]}get type(){return"browser-level"}_open(e,t){let n=indexedDB.open(this[Xf]+this[er],this[Zf]);n.onerror=function(){t(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[jo]=n.result,t()},n.onupgradeneeded=i=>{let o=i.target.result;o.objectStoreNames.contains(this[er])||o.createObjectStore(this[er])}}[Sn](e){return this[jo].transaction([this[er]],e).objectStore(this[er])}[zo](e,t){let n=e.transaction;n.onabort=function(){t(n.error||new Error("aborted by user"))},n.oncomplete=function(){t(null,e.result)}}_get(e,t,n){let i=this[Sn]("readonly"),o;try{o=i.get(e)}catch(s){return this.nextTick(n,s)}this[zo](o,function(s,c){if(s)return n(s);if(c===void 0)return n(new $w("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,Mw(c))})}_getMany(e,t,n){let i=this[Sn]("readonly"),o=e.map(s=>c=>{let u;try{u=i.get(s)}catch(f){return c(f)}u.onsuccess=()=>{let f=u.result;c(null,f===void 0?f:Mw(f))},u.onerror=f=>{f.stopPropagation(),c(u.error)}});h_(o,16,n)}_del(e,t,n){let i=this[Sn]("readwrite"),o;try{o=i.delete(e)}catch(s){return this.nextTick(n,s)}this[zo](o,n)}_put(e,t,n,i){let o=this[Sn]("readwrite"),s;try{s=o.put(t,e)}catch(c){return this.nextTick(i,c)}this[zo](s,i)}_iterator(e){return new p_(this,this[er],e)}_batch(e,t,n){let i=this[Sn]("readwrite"),o=i.transaction,s=0,c;o.onabort=function(){n(c||o.error||new Error("aborted by user"))},o.oncomplete=function(){n()};function u(){let f=e[s++],l=f.key,h;try{h=f.type==="del"?i.delete(l):i.put(f.value,l)}catch(y){c=y,o.abort();return}s<e.length?h.onsuccess=u:typeof o.commit=="function"&&o.commit()}u()}_clear(e,t){let n,i;try{n=m_(e)}catch{return this.nextTick(t)}if(e.limit>=0)return y_(this,this[er],n,e,t);try{let o=this[Sn]("readwrite");i=n?o.delete(n):o.clear()}catch(o){return this.nextTick(t,o)}this[zo](i,t)}_close(e){this[jo].close(),this.nextTick(e)}};za.destroy=function(r,e,t){typeof e=="function"&&(t=e,e=zw),t=d_(t,jw);let n=indexedDB.deleteDatabase(e+r);return n.onsuccess=function(){t()},n.onerror=function(i){t(i)},t[jw]};qw.BrowserLevel=za});var Ww=m(Kw=>{a();Kw.Level=Vw().BrowserLevel});var Jw=m((fF,Gw)=>{"use strict";a();Gw.exports=function(){return Date.now()}});var Yw=m((hF,Qw)=>{"use strict";a();var Va=Jw(),el=class{constructor(e,t,n){let i=this;this._started=Va(),this._rescheduled=0,this._scheduled=t,this._args=n,this._triggered=!1,this._timerWrapper=()=>{i._rescheduled>0?(i._scheduled=i._rescheduled-(Va()-i._started),i._schedule(i._scheduled)):(i._triggered=!0,e.apply(null,i._args))},this._timer=setTimeout(this._timerWrapper,t)}reschedule(e){e||(e=this._scheduled);let t=Va();t+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=t,this._rescheduled=e)}_schedule(e){this._triggered=!1,this._started=Va(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}clear(){clearTimeout(this._timer)}};function B_(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let r;if(arguments.length>0){r=new Array(arguments.length-2);for(var e=0;e<r.length;e++)r[e]=arguments[e+2]}return new el(arguments[0],arguments[1],r)}Qw.exports=B_});var eb=m((pF,Zw)=>{"use strict";a();var{AbortController:k_}=globalThis,Xw=Yw(),qo=class extends k_{constructor(e){super(),this._ms=e,this._timer=Xw(()=>this.abort(),e),Object.setPrototypeOf(this,qo.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=Xw(()=>this.abort(),this._ms)}};Zw.exports={TimeoutController:qo}});var rb=m((mF,tl)=>{a();function tb(r){let e=new globalThis.AbortController;function t(){e.abort();for(let n of r)!n||!n.removeEventListener||n.removeEventListener("abort",t)}for(let n of r)if(!(!n||!n.addEventListener)){if(n.aborted){t();break}n.addEventListener("abort",t)}return e.signal}tl.exports=tb;tl.exports.anySignal=tb});var cb=m((KF,ab)=>{"use strict";a();var R_=async r=>{let e;for await(let t of r)e=t;return e};ab.exports=R_});var Bl=m((EU,Wb)=>{"use strict";a();var jD=typeof navigator<"u"&&navigator.product==="ReactNative";function zD(){return jD?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}var Yo=self.URL,Kb=zD(),Ol=class{constructor(e="",t=Kb){this.super=new Yo(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return Yo.createObjectURL(e)}static revokeObjectURL(e){Yo.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function qD(r){if(typeof r=="string")return new Yo(r).toString();if(!(r instanceof Yo)){let e=r.username&&r.password?`${r.username}:${r.password}@`:"",t=r.auth?r.auth+"@":"",n=r.port?":"+r.port:"",i=r.protocol?r.protocol+"//":"",o=r.host||"",s=r.hostname||"",c=r.search||(r.query?"?"+r.query:""),u=r.hash||"",f=r.pathname||"",l=r.path||f+c;return`${i}${e||t}${o||s+n}${l}${u}`}}Wb.exports={URLWithLegacySupport:Ol,URLSearchParams:self.URLSearchParams,defaultBase:Kb,format:qD}});var Jb=m((vU,Gb)=>{"use strict";a();var{URLWithLegacySupport:Hb,format:VD}=Bl();Gb.exports=(r,e={},t={},n)=>{let i=e.protocol?e.protocol.replace(":",""):"http";i=(t[i]||n||i)+":";let o;try{o=new Hb(r)}catch{o={}}let s=Object.assign({},e,{protocol:i||o.protocol,host:e.host||o.host});return new Hb(r,VD(s)).toString()}});var Yb=m((DU,Qb)=>{"use strict";a();var{URLWithLegacySupport:KD,format:WD,URLSearchParams:HD,defaultBase:GD}=Bl(),JD=Jb();Qb.exports={URL:KD,URLSearchParams:HD,format:WD,relative:JD,defaultBase:GD}});var e0=m((t$,Zb)=>{"use strict";a();function aS(r){let[e,t]=r[Symbol.asyncIterator]?[r[Symbol.asyncIterator](),Symbol.asyncIterator]:[r[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:i=>{n.push(i)},next:()=>n.length?{done:!1,value:n.shift()}:e.next(),[t](){return this}}}Zb.exports=aS});a();a();a();var Vi=w(ke(),1);a();a();a();var tE=["string","number","bigint","symbol"],rE=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function dh(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let e=typeof r;if(tE.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(nE(r))return"Buffer";let t=iE(r);return t||"Object"}function nE(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function iE(r){let e=Object.prototype.toString.call(r).slice(8,-1);if(rE.includes(e))return e}a();var d=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};d.uint=new d(0,"uint",!0);d.negint=new d(1,"negint",!0);d.bytes=new d(2,"bytes",!0);d.string=new d(3,"string",!0);d.array=new d(4,"array",!1);d.map=new d(5,"map",!1);d.tag=new d(6,"tag",!1);d.float=new d(7,"float",!0);d.false=new d(7,"false",!0);d.true=new d(7,"true",!0);d.null=new d(7,"null",!0);d.undefined=new d(7,"undefined",!0);d.break=new d(7,"break",!0);var b=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};a();a();var Ln=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",oE=new TextDecoder,sE=new TextEncoder;function ns(r){return Ln&&globalThis.Buffer.isBuffer(r)}function bc(r){return r instanceof Uint8Array?ns(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}var gh=Ln?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):yh(r,e,t):(r,e,t)=>t-e>64?oE.decode(r.subarray(e,t)):yh(r,e,t),wh=Ln?r=>r.length>64?globalThis.Buffer.from(r):ph(r):r=>r.length>64?sE.encode(r):ph(r),St=r=>Uint8Array.from(r),Rn=Ln?(r,e,t)=>ns(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),bh=Ln?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),bc(globalThis.Buffer.concat(r,e))):(r,e)=>{let t=new Uint8Array(e),n=0;for(let i of r)n+i.length>t.length&&(i=i.subarray(0,t.length-n)),t.set(i,n),n+=i.length;return t},Eh=Ln?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function xh(r,e){if(ns(r)&&ns(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function ph(r,e=1/0){let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function yh(r,e,t){let n=[];for(;e<t;){let i=r[e],o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=t){let c,u,f,l;switch(s){case 1:i<128&&(o=i);break;case 2:c=r[e+1],(c&192)===128&&(l=(i&31)<<6|c&63,l>127&&(o=l));break;case 3:c=r[e+1],u=r[e+2],(c&192)===128&&(u&192)===128&&(l=(i&15)<<12|(c&63)<<6|u&63,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:c=r[e+1],u=r[e+2],f=r[e+3],(c&192)===128&&(u&192)===128&&(f&192)===128&&(l=(i&15)<<18|(c&63)<<12|(u&63)<<6|f&63,l>65535&&l<1114112&&(o=l))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=s}return aE(n)}var mh=4096;function aE(r){let e=r.length;if(e<=mh)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=mh));return t}var cE=256,ki=class{constructor(e=cE){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=t.length-(this.maxCursor-this.cursor)-1;t.set(e,i)}else{if(t){let i=t.length-(this.maxCursor-this.cursor)-1;i<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=Eh(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=Rn(n,0,this.cursor)}else t=bh(this.chunks,this.cursor);return e&&this.reset(),t}};a();var C="CBOR decode error:",Ec="CBOR encode error:",Li=[];Li[23]=1;Li[24]=2;Li[25]=3;Li[26]=5;Li[27]=9;function Mt(r,e,t){if(r.length-e<t)throw new Error(`${C} not enough data for type`)}a();a();var le=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Ue(r,e,t){Mt(r,e,1);let n=r[e];if(t.strict===!0&&n<le[0])throw new Error(`${C} integer encoded in more bytes than necessary (strict decode)`);return n}function $e(r,e,t){Mt(r,e,2);let n=r[e]<<8|r[e+1];if(t.strict===!0&&n<le[1])throw new Error(`${C} integer encoded in more bytes than necessary (strict decode)`);return n}function Me(r,e,t){Mt(r,e,4);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<le[2])throw new Error(`${C} integer encoded in more bytes than necessary (strict decode)`);return n}function je(r,e,t){Mt(r,e,8);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],i=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(t.strict===!0&&o<le[3])throw new Error(`${C} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(t.allowBigInt===!0)return o;throw new Error(`${C} integers outside of the safe integer range are not supported`)}function vh(r,e,t,n){return new b(d.uint,Ue(r,e+1,n),2)}function _h(r,e,t,n){return new b(d.uint,$e(r,e+1,n),3)}function Dh(r,e,t,n){return new b(d.uint,Me(r,e+1,n),5)}function Sh(r,e,t,n){return new b(d.uint,je(r,e+1,n),9)}function Xe(r,e){return ye(r,0,e.value)}function ye(r,e,t){if(t<le[0]){let n=Number(t);r.push([e|n])}else if(t<le[1]){let n=Number(t);r.push([e|24,n])}else if(t<le[2]){let n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<le[3]){let n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<le[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=s&255,s=s>>8,i[3]=s&255,s=s>>8,i[2]=s&255,s=s>>8,i[1]=s&255,r.push(i)}else throw new Error(`${C} encountered BigInt larger than allowable range`)}}Xe.encodedSize=function(e){return ye.encodedSize(e.value)};ye.encodedSize=function(e){return e<le[0]?1:e<le[1]?2:e<le[2]?3:e<le[3]?5:9};Xe.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};a();function Ah(r,e,t,n){return new b(d.negint,-1-Ue(r,e+1,n),2)}function Th(r,e,t,n){return new b(d.negint,-1-$e(r,e+1,n),3)}function Ch(r,e,t,n){return new b(d.negint,-1-Me(r,e+1,n),5)}var xc=BigInt(-1),Ih=BigInt(1);function Oh(r,e,t,n){let i=je(r,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new b(d.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${C} integers outside of the safe integer range are not supported`);return new b(d.negint,xc-BigInt(i),9)}function is(r,e){let t=e.value,n=typeof t=="bigint"?t*xc-Ih:t*-1-1;ye(r,e.type.majorEncoded,n)}is.encodedSize=function(e){let t=e.value,n=typeof t=="bigint"?t*xc-Ih:t*-1-1;return n<le[0]?1:n<le[1]?2:n<le[2]?3:n<le[3]?5:9};is.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};a();function Ri(r,e,t,n){Mt(r,e,t+n);let i=Rn(r,e+t,e+t+n);return new b(d.bytes,i,t+n)}function Bh(r,e,t,n){return Ri(r,e,1,t)}function kh(r,e,t,n){return Ri(r,e,2,Ue(r,e+1,n))}function Lh(r,e,t,n){return Ri(r,e,3,$e(r,e+1,n))}function Rh(r,e,t,n){return Ri(r,e,5,Me(r,e+1,n))}function Nh(r,e,t,n){let i=je(r,e+1,n);if(typeof i=="bigint")throw new Error(`${C} 64-bit integer bytes lengths not supported`);return Ri(r,e,9,i)}function os(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===d.string?wh(r.value):r.value),r.encodedBytes}function Nn(r,e){let t=os(e);ye(r,e.type.majorEncoded,t.length),r.push(t)}Nn.encodedSize=function(e){let t=os(e);return ye.encodedSize(t.length)+t.length};Nn.compareTokens=function(e,t){return fE(os(e),os(t))};function fE(r,e){return r.length<e.length?-1:r.length>e.length?1:xh(r,e)}a();function Ni(r,e,t,n,i){let o=t+n;Mt(r,e,o);let s=new b(d.string,gh(r,e+t,e+o),o);return i.retainStringBytes===!0&&(s.byteValue=Rn(r,e+t,e+o)),s}function Ph(r,e,t,n){return Ni(r,e,1,t,n)}function Fh(r,e,t,n){return Ni(r,e,2,Ue(r,e+1,n),n)}function Uh(r,e,t,n){return Ni(r,e,3,$e(r,e+1,n),n)}function $h(r,e,t,n){return Ni(r,e,5,Me(r,e+1,n),n)}function Mh(r,e,t,n){let i=je(r,e+1,n);if(typeof i=="bigint")throw new Error(`${C} 64-bit integer string lengths not supported`);return Ni(r,e,9,i,n)}var jh=Nn;a();function Pn(r,e,t,n){return new b(d.array,n,t)}function zh(r,e,t,n){return Pn(r,e,1,t)}function qh(r,e,t,n){return Pn(r,e,2,Ue(r,e+1,n))}function Vh(r,e,t,n){return Pn(r,e,3,$e(r,e+1,n))}function Kh(r,e,t,n){return Pn(r,e,5,Me(r,e+1,n))}function Wh(r,e,t,n){let i=je(r,e+1,n);if(typeof i=="bigint")throw new Error(`${C} 64-bit integer array lengths not supported`);return Pn(r,e,9,i)}function Hh(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${C} indefinite length items not allowed`);return Pn(r,e,1,1/0)}function ss(r,e){ye(r,d.array.majorEncoded,e.value)}ss.compareTokens=Xe.compareTokens;ss.encodedSize=function(e){return ye.encodedSize(e.value)};a();function Fn(r,e,t,n){return new b(d.map,n,t)}function Gh(r,e,t,n){return Fn(r,e,1,t)}function Jh(r,e,t,n){return Fn(r,e,2,Ue(r,e+1,n))}function Qh(r,e,t,n){return Fn(r,e,3,$e(r,e+1,n))}function Yh(r,e,t,n){return Fn(r,e,5,Me(r,e+1,n))}function Xh(r,e,t,n){let i=je(r,e+1,n);if(typeof i=="bigint")throw new Error(`${C} 64-bit integer map lengths not supported`);return Fn(r,e,9,i)}function Zh(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${C} indefinite length items not allowed`);return Fn(r,e,1,1/0)}function as(r,e){ye(r,d.map.majorEncoded,e.value)}as.compareTokens=Xe.compareTokens;as.encodedSize=function(e){return ye.encodedSize(e.value)};a();function ed(r,e,t,n){return new b(d.tag,t,1)}function td(r,e,t,n){return new b(d.tag,Ue(r,e+1,n),2)}function rd(r,e,t,n){return new b(d.tag,$e(r,e+1,n),3)}function nd(r,e,t,n){return new b(d.tag,Me(r,e+1,n),5)}function id(r,e,t,n){return new b(d.tag,je(r,e+1,n),9)}function cs(r,e){ye(r,d.tag.majorEncoded,e.value)}cs.compareTokens=Xe.compareTokens;cs.encodedSize=function(e){return ye.encodedSize(e.value)};a();var mE=20,gE=21,wE=22,bE=23;function od(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${C} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new b(d.null,null,1):new b(d.undefined,void 0,1)}function sd(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${C} indefinite length items not allowed`);return new b(d.break,void 0,1)}function vc(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${C} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${C} Infinity values are not supported`)}return new b(d.float,r,e)}function ad(r,e,t,n){return vc(_c(r,e+1),3,n)}function cd(r,e,t,n){return vc(Dc(r,e+1),5,n)}function ud(r,e,t,n){return vc(dd(r,e+1),9,n)}function us(r,e,t){let n=e.value;if(n===!1)r.push([d.float.majorEncoded|mE]);else if(n===!0)r.push([d.float.majorEncoded|gE]);else if(n===null)r.push([d.float.majorEncoded|wE]);else if(n===void 0)r.push([d.float.majorEncoded|bE]);else{let i,o=!1;(!t||t.float64!==!0)&&(ld(n),i=_c(ct,1),n===i||Number.isNaN(n)?(ct[0]=249,r.push(ct.slice(0,3)),o=!0):(hd(n),i=Dc(ct,1),n===i&&(ct[0]=250,r.push(ct.slice(0,5)),o=!0))),o||(EE(n),i=dd(ct,1),ct[0]=251,r.push(ct.slice(0,9)))}}us.encodedSize=function(e,t){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){ld(n);let i=_c(ct,1);if(n===i||Number.isNaN(n))return 3;if(hd(n),i=Dc(ct,1),n===i)return 5}return 9};var fd=new ArrayBuffer(9),Ze=new DataView(fd,1),ct=new Uint8Array(fd,0);function ld(r){if(r===1/0)Ze.setUint16(0,31744,!1);else if(r===-1/0)Ze.setUint16(0,64512,!1);else if(Number.isNaN(r))Ze.setUint16(0,32256,!1);else{Ze.setFloat32(0,r);let e=Ze.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)Ze.setUint16(0,31744,!1);else if(t===0)Ze.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let i=t-127;i<-24?Ze.setUint16(0,0):i<-14?Ze.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):Ze.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function _c(r,e){if(r.length-e<2)throw new Error(`${C} not enough data for float16`);let t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,i=t&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,t&32768?-o:o}function hd(r){Ze.setFloat32(0,r,!1)}function Dc(r,e){if(r.length-e<4)throw new Error(`${C} not enough data for float32`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function EE(r){Ze.setFloat64(0,r,!1)}function dd(r,e){if(r.length-e<8)throw new Error(`${C} not enough data for float64`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}us.compareTokens=Xe.compareTokens;function N(r,e,t){throw new Error(`${C} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function fs(r){return()=>{throw new Error(`${C} ${r}`)}}var E=[];for(let r=0;r<=23;r++)E[r]=N;E[24]=vh;E[25]=_h;E[26]=Dh;E[27]=Sh;E[28]=N;E[29]=N;E[30]=N;E[31]=N;for(let r=32;r<=55;r++)E[r]=N;E[56]=Ah;E[57]=Th;E[58]=Ch;E[59]=Oh;E[60]=N;E[61]=N;E[62]=N;E[63]=N;for(let r=64;r<=87;r++)E[r]=Bh;E[88]=kh;E[89]=Lh;E[90]=Rh;E[91]=Nh;E[92]=N;E[93]=N;E[94]=N;E[95]=fs("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)E[r]=Ph;E[120]=Fh;E[121]=Uh;E[122]=$h;E[123]=Mh;E[124]=N;E[125]=N;E[126]=N;E[127]=fs("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)E[r]=zh;E[152]=qh;E[153]=Vh;E[154]=Kh;E[155]=Wh;E[156]=N;E[157]=N;E[158]=N;E[159]=Hh;for(let r=160;r<=183;r++)E[r]=Gh;E[184]=Jh;E[185]=Qh;E[186]=Yh;E[187]=Xh;E[188]=N;E[189]=N;E[190]=N;E[191]=Zh;for(let r=192;r<=215;r++)E[r]=ed;E[216]=td;E[217]=rd;E[218]=nd;E[219]=id;E[220]=N;E[221]=N;E[222]=N;E[223]=N;for(let r=224;r<=243;r++)E[r]=fs("simple values are not supported");E[244]=N;E[245]=N;E[246]=N;E[247]=od;E[248]=fs("simple values are not supported");E[249]=ad;E[250]=cd;E[251]=ud;E[252]=N;E[253]=N;E[254]=N;E[255]=sd;var ut=[];for(let r=0;r<24;r++)ut[r]=new b(d.uint,r,1);for(let r=-1;r>=-24;r--)ut[31-r]=new b(d.negint,r,1);ut[64]=new b(d.bytes,new Uint8Array(0),1);ut[96]=new b(d.string,"",1);ut[128]=new b(d.array,0,1);ut[160]=new b(d.map,0,1);ut[244]=new b(d.false,!1,1);ut[245]=new b(d.true,!0,1);ut[246]=new b(d.null,null,1);function ls(r){switch(r.type){case d.false:return St([244]);case d.true:return St([245]);case d.null:return St([246]);case d.bytes:return r.value.length?void 0:St([64]);case d.string:return r.value===""?St([96]):void 0;case d.array:return r.value===0?St([128]):void 0;case d.map:return r.value===0?St([160]):void 0;case d.uint:return r.value<24?St([Number(r.value)]):void 0;case d.negint:if(r.value>=-24)return St([31-Number(r.value)])}}var vE={float64:!1,mapSorter:DE,quickEncodeToken:ls};function Ac(){let r=[];return r[d.uint.major]=Xe,r[d.negint.major]=is,r[d.bytes.major]=Nn,r[d.string.major]=jh,r[d.array.major]=ss,r[d.map.major]=as,r[d.tag.major]=cs,r[d.float.major]=us,r}var pd=Ac(),Sc=new ki,Un=class{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${Ec} object contains circular references`);return new Un(t,e)}},sr={null:new b(d.null,null),undefined:new b(d.undefined,void 0),true:new b(d.true,!0),false:new b(d.false,!1),emptyArray:new b(d.array,0),emptyMap:new b(d.map,0)},ar={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new b(d.float,r):r>=0?new b(d.uint,r):new b(d.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new b(d.uint,r):new b(d.negint,r)},Uint8Array(r,e,t,n){return new b(d.bytes,r)},string(r,e,t,n){return new b(d.string,r)},boolean(r,e,t,n){return r?sr.true:sr.false},null(r,e,t,n){return sr.null},undefined(r,e,t,n){return sr.undefined},ArrayBuffer(r,e,t,n){return new b(d.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new b(d.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[sr.emptyArray,new b(d.break)]:sr.emptyArray;n=Un.createCheck(n,r);let i=[],o=0;for(let s of r)i[o++]=Pi(s,t,n);return t.addBreakTokens?[new b(d.array,r.length),i,new b(d.break)]:[new b(d.array,r.length),i]},Object(r,e,t,n){let i=e!=="Object",o=i?r.keys():Object.keys(r),s=i?r.size:o.length;if(!s)return t.addBreakTokens===!0?[sr.emptyMap,new b(d.break)]:sr.emptyMap;n=Un.createCheck(n,r);let c=[],u=0;for(let f of o)c[u++]=[Pi(f,t,n),Pi(i?r.get(f):r[f],t,n)];return _E(c,t),t.addBreakTokens?[new b(d.map,s),c,new b(d.break)]:[new b(d.map,s),c]}};ar.Map=ar.Object;ar.Buffer=ar.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))ar[`${r}Array`]=ar.DataView;function Pi(r,e={},t){let n=dh(r),i=e&&e.typeEncoders&&e.typeEncoders[n]||ar[n];if(typeof i=="function"){let s=i(r,n,e,t);if(s!=null)return s}let o=ar[n];if(!o)throw new Error(`${Ec} unsupported type: ${n}`);return o(r,n,e,t)}function _E(r,e){e.mapSorter&&r.sort(e.mapSorter)}function DE(r,e){let t=Array.isArray(r[0])?r[0][0]:r[0],n=Array.isArray(e[0])?e[0][0]:e[0];if(t.type!==n.type)return t.type.compare(n.type);let i=t.type.major,o=pd[i].compareTokens(t,n);return o===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o}function yd(r,e,t,n){if(Array.isArray(e))for(let i of e)yd(r,i,t,n);else t[e.type.major](r,e,n)}function SE(r,e,t){let n=Pi(r,t);if(!Array.isArray(n)&&t.quickEncodeToken){let i=t.quickEncodeToken(n);if(i)return i;let o=e[n.type.major];if(o.encodedSize){let s=o.encodedSize(n,t),c=new ki(s);if(o(c,n,t),c.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return bc(c.chunks[0])}}return Sc.reset(),yd(Sc,n,e,t),Sc.toBytes(!0)}function Kr(r,e){return e=Object.assign({},vE,e),SE(r,pd,e)}a();var AE={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},Tc=class{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=ut[e];if(t===void 0){let n=E[e];if(!n)throw new Error(`${C} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;t=n(this.data,this.pos,i,this.options)}return this.pos+=t.encodedLength,t}},Fi=Symbol.for("DONE"),hs=Symbol.for("BREAK");function TE(r,e,t){let n=[];for(let i=0;i<r.value;i++){let o=Ui(e,t);if(o===hs){if(r.value===1/0)break;throw new Error(`${C} got unexpected break to lengthed array`)}if(o===Fi)throw new Error(`${C} found array but not enough entries (got ${i}, expected ${r.value})`);n[i]=o}return n}function CE(r,e,t){let n=t.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let s=0;s<r.value;s++){let c=Ui(e,t);if(c===hs){if(r.value===1/0)break;throw new Error(`${C} got unexpected break to lengthed map`)}if(c===Fi)throw new Error(`${C} found map but not enough entries (got ${s} [no key], expected ${r.value})`);if(n!==!0&&typeof c!="string")throw new Error(`${C} non-string keys not supported (got ${typeof c})`);let u=Ui(e,t);if(u===Fi)throw new Error(`${C} found map but not enough entries (got ${s} [no value], expected ${r.value})`);n?o.set(c,u):i[c]=u}return n?o:i}function Ui(r,e){if(r.done())return Fi;let t=r.next();if(t.type===d.break)return hs;if(t.type.terminal)return t.value;if(t.type===d.array)return TE(t,r,e);if(t.type===d.map)return CE(t,r,e);if(t.type===d.tag){if(e.tags&&typeof e.tags[t.value]=="function"){let n=Ui(r,e);return e.tags[t.value](n)}throw new Error(`${C} tag not supported (${t.value})`)}throw new Error("unsupported")}function $n(r,e){if(!(r instanceof Uint8Array))throw new Error(`${C} data to decode must be a Uint8Array`);e=Object.assign({},AE,e);let t=e.tokenizer||new Tc(r,e),n=Ui(t,e);if(n===Fi)throw new Error(`${C} did not find any content to decode`);if(n===hs)throw new Error(`${C} got unexpected break`);if(!t.done())throw new Error(`${C} too many terminals, data makes no sense`);return n}a();var IE=Ac(),OE={float64:!1,quickEncodeToken:ls};function Ic(r,e=IE,t=OE){if(Array.isArray(r)){let n=0;for(let i of r)n+=Ic(i,e,t);return n}else{let n=e[r.type.major];if(n.encodedSize===void 0||typeof n.encodedSize!="function")throw new Error(`Encoder for ${r.type.name} does not have an encodedSize()`);return n.encodedSize(r,t)}}var Gr={};Z(Gr,{code:()=>Dx,decode:()=>ws,encode:()=>qi,name:()=>_x});a();z();var Td=42;function wx(r){if(r.asCID!==r)return null;let e=v.asCID(r);if(!e)return null;let t=new Uint8Array(e.bytes.byteLength+1);return t.set(e.bytes,1),[new b(d.tag,Td),new b(d.bytes,t)]}function bx(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Ex(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var xx={float64:!0,typeEncoders:{Object:wx,undefined:bx,number:Ex}};function vx(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return v.decode(r.subarray(1))}var Cd={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};Cd.tags[Td]=vx;var _x="dag-cbor",Dx=113,qi=r=>Kr(r,xx),ws=r=>$n(r,Cd);var jc=class{constructor(e,t){this.bytes=e,this.byteOffset=t,this.roots=[],this.headerSize=t}addRoot(e,t){return Sx(this,e,t),this}write(e){return Ax(this,e),this}close(e){return Tx(this,e)}},Sx=(r,e,t={})=>{let{resize:n=!1}=t,{bytes:i,headerSize:o,byteOffset:s,roots:c}=r;r.roots.push(e);let u=Ki(r);if(u>o)if(u-o+s<i.byteLength)if(n)Od(r,u);else throw c.pop(),new RangeError(`Header of size ${o} has no capacity for new root ${e}.
  However there is a space in the buffer and you could call addRoot(root, { resize: root }) to resize header to make a space for this root.`);else throw c.pop(),new RangeError(`Buffer has no capacity for a new root ${e}`)},zc=({cid:r,bytes:e})=>{let t=r.bytes.byteLength+e.byteLength;return Vi.default.encodingLength(t)+t},Ax=(r,{cid:e,bytes:t})=>{let n=e.bytes.byteLength+t.byteLength,i=Vi.default.encode(n);if(r.byteOffset+i.length+n>r.bytes.byteLength)throw new RangeError("Buffer has no capacity for this block");Mc(r,i),Mc(r,e.bytes),Mc(r,t)},Tx=(r,e={})=>{let{resize:t=!1}=e,{roots:n,bytes:i,byteOffset:o,headerSize:s}=r,c=qi({version:1,roots:n}),u=Vi.default.encode(c.length),f=u.length+c.byteLength;if(s-f===0)return Id(r,u,c),i.subarray(0,o);if(t)return Od(r,f),Id(r,u,c),i.subarray(0,r.byteOffset);throw new RangeError(`Header size was overestimated.
You can use close({ resize: true }) to resize header`)},Od=(r,e)=>{let{bytes:t,headerSize:n}=r;t.set(t.subarray(n,r.byteOffset),e),r.byteOffset+=e-n,r.headerSize=e},Mc=(r,e)=>{r.bytes.set(e,r.byteOffset),r.byteOffset+=e.length},Id=({bytes:r},e,t)=>{r.set(e),r.set(t,e.length)},Cx=[new b(d.map,2),new b(d.string,"version"),new b(d.uint,1),new b(d.string,"roots")],Ix=new b(d.tag,42),Ox=r=>{let e=[...Cx];e.push(new b(d.array,r.length));for(let n of r)e.push(Ix),e.push(new b(d.bytes,{length:n+1}));let t=Ic(e);return Vi.default.encodingLength(t)+t},Ki=({roots:r})=>Ox(r.map(e=>e.bytes.byteLength));var Bd=(r,e={})=>{let{roots:t=[],byteOffset:n=0,byteLength:i=r.byteLength,headerSize:o=Ki({roots:t})}=e,s=new Uint8Array(r,n,i),c=new jc(s,o);for(let u of t)c.addRoot(u);return c};a();a();a();var hr=w(ke(),1);z();Se();a();var lr={Null:r=>r===null,Int:r=>Number.isInteger(r),Float:r=>typeof r=="number"&&Number.isFinite(r),String:r=>typeof r=="string",Bool:r=>typeof r=="boolean",Bytes:r=>r instanceof Uint8Array,Link:r=>!lr.Null(r)&&typeof r=="object"&&r.asCID===r,List:r=>Array.isArray(r),Map:r=>!lr.Null(r)&&typeof r=="object"&&r.asCID!==r&&!lr.List(r)&&!lr.Bytes(r)},qn={Int:lr.Int,"CarHeader > version":r=>qn.Int(r),"CarHeader > roots (anon) > valueType (anon)":lr.Link,"CarHeader > roots (anon)":r=>lr.List(r)&&Array.prototype.every.call(r,qn["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":r=>qn["CarHeader > roots (anon)"](r),CarHeader:r=>{let e=r&&Object.keys(r);return lr.Map(r)&&["version"].every(t=>e.includes(t))&&Object.entries(r).every(([t,n])=>qn["CarHeader > "+t]&&qn["CarHeader > "+t](n))}},kd=qn.CarHeader;var qc={SHA2_256:18,LENGTH:32,DAG_PB:112},Ld=16+8+8+8;async function bs(r){let e=await r.upTo(8);if(!e.length)throw new Error("Unexpected end of data");let t=hr.default.decode(e);return r.seek(hr.default.decode.bytes),t}async function kx(r){let e=await r.exactly(Ld),t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=0,i={version:2,characteristics:[t.getBigUint64(n,!0),t.getBigUint64(n+=8,!0)],dataOffset:Number(t.getBigUint64(n+=8,!0)),dataSize:Number(t.getBigUint64(n+=8,!0)),indexOffset:Number(t.getBigUint64(n+=8,!0))};return r.seek(Ld),i}async function Vc(r,e){let t=await bs(r);if(t===0)throw new Error("Invalid CAR header (zero length)");let n=await r.exactly(t);r.seek(t);let i=ws(n);if(!kd(i))throw new Error("Invalid CAR header format");if(i.version!==1&&i.version!==2||e!==void 0&&i.version!==e)throw new Error(`Invalid CAR version: ${i.version}${e!==void 0?` (expected ${e})`:""}`);let o=Array.isArray(i.roots);if(i.version===1&&!o||i.version===2&&o)throw new Error("Invalid CAR header format");if(i.version===1)return i;let s=await kx(r);r.seek(s.dataOffset-r.pos);let c=await Vc(r,1);return Object.assign(c,s)}async function Lx(r){let e=await r.upTo(8);hr.default.decode(e);let t=hr.default.decode.bytes,n=hr.default.decode(e.subarray(hr.default.decode.bytes)),i=hr.default.decode.bytes,o=t+i+n,s=await r.exactly(o);return r.seek(o),s}async function Rx(r){let e=await r.exactly(2);if(e[0]===qc.SHA2_256&&e[1]===qc.LENGTH){let s=await r.exactly(34);r.seek(34);let c=ue(s);return v.create(0,qc.DAG_PB,c)}let t=await bs(r);if(t!==1)throw new Error(`Unexpected CID version (${t})`);let n=await bs(r),i=await Lx(r),o=ue(i);return v.create(t,n,o)}async function Rd(r){let e=r.pos,t=await bs(r);if(t===0)throw new Error("Invalid CAR section (zero length)");t+=r.pos-e;let n=await Rx(r),i=t-Number(r.pos-e);return{cid:n,length:t,blockLength:i}}async function Nx(r){let{cid:e,blockLength:t}=await Rd(r),n=await r.exactly(t);return r.seek(t),{bytes:n,cid:e}}async function Px(r){let e=r.pos,{cid:t,length:n,blockLength:i}=await Rd(r),o={cid:t,length:n,blockLength:i,offset:e,blockOffset:r.pos};return r.seek(o.blockLength),o}function Vn(r){let e=(async()=>{let t=await Vc(r);if(t.version===2){let n=r.pos-t.dataOffset;r=Ux(r,t.dataSize-n)}return t})();return{header:()=>e,async*blocks(){for(await e;(await r.upTo(8)).length>0;)yield await Nx(r)},async*blocksIndex(){for(await e;(await r.upTo(8)).length>0;)yield await Px(r)}}}function Jr(r){let e=0;return{async upTo(t){return r.subarray(e,e+Math.min(t,r.length-e))},async exactly(t){if(t>r.length-e)throw new Error("Unexpected end of data");return r.subarray(e,e+t)},seek(t){e+=t},get pos(){return e}}}function Fx(r){let e=0,t=0,n=0,i=new Uint8Array(0),o=async s=>{t=i.length-n;let c=[i.subarray(n)];for(;t<s;){let f=await r();if(f==null)break;t<0?f.length>t&&c.push(f.subarray(-t)):c.push(f),t+=f.length}i=new Uint8Array(c.reduce((f,l)=>f+l.length,0));let u=0;for(let f of c)i.set(f,u),u+=f.length;n=0};return{async upTo(s){return i.length-n<s&&await o(s),i.subarray(n,n+Math.min(i.length-n,s))},async exactly(s){if(i.length-n<s&&await o(s),i.length-n<s)throw new Error("Unexpected end of data");return i.subarray(n,n+s)},seek(s){e+=s,n+=s},get pos(){return e}}}function Kn(r){let e=r[Symbol.asyncIterator]();async function t(){let n=await e.next();return n.done?null:n.value}return Fx(t)}function Ux(r,e){let t=0;return{async upTo(n){let i=await r.upTo(n);return i.length+t>e&&(i=i.subarray(0,e-t)),i},async exactly(n){let i=await r.exactly(n);if(i.length+t>e)throw new Error("Unexpected end of data");return i},seek(n){t+=n,r.seek(n)},get pos(){return r.pos}}}var Wn=class{constructor(e,t){this._header=e,this._blocks=t,this._keys=t.map(n=>n.cid.toString())}get version(){return this._header.version}async getRoots(){return this._header.roots}async has(e){return this._keys.indexOf(e.toString())>-1}async get(e){let t=this._keys.indexOf(e.toString());return t>-1?this._blocks[t]:void 0}async*blocks(){for(let e of this._blocks)yield e}async*cids(){for(let e of this._blocks)yield e.cid}static async fromBytes(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return Nd(Jr(e))}static async fromIterable(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return Nd(Kn(e))}};async function Nd(r){let e=Vn(r),t=await e.header(),n=[];for await(let i of e.blocks())n.push(i);return new Wn(t,n)}a();var Es=class{constructor(e,t,n){this._version=e,this._roots=t,this._iterator=n}get version(){return this._version}async getRoots(){return this._roots}[Symbol.asyncIterator](){return this._iterator}static async fromBytes(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return Pd(Jr(e))}static async fromIterable(e){if(!e||typeof e[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return Pd(Kn(e))}};async function Pd(r){let e=Vn(r),{version:t,roots:n}=await e.header();return new Es(t,n,e.blocksIndex())}a();var xs=class{constructor(e,t,n){this._version=e,this._roots=t,this._iterable=n,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}},Qr=class extends xs{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){let{version:t,roots:n,iterator:i}=await Fd(e);return new Qr(t,n,i)}static async fromIterable(e){let{version:t,roots:n,iterator:i}=await Ud(e);return new Qr(t,n,i)}},Hn=class extends xs{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");this._decoded=!0;let e=this._iterable[Symbol.asyncIterator]();return{async next(){let t=await e.next();return t.done?t:{done:!1,value:t.value.cid}}}}static async fromBytes(e){let{version:t,roots:n,iterator:i}=await Fd(e);return new Hn(t,n,i)}static async fromIterable(e){let{version:t,roots:n,iterator:i}=await Ud(e);return new Hn(t,n,i)}};async function Fd(r){if(!(r instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return $d(Jr(r))}async function Ud(r){if(!r||typeof r[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return $d(Kn(r))}async function $d(r){let e=Vn(r),{version:t,roots:n}=await e.header();return{version:t,roots:n,iterator:e.blocks()}}a();z();a();var $x=w(ke(),1);a();var Md=class{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}};a();Gn();Se();dr();Jn();a();Gn();var vs=({enumerable:r=!0,configurable:e=!1}={})=>({enumerable:r,configurable:e,writable:!1}),Jc=function*(r,e){if(r!=null&&!(r instanceof Uint8Array))for(let[t,n]of Object.entries(r)){let i=[...e,t];if(n!=null&&typeof n=="object")if(Array.isArray(n))for(let[o,s]of n.entries()){let c=[...i,o],u=v.asCID(s);u?yield[c.join("/"),u]:typeof s=="object"&&(yield*Jc(s,c))}else{let o=v.asCID(n);o?yield[i.join("/"),o]:yield*Jc(n,i)}}},Qc=function*(r,e){if(r!=null)for(let[t,n]of Object.entries(r)){let i=[...e,t];if(yield i.join("/"),n!=null&&!(n instanceof Uint8Array)&&typeof n=="object"&&!v.asCID(n))if(Array.isArray(n))for(let[o,s]of n.entries()){let c=[...i,o];yield c.join("/"),typeof s=="object"&&!v.asCID(s)&&(yield*Qc(s,c))}else yield*Qc(n,i)}},Vx=(r,e)=>{let t=r;for(let[n,i]of e.entries()){if(t=t[i],t==null)throw new Error(`Object has no property at ${e.slice(0,n+1).map(s=>`[${JSON.stringify(s)}]`).join("")}`);let o=v.asCID(t);if(o)return{value:o,remaining:e.slice(n+1).join("/")}}return{value:t}},_s=class{constructor({cid:e,bytes:t,value:n}){if(!e||!t||typeof n>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:vs(),bytes:vs(),value:vs(),asBlock:vs()})}links(){return Jc(this.value,[])}tree(){return Qc(this.value,[])}get(e="/"){return Vx(this.value,e.split("/").filter(Boolean))}},Yc=async({value:r,codec:e,hasher:t})=>{if(typeof r>"u")throw new Error('Missing required argument "value"');if(!e||!t)throw new Error("Missing required argument: codec or hasher");let n=e.encode(r),i=await t.digest(n),o=v.create(1,e.code,i);return new _s({value:r,bytes:n,cid:o})};var Ds=({bytes:r,cid:e,value:t,codec:n})=>{let i=t!==void 0?t:n&&n.decode(r);if(i===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new _s({cid:e,bytes:r,value:i})},Vd=async({bytes:r,cid:e,hasher:t,codec:n})=>{if(!r)throw new Error('Missing required argument "bytes"');if(!t)throw new Error('Missing required argument "hasher"');let i=n.decode(r),o=await t.digest(r);if(!Wr.equals(e.multihash.bytes,o.bytes))throw new Error("CID hash does not match bytes");return Ds({bytes:r,cid:e,value:i,codec:n})};a();function Xc(r){return{all:r=r||new Map,on:function(e,t){var n=r.get(e);n?n.push(t):r.set(e,[t])},off:function(e,t){var n=r.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):r.set(e,[]))},emit:function(e,t){var n=r.get(e);n&&n.slice().map(function(i){i(t)}),(n=r.get("*"))&&n.slice().map(function(i){i(e,t)})}}}var{isBinary:Wx}=Wr,Wd=r=>Wx(r)?Yc({value:r,hasher:Tt,codec:At}):Yc({value:r,hasher:Tt,codec:Gr}),Kd=({bytes:r,cid:e})=>{let t,n,{code:i}=e,o=e.multihash.code||ue(e.multihash).code;if(o===18)t=Tt;else throw new Error("Unsupported hash function: "+o);if(i===113)n=Gr;else if(i===85)n=At;else throw new Error("Unsupported codec: "+i);return Vd({bytes:r,cid:e,codec:n,hasher:t})},Ss=class{constructor(){Object.assign(this,Xc()),this.blocks=[]}static create(){return new this}static async load(e){let t=await Wn.fromBytes(e),[n]=await t.getRoots();return{root:n,get:o=>t.get(o).then(s=>Kd(s)).then(({value:s})=>s)}}async add(e){let t=await Wd(e);return this.last=t,this.blocks.push(t),this.emit("size",this.size),t.cid}async get(e){let{cid:t,bytes:n,value:i}=await Kd(e);return{cid:t,bytes:n,value:i}}undo(){return this.blocks.pop()}async commit(){let e=this.last.cid,t=0,n=Ki({roots:[e]});t+=n;for(let s of this.blocks)t+=zc(s);let i=new Uint8Array(t),o=await Bd(i,{headerSize:n});o.addRoot(e);for(let s of this.blocks)o.write(s);return await o.close(),o.bytes}get size(){if(!this?.last)return 0;let e=this.last.cid,t=0;t+=Ki({roots:[e]});for(let i of this.blocks)t+=zc(i);return t}};a();a();a();a();var vg=w(tt(),1),$2=w(Te(),1);a();a();a();z();a();a();a();var rt=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");q();me();var jt="/",pp=new TextEncoder().encode(jt),Bs=pp[0],F=class{constructor(e,t){if(typeof e=="string")this._buf=M(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Bs)throw new Error("Invalid key")}toString(e="utf8"){return A(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new F(e.join(jt))}static random(){return new F(rt().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new F(e):typeof e.uint8Array=="function"?new F(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=pp),this._buf[0]!==Bs){let e=new Uint8Array(this._buf.byteLength+1);e.fill(Bs,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Bs;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let o=t[i],s=n[i];if(o<s)return!0;if(o>s)return!1}return t.length<n.length}reverse(){return F.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(jt).slice(1)}type(){return S1(this.baseNamespace())}name(){return A1(this.baseNamespace())}instance(e){return new F(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(jt)||(e+=jt),e+=this.type(),new F(e)}parent(){let e=this.list();return e.length===1?new F(jt):new F(e.slice(0,-1).join(jt))}child(e){return this.toString()===jt?e:e.toString()===jt?this:new F(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return F.withNamespaces([...this.namespaces(),...T1(e.map(t=>t.namespaces()))])}};function S1(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function A1(r){let e=r.split(":");return e[e.length-1]}function T1(r){return[].concat(...r)}var gp=w(tt(),1),wp=w(du(),1);Ae();dr();Se();var I1=(0,gp.default)("ipfs:repo:migrator:migration-8");function bp(r){return r.child?bp(r.child):r}function O1(r){try{let e=U.decode(`b${r.toString().toLowerCase().slice(1)}`),t=v.decode(e).multihash.bytes,n=U.encode(t).slice(1).toUpperCase();return new F(`/${n}`,!1)}catch{return r}}function B1(r){try{let e=U.decode(`b${r.toString().toLowerCase().slice(1)}`),t=ue(e),n=U.encode(v.createV1(Yr,t).bytes).slice(1);return new F(`/${n.toUpperCase()}`,!1)}catch{return r}}async function mp(r,e,t){let n=r.blocks;await n.open();let i=bp(n),o=await(0,wp.default)(i.queryKeys({filters:[s=>t(s).toString()!==s.toString()]}));try{let s=0;for await(let c of i.query({})){let u=t(c.key);u.toString()!==c.key.toString()&&(s+=1,I1(`Migrating Block from ${c.key} to ${u}`,await i.has(c.key)),await i.delete(c.key),await i.put(u,c.value),e(s/o*100,`Migrated Block from ${c.key} to ${u}`))}}finally{await n.close()}}var Ep={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:(r,e=()=>{})=>mp(r,e,O1),revert:(r,e=()=>{})=>mp(r,e,B1)};a();z();a();z();a();var k1=new TextDecoder;function pu(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");let i=r[e++];if(t+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[t,e]}function ks(r,e){let t;[t,e]=pu(r,e);let n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function xp(r,e){let t;return[t,e]=pu(r,e),[t&7,t>>3,e]}function L1(r){let e={},t=r.length,n=0;for(;n<t;){let i,o;if([i,o,n]=xp(r,n),o===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=ks(r,n)}else if(o===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let s;[s,n]=ks(r,n),e.Name=k1.decode(s)}else if(o===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=pu(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function vp(r){let e=r.length,t=0,n,i=!1,o;for(;t<e;){let c,u;if([c,u,t]=xp(r,t),c!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${c}`);if(u===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,t]=ks(r,t),n&&(i=!0)}else if(u===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let f;[f,t]=ks(r,t),n.push(L1(f))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${u}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");let s={};return o&&(s.Data=o),s.Links=n||[],s}a();var Dp=new TextEncoder,_p=2**32,R1=2**31;function N1(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=Qi(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){let n=Dp.encode(r.Name);t-=n.length,e.set(n,t),t=Qi(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=Qi(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function Sp(r){let e=F1(r),t=new Uint8Array(e),n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=Qi(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let i=r.Links.length-1;i>=0;i--){let o=N1(r.Links[i],t.subarray(0,n));n-=o,n=Qi(t,n,o)-1,t[n]=18}return t}function P1(r){let e=0;if(r.Hash){let t=r.Hash.length;e+=1+t+Zn(t)}if(typeof r.Name=="string"){let t=Dp.encode(r.Name).length;e+=1+t+Zn(t)}return typeof r.Tsize=="number"&&(e+=1+Zn(r.Tsize)),e}function F1(r){let e=0;if(r.Data){let t=r.Data.length;e+=1+t+Zn(t)}if(r.Links)for(let t of r.Links){let n=P1(t);e+=1+n+Zn(n)}return e}function Qi(r,e,t){e-=Zn(t);let n=e;for(;t>=R1;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function Zn(r){return r%2===0&&r++,Math.floor((U1(r)+6)/7)}function U1(r){let e=0;return r>=_p&&(r=Math.floor(r/_p),e=32),r>=1<<16&&(r>>>=16,e+=16),r>=1<<8&&(r>>>=8,e+=8),e+$1[r]}var $1=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];a();z();var M1=["Data","Links"],j1=["Hash","Name","Tsize"],Ap=new TextEncoder;function z1(r,e){if(r===e)return 0;let t=r.Name?Ap.encode(r.Name):[],n=e.Name?Ap.encode(e.Name):[],i=t.length,o=n.length;for(let s=0,c=Math.min(i,o);s<c;++s)if(t[s]!==n[s]){i=t[s],o=n[s];break}return i<o?-1:o<i?1:0}function Tp(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function Cp(r){if(!r||typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");if(!Tp(r,M1))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let e=0;e<r.Links.length;e++){let t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!Tp(t,j1))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!t.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash.asCID!==t.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0&&(typeof t.Tsize!="number"||t.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(e>0&&z1(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}var ei=112;function Yi(r){Cp(r);let e={};return r.Links&&(e.Links=r.Links.map(t=>{let n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),Sp(e)}function Xi(r){let e=vp(r),t={};return e.Data&&(t.Data=e.Data),e.Links&&(t.Links=e.Links.map(n=>{let i={};try{i.Hash=v.decode(n.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),t}a();z();a();var rn=w(gr(),1),Sy=rn.default.Reader,X1=rn.default.Writer,NI=rn.default.util,Us=rn.default.roots.default||(rn.default.roots.default={}),Ay=Us.ipfs=(()=>{let r={};return r.pin=function(){let e={};return e.Set=function(){function t(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}return t.prototype.version=0,t.prototype.fanout=0,t.prototype.seed=0,t.encode=function(i,o){return o||(o=X1.create()),i.version!=null&&Object.hasOwnProperty.call(i,"version")&&o.uint32(8).uint32(i.version),i.fanout!=null&&Object.hasOwnProperty.call(i,"fanout")&&o.uint32(16).uint32(i.fanout),i.seed!=null&&Object.hasOwnProperty.call(i,"seed")&&o.uint32(29).fixed32(i.seed),o},t.decode=function(i,o){i instanceof Sy||(i=Sy.create(i));for(var s=o===void 0?i.len:i.pos+o,c=new Us.ipfs.pin.Set;i.pos<s;){var u=i.uint32();switch(u>>>3){case 1:c.version=i.uint32();break;case 2:c.fanout=i.uint32();break;case 3:c.seed=i.fixed32();break;default:i.skipType(u&7);break}}return c},t.fromObject=function(i){if(i instanceof Us.ipfs.pin.Set)return i;var o=new Us.ipfs.pin.Set;return i.version!=null&&(o.version=i.version>>>0),i.fanout!=null&&(o.fanout=i.fanout>>>0),i.seed!=null&&(o.seed=i.seed>>>0),o},t.toObject=function(i,o){o||(o={});var s={};return o.defaults&&(s.version=0,s.fanout=0,s.seed=0),i.version!=null&&i.hasOwnProperty("version")&&(s.version=i.version),i.fanout!=null&&i.hasOwnProperty("fanout")&&(s.fanout=i.fanout),i.seed!=null&&i.hasOwnProperty("seed")&&(s.seed=i.seed),s},t.prototype.toJSON=function(){return this.constructor.toObject(this,rn.default.util.toJSONOptions)},t}(),e}(),r})();var By=w(Cy(),1),js=w(ke(),1);a();Ae();z();var ro=new F("/local/pins"),Ms=256,Iy=8192,Iu=v.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),nn={direct:"direct",recursive:"recursive"};function Ou(r){return new F(`/${U.encode(r.multihash.bytes).toUpperCase().substring(1)}`)}wr();a();function Oy(r,e){for(let t=0;t<r.byteLength;t++){if(r[t]<e[t])return-1;if(r[t]>e[t])return 1}return r.byteLength>e.byteLength?1:r.byteLength<e.byteLength?-1:0}q();me();Jn();var ku=Ay.pin.Set;function Z1(r){let e=r.Data;if(!e)throw new Error("No data present");let t=js.default.decode(e),n=js.default.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+t>e.length)throw new Error("Impossibly large set header length");let i=e.slice(n,t+n),o=ku.toObject(ku.decode(i),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(o.version!==1)throw new Error(`Unsupported Set version: ${o.version}`);if(o.fanout>r.Links.length)throw new Error("Impossibly large fanout");return{header:o,data:e.slice(t+n)}}function ev(r,e){let t=new Uint8Array(4);new DataView(t.buffer).setUint32(0,r,!0);let i=M(e.toString()),o=J([t,i],t.byteLength+i.byteLength);return(0,By.default)(A(o))}async function*ky(r,e){let t=Z1(e),n=0;for(let i of e.Links){if(n<t.header.fanout){let o=i.Hash;if(!Iu.equals(o)){let s=await r.get(o),c=Xi(s);yield*ky(r,c)}}else yield i.Hash;n++}}async function*no(r,e,t){let n=e.Links.find(s=>s.Name===t);if(!n)throw new Error("No link found with name "+t);let i=await r.get(n.Hash),o=Xi(i);yield*ky(r,o)}function tv(r,e){return t(e,0);async function t(n,i){let o=ku.encode({version:1,fanout:Ms,seed:i}).finish(),s=js.default.encode(o.length),c=J([s,o]),u=[];for(let l=0;l<Ms;l++)u.push({Name:"",Tsize:1,Hash:Iu});if(n.length<=Iy){let l=n.map(x=>({link:{Name:"",Tsize:1,Hash:x.key},data:x.data||new Uint8Array})).sort((x,g)=>Oy(x.link.Hash.bytes,g.link.Hash.bytes)),h=u.concat(l.map(x=>x.link));return{Data:J([c,...l.map(x=>x.data)]),Links:h}}else{let l=n.reduce((y,x)=>{let g=ev(i,x.key)%Ms;return y[g]=g in y?y[g].concat([x]):[x],y},[]),h=0;for(let y of l){let x=await t(y,i+1);await f(x,h),h++}return{Data:c,Links:u}}async function f(l,h){let y=Yi(l),x=await Tt.digest(y),g=v.createV0(x);await r.put(g,y);let S=l.Links.reduce((L,K)=>L+(K.Tsize||0),0)+y.length;u[h]={Name:"",Tsize:S,Hash:g}}}}async function Lu(r,e,t){let n=await tv(r,t.map(u=>({key:u}))),i=Yi(n),o=await Tt.digest(i),s=v.createV0(o);await r.put(s,i);let c=n.Links.reduce((u,f)=>u+f.Tsize,0)+i.length;return{Name:e,Tsize:c,Hash:s}}var zs=w(du(),1);Jn();Se();Ae();async function nv(r,e,t,n){if(!await e.has(ro))return;let i=await e.get(ro),o=v.decode(i),s=await r.get(o),c=Xi(s),u=0,f=await(0,zs.default)(no(r,c,nn.recursive))+await(0,zs.default)(no(r,c,nn.direct));for await(let l of no(r,c,nn.recursive)){u++;let h={depth:1/0};l.version!==0&&(h.version=l.version),l.code!==ei&&(h.codec=l.code),await t.put(Ou(l),Kr(h)),n(u/f*100,`Migrated recursive pin ${l}`)}for await(let l of no(r,c,nn.direct)){u++;let h={depth:0};l.version!==0&&(h.version=l.version),l.code!==ei&&(h.codec=l.code),await t.put(Ou(l),Kr(h)),n(u/f*100,`Migrated direct pin ${l}`)}await r.delete(o),await e.delete(ro)}async function iv(r,e,t,n){let i=[],o=[],s=0,c=await(0,zs.default)(t.queryKeys({}));for await(let{key:y,value:x}of t.query({})){s++;let g=$n(x),S=v.create(g.version||0,g.codec||ei,ue(U.decode("b"+y.toString().toLowerCase().split("/").pop())));g.depth===0?(n(s/c*100,`Reverted direct pin ${S}`),o.push(S)):(n(s/c*100,`Reverted recursive pin ${S}`),i.push(S))}n(100,"Updating pin root");let u={Links:[await Lu(r,nn.direct,o),await Lu(r,nn.recursive,i)]},f=Yi(u),l=await Tt.digest(f),h=v.createV0(l);await r.put(h,f),await e.put(ro,h.bytes)}async function Ly(r,e,t){let n=r.blocks,i=r.datastore,o=r.pins;await n.open(),await i.open(),await o.open();try{await t(n,i,o,e)}finally{await o.close(),await i.close(),await n.close()}}var Ry={version:9,description:"Migrates pins to datastore",migrate:(r,e=()=>{})=>Ly(r,e,nv),revert:(r,e=()=>{})=>Ly(r,e,iv)};a();a();a();var Ny=w(Te(),1);function ri(r){return r=r||new Error("Not Found"),(0,Ny.default)(r,"ERR_NOT_FOUND")}var ov=new F("/config"),Py=new F("/version");function Ru(r){let e=r;for(;e.db||e.child;)if(e=e.db||e.child,e.type==="level-js"||e.constructor.name==="Level")return e}me();q();async function sv(r,e,t=()=>{}){let n=Ru(e);if(!n){t(`${r} did not need an upgrade`);return}t(`Upgrading ${r}`),await My(n,(o,s)=>[{type:"del",key:o},{type:"put",key:M(o),value:s}])}async function av(r,e,t=()=>{}){let n=Ru(e);if(!n){t(`${r} did not need a downgrade`);return}t(`Downgrading ${r}`),await My(n,(o,s)=>[{type:"del",key:o},{type:"put",key:A(o),value:s}])}function Uy(r){return r.child?Uy(r.child):r}async function Fy(r,e,t){let n=Object.entries(r).map(([s,c])=>({key:s,backend:Uy(c)})).filter(({key:s,backend:c})=>c.constructor.name==="LevelDatastore").map(({key:s,backend:c})=>({name:s,store:c}));e(0,`Migrating ${n.length} dbs`);let i=0,o=s=>{e(Math.round(i/n.length*100),s)};for(let{name:s,store:c}of n){await c.open();try{await t(s,c,o)}finally{i++,await c.close()}}e(100,`Migrated ${n.length} dbs`)}var $y={version:10,description:"Migrates datastore-level keys to binary",migrate:(r,e=()=>{})=>Fy(r,e,sv),revert:(r,e=()=>{})=>Fy(r,e,av)};function My(r,e){function t(n,i){let o=r.store("readwrite"),s=o.transaction,c=0,u;s.onabort=()=>i(u||s.error||new Error("aborted by user")),s.oncomplete=()=>i();function f(){let l=n[c++],h=l.key,y;try{y=l.type==="del"?o.delete(h):o.put(l.value,h)}catch(x){u=x,s.abort();return}c<n.length&&(y.onsuccess=f)}f()}return new Promise((n,i)=>{let o=r.iterator(),s=u=>u;o._deserializeKey=o._deserializeValue=s,c();function c(){let u=(f,l,h)=>{if(f||l===void 0){let y=x=>{if(x){i(x);return}n()};o.end(y);return}t(e(l,h),c)};o.next(u)}})}a();var br=new F("/local/filesroot");async function cv(r,e=()=>{}){if(e(100,"Migrating MFS root to repo datastore"),await r.root.open(),await r.datastore.open(),await r.root.has(br)){let t=await r.root.get(br);await r.datastore.put(br,t),await r.root.delete(br)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo datastore")}async function uv(r,e=()=>{}){if(e(100,"Migrating MFS root to repo root datastore"),await r.root.open(),await r.datastore.open(),await r.datastore.has(br)){let t=await r.datastore.get(br);await r.root.put(br,t),await r.datastore.delete(br)}await r.datastore.close(),await r.root.close(),e(100,"Stored MFS root in repo root datastore")}var jy={version:11,description:"Store mfs root in the datastore",migrate:cv,revert:uv};a();var Yu=w(gr(),1);a();var on=w(gr(),1),zy=on.default.Reader,fv=on.default.Writer,lv=on.default.util,qs=on.default.roots.default||(on.default.roots.default={}),Nu=qs.Protocols=(()=>{function r(e){if(this.protocols=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.protocols=lv.emptyArray,r.encode=function(t,n){if(n||(n=fv.create()),t.protocols!=null&&t.protocols.length)for(var i=0;i<t.protocols.length;++i)n.uint32(10).string(t.protocols[i]);return n},r.decode=function(t,n){t instanceof zy||(t=zy.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new qs.Protocols;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.protocols&&o.protocols.length||(o.protocols=[]),o.protocols.push(t.string());break;default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof qs.Protocols)return t;var n=new qs.Protocols;if(t.protocols){if(!Array.isArray(t.protocols))throw TypeError(".Protocols.protocols: array expected");n.protocols=[];for(var i=0;i<t.protocols.length;++i)n.protocols[i]=String(t.protocols[i])}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.protocols=[]),t.protocols&&t.protocols.length){i.protocols=[];for(var o=0;o<t.protocols.length;++o)i.protocols[o]=t.protocols[o]}return i},r.prototype.toJSON=function(){return this.constructor.toObject(this,on.default.util.toJSONOptions)},r})();a();var zt=w(gr(),1),ii=zt.default.Reader,Pu=zt.default.Writer,H=zt.default.util,de=zt.default.roots.default||(zt.default.roots.default={}),Fu=de.Addresses=(()=>{function r(e){if(this.addrs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.addrs=H.emptyArray,r.prototype.certifiedRecord=null,r.encode=function(t,n){if(n||(n=Pu.create()),t.addrs!=null&&t.addrs.length)for(var i=0;i<t.addrs.length;++i)de.Addresses.Address.encode(t.addrs[i],n.uint32(10).fork()).ldelim();return t.certifiedRecord!=null&&Object.hasOwnProperty.call(t,"certifiedRecord")&&de.Addresses.CertifiedRecord.encode(t.certifiedRecord,n.uint32(18).fork()).ldelim(),n},r.decode=function(t,n){t instanceof ii||(t=ii.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new de.Addresses;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.addrs&&o.addrs.length||(o.addrs=[]),o.addrs.push(de.Addresses.Address.decode(t,t.uint32()));break;case 2:o.certifiedRecord=de.Addresses.CertifiedRecord.decode(t,t.uint32());break;default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof de.Addresses)return t;var n=new de.Addresses;if(t.addrs){if(!Array.isArray(t.addrs))throw TypeError(".Addresses.addrs: array expected");n.addrs=[];for(var i=0;i<t.addrs.length;++i){if(typeof t.addrs[i]!="object")throw TypeError(".Addresses.addrs: object expected");n.addrs[i]=de.Addresses.Address.fromObject(t.addrs[i])}}if(t.certifiedRecord!=null){if(typeof t.certifiedRecord!="object")throw TypeError(".Addresses.certifiedRecord: object expected");n.certifiedRecord=de.Addresses.CertifiedRecord.fromObject(t.certifiedRecord)}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addrs=[]),n.defaults&&(i.certifiedRecord=null),t.addrs&&t.addrs.length){i.addrs=[];for(var o=0;o<t.addrs.length;++o)i.addrs[o]=de.Addresses.Address.toObject(t.addrs[o],n)}return t.certifiedRecord!=null&&t.hasOwnProperty("certifiedRecord")&&(i.certifiedRecord=de.Addresses.CertifiedRecord.toObject(t.certifiedRecord,n)),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,zt.default.util.toJSONOptions)},r.Address=function(){function e(n){if(n)for(var i=Object.keys(n),o=0;o<i.length;++o)n[i[o]]!=null&&(this[i[o]]=n[i[o]])}e.prototype.multiaddr=H.newBuffer([]),e.prototype.isCertified=null;let t;return Object.defineProperty(e.prototype,"_isCertified",{get:H.oneOfGetter(t=["isCertified"]),set:H.oneOfSetter(t)}),e.encode=function(i,o){return o||(o=Pu.create()),i.multiaddr!=null&&Object.hasOwnProperty.call(i,"multiaddr")&&o.uint32(10).bytes(i.multiaddr),i.isCertified!=null&&Object.hasOwnProperty.call(i,"isCertified")&&o.uint32(16).bool(i.isCertified),o},e.decode=function(i,o){i instanceof ii||(i=ii.create(i));for(var s=o===void 0?i.len:i.pos+o,c=new de.Addresses.Address;i.pos<s;){var u=i.uint32();switch(u>>>3){case 1:c.multiaddr=i.bytes();break;case 2:c.isCertified=i.bool();break;default:i.skipType(u&7);break}}return c},e.fromObject=function(i){if(i instanceof de.Addresses.Address)return i;var o=new de.Addresses.Address;return i.multiaddr!=null&&(typeof i.multiaddr=="string"?H.base64.decode(i.multiaddr,o.multiaddr=H.newBuffer(H.base64.length(i.multiaddr)),0):i.multiaddr.length&&(o.multiaddr=i.multiaddr)),i.isCertified!=null&&(o.isCertified=Boolean(i.isCertified)),o},e.toObject=function(i,o){o||(o={});var s={};return o.defaults&&(o.bytes===String?s.multiaddr="":(s.multiaddr=[],o.bytes!==Array&&(s.multiaddr=H.newBuffer(s.multiaddr)))),i.multiaddr!=null&&i.hasOwnProperty("multiaddr")&&(s.multiaddr=o.bytes===String?H.base64.encode(i.multiaddr,0,i.multiaddr.length):o.bytes===Array?Array.prototype.slice.call(i.multiaddr):i.multiaddr),i.isCertified!=null&&i.hasOwnProperty("isCertified")&&(s.isCertified=i.isCertified,o.oneofs&&(s._isCertified="isCertified")),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,zt.default.util.toJSONOptions)},e}(),r.CertifiedRecord=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.seq=H.Long?H.Long.fromBits(0,0,!0):0,e.prototype.raw=H.newBuffer([]),e.encode=function(n,i){return i||(i=Pu.create()),n.seq!=null&&Object.hasOwnProperty.call(n,"seq")&&i.uint32(8).uint64(n.seq),n.raw!=null&&Object.hasOwnProperty.call(n,"raw")&&i.uint32(18).bytes(n.raw),i},e.decode=function(n,i){n instanceof ii||(n=ii.create(n));for(var o=i===void 0?n.len:n.pos+i,s=new de.Addresses.CertifiedRecord;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:s.seq=n.uint64();break;case 2:s.raw=n.bytes();break;default:n.skipType(c&7);break}}return s},e.fromObject=function(n){if(n instanceof de.Addresses.CertifiedRecord)return n;var i=new de.Addresses.CertifiedRecord;return n.seq!=null&&(H.Long?(i.seq=H.Long.fromValue(n.seq)).unsigned=!0:typeof n.seq=="string"?i.seq=parseInt(n.seq,10):typeof n.seq=="number"?i.seq=n.seq:typeof n.seq=="object"&&(i.seq=new H.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0))),n.raw!=null&&(typeof n.raw=="string"?H.base64.decode(n.raw,i.raw=H.newBuffer(H.base64.length(n.raw)),0):n.raw.length&&(i.raw=n.raw)),i},e.toObject=function(n,i){i||(i={});var o={};if(i.defaults){if(H.Long){var s=new H.Long(0,0,!0);o.seq=i.longs===String?s.toString():i.longs===Number?s.toNumber():s}else o.seq=i.longs===String?"0":0;i.bytes===String?o.raw="":(o.raw=[],i.bytes!==Array&&(o.raw=H.newBuffer(o.raw)))}return n.seq!=null&&n.hasOwnProperty("seq")&&(typeof n.seq=="number"?o.seq=i.longs===String?String(n.seq):n.seq:o.seq=i.longs===String?H.Long.prototype.toString.call(n.seq):i.longs===Number?new H.LongBits(n.seq.low>>>0,n.seq.high>>>0).toNumber(!0):n.seq),n.raw!=null&&n.hasOwnProperty("raw")&&(o.raw=i.bytes===String?H.base64.encode(n.raw,0,n.raw.length):i.bytes===Array?Array.prototype.slice.call(n.raw):n.raw),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,zt.default.util.toJSONOptions)},e}(),r})();a();var qt=w(gr(),1),oi=qt.default.Reader,Uu=qt.default.Writer,$=qt.default.util,ie=qt.default.roots.default||(qt.default.roots.default={}),$u=ie.Peer=(()=>{function r(t){if(this.addresses=[],this.protocols=[],this.metadata=[],t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}r.prototype.addresses=$.emptyArray,r.prototype.protocols=$.emptyArray,r.prototype.metadata=$.emptyArray,r.prototype.pubKey=null,r.prototype.peerRecordEnvelope=null;let e;return Object.defineProperty(r.prototype,"_pubKey",{get:$.oneOfGetter(e=["pubKey"]),set:$.oneOfSetter(e)}),Object.defineProperty(r.prototype,"_peerRecordEnvelope",{get:$.oneOfGetter(e=["peerRecordEnvelope"]),set:$.oneOfSetter(e)}),r.encode=function(n,i){if(i||(i=Uu.create()),n.addresses!=null&&n.addresses.length)for(var o=0;o<n.addresses.length;++o)ie.Address.encode(n.addresses[o],i.uint32(10).fork()).ldelim();if(n.protocols!=null&&n.protocols.length)for(var o=0;o<n.protocols.length;++o)i.uint32(18).string(n.protocols[o]);if(n.metadata!=null&&n.metadata.length)for(var o=0;o<n.metadata.length;++o)ie.Metadata.encode(n.metadata[o],i.uint32(26).fork()).ldelim();return n.pubKey!=null&&Object.hasOwnProperty.call(n,"pubKey")&&i.uint32(34).bytes(n.pubKey),n.peerRecordEnvelope!=null&&Object.hasOwnProperty.call(n,"peerRecordEnvelope")&&i.uint32(42).bytes(n.peerRecordEnvelope),i},r.decode=function(n,i){n instanceof oi||(n=oi.create(n));for(var o=i===void 0?n.len:n.pos+i,s=new ie.Peer;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:s.addresses&&s.addresses.length||(s.addresses=[]),s.addresses.push(ie.Address.decode(n,n.uint32()));break;case 2:s.protocols&&s.protocols.length||(s.protocols=[]),s.protocols.push(n.string());break;case 3:s.metadata&&s.metadata.length||(s.metadata=[]),s.metadata.push(ie.Metadata.decode(n,n.uint32()));break;case 4:s.pubKey=n.bytes();break;case 5:s.peerRecordEnvelope=n.bytes();break;default:n.skipType(c&7);break}}return s},r.fromObject=function(n){if(n instanceof ie.Peer)return n;var i=new ie.Peer;if(n.addresses){if(!Array.isArray(n.addresses))throw TypeError(".Peer.addresses: array expected");i.addresses=[];for(var o=0;o<n.addresses.length;++o){if(typeof n.addresses[o]!="object")throw TypeError(".Peer.addresses: object expected");i.addresses[o]=ie.Address.fromObject(n.addresses[o])}}if(n.protocols){if(!Array.isArray(n.protocols))throw TypeError(".Peer.protocols: array expected");i.protocols=[];for(var o=0;o<n.protocols.length;++o)i.protocols[o]=String(n.protocols[o])}if(n.metadata){if(!Array.isArray(n.metadata))throw TypeError(".Peer.metadata: array expected");i.metadata=[];for(var o=0;o<n.metadata.length;++o){if(typeof n.metadata[o]!="object")throw TypeError(".Peer.metadata: object expected");i.metadata[o]=ie.Metadata.fromObject(n.metadata[o])}}return n.pubKey!=null&&(typeof n.pubKey=="string"?$.base64.decode(n.pubKey,i.pubKey=$.newBuffer($.base64.length(n.pubKey)),0):n.pubKey.length&&(i.pubKey=n.pubKey)),n.peerRecordEnvelope!=null&&(typeof n.peerRecordEnvelope=="string"?$.base64.decode(n.peerRecordEnvelope,i.peerRecordEnvelope=$.newBuffer($.base64.length(n.peerRecordEnvelope)),0):n.peerRecordEnvelope.length&&(i.peerRecordEnvelope=n.peerRecordEnvelope)),i},r.toObject=function(n,i){i||(i={});var o={};if((i.arrays||i.defaults)&&(o.addresses=[],o.protocols=[],o.metadata=[]),n.addresses&&n.addresses.length){o.addresses=[];for(var s=0;s<n.addresses.length;++s)o.addresses[s]=ie.Address.toObject(n.addresses[s],i)}if(n.protocols&&n.protocols.length){o.protocols=[];for(var s=0;s<n.protocols.length;++s)o.protocols[s]=n.protocols[s]}if(n.metadata&&n.metadata.length){o.metadata=[];for(var s=0;s<n.metadata.length;++s)o.metadata[s]=ie.Metadata.toObject(n.metadata[s],i)}return n.pubKey!=null&&n.hasOwnProperty("pubKey")&&(o.pubKey=i.bytes===String?$.base64.encode(n.pubKey,0,n.pubKey.length):i.bytes===Array?Array.prototype.slice.call(n.pubKey):n.pubKey,i.oneofs&&(o._pubKey="pubKey")),n.peerRecordEnvelope!=null&&n.hasOwnProperty("peerRecordEnvelope")&&(o.peerRecordEnvelope=i.bytes===String?$.base64.encode(n.peerRecordEnvelope,0,n.peerRecordEnvelope.length):i.bytes===Array?Array.prototype.slice.call(n.peerRecordEnvelope):n.peerRecordEnvelope,i.oneofs&&(o._peerRecordEnvelope="peerRecordEnvelope")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,qt.default.util.toJSONOptions)},r})(),A6=ie.Address=(()=>{function r(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}r.prototype.multiaddr=$.newBuffer([]),r.prototype.isCertified=null;let e;return Object.defineProperty(r.prototype,"_isCertified",{get:$.oneOfGetter(e=["isCertified"]),set:$.oneOfSetter(e)}),r.encode=function(n,i){return i||(i=Uu.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),n.isCertified!=null&&Object.hasOwnProperty.call(n,"isCertified")&&i.uint32(16).bool(n.isCertified),i},r.decode=function(n,i){n instanceof oi||(n=oi.create(n));for(var o=i===void 0?n.len:n.pos+i,s=new ie.Address;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:s.multiaddr=n.bytes();break;case 2:s.isCertified=n.bool();break;default:n.skipType(c&7);break}}return s},r.fromObject=function(n){if(n instanceof ie.Address)return n;var i=new ie.Address;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?$.base64.decode(n.multiaddr,i.multiaddr=$.newBuffer($.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),n.isCertified!=null&&(i.isCertified=Boolean(n.isCertified)),i},r.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.multiaddr="":(o.multiaddr=[],i.bytes!==Array&&(o.multiaddr=$.newBuffer(o.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(o.multiaddr=i.bytes===String?$.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),n.isCertified!=null&&n.hasOwnProperty("isCertified")&&(o.isCertified=n.isCertified,i.oneofs&&(o._isCertified="isCertified")),o},r.prototype.toJSON=function(){return this.constructor.toObject(this,qt.default.util.toJSONOptions)},r})(),T6=ie.Metadata=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.key="",r.prototype.value=$.newBuffer([]),r.encode=function(t,n){return n||(n=Uu.create()),t.key!=null&&Object.hasOwnProperty.call(t,"key")&&n.uint32(10).string(t.key),t.value!=null&&Object.hasOwnProperty.call(t,"value")&&n.uint32(18).bytes(t.value),n},r.decode=function(t,n){t instanceof oi||(t=oi.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new ie.Metadata;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.key=t.string();break;case 2:o.value=t.bytes();break;default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof ie.Metadata)return t;var n=new ie.Metadata;return t.key!=null&&(n.key=String(t.key)),t.value!=null&&(typeof t.value=="string"?$.base64.decode(t.value,n.value=$.newBuffer($.base64.length(t.value)),0):t.value.length&&(n.value=t.value)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(i.key="",n.bytes===String?i.value="":(i.value=[],n.bytes!==Array&&(i.value=$.newBuffer(i.value)))),t.key!=null&&t.hasOwnProperty("key")&&(i.key=t.key),t.value!=null&&t.hasOwnProperty("value")&&(i.value=n.bytes===String?$.base64.encode(t.value,0,t.value.length):n.bytes===Array?Array.prototype.slice.call(t.value):t.value),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,qt.default.util.toJSONOptions)},r})();a();var sn=w(gr(),1),qy=sn.default.Reader,hv=sn.default.Writer,G=sn.default.util,Vs=sn.default.roots.default||(sn.default.roots.default={}),Vy=Vs.Envelope=(()=>{function r(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.publicKey=G.newBuffer([]),r.prototype.payloadType=G.newBuffer([]),r.prototype.payload=G.newBuffer([]),r.prototype.signature=G.newBuffer([]),r.encode=function(t,n){return n||(n=hv.create()),t.publicKey!=null&&Object.hasOwnProperty.call(t,"publicKey")&&n.uint32(10).bytes(t.publicKey),t.payloadType!=null&&Object.hasOwnProperty.call(t,"payloadType")&&n.uint32(18).bytes(t.payloadType),t.payload!=null&&Object.hasOwnProperty.call(t,"payload")&&n.uint32(26).bytes(t.payload),t.signature!=null&&Object.hasOwnProperty.call(t,"signature")&&n.uint32(42).bytes(t.signature),n},r.decode=function(t,n){t instanceof qy||(t=qy.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new Vs.Envelope;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.publicKey=t.bytes();break;case 2:o.payloadType=t.bytes();break;case 3:o.payload=t.bytes();break;case 5:o.signature=t.bytes();break;default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof Vs.Envelope)return t;var n=new Vs.Envelope;return t.publicKey!=null&&(typeof t.publicKey=="string"?G.base64.decode(t.publicKey,n.publicKey=G.newBuffer(G.base64.length(t.publicKey)),0):t.publicKey.length&&(n.publicKey=t.publicKey)),t.payloadType!=null&&(typeof t.payloadType=="string"?G.base64.decode(t.payloadType,n.payloadType=G.newBuffer(G.base64.length(t.payloadType)),0):t.payloadType.length&&(n.payloadType=t.payloadType)),t.payload!=null&&(typeof t.payload=="string"?G.base64.decode(t.payload,n.payload=G.newBuffer(G.base64.length(t.payload)),0):t.payload.length&&(n.payload=t.payload)),t.signature!=null&&(typeof t.signature=="string"?G.base64.decode(t.signature,n.signature=G.newBuffer(G.base64.length(t.signature)),0):t.signature.length&&(n.signature=t.signature)),n},r.toObject=function(t,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.publicKey="":(i.publicKey=[],n.bytes!==Array&&(i.publicKey=G.newBuffer(i.publicKey))),n.bytes===String?i.payloadType="":(i.payloadType=[],n.bytes!==Array&&(i.payloadType=G.newBuffer(i.payloadType))),n.bytes===String?i.payload="":(i.payload=[],n.bytes!==Array&&(i.payload=G.newBuffer(i.payload))),n.bytes===String?i.signature="":(i.signature=[],n.bytes!==Array&&(i.signature=G.newBuffer(i.signature)))),t.publicKey!=null&&t.hasOwnProperty("publicKey")&&(i.publicKey=n.bytes===String?G.base64.encode(t.publicKey,0,t.publicKey.length):n.bytes===Array?Array.prototype.slice.call(t.publicKey):t.publicKey),t.payloadType!=null&&t.hasOwnProperty("payloadType")&&(i.payloadType=n.bytes===String?G.base64.encode(t.payloadType,0,t.payloadType.length):n.bytes===Array?Array.prototype.slice.call(t.payloadType):t.payloadType),t.payload!=null&&t.hasOwnProperty("payload")&&(i.payload=n.bytes===String?G.base64.encode(t.payload,0,t.payload.length):n.bytes===Array?Array.prototype.slice.call(t.payload):t.payload),t.signature!=null&&t.hasOwnProperty("signature")&&(i.signature=n.bytes===String?G.base64.encode(t.signature,0,t.signature.length):n.bytes===Array?Array.prototype.slice.call(t.signature):t.signature),i},r.prototype.toJSON=function(){return this.constructor.toObject(this,sn.default.util.toJSONOptions)},r})();a();var Er=w(gr(),1),Ks=Er.default.Reader,Ky=Er.default.Writer,X=Er.default.util,dt=Er.default.roots.default||(Er.default.roots.default={}),Wy=dt.PeerRecord=(()=>{function r(e){if(this.addresses=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}return r.prototype.peerId=X.newBuffer([]),r.prototype.seq=X.Long?X.Long.fromBits(0,0,!0):0,r.prototype.addresses=X.emptyArray,r.encode=function(t,n){if(n||(n=Ky.create()),t.peerId!=null&&Object.hasOwnProperty.call(t,"peerId")&&n.uint32(10).bytes(t.peerId),t.seq!=null&&Object.hasOwnProperty.call(t,"seq")&&n.uint32(16).uint64(t.seq),t.addresses!=null&&t.addresses.length)for(var i=0;i<t.addresses.length;++i)dt.PeerRecord.AddressInfo.encode(t.addresses[i],n.uint32(26).fork()).ldelim();return n},r.decode=function(t,n){t instanceof Ks||(t=Ks.create(t));for(var i=n===void 0?t.len:t.pos+n,o=new dt.PeerRecord;t.pos<i;){var s=t.uint32();switch(s>>>3){case 1:o.peerId=t.bytes();break;case 2:o.seq=t.uint64();break;case 3:o.addresses&&o.addresses.length||(o.addresses=[]),o.addresses.push(dt.PeerRecord.AddressInfo.decode(t,t.uint32()));break;default:t.skipType(s&7);break}}return o},r.fromObject=function(t){if(t instanceof dt.PeerRecord)return t;var n=new dt.PeerRecord;if(t.peerId!=null&&(typeof t.peerId=="string"?X.base64.decode(t.peerId,n.peerId=X.newBuffer(X.base64.length(t.peerId)),0):t.peerId.length&&(n.peerId=t.peerId)),t.seq!=null&&(X.Long?(n.seq=X.Long.fromValue(t.seq)).unsigned=!0:typeof t.seq=="string"?n.seq=parseInt(t.seq,10):typeof t.seq=="number"?n.seq=t.seq:typeof t.seq=="object"&&(n.seq=new X.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0))),t.addresses){if(!Array.isArray(t.addresses))throw TypeError(".PeerRecord.addresses: array expected");n.addresses=[];for(var i=0;i<t.addresses.length;++i){if(typeof t.addresses[i]!="object")throw TypeError(".PeerRecord.addresses: object expected");n.addresses[i]=dt.PeerRecord.AddressInfo.fromObject(t.addresses[i])}}return n},r.toObject=function(t,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.addresses=[]),n.defaults)if(n.bytes===String?i.peerId="":(i.peerId=[],n.bytes!==Array&&(i.peerId=X.newBuffer(i.peerId))),X.Long){var o=new X.Long(0,0,!0);i.seq=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else i.seq=n.longs===String?"0":0;if(t.peerId!=null&&t.hasOwnProperty("peerId")&&(i.peerId=n.bytes===String?X.base64.encode(t.peerId,0,t.peerId.length):n.bytes===Array?Array.prototype.slice.call(t.peerId):t.peerId),t.seq!=null&&t.hasOwnProperty("seq")&&(typeof t.seq=="number"?i.seq=n.longs===String?String(t.seq):t.seq:i.seq=n.longs===String?X.Long.prototype.toString.call(t.seq):n.longs===Number?new X.LongBits(t.seq.low>>>0,t.seq.high>>>0).toNumber(!0):t.seq),t.addresses&&t.addresses.length){i.addresses=[];for(var s=0;s<t.addresses.length;++s)i.addresses[s]=dt.PeerRecord.AddressInfo.toObject(t.addresses[s],n)}return i},r.prototype.toJSON=function(){return this.constructor.toObject(this,Er.default.util.toJSONOptions)},r.AddressInfo=function(){function e(t){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)t[n[i]]!=null&&(this[n[i]]=t[n[i]])}return e.prototype.multiaddr=X.newBuffer([]),e.encode=function(n,i){return i||(i=Ky.create()),n.multiaddr!=null&&Object.hasOwnProperty.call(n,"multiaddr")&&i.uint32(10).bytes(n.multiaddr),i},e.decode=function(n,i){n instanceof Ks||(n=Ks.create(n));for(var o=i===void 0?n.len:n.pos+i,s=new dt.PeerRecord.AddressInfo;n.pos<o;){var c=n.uint32();switch(c>>>3){case 1:s.multiaddr=n.bytes();break;default:n.skipType(c&7);break}}return s},e.fromObject=function(n){if(n instanceof dt.PeerRecord.AddressInfo)return n;var i=new dt.PeerRecord.AddressInfo;return n.multiaddr!=null&&(typeof n.multiaddr=="string"?X.base64.decode(n.multiaddr,i.multiaddr=X.newBuffer(X.base64.length(n.multiaddr)),0):n.multiaddr.length&&(i.multiaddr=n.multiaddr)),i},e.toObject=function(n,i){i||(i={});var o={};return i.defaults&&(i.bytes===String?o.multiaddr="":(o.multiaddr=[],i.bytes!==Array&&(o.multiaddr=X.newBuffer(o.multiaddr)))),n.multiaddr!=null&&n.hasOwnProperty("multiaddr")&&(o.multiaddr=i.bytes===String?X.base64.encode(n.multiaddr,0,n.multiaddr.length):i.bytes===Array?Array.prototype.slice.call(n.multiaddr):n.multiaddr),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Er.default.util.toJSONOptions)},e}(),r})();var Qu=w(Im(),1);Yu.default.util.Long=void 0;Yu.default.configure();async function Uv(r,e=()=>{}){e(0,"Storing each peerstore key under a single datastore key"),await r.datastore.open();let t={},n=[];for await(let{key:i,value:o}of r.datastore.query({prefix:"/peers"})){n.push(i);let s=i.toString(),[c,u,f,l,h]=s.split("/");if(u==="peers"&&!!["protos","addrs","metadata","keys"].includes(f)&&!!l)if(t[l]=t[l]||{addresses:[],protocols:[],metadata:[]},f==="protos"){let y=Nu.decode(o);t[l].protocols=y.protocols.sort()}else if(f==="addrs"){let y=Fu.decode(o);t[l].addresses=y.addrs.sort((x,g)=>new Qu.Multiaddr(x.multiaddr).toString().localeCompare(new Qu.Multiaddr(g.multiaddr).toString())),y.certifiedRecord&&y.certifiedRecord.raw&&(t[l].peerRecordEnvelope=y.certifiedRecord.raw)}else f==="metadata"?t[l].metadata.push({key:h,value:o}):f==="keys"&&(t[l].pubKey=o)}e(33,"Read peer data from store");for(let i of n)await r.datastore.delete(i);e(66,"Removed existing peer data from store");for(let i of Object.keys(t)){let o=t[i];o.metadata=o.metadata.sort((c,u)=>c.key.localeCompare(u.key));let s=$u.encode(o).finish();await r.datastore.put(new F(`/peers/${i}`),s)}await r.datastore.close(),e(100,"Stored each peerstore key under a single datastore key")}async function $v(r,e=()=>{}){e(0,"Storing each peerstore key under a multiple datastore keys"),await r.datastore.open();let t={},n=[];for await(let{key:i,value:o}of r.datastore.query({prefix:"/peers"})){n.push(i);let s=i.toString(),[c,u,f]=s.split("/");t[f]=$u.decode(o)}e(33,"Read peer data from store");for(let i of n)await r.datastore.delete(i);e(66,"Removed existing peer data from store");for(let[i,o]of Object.entries(t)){if(o.protocols&&o.protocols.length>0&&await r.datastore.put(new F(`/peers/protos/${i}`),Nu.encode({protocols:o.protocols}).finish()),o.addresses&&o.addresses.length>0){let s=o.peerRecordEnvelope,c;if(s){let u=Vy.decode(s),f=Wy.decode(u.payload);c={raw:s,seq:f.seq}}await r.datastore.put(new F(`/peers/addrs/${i}`),Fu.encode({addrs:o.addresses,certifiedRecord:c}).finish())}if(o.metadata&&o.metadata.length>0)for(let{key:s,value:c}of o.metadata)await r.datastore.put(new F(`/peers/metadata/${i}/${s}`),c);o.pubKey&&await r.datastore.put(new F(`/peers/keys/${i}`),o.pubKey)}await r.datastore.close(),e(100,"Stored each peerstore key under multiple datastore keys")}var Om={version:12,description:"Store each peerstore peer under a single datastore key",migrate:Uv,revert:$v};var an={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},Mv=[Object.assign({version:1},an),Object.assign({version:2},an),Object.assign({version:3},an),Object.assign({version:4},an),Object.assign({version:5},an),Object.assign({version:6},an),Object.assign({version:7},an),Ep,Ry,$y,jy,Om];a();a();var Bm=w(tt(),1);a();var co=class extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=co.code,this.message=e}};co.code="ERR_NON_REVERSIBLE_MIGRATION";var ui=class extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=ui.code,this.message=e}};ui.code="ERR_NOT_INITIALIZED_REPO";var uo=class extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=uo.code,this.message=e}};uo.code="ERR_REQUIRED_PARAMETER";var fo=class extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=fo.code,this.message=e}};fo.code="ERR_INVALID_VALUE";var cn=class extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=cn.code,this.message=e}};cn.code="ERR_MISSING_REPO_OPTIONS";var d4=(0,Bm.default)("ipfs:repo:migrator:repo:init");me();q();var km=w(tt(),1),C4=(0,km.default)("ipfs:repo:migrator");var M2=w(Nm(),1);a();var Zv=w(qm(),1);a();a();a();q();me();var Vt="/",Vm=new TextEncoder().encode(Vt),na=Vm[0],V=class{constructor(e,t){if(typeof e=="string")this._buf=M(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==na)throw new Error("Invalid key")}toString(e="utf8"){return A(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new V(e.join(Vt))}static random(){return new V(rt().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new V(e):typeof e.uint8Array=="function"?new V(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=Vm),this._buf[0]!==na){let e=new Uint8Array(this._buf.byteLength+1);e.fill(na,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===na;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let o=t[i],s=n[i];if(o<s)return!0;if(o>s)return!1}return t.length<n.length}reverse(){return V.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Vt).slice(1)}type(){return t2(this.baseNamespace())}name(){return r2(this.baseNamespace())}instance(e){return new V(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Vt)||(e+=Vt),e+=this.type(),new V(e)}parent(){let e=this.list();return e.length===1?new V(Vt):new V(e.slice(0,-1).join(Vt))}child(e){return this.toString()===Vt?e:e.toString()===Vt?this:new V(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return V.withNamespaces([...this.namespaces(),...n2(e.map(t=>t.namespaces()))])}};function t2(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function r2(r){let e=r.split(":");return e[e.length-1]}function n2(r){return[].concat(...r)}var Km=w(tt(),1);q();me();a();a();var hi=class extends Error{constructor(e){super(e),this.name="LockExistsError",this.code=hi.code}};hi.code="ERR_LOCK_EXISTS";var _r=class extends Error{constructor(e){super(e),this.name="NotFoundError",this.code=_r.code}};_r.code="ERR_NOT_FOUND";var di=class extends Error{constructor(e){super(e),this.name="InvalidRepoVersionError",this.code=di.code}};di.code="ERR_INVALID_REPO_VERSION";var Y4=(0,Km.default)("ipfs:repo:version"),X4=new V("version");a();a();var rg=w(Hm(),1);a();var ho=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},ef=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},Gm=r=>globalThis.DOMException===void 0?new ef(r):new DOMException(r),Jm=r=>{let e=r.reason===void 0?Gm("This operation was aborted."):r.reason;return e instanceof Error?e:Gm(e)};function tf(r,e,t,n){let i,o=new Promise((s,c)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){s(r);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:u}=n;u.aborted&&c(Jm(u)),u.addEventListener("abort",()=>{c(Jm(u))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof t=="function"){try{s(t())}catch(l){c(l)}return}let u=typeof t=="string"?t:`Promise timed out after ${e} milliseconds`,f=t instanceof Error?t:new ho(u);typeof r.cancel=="function"&&r.cancel(),c(f)},e),(async()=>{try{s(await r)}catch(u){c(u)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return o.clear=()=>{clearTimeout(i),i=void 0},o}a();a();function rf(r,e,t){let n=0,i=r.length;for(;i>0;){let o=Math.trunc(i/2),s=n+o;t(r[s],e)<=0?(n=++s,i-=o+1):i=o}return n}var un=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Kt,po=class{constructor(){Kt.set(this,[])}enqueue(e,t){t={priority:0,...t};let n={priority:t.priority,run:e};if(this.size&&un(this,Kt,"f")[this.size-1].priority>=t.priority){un(this,Kt,"f").push(n);return}let i=rf(un(this,Kt,"f"),n,(o,s)=>s.priority-o.priority);un(this,Kt,"f").splice(i,0,n)}dequeue(){let e=un(this,Kt,"f").shift();return e?.run}filter(e){return un(this,Kt,"f").filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return un(this,Kt,"f").length}};Kt=new WeakMap;var Q=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},_=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},re,mo,go,Sr,fa,wo,oa,mt,yo,qe,sa,Ve,bo,Dr,aa,Qm,Ym,tg,Xm,Zm,eg,ca,nf,of,la,ua,u2=new ho,sf=class extends Error{},Ar=class extends rg.default{constructor(e){var t,n,i,o;if(super(),re.add(this),mo.set(this,void 0),go.set(this,void 0),Sr.set(this,0),fa.set(this,void 0),wo.set(this,void 0),oa.set(this,0),mt.set(this,void 0),yo.set(this,void 0),qe.set(this,void 0),sa.set(this,void 0),Ve.set(this,0),bo.set(this,void 0),Dr.set(this,void 0),aa.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:po,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof e.interval})`);Q(this,mo,e.carryoverConcurrencyCount,"f"),Q(this,go,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),Q(this,fa,e.intervalCap,"f"),Q(this,wo,e.interval,"f"),Q(this,qe,new e.queueClass,"f"),Q(this,sa,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,Q(this,aa,e.throwOnTimeout===!0,"f"),Q(this,Dr,e.autoStart===!1,"f")}get concurrency(){return _(this,bo,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);Q(this,bo,e,"f"),_(this,re,"m",la).call(this)}async add(e,t={}){return new Promise((n,i)=>{let o=async()=>{var s,c,u;Q(this,Ve,(c=_(this,Ve,"f"),c++,c),"f"),Q(this,Sr,(u=_(this,Sr,"f"),u++,u),"f");try{if(!((s=t.signal)===null||s===void 0)&&s.aborted){i(new sf("The task was aborted."));return}let l=await(this.timeout===void 0&&t.timeout===void 0?e({signal:t.signal}):tf(Promise.resolve(e({signal:t.signal})),t.timeout===void 0?this.timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?_(this,aa,"f"):t.throwOnTimeout)&&i(u2)}));n(l),this.emit("completed",l)}catch(f){i(f),this.emit("error",f)}_(this,re,"m",tg).call(this)};_(this,qe,"f").enqueue(o,t),_(this,re,"m",ca).call(this),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async n=>this.add(n,t)))}start(){return _(this,Dr,"f")?(Q(this,Dr,!1,"f"),_(this,re,"m",la).call(this),this):this}pause(){Q(this,Dr,!0,"f")}clear(){Q(this,qe,new(_(this,sa,"f")),"f")}async onEmpty(){_(this,qe,"f").size!==0&&await _(this,re,"m",ua).call(this,"empty")}async onSizeLessThan(e){_(this,qe,"f").size<e||await _(this,re,"m",ua).call(this,"next",()=>_(this,qe,"f").size<e)}async onIdle(){_(this,Ve,"f")===0&&_(this,qe,"f").size===0||await _(this,re,"m",ua).call(this,"idle")}get size(){return _(this,qe,"f").size}sizeBy(e){return _(this,qe,"f").filter(e).length}get pending(){return _(this,Ve,"f")}get isPaused(){return _(this,Dr,"f")}};mo=new WeakMap,go=new WeakMap,Sr=new WeakMap,fa=new WeakMap,wo=new WeakMap,oa=new WeakMap,mt=new WeakMap,yo=new WeakMap,qe=new WeakMap,sa=new WeakMap,Ve=new WeakMap,bo=new WeakMap,Dr=new WeakMap,aa=new WeakMap,re=new WeakSet,Qm=function(){return _(this,go,"f")||_(this,Sr,"f")<_(this,fa,"f")},Ym=function(){return _(this,Ve,"f")<_(this,bo,"f")},tg=function(){var e;Q(this,Ve,(e=_(this,Ve,"f"),e--,e),"f"),_(this,re,"m",ca).call(this),this.emit("next")},Xm=function(){this.emit("empty"),_(this,Ve,"f")===0&&this.emit("idle")},Zm=function(){_(this,re,"m",of).call(this),_(this,re,"m",nf).call(this),Q(this,yo,void 0,"f")},eg=function(){let e=Date.now();if(_(this,mt,"f")===void 0){let t=_(this,oa,"f")-e;if(t<0)Q(this,Sr,_(this,mo,"f")?_(this,Ve,"f"):0,"f");else return _(this,yo,"f")===void 0&&Q(this,yo,setTimeout(()=>{_(this,re,"m",Zm).call(this)},t),"f"),!0}return!1},ca=function(){if(_(this,qe,"f").size===0)return _(this,mt,"f")&&clearInterval(_(this,mt,"f")),Q(this,mt,void 0,"f"),_(this,re,"m",Xm).call(this),!1;if(!_(this,Dr,"f")){let e=!_(this,re,"a",eg);if(_(this,re,"a",Qm)&&_(this,re,"a",Ym)){let t=_(this,qe,"f").dequeue();return t?(this.emit("active"),t(),e&&_(this,re,"m",nf).call(this),!0):!1}}return!1},nf=function(){_(this,go,"f")||_(this,mt,"f")!==void 0||(Q(this,mt,setInterval(()=>{_(this,re,"m",of).call(this)},_(this,wo,"f")),"f"),Q(this,oa,Date.now()+_(this,wo,"f"),"f"))},of=function(){_(this,Sr,"f")===0&&_(this,Ve,"f")===0&&_(this,mt,"f")&&(clearInterval(_(this,mt,"f")),Q(this,mt,void 0,"f")),Q(this,Sr,_(this,mo,"f")?_(this,Ve,"f"):0,"f"),_(this,re,"m",la).call(this)},la=function(){for(;_(this,re,"m",ca).call(this););},ua=async function(e,t){return new Promise(n=>{let i=()=>{t&&!t()||(this.off(e,i),n())};this.on(e,i)})};a();var l2=w(Te(),1);q();me();var SO=Ar.default?Ar.default:Ar,AO=new V("config");a();a();a();a();q();me();var qO=new V("datastore_spec");a();me();var GO=new V("api");a();var p2=w(fn(),1);a();a();var y2=w(ln(),1);z();var m2=w(Te(),1);Cs();a();a();var og=w(tt(),1),pB=(0,og.default)("ipfs:repo:lock:memory");a();a();z();var v2=w(Te(),1),_2=w(tt(),1),D2=w(af(),1);a();Gn();dr();var b2=w(Te(),1);Ae();Se();a();var ag=w(tt(),1);var OB=(0,ag.default)("ipfs:repo:utils:walk-dag");a();a();var ha=class extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(let[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){let n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(let e of this.oldCache){let[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)===!1&&(yield e)}for(let e of this.cache){let[t,n]=e;this._deleteIfExpired(t,n)===!1&&(yield e)}}get(e){if(this.cache.has(e)){let t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){let t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){let i=typeof n=="number"&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:i}):this._set(e,{value:t,expiry:i})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){let t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");let t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache){let[t,n]=e;this._deleteIfExpired(t,n)===!1&&(yield[t,n.value])}for(let e of this.oldCache){let[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)===!1&&(yield[t,n.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){let n=e[t],[i,o]=n;this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){let n=e[t],[i,o]=n;this.cache.has(i)||this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}}*entriesAscending(){for(let[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(let t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(let[n,i]of this.entriesAscending())e.call(t,i,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}};a();var A2=w(pi(),1),T2=w(Te(),1);a();a();a();a();a();var Tr={},Eo=r=>{r.addEventListener("message",e=>{Eo.dispatchEvent("message",r,e)}),r.port!=null&&r.port.addEventListener("message",e=>{Eo.dispatchEvent("message",r,e)})};Eo.addEventListener=(r,e)=>{Tr[r]==null&&(Tr[r]=[]),Tr[r].push(e)};Eo.removeEventListener=(r,e)=>{Tr[r]!=null&&(Tr[r]=Tr[r].filter(t=>t===e))};Eo.dispatchEvent=function(r,e,t){Tr[r]!=null&&Tr[r].forEach(n=>n(e,t))};a();z();var xg=w(tt(),1);var N2=w(hg(),1);a();a();a();var L2=w(da(),1);var P2=w(da(),1),F2=w(pi(),1),U2=w(fn(),1);Ae();var Xk=(0,xg.default)("ipfs:repo:gc"),Zk=ri().code;var eL=new V("/local/filesroot");var RL=(0,vg.default)("ipfs:repo"),NL=Number.MAX_SAFE_INTEGER;a();a();a();q();me();var Wt="/",_g=new TextEncoder().encode(Wt),pa=_g[0],be=class{constructor(e,t){if(typeof e=="string")this._buf=M(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==pa)throw new Error("Invalid key")}toString(e="utf8"){return A(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new be(e.join(Wt))}static random(){return new be(rt().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new be(e):typeof e.uint8Array=="function"?new be(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=_g),this._buf[0]!==pa){let e=new Uint8Array(this._buf.byteLength+1);e.fill(pa,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===pa;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let o=t[i],s=n[i];if(o<s)return!0;if(o>s)return!1}return t.length<n.length}reverse(){return be.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Wt).slice(1)}type(){return j2(this.baseNamespace())}name(){return z2(this.baseNamespace())}instance(e){return new be(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Wt)||(e+=Wt),e+=this.type(),new be(e)}parent(){let e=this.list();return e.length===1?new be(Wt):new be(e.slice(0,-1).join(Wt))}child(e){return this.toString()===Wt?e:e.toString()===Wt?this:new be(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return be.withNamespaces([...this.namespaces(),...q2(e.map(t=>t.namespaces()))])}};function j2(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function z2(r){let e=r.split(":");return e[e.length-1]}function q2(r){return[].concat(...r)}a();a();a();q();me();var Ht="/",Dg=new TextEncoder().encode(Ht),ya=Dg[0],ne=class{constructor(e,t){if(typeof e=="string")this._buf=M(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==ya)throw new Error("Invalid key")}toString(e="utf8"){return A(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new ne(e.join(Ht))}static random(){return new ne(rt().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new ne(e):typeof e.uint8Array=="function"?new ne(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=Dg),this._buf[0]!==ya){let e=new Uint8Array(this._buf.byteLength+1);e.fill(ya,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===ya;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let o=t[i],s=n[i];if(o<s)return!0;if(o>s)return!1}return t.length<n.length}reverse(){return ne.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Ht).slice(1)}type(){return V2(this.baseNamespace())}name(){return K2(this.baseNamespace())}instance(e){return new ne(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Ht)||(e+=Ht),e+=this.type(),new ne(e)}parent(){let e=this.list();return e.length===1?new ne(Ht):new ne(e.slice(0,-1).join(Ht))}child(e){return this.toString()===Ht?e:e.toString()===Ht?this:new ne(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return ne.withNamespaces([...this.namespaces(),...W2(e.map(t=>t.namespaces()))])}};function V2(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function K2(r){let e=r.split(":");return e[e.length-1]}function W2(r){return[].concat(...r)}a();var Sg="SHARDING",Ag="_README";a();a();var Q2=w(xo(),1);var Z2=w(ln(),1),e8=w(fn(),1),t8=w(vo(),1);a();a();var r8=w(pi(),1);a();a();var IR=new ne(Sg),OR=new ne(Ag);a();var s8=w(fn(),1),a8=w(vo(),1),c8=w(da(),1);a();a();var Ot=w(tt(),1);Le();Ae();Hi();Ot.default.formatters.b=r=>r==null?"undefined":W.baseEncode(r);Ot.default.formatters.t=r=>r==null?"undefined":U.baseEncode(r);Ot.default.formatters.m=r=>r==null?"undefined":Wi.baseEncode(r);Ot.default.formatters.p=r=>r==null?"undefined":r.toString();Ot.default.formatters.c=r=>r==null?"undefined":r.toString();Ot.default.formatters.k=r=>r==null?"undefined":r.toString();function Og(r){return Object.assign((0,Ot.default)(r),{error:(0,Ot.default)(`${r}:error`),trace:(0,Ot.default)(`${r}:trace`)})}a();a();var u8=w(ln(),1),XR=Og("datastore:core:tiered");a();var g_=w(fn(),1),w_=w(pi(),1),b_=w(vo(),1),E_=w(kg(),1),x_=w(Ww(),1);a();var I_=w(ln(),1);a();a();a();q();me();var tr="/",Hw=new TextEncoder().encode(tr),qa=Hw[0],Ie=class{constructor(e,t){if(typeof e=="string")this._buf=M(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==qa)throw new Error("Invalid key")}toString(e="utf8"){return A(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Ie(e.join(tr))}static random(){return new Ie(rt().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Ie(e):typeof e.uint8Array=="function"?new Ie(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=Hw),this._buf[0]!==qa){let e=new Uint8Array(this._buf.byteLength+1);e.fill(qa,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===qa;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let o=t[i],s=n[i];if(o<s)return!0;if(o>s)return!1}return t.length<n.length}reverse(){return Ie.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(tr).slice(1)}type(){return v_(this.baseNamespace())}name(){return __(this.baseNamespace())}instance(e){return new Ie(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(tr)||(e+=tr),e+=this.type(),new Ie(e)}parent(){let e=this.list();return e.length===1?new Ie(tr):new Ie(e.slice(0,-1).join(tr))}child(e){return this.toString()===tr?e:e.toString()===tr?this:new Ie(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Ie.withNamespaces([...this.namespaces(),...D_(e.map(t=>t.namespaces()))])}};function v_(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function __(r){let e=r.split(":");return e[e.length-1]}function D_(r){return[].concat(...r)}z();dr();Se();Ae();Le();var O_=w(Te(),1);a();var S_=w(ln(),1),A_=w(fn(),1),T_=w(vo(),1),C_=w(xo(),1);a();a();z();a();var ob=w(eb(),1),sb=w(rb(),1);a();var L_=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;B.nanosecond=B.ns=1/1e6;B.\u00B5s=B.\u03BCs=B.us=B.microsecond=1/1e3;B.millisecond=B.ms=B[""]=1;B.second=B.sec=B.s=B.ms*1e3;B.minute=B.min=B.m=B.s*60;B.hour=B.hr=B.h=B.m*60;B.day=B.d=B.h*24;B.week=B.wk=B.w=B.d*7;B.month=B.b=B.d*(365.25/12);B.year=B.yr=B.y=B.d*365.25;function B(r="",e="ms"){var t=null;return r=(r+"").replace(/(\d)[,_](\d)/g,"$1$2"),r.replace(L_,function(n,i,o){o=nb(o),o&&(t=(t||0)+parseFloat(i,10)*o)}),t&&t/(nb(e)||1)}function nb(r){return B[r]||B[r.toLowerCase().replace(/s$/,"")]}var ib=B;a();var rr=class extends Error{constructor(e="request timed out"){super(e),this.name="TimeoutError",this.code=rr.code}};rr.code="ERR_TIMEOUT";function An(r,e){return(...t)=>{let n=t[e??t.length-1];if(!n||!n.timeout)return r(...t);let i=typeof n.timeout=="string"?ib(n.timeout):n.timeout,o=new ob.TimeoutController(i);n.signal=(0,sb.anySignal)([n.signal,o.signal]);let s=r(...t),c=new Promise((l,h)=>{o.signal.addEventListener("abort",()=>{h(new rr)})}),u=Date.now(),f=()=>{if(o.signal.aborted)throw new rr;if(Date.now()-u>i)throw o.abort(),new rr};return s[Symbol.asyncIterator]?async function*(){let l=s[Symbol.asyncIterator]();try{for(;;){let{value:h,done:y}=await Promise.race([l.next(),c]);if(y)break;f(),yield h}}catch(h){throw f(),h}finally{o.clear(),l.return&&l.return()}}():(async()=>{try{let l=await Promise.race([s,c]);return f(),l}catch(l){throw f(),l}finally{o.clear()}})()}}a();var Rt=w(tt(),1);Le();Ae();Hi();Rt.default.formatters.b=r=>r==null?"undefined":W.baseEncode(r);Rt.default.formatters.t=r=>r==null?"undefined":U.baseEncode(r);Rt.default.formatters.m=r=>r==null?"undefined":Wi.baseEncode(r);Rt.default.formatters.p=r=>r==null?"undefined":r.toString();Rt.default.formatters.c=r=>r==null?"undefined":r.toString();Rt.default.formatters.k=r=>r==null?"undefined":r.toString();function Ka(r){return Object.assign((0,Rt.default)(r),{error:(0,Rt.default)(`${r}:error`),trace:(0,Rt.default)(`${r}:trace`)})}dr();uu();a();Le();var zF=Ka("ipfs:components:dag:import");a();var iS=w(af(),1),oS=w(cb(),1);a();a();Le();Ae();Se();a();a();a();a();a();a();var ub="[a-fA-F\\d:]",Fr=r=>r&&r.includeBoundaries?`(?:(?<=\\s|^)(?=${ub})|(?<=${ub})(?=\\s|$))`:"",Et="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",se="[a-fA-F\\d]{1,4}",Wa=`
(?:
(?:${se}:){7}(?:${se}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${se}:){6}(?:${Et}|:${se}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${se}:){5}(?::${Et}|(?::${se}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${se}:){4}(?:(?::${se}){0,1}:${Et}|(?::${se}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${se}:){3}(?:(?::${se}){0,2}:${Et}|(?::${se}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${se}:){2}(?:(?::${se}){0,3}:${Et}|(?::${se}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${se}:){1}(?:(?::${se}){0,4}:${Et}|(?::${se}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${se}){0,5}:${Et}|(?::${se}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),N_=new RegExp(`(?:^${Et}$)|(?:^${Wa}$)`),P_=new RegExp(`^${Et}$`),F_=new RegExp(`^${Wa}$`),rl=r=>r&&r.exact?N_:new RegExp(`(?:${Fr(r)}${Et}${Fr(r)})|(?:${Fr(r)}${Wa}${Fr(r)})`,"g");rl.v4=r=>r&&r.exact?P_:new RegExp(`${Fr(r)}${Et}${Fr(r)}`,"g");rl.v6=r=>r&&r.exact?F_:new RegExp(`${Fr(r)}${Wa}${Fr(r)}`,"g");var Ha=rl;a();a();function nl(r){let e=(...t)=>r(...t);return Object.defineProperty(e,"name",{value:`functionTimeout(${r.name||"<anonymous>"})`,configurable:!0}),e}function fb(){return!1}a();a();a();var{toString:U_}=Object.prototype;function il(r){return U_.call(r)==="[object RegExp]"}var lb={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function ol(r,e={}){if(!il(r))throw new TypeError("Expected a RegExp instance");let t=Object.keys(lb).map(i=>(typeof e[i]=="boolean"?e[i]:r[i])?lb[i]:"").join(""),n=new RegExp(e.source||r.source,t);return n.lastIndex=typeof e.lastIndex=="number"?e.lastIndex:r.lastIndex,n}function Ga(r,e,{timeout:t}={}){try{return nl(()=>ol(r).test(e),{timeout:t})()}catch(n){if(fb(n))return!1;throw n}}var $_=15,hb=45,sl={timeout:400};function Ur(r){return Ga(Ha({exact:!0}),r.slice(0,hb),sl)}function Ja(r){return Ga(Ha.v6({exact:!0}),r.slice(0,hb),sl)}function Qa(r){return Ga(Ha.v4({exact:!0}),r.slice(0,$_),sl)}q();var db=Qa,M_=Ja,al=function(r){let e=0;if(r=r.toString().trim(),db(r)){let t=new Uint8Array(e+4);return r.split(/\./g).forEach(n=>{t[e++]=parseInt(n,10)&255}),t}if(M_(r)){let t=r.split(":",8),n;for(n=0;n<t.length;n++){let o=db(t[n]),s;o&&(s=al(t[n]),t[n]=A(s.slice(0,2),"base16")),s!=null&&++n<8&&t.splice(n,0,A(s.slice(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);let o=[n,1];for(n=9-t.length;n>0;n--)o.push("0");t.splice.apply(t,o)}let i=new Uint8Array(e+16);for(n=0;n<t.length;n++){let o=parseInt(t[n],16);i[e++]=o>>8&255,i[e++]=o&255}return i}throw new Error("invalid ip address")},pb=function(r,e=0,t){e=~~e,t=t??r.length-e;let n=new DataView(r.buffer);if(t===4){let i=[];for(let o=0;o<t;o++)i.push(r[e+o]);return i.join(".")}if(t===16){let i=[];for(let o=0;o<t;o+=2)i.push(n.getUint16(e+o).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};a();var Vo={},cl={},z_=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];z_.forEach(r=>{let e=q_(...r);cl[e.code]=e,Vo[e.name]=e});function q_(r,e,t,n,i){return{code:r,size:e,name:t,resolvable:Boolean(n),path:Boolean(i)}}function ae(r){if(typeof r=="number"){if(cl[r]!=null)return cl[r];throw new Error(`no protocol with code: ${r}`)}else if(typeof r=="string"){if(Vo[r]!=null)return Vo[r];throw new Error(`no protocol with name: ${r}`)}throw new Error(`invalid protocol id type: ${typeof r}`)}z();Ae();Le();Gi();Se();var Nt=w(ke(),1);q();me();wr();function gb(r,e){switch(ae(r).code){case 4:case 41:return K_(e);case 6:case 273:case 33:case 132:return bb(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return H_(e);case 421:return Y_(e);case 444:return mb(e);case 445:return mb(e);case 466:return Q_(e);default:return A(e,"base16")}}function wb(r,e){switch(ae(r).code){case 4:return yb(e);case 41:return yb(e);case 6:case 273:case 33:case 132:return fl(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return W_(e);case 421:return G_(e);case 444:return X_(e);case 445:return Z_(e);case 466:return J_(e);default:return M(e,"base16")}}var ul=Object.values(Zr).map(r=>r.decoder),V_=function(){let r=ul[0].or(ul[1]);return ul.slice(2).forEach(e=>r=r.or(e)),r}();function yb(r){if(!Ur(r))throw new Error("invalid ip address");return al(r)}function K_(r){let e=pb(r,0,r.length);if(e==null)throw new Error("ipBuff is required");if(!Ur(e))throw new Error("invalid ip address");return e}function fl(r){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function bb(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function W_(r){let e=M(r),t=Uint8Array.from(Nt.default.encode(e.length));return J([t,e],t.length+e.length)}function H_(r){let e=Nt.default.decode(r);if(r=r.slice(Nt.default.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return A(r)}function G_(r){let e;r[0]==="Q"||r[0]==="1"?e=ue(W.decode(`z${r}`)).bytes:e=v.parse(r).multihash.bytes;let t=Uint8Array.from(Nt.default.encode(e.length));return J([t,e],t.length+e.length)}function J_(r){let e=V_.decode(r),t=Uint8Array.from(Nt.default.encode(e.length));return J([t,e],t.length+e.length)}function Q_(r){let e=Nt.default.decode(r),t=r.slice(Nt.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return"u"+A(t,"base64url")}function Y_(r){let e=Nt.default.decode(r),t=r.slice(Nt.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return A(t,"base58btc")}function X_(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let t=U.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=fl(n);return J([t,i],t.length+i.length)}function Z_(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let t=U.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=fl(n);return J([t,i],t.length+i.length)}function mb(r){let e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=A(e,"base32"),i=bb(t);return`${n}:${i}`}var Ti=w(ke(),1);wr();q();function eD(r){let e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){let i=t[n],o=ae(i);if(o.size===0){e.push([i]);continue}if(n++,n>=t.length)throw xb("invalid address: "+r);if(o.path===!0){e.push([i,yl(t.slice(n).join("/"))]);break}e.push([i,t[n]])}return e}function tD(r){let e=[];return r.map(t=>{let n=Za(t);return e.push(n.name),t.length>1&&t[1]!=null&&e.push(t[1]),null}),yl(e.join("/"))}function rD(r){return r.map(e=>{Array.isArray(e)||(e=[e]);let t=Za(e);return e.length>1?[t.code,wb(t.code,e[1])]:[t.code]})}function ll(r){return r.map(e=>{let t=Za(e);return e[1]!=null?[t.code,gb(t.code,e[1])]:[t.code]})}function hl(r){return Xa(J(r.map(e=>{let t=Za(e),n=Uint8Array.from(Ti.default.encode(t.code));return e.length>1&&e[1]!=null&&(n=J([n,e[1]])),n})))}function dl(r,e){return r.size>0?r.size/8:r.size===0?0:Ti.default.decode(e)+Ti.default.decode.bytes}function Ya(r){let e=[],t=0;for(;t<r.length;){let n=Ti.default.decode(r,t),i=Ti.default.decode.bytes,o=ae(n),s=dl(o,r.slice(t+i));if(s===0){e.push([n]),t+=i;continue}let c=r.slice(t+i,t+i+s);if(t+=s+i,t>r.length)throw xb("Invalid address Uint8Array: "+A(r,"base16"));e.push([n,c])}return e}function pl(r){let e=Ya(r),t=ll(e);return tD(t)}function nD(r){r=yl(r);let e=eD(r),t=rD(e);return hl(t)}function Eb(r){return nD(r)}function Xa(r){let e=iD(r);if(e!=null)throw e;return Uint8Array.from(r)}function iD(r){try{Ya(r)}catch(e){return e}}function yl(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function xb(r){return new Error("Error parsing address: "+r)}function Za(r){return ae(r[0])}var ml=w(ke(),1);z();Le();var Db=w(Te(),1);q();Xs();var vb,sD=Symbol.for("nodejs.util.inspect.custom"),_b=[ae("dns").code,ae("dns4").code,ae("dns6").code,ae("dnsaddr").code],aD=[ae("p2p").code,ae("ipfs").code],cD=new Map,Sb=Symbol.for("@multiformats/js-multiaddr/multiaddr");function uD(r){return Boolean(r?.[Sb])}var $r=class{constructor(e){if(this[vb]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=Xa(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=Eb(e)}else if(uD(e))this.bytes=Xa(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return this._string==null&&(this._string=pl(this.bytes)),this._string}toJSON(){return this.toString()}toOptions(){let e=this.protoCodes(),t=this.toString().split("/").slice(1),n,i;if(t.length>2)_b.includes(e[0])&&aD.includes(e[1])?(n=ae("tcp").name,i=443):(n=ae(t[2]).name,i=parseInt(t[3]));else if(_b.includes(e[0]))n=ae("tcp").name,i=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e[0]===41||e[0]===55?6:4,host:t[1],transport:n,port:i}}protos(){return this.protoCodes().map(e=>Object.assign({},ae(e)))}protoCodes(){let e=[],t=this.bytes,n=0;for(;n<t.length;){let i=ml.default.decode(t,n),o=ml.default.decode.bytes,s=ae(i);n+=dl(s,t.slice(n+o))+o,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return this._tuples==null&&(this._tuples=Ya(this.bytes)),this._tuples}stringTuples(){return this._stringTuples==null&&(this._stringTuples=ll(this.tuples())),this._stringTuples}encapsulate(e){return e=new $r(e),new $r(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),n=this.toString(),i=n.lastIndexOf(t);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new $r(n.slice(0,i))}decapsulateCode(e){let t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new $r(hl(t.slice(0,n)));return this}getPeerId(){try{let t=this.stringTuples().filter(n=>n[0]===Vo.ipfs.code).pop();if(t?.[1]!=null){let n=t[1];return n[0]==="Q"||n[0]==="1"?A(W.decode(`z${n}`),"base58btc"):A(v.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>ae(t[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return ao(this.bytes,e.bytes)}async resolve(e){let t=this.protos().find(o=>o.resolvable);if(t==null)return[this];let n=cD.get(t.name);if(n==null)throw(0,Db.default)(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(o=>new $r(o))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let t=(e??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(vb=Sb,sD)](){return this.inspect()}inspect(){return"<Multiaddr "+A(this.bytes,"base16")+" - "+pl(this.bytes)+">"}};a();a();a();a();a();q();var Ab=Qa,fD=Ja,gl=function(r){let e=0;if(r=r.toString().trim(),Ab(r)){let t=new Uint8Array(e+4);return r.split(/\./g).forEach(n=>{t[e++]=parseInt(n,10)&255}),t}if(fD(r)){let t=r.split(":",8),n;for(n=0;n<t.length;n++){let o=Ab(t[n]),s;o&&(s=gl(t[n]),t[n]=A(s.slice(0,2),"base16")),s!=null&&++n<8&&t.splice(n,0,A(s.slice(2,4),"base16"))}if(t[0]==="")for(;t.length<8;)t.unshift("0");else if(t[t.length-1]==="")for(;t.length<8;)t.push("0");else if(t.length<8){for(n=0;n<t.length&&t[n]!=="";n++);let o=[n,1];for(n=9-t.length;n>0;n--)o.push("0");t.splice.apply(t,o)}let i=new Uint8Array(e+16);for(n=0;n<t.length;n++){let o=parseInt(t[n],16);i[e++]=o>>8&255,i[e++]=o&255}return i}throw new Error("invalid ip address")},Tb=function(r,e=0,t){e=~~e,t=t??r.length-e;let n=new DataView(r.buffer);if(t===4){let i=[];for(let o=0;o<t;o++)i.push(r[e+o]);return i.join(".")}if(t===16){let i=[];for(let o=0;o<t;o+=2)i.push(n.getUint16(e+o).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};a();var Ko={},wl={},hD=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[460,0,"quic"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];hD.forEach(r=>{let e=dD(...r);wl[e.code]=e,Ko[e.name]=e});function dD(r,e,t,n,i){return{code:r,size:e,name:t,resolvable:Boolean(n),path:Boolean(i)}}function ce(r){if(typeof r=="number"){if(wl[r]!=null)return wl[r];throw new Error(`no protocol with code: ${r}`)}else if(typeof r=="string"){if(Ko[r]!=null)return Ko[r];throw new Error(`no protocol with name: ${r}`)}throw new Error(`invalid protocol id type: ${typeof r}`)}z();Ae();Le();Gi();Se();var Pt=w(ke(),1);q();me();wr();function Ob(r,e){switch(ce(r).code){case 4:case 41:return yD(e);case 6:case 273:case 33:case 132:return kb(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return gD(e);case 421:return xD(e);case 444:return Ib(e);case 445:return Ib(e);case 466:return ED(e);default:return A(e,"base16")}}function Bb(r,e){switch(ce(r).code){case 4:return Cb(e);case 41:return Cb(e);case 6:case 273:case 33:case 132:return El(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return mD(e);case 421:return wD(e);case 444:return vD(e);case 445:return _D(e);case 466:return bD(e);default:return M(e,"base16")}}var bl=Object.values(Zr).map(r=>r.decoder),pD=function(){let r=bl[0].or(bl[1]);return bl.slice(2).forEach(e=>r=r.or(e)),r}();function Cb(r){if(!Ur(r))throw new Error("invalid ip address");return gl(r)}function yD(r){let e=Tb(r,0,r.length);if(e==null)throw new Error("ipBuff is required");if(!Ur(e))throw new Error("invalid ip address");return e}function El(r){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,r),new Uint8Array(e)}function kb(r){return new DataView(r.buffer).getUint16(r.byteOffset)}function mD(r){let e=M(r),t=Uint8Array.from(Pt.default.encode(e.length));return J([t,e],t.length+e.length)}function gD(r){let e=Pt.default.decode(r);if(r=r.slice(Pt.default.decode.bytes),r.length!==e)throw new Error("inconsistent lengths");return A(r)}function wD(r){let e;r[0]==="Q"||r[0]==="1"?e=ue(W.decode(`z${r}`)).bytes:e=v.parse(r).multihash.bytes;let t=Uint8Array.from(Pt.default.encode(e.length));return J([t,e],t.length+e.length)}function bD(r){let e=pD.decode(r),t=Uint8Array.from(Pt.default.encode(e.length));return J([t,e],t.length+e.length)}function ED(r){let e=Pt.default.decode(r),t=r.slice(Pt.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return"u"+A(t,"base64url")}function xD(r){let e=Pt.default.decode(r),t=r.slice(Pt.default.decode.bytes);if(t.length!==e)throw new Error("inconsistent lengths");return A(t,"base58btc")}function vD(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let t=U.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=El(n);return J([t,i],t.length+i.length)}function _D(r){let e=r.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let t=U.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=El(n);return J([t,i],t.length+i.length)}function Ib(r){let e=r.slice(0,r.length-2),t=r.slice(r.length-2),n=A(e,"base32"),i=kb(t);return`${n}:${i}`}var Ci=w(ke(),1);wr();q();function DD(r){let e=[],t=r.split("/").slice(1);if(t.length===1&&t[0]==="")return[];for(let n=0;n<t.length;n++){let i=t[n],o=ce(i);if(o.size===0){e.push([i]);continue}if(n++,n>=t.length)throw Rb("invalid address: "+r);if(o.path===!0){e.push([i,Sl(t.slice(n).join("/"))]);break}e.push([i,t[n]])}return e}function SD(r){let e=[];return r.map(t=>{let n=rc(t);return e.push(n.name),t.length>1&&t[1]!=null&&e.push(t[1]),null}),Sl(e.join("/"))}function AD(r){return r.map(e=>{Array.isArray(e)||(e=[e]);let t=rc(e);return e.length>1?[t.code,Bb(t.code,e[1])]:[t.code]})}function xl(r){return r.map(e=>{let t=rc(e);return e[1]!=null?[t.code,Ob(t.code,e[1])]:[t.code]})}function vl(r){return tc(J(r.map(e=>{let t=rc(e),n=Uint8Array.from(Ci.default.encode(t.code));return e.length>1&&e[1]!=null&&(n=J([n,e[1]])),n})))}function _l(r,e){return r.size>0?r.size/8:r.size===0?0:Ci.default.decode(e)+Ci.default.decode.bytes}function ec(r){let e=[],t=0;for(;t<r.length;){let n=Ci.default.decode(r,t),i=Ci.default.decode.bytes,o=ce(n),s=_l(o,r.slice(t+i));if(s===0){e.push([n]),t+=i;continue}let c=r.slice(t+i,t+i+s);if(t+=s+i,t>r.length)throw Rb("Invalid address Uint8Array: "+A(r,"base16"));e.push([n,c])}return e}function Dl(r){let e=ec(r),t=xl(e);return SD(t)}function TD(r){r=Sl(r);let e=DD(r),t=AD(e);return vl(t)}function Lb(r){return TD(r)}function tc(r){let e=CD(r);if(e!=null)throw e;return Uint8Array.from(r)}function CD(r){try{ec(r)}catch(e){return e}}function Sl(r){return"/"+r.trim().split("/").filter(e=>e).join("/")}function Rb(r){return new Error("Error parsing address: "+r)}function rc(r){return ce(r[0])}var Al=w(ke(),1);z();Le();var Fb=w(Te(),1);q();Xs();var Nb,OD=Symbol.for("nodejs.util.inspect.custom"),Pb=[ce("dns").code,ce("dns4").code,ce("dns6").code,ce("dnsaddr").code],BD=[ce("p2p").code,ce("ipfs").code],kD=new Map,Ub=Symbol.for("@multiformats/js-multiaddr/multiaddr");function LD(r){return Boolean(r?.[Ub])}var nr=class{constructor(e){if(this[Nb]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=tc(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=Lb(e)}else if(LD(e))this.bytes=tc(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return this._string==null&&(this._string=Dl(this.bytes)),this._string}toJSON(){return this.toString()}toOptions(){let e=this.protoCodes(),t=this.toString().split("/").slice(1),n,i;if(t.length>2)Pb.includes(e[0])&&BD.includes(e[1])?(n=ce("tcp").name,i=443):(n=ce(t[2]).name,i=parseInt(t[3]));else if(Pb.includes(e[0]))n=ce("tcp").name,i=443;else throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e[0]===41||e[0]===55?6:4,host:t[1],transport:n,port:i}}protos(){return this.protoCodes().map(e=>Object.assign({},ce(e)))}protoCodes(){let e=[],t=this.bytes,n=0;for(;n<t.length;){let i=Al.default.decode(t,n),o=Al.default.decode.bytes,s=ce(i);n+=_l(s,t.slice(n+o))+o,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return this._tuples==null&&(this._tuples=ec(this.bytes)),this._tuples}stringTuples(){return this._stringTuples==null&&(this._stringTuples=xl(this.tuples())),this._stringTuples}encapsulate(e){return e=new nr(e),new nr(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),n=this.toString(),i=n.lastIndexOf(t);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new nr(n.slice(0,i))}decapsulateCode(e){let t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new nr(vl(t.slice(0,n)));return this}getPeerId(){try{let t=this.stringTuples().filter(n=>n[0]===Ko.ipfs.code).pop();if(t?.[1]!=null){let n=t[1];return n[0]==="Q"||n[0]==="1"?A(W.decode(`z${n}`),"base58btc"):A(v.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(t=>ce(t[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return ao(this.bytes,e.bytes)}async resolve(e){let t=this.protos().find(o=>o.resolvable);if(t==null)return[this];let n=kD.get(t.name);if(n==null)throw(0,Fb.default)(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(o=>new nr(o))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let t=(e??this).protos();return!(t.length!==2||t[0].code!==4&&t[0].code!==41||t[1].code!==6&&t[1].code!==273)}[(Nb=Ub,OD)](){return this.inspect()}inspect(){return"<Multiaddr "+A(this.bytes,"base16")+" - "+Dl(this.bytes)+">"}};function Tl(r){return new nr(r)}var RD=T("dns4"),ND=T("dns6"),PD=T("dnsaddr"),Ii=xe(T("dns"),PD,RD,ND),nc=xe(T("ip4"),T("ip6")),Qo=xe(O(nc,T("tcp")),O(Ii,T("tcp"))),Mb=O(nc,T("udp")),FD=O(Mb,T("utp")),UD=O(Mb,T("quic")),Ho=xe(O(Qo,T("ws")),O(Ii,T("ws"))),Go=xe(O(Qo,T("wss")),O(Ii,T("wss"))),Cl=xe(O(Qo,T("http")),O(nc,T("http")),O(Ii,T("http"))),Il=xe(O(Qo,T("https")),O(nc,T("https")),O(Ii,T("https"))),jb=xe(O(Ho,T("p2p-webrtc-star"),T("p2p")),O(Go,T("p2p-webrtc-star"),T("p2p")),O(Ho,T("p2p-webrtc-star")),O(Go,T("p2p-webrtc-star"))),gU=xe(O(Ho,T("p2p-websocket-star"),T("p2p")),O(Go,T("p2p-websocket-star"),T("p2p")),O(Ho,T("p2p-websocket-star")),O(Go,T("p2p-websocket-star"))),zb=xe(O(Cl,T("p2p-webrtc-direct"),T("p2p")),O(Il,T("p2p-webrtc-direct"),T("p2p")),O(Cl,T("p2p-webrtc-direct")),O(Il,T("p2p-webrtc-direct"))),Jo=xe(Ho,Go,Cl,Il,jb,zb,Qo,FD,UD,Ii),wU=xe(O(Jo,T("p2p-stardust"),T("p2p")),O(Jo,T("p2p-stardust"))),Mr=xe(O(Jo,T("p2p")),jb,zb,T("p2p")),$b=xe(O(Mr,T("p2p-circuit"),Mr),O(Mr,T("p2p-circuit")),O(T("p2p-circuit"),Mr),O(Jo,T("p2p-circuit")),O(T("p2p-circuit"),Jo),T("p2p-circuit")),qb=()=>xe(O($b,qb),$b),Wo=qb(),$D=xe(O(Wo,Mr,Wo),O(Mr,Wo),O(Wo,Mr),Wo,Mr);function Vb(r){function e(t){let n;try{n=Tl(t)}catch{return!1}let i=r(n.protoNames());return i===null?!1:i===!0||i===!1?i:i.length===0}return e}function O(...r){function e(t){if(t.length<r.length)return null;let n=t;return r.some(i=>(n=typeof i=="function"?i().partialMatch(t):i.partialMatch(t),Array.isArray(n)&&(t=n),n===null)),n}return{toString:function(){return"{ "+r.join(" ")+" }"},input:r,matches:Vb(e),partialMatch:e}}function xe(...r){function e(n){let i=null;return r.some(o=>{let s=typeof o=="function"?o().partialMatch(n):o.partialMatch(n);return s!=null?(i=s,!0):!1}),i}return{toString:function(){return"{ "+r.join(" ")+" }"},input:r,matches:Vb(e),partialMatch:e}}function T(r){let e=r;function t(i){let o;try{o=Tl(i)}catch{return!1}let s=o.protoNames();return s.length===1&&s[0]===e}function n(i){return i.length===0?null:i[0]===e?i.slice(1):null}return{toString:function(){return e},matches:t,partialMatch:n}}z();var QD=w(Yb(),1);q();z();a();q();me();var ir="/",Xb=new TextEncoder().encode(ir),ic=Xb[0],ve=class{constructor(e,t){if(typeof e=="string")this._buf=M(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(t==null&&(t=!0),t&&this.clean(),this._buf.byteLength===0||this._buf[0]!==ic)throw new Error("Invalid key")}toString(e="utf8"){return A(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new ve(e.join(ir))}static random(){return new ve(rt().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new ve(e):typeof e.uint8Array=="function"?new ve(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=Xb),this._buf[0]!==ic){let e=new Uint8Array(this._buf.byteLength+1);e.fill(ic,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===ic;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),n=e.list();for(let i=0;i<t.length;i++){if(n.length<i+1)return!1;let o=t[i],s=n[i];if(o<s)return!0;if(o>s)return!1}return t.length<n.length}reverse(){return ve.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(ir).slice(1)}type(){return XD(this.baseNamespace())}name(){return ZD(this.baseNamespace())}instance(e){return new ve(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(ir)||(e+=ir),e+=this.type(),new ve(e)}parent(){let e=this.list();return e.length===1?new ve(ir):new ve(e.slice(0,-1).join(ir))}child(e){return this.toString()===ir?e:e.toString()===ir?this:new ve(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return ve.withNamespaces([...this.namespaces(),...eS(e.map(t=>t.namespaces()))])}};function XD(r){let e=r.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function ZD(r){let e=r.split(":");return e[e.length-1]}function eS(r){return[].concat(...r)}var nS=w(Te(),1);a();z();var tS=w(Te(),1);var WU=new ve("/local/filesroot");var HU=An(async(r,e)=>await r);var sS=w(Te(),1);a();var cS=w(e0(),1),uS=w(ln(),1),fS=w(pi(),1);var s$=Ka("ipfs:components:dag:import");a();z();a();dr();Jn();Cs();Gi();a();a();a();Hi();z();a();a();a();a();async function*t0(r){let e=0;for(;e<r.length;)yield r[e++]}var r0=w(xo(),1);Gn();async function mS(r,e){let t=await t0([e]),[{root:n}]=await(0,r0.default)(r.import(t));return n.cid}export{Ss as Transaction,Wd as encode,mS as importBuffer};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
//# sourceMappingURL=transaction.js.map
